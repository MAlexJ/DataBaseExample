<!DOCTYPE html>
<!-- saved from url=(0068)https://docs.groovy-lang.org/docs/next/html/documentation/#_comments -->
<html lang="en" class="gr__docs_groovy-lang_org"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Groovy Language Documentation</title>
<link rel="stylesheet" href="./Groovy Language Documentation_files/A.style.css.pagespeed.cf.mjzt1c47ql.css">
<link rel="stylesheet" href="./Groovy Language Documentation_files/font-awesome.min.css">
<style type="text/css">[class^="highly-eyecon-"], [class*=" highly-eyecon-"] { font-family: "highlyfont"; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; display: inline-block !important; background: none !important; text-indent: inherit !important; width: auto; height: auto; /*width: auto !important; height: auto !important;*/ /* Better Font Rendering =========== */ -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .highly-eyecon-block:before { content: "\e910"; } .highly-eyecon-cc-private:before { content: "\e90a"; } .highly-eyecon-cc-public:before { content: "\e90b"; } .highly-eyecon-cc-unlisted:before { content: "\e90c"; } .highly-eyecon-plane:before { content: "\e902"; } .highly-eyecon-heart:before { content: "\e637"; } .highly-eyecon-logo-espn:before { content: "\e631"; } .highly-eyecon-logo-medium:before { content: "\e632"; } .highly-eyecon-logo-tc:before { content: "\e633"; } .highly-eyecon-logo-times:before { content: "\e634"; } .highly-eyecon-marker-tall-tip:before { content: "\e62f"; } .highly-eyecon-logo-letters:before { content: "\e630"; } .highly-eyecon-popular:before { content: "\e62d"; } .highly-eyecon-chat:before { content: "\e62c"; } .highly-eyecon-messenger:before { content: "\e62a"; } .highly-eyecon-highly-logo-share:before { content: "\e911"; } .highly-eyecon-slack:before { content: "\e62b"; } .highly-eyecon-undo:before { content: "\e629"; } .highly-eyecon-arrow:before { content: "\61"; } .highly-eyecon-article:before { content: "\e605"; } .highly-eyecon-check:before { content: "\e612"; } .highly-eyecon-check-skinny:before { content: "\e912"; } .highly-eyecon-chevron:before { content: "\e613"; } .highly-eyecon-chevron-medium:before { content: "\e626"; } .highly-eyecon-chevron-thick:before { content: "\e623"; } .highly-eyecon-chrome:before { content: "\e601"; } .highly-eyecon-cog:before { content: "\e60a"; } .highly-eyecon-copy:before { content: "\63"; } .highly-eyecon-ellipses:before { content: "\e607"; } .highly-eyecon-envelope:before { content: "\e60d"; } .highly-eyecon-evernote:before { content: "\e618"; } .highly-eyecon-eye:before { content: "\e617"; } .highly-eyecon-eye-full:before { content: "\e903"; } .highly-eyecon-facebook:before { content: "\e620"; } .highly-eyecon-firefox:before { content: "\e602"; } .highly-eyecon-flag:before { content: "\e619"; } .highly-eyecon-highlight-image:before { content: "\e624"; } .highly-eyecon-highlighter-tiny:before { content: "\e636"; } .highly-eyecon-highlighter:before { content: "\e608"; } .highly-eyecon-ie:before { content: "\e603"; } .highly-eyecon-inbox:before { content: "\e61b"; } .highly-eyecon-inbox-blank:before { content: "\e61a"; } .highly-eyecon-info:before { content: "\e61c"; } .highly-eyecon-link:before { content: "\e600"; } .highly-eyecon-lock:before { content: "\e616"; } .highly-eyecon-logo:before { content: "\68"; } .highly-eyecon-logo-text:before { content: "\e606"; } .highly-eyecon-minus:before { content: "\e611"; } .highly-eyecon-pinterest:before { content: "\e621"; } .highly-eyecon-plus:before { content: "\e610"; } .highly-eyecon-plus-lg:before { content: "\e614"; } .highly-eyecon-pocket:before { content: "\e609"; } .highly-eyecon-quote:before { content: "\e61f"; } .highly-eyecon-radio:before { content: "\e90d"; } .highly-eyecon-read:before { content: "\e60c"; } .highly-eyecon-safari:before { content: "\e604"; } .highly-eyecon-search:before { content: "\e60b"; } .highly-eyecon-search-thick:before { content: "\e62e"; } .highly-eyecon-share:before { content: "\73"; } .highly-eyecon-share-skinny:before { content: "\e904"; } .highly-eyecon-share-circles:before { content: "\e90e"; } .highly-eyecon-share-round:before { content: "\e908"; } .highly-eyecon-smile:before { content: "\e60e"; } .highly-eyecon-smile-clear:before { content: "\e628"; } .highly-eyecon-smile-open:before { content: "\e60f"; } .highly-eyecon-target:before { content: "\e625"; } .highly-eyecon-trash:before { content: "\e627"; } .highly-eyecon-twitter:before { content: "\e622"; } .highly-eyecon-unlock:before { content: "\e61d"; } .highly-eyecon-wrench:before { content: "\e615"; } .highly-eyecon-x:before { content: "\e61e"; } /* makes the font 33% larger relative to the highly-eyecon container */ .highly-eyecon-lg { font-size: 1.3333333333333333em; line-height: 0.75em; vertical-align: -15%; } .highly-eyecon-2x { font-size: 2em; } .highly-eyecon-3x { font-size: 3em; } .highly-eyecon-4x { font-size: 4em; } .highly-eyecon-5x { font-size: 5em; } .highly-eyecon-30 { font-size: 30px; } .highly-eyecon-rotate-45 { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); -webkit-transform: rotate(45deg); -moz-transform: rotate(45deg); -ms-transform: rotate(45deg); -o-transform: rotate(45deg); transform: rotate(45deg); } .highly-eyecon-rotate-90 { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); -webkit-transform: rotate(90deg); -moz-transform: rotate(90deg); -ms-transform: rotate(90deg); -o-transform: rotate(90deg); transform: rotate(90deg); } .highly-eyecon-rotate-180 { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2); -webkit-transform: rotate(180deg); -moz-transform: rotate(180deg); -ms-transform: rotate(180deg); -o-transform: rotate(180deg); transform: rotate(180deg); } .highly-eyecon-rotate-270 { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); -webkit-transform: rotate(270deg); -moz-transform: rotate(270deg); -ms-transform: rotate(270deg); -o-transform: rotate(270deg); transform: rotate(270deg); } .highly-eyecon-flip-horizontal { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1); -webkit-transform: scale(-1, 1); -moz-transform: scale(-1, 1); -ms-transform: scale(-1, 1); -o-transform: scale(-1, 1); transform: scale(-1, 1); } .highly-eyecon-flip-vertical { filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1); -webkit-transform: scale(1, -1); -moz-transform: scale(1, -1); -ms-transform: scale(1, -1); -o-transform: scale(1, -1); transform: scale(1, -1); } .highly-eyecon-fw { width: 1.2857142857142858em; text-align: center; } @charset "UTF-8"; div[class^='highly-'], div[class*=' highly-'] { color: gray; -webkit-backface-visibility: visible; -webkit-font-smoothing: auto; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: Helvetica, sans-serif !important; text-shadow: none; letter-spacing: normal; } @keyframes rotate { 0% { transform: rotateZ(-360deg); -webkit-transform: rotateZ(-360deg); -moz-transform: rotateZ(-360deg); -o-transform: rotateZ(-360deg); } 100% { transform: rotateZ(0deg); -webkit-transform: rotateZ(0deg); -moz-transform: rotateZ(0deg); -o-transform: rotateZ(0deg); } } @-webkit-keyframes rotate { 0% { transform: rotateZ(-360deg); -webkit-transform: rotateZ(-360deg); -moz-transform: rotateZ(-360deg); -o-transform: rotateZ(-360deg); } 100% { transform: rotateZ(0deg); -webkit-transform: rotateZ(0deg); -moz-transform: rotateZ(0deg); -o-transform: rotateZ(0deg); } } @-moz-keyframes rotate { 0% { transform: rotateZ(-360deg); -webkit-transform: rotateZ(-360deg); -moz-transform: rotateZ(-360deg); -o-transform: rotateZ(-360deg); } 100% { transform: rotateZ(0deg); -webkit-transform: rotateZ(0deg); -moz-transform: rotateZ(0deg); -o-transform: rotateZ(0deg); } } @-o-keyframes rotate { 0% { transform: rotateZ(-360deg); -webkit-transform: rotateZ(-360deg); -moz-transform: rotateZ(-360deg); -o-transform: rotateZ(-360deg); } 100% { transform: rotateZ(0deg); -webkit-transform: rotateZ(0deg); -moz-transform: rotateZ(0deg); -o-transform: rotateZ(0deg); } } .highly-animation-lift-replace { -webkit-animation: liftAndReplace 3300ms linear both; animation: liftAndReplace 3300ms linear both; } @keyframes liftAndReplace { 0% { transform: translateY(0px); -webkit-transform: translateY(0px); -moz-transform: translateY(0px); -o-transform: translateY(0px); opacity: 0; } 10% { transform: translateY(-0.024px); -webkit-transform: translateY(-0.024px); -moz-transform: translateY(-0.024px); -o-transform: translateY(-0.024px); opacity: 0.0008; } 20% { transform: translateY(-0.384px); -webkit-transform: translateY(-0.384px); -moz-transform: translateY(-0.384px); -o-transform: translateY(-0.384px); opacity: 0.0128; } 30% { transform: translateY(-1.944px); -webkit-transform: translateY(-1.944px); -moz-transform: translateY(-1.944px); -o-transform: translateY(-1.944px); opacity: 0.0648; } 40% { transform: translateY(-6.144px); -webkit-transform: translateY(-6.144px); -moz-transform: translateY(-6.144px); -o-transform: translateY(-6.144px); opacity: 0.2048; } 50% { transform: translateY(-15px); -webkit-transform: translateY(-15px); -moz-transform: translateY(-15px); -o-transform: translateY(-15px); opacity: 0.5; } 60% { transform: translateY(-23.856px); -webkit-transform: translateY(-23.856px); -moz-transform: translateY(-23.856px); -o-transform: translateY(-23.856px); opacity: 0.7952; } 70% { transform: translateY(-28.056px); -webkit-transform: translateY(-28.056px); -moz-transform: translateY(-28.056px); -o-transform: translateY(-28.056px); opacity: 0.9352; } 80% { transform: translateY(-29.616px); -webkit-transform: translateY(-29.616px); -moz-transform: translateY(-29.616px); -o-transform: translateY(-29.616px); opacity: 0.9872; } 90% { transform: translateY(-29.976px); -webkit-transform: translateY(-29.976px); -moz-transform: translateY(-29.976px); -o-transform: translateY(-29.976px); opacity: 0.9992; } 100% { transform: translateY(-30px); -webkit-transform: translateY(-30px); -moz-transform: translateY(-30px); -o-transform: translateY(-30px); opacity: 1; } } @keyframes fadeOutAndIn { 0% { opacity: 1; } 10% { opacity: 0.9012345679; } 20% { opacity: 0.0987654321; } 21% { opacity: 0; } 60% { opacity: 0; } 70% { opacity: 0.03125; } 80% { opacity: 0.5; } 90% { opacity: 0.96875; } 100% { opacity: 1; } } .highly-animation-liftup { -webkit-animation: fadeOutAndIn 300ms linear both; animation: fadeOutAndIn 300ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/DJvMJ0 */ @-webkit-keyframes liftup { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 0.85% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.935, 0, 0, 0, 0, 1, 0, 0, -19.495, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.935, 0, 0, 0, 0, 1, 0, 0, -19.495, 0, 1); } 1.68% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.892, 0, 0, 0, 0, 1, 0, 0, -29.226, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.892, 0, 0, 0, 0, 1, 0, 0, -29.226, 0, 1); } 2.51% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.863, 0, 0, 0, 0, 1, 0, 0, -34.361, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.863, 0, 0, 0, 0, 1, 0, 0, -34.361, 0, 1); } 3.34% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.843, 0, 0, 0, 0, 1, 0, 0, -37.086, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.843, 0, 0, 0, 0, 1, 0, 0, -37.086, 0, 1); } 5.02% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.819, 0, 0, 0, 0, 1, 0, 0, -39.307, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.819, 0, 0, 0, 0, 1, 0, 0, -39.307, 0, 1); } 6.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.809, 0, 0, 0, 0, 1, 0, 0, -39.881, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.809, 0, 0, 0, 0, 1, 0, 0, -39.881, 0, 1); } 10.01% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.802, 0, 0, 0, 0, 1, 0, 0, -40.025, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.802, 0, 0, 0, 0, 1, 0, 0, -40.025, 0, 1); } 13.35% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40.01, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40.01, 0, 1); } 26.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 33.23% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 33.33% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 35.47% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, -25.269, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, -25.269, 0, 1); } 37.54% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.931, 0, 0, 0, 0, 1, 0, 0, -15.605, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.931, 0, 0, 0, 0, 1, 0, 0, -15.605, 0, 1); } 39.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.959, 0, 0, 0, 0, 1, 0, 0, -9.44, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.959, 0, 0, 0, 0, 1, 0, 0, -9.44, 0, 1); } 41.68% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.976, 0, 0, 0, 0, 1, 0, 0, -5.638, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.976, 0, 0, 0, 0, 1, 0, 0, -5.638, 0, 1); } 45.88% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.992, 0, 0, 0, 0, 1, 0, 0, -1.932, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.992, 0, 0, 0, 0, 1, 0, 0, -1.932, 0, 1); } 50.02% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.997, 0, 0, 0, 0, 1, 0, 0, -0.661, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.997, 0, 0, 0, 0, 1, 0, 0, -0.661, 0, 1); } 66.7% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.008, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.008, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes liftup { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 0.85% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.935, 0, 0, 0, 0, 1, 0, 0, -19.495, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.935, 0, 0, 0, 0, 1, 0, 0, -19.495, 0, 1); } 1.68% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.892, 0, 0, 0, 0, 1, 0, 0, -29.226, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.892, 0, 0, 0, 0, 1, 0, 0, -29.226, 0, 1); } 2.51% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.863, 0, 0, 0, 0, 1, 0, 0, -34.361, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.863, 0, 0, 0, 0, 1, 0, 0, -34.361, 0, 1); } 3.34% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.843, 0, 0, 0, 0, 1, 0, 0, -37.086, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.843, 0, 0, 0, 0, 1, 0, 0, -37.086, 0, 1); } 5.02% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.819, 0, 0, 0, 0, 1, 0, 0, -39.307, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.819, 0, 0, 0, 0, 1, 0, 0, -39.307, 0, 1); } 6.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.809, 0, 0, 0, 0, 1, 0, 0, -39.881, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.809, 0, 0, 0, 0, 1, 0, 0, -39.881, 0, 1); } 10.01% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.802, 0, 0, 0, 0, 1, 0, 0, -40.025, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.802, 0, 0, 0, 0, 1, 0, 0, -40.025, 0, 1); } 13.35% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40.01, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40.01, 0, 1); } 26.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 33.23% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 33.33% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, -40, 0, 1); } 35.47% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, -25.269, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, -25.269, 0, 1); } 37.54% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.931, 0, 0, 0, 0, 1, 0, 0, -15.605, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.931, 0, 0, 0, 0, 1, 0, 0, -15.605, 0, 1); } 39.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.959, 0, 0, 0, 0, 1, 0, 0, -9.44, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.959, 0, 0, 0, 0, 1, 0, 0, -9.44, 0, 1); } 41.68% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.976, 0, 0, 0, 0, 1, 0, 0, -5.638, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.976, 0, 0, 0, 0, 1, 0, 0, -5.638, 0, 1); } 45.88% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.992, 0, 0, 0, 0, 1, 0, 0, -1.932, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.992, 0, 0, 0, 0, 1, 0, 0, -1.932, 0, 1); } 50.02% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 0.997, 0, 0, 0, 0, 1, 0, 0, -0.661, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 0.997, 0, 0, 0, 0, 1, 0, 0, -0.661, 0, 1); } 66.7% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.008, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.008, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes opacityCycle { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } } /* Generated with Bounce.js. Edit at https://goo.gl/4RY1mY */ @-webkit-keyframes grow { 0% { -webkit-transform: matrix3d(0.3, 0, 0, 0, 0, 0.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.3, 0, 0, 0, 0, 0.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5.71% { -webkit-transform: matrix3d(0.563, 0, 0, 0, 0, 0.563, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.563, 0, 0, 0, 0, 0.563, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 11.31% { -webkit-transform: matrix3d(0.745, 0, 0, 0, 0, 0.745, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.745, 0, 0, 0, 0, 0.745, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 17.02% { -webkit-transform: matrix3d(0.866, 0, 0, 0, 0, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0, 0, 0, 0, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 22.62% { -webkit-transform: matrix3d(0.939, 0, 0, 0, 0, 0.939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.939, 0, 0, 0, 0, 0.939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 28.33% { -webkit-transform: matrix3d(0.981, 0, 0, 0, 0, 0.981, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.981, 0, 0, 0, 0, 0.981, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 33.93% { -webkit-transform: matrix3d(1.002, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.002, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 45.15% { -webkit-transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 72.57% { -webkit-transform: matrix3d(1.003, 0, 0, 0, 0, 1.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.003, 0, 0, 0, 0, 1.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes grow { 0% { -webkit-transform: matrix3d(0.3, 0, 0, 0, 0, 0.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.3, 0, 0, 0, 0, 0.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5.71% { -webkit-transform: matrix3d(0.563, 0, 0, 0, 0, 0.563, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.563, 0, 0, 0, 0, 0.563, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 11.31% { -webkit-transform: matrix3d(0.745, 0, 0, 0, 0, 0.745, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.745, 0, 0, 0, 0, 0.745, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 17.02% { -webkit-transform: matrix3d(0.866, 0, 0, 0, 0, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0, 0, 0, 0, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 22.62% { -webkit-transform: matrix3d(0.939, 0, 0, 0, 0, 0.939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.939, 0, 0, 0, 0, 0.939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 28.33% { -webkit-transform: matrix3d(0.981, 0, 0, 0, 0, 0.981, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.981, 0, 0, 0, 0, 0.981, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 33.93% { -webkit-transform: matrix3d(1.002, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.002, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 45.15% { -webkit-transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 72.57% { -webkit-transform: matrix3d(1.003, 0, 0, 0, 0, 1.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.003, 0, 0, 0, 0, 1.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @-webkit-keyframes hintslide { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes hintslide { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-marker { -webkit-animation: animation 5000ms linear infinite both; animation: animation 5000ms linear infinite both; } /* Generated with Bounce.js. Edit at http://goo.gl/y9OWSQ */ @-webkit-keyframes marker { 0% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, -80, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, -80, 0, 0, 1); } 1.28% { -webkit-transform: matrix3d(0.909, 0.417, 0, 0, -0.417, 0.909, 0, 0, 0, 0, 1, 0, -54.088, 0, 0, 1); transform: matrix3d(0.909, 0.417, 0, 0, -0.417, 0.909, 0, 0, 0, 0, 1, 0, -54.088, 0, 0, 1); } 2.52% { -webkit-transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, -36.929, 0, 0, 1); transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, -36.929, 0, 0, 1); } 2.6% { -webkit-transform: matrix3d(0.941, 0.338, 0, 0, -0.338, 0.941, 0, 0, 0, 0, 1, 0, -36.028, 0, 0, 1); transform: matrix3d(0.941, 0.338, 0, 0, -0.338, 0.941, 0, 0, 0, 0, 1, 0, -36.028, 0, 0, 1); } 5.01% { -webkit-transform: matrix3d(0.977, 0.215, 0, 0, -0.215, 0.977, 0, 0, 0, 0, 1, 0, -17.091, 0, 0, 1); transform: matrix3d(0.977, 0.215, 0, 0, -0.215, 0.977, 0, 0, 0, 0, 1, 0, -17.091, 0, 0, 1); } 5.11% { -webkit-transform: matrix3d(0.978, 0.21, 0, 0, -0.21, 0.978, 0, 0, 0, 0, 1, 0, -16.565, 0, 0, 1); transform: matrix3d(0.978, 0.21, 0, 0, -0.21, 0.978, 0, 0, 0, 0, 1, 0, -16.565, 0, 0, 1); } 7.53% { -webkit-transform: matrix3d(0.993, 0.119, 0, 0, -0.119, 0.993, 0, 0, 0, 0, 1, 0, -7.733, 0, 0, 1); transform: matrix3d(0.993, 0.119, 0, 0, -0.119, 0.993, 0, 0, 0, 0, 1, 0, -7.733, 0, 0, 1); } 7.61% { -webkit-transform: matrix3d(0.993, 0.116, 0, 0, -0.116, 0.993, 0, 0, 0, 0, 1, 0, -7.54, 0, 0, 1); transform: matrix3d(0.993, 0.116, 0, 0, -0.116, 0.993, 0, 0, 0, 0, 1, 0, -7.54, 0, 0, 1); } 10.01% { -webkit-transform: matrix3d(0.998, 0.056, 0, 0, -0.056, 0.998, 0, 0, 0, 0, 1, 0, -3.507, 0, 0, 1); transform: matrix3d(0.998, 0.056, 0, 0, -0.056, 0.998, 0, 0, 0, 0, 1, 0, -3.507, 0, 0, 1); } 10.11% { -webkit-transform: matrix3d(0.999, 0.054, 0, 0, -0.054, 0.999, 0, 0, 0, 0, 1, 0, -3.396, 0, 0, 1); transform: matrix3d(0.999, 0.054, 0, 0, -0.054, 0.999, 0, 0, 0, 0, 1, 0, -3.396, 0, 0, 1); } 15.02% { -webkit-transform: matrix3d(1, -0.005, 0, 0, 0.005, 1, 0, 0, 0, 0, 1, 0, -0.687, 0, 0, 1); transform: matrix3d(1, -0.005, 0, 0, 0.005, 1, 0, 0, 0, 0, 1, 0, -0.687, 0, 0, 1); } 15.22% { -webkit-transform: matrix3d(1, -0.006, 0, 0, 0.006, 1, 0, 0, 0, 0, 1, 0, -0.643, 0, 0, 1); transform: matrix3d(1, -0.006, 0, 0, 0.006, 1, 0, 0, 0, 0, 1, 0, -0.643, 0, 0, 1); } 20.02% { -webkit-transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.127, 0, 0, 1); transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.127, 0, 0, 1); } 20.22% { -webkit-transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.119, 0, 0, 1); transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.119, 0, 0, 1); } 34.53% { -webkit-transform: matrix3d(1, -0.003, 0, 0, 0.003, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, -0.003, 0, 0, 0.003, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 48.85% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 77.38% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes marker { 0% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, -80, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, -80, 0, 0, 1); } 1.28% { -webkit-transform: matrix3d(0.909, 0.417, 0, 0, -0.417, 0.909, 0, 0, 0, 0, 1, 0, -54.088, 0, 0, 1); transform: matrix3d(0.909, 0.417, 0, 0, -0.417, 0.909, 0, 0, 0, 0, 1, 0, -54.088, 0, 0, 1); } 2.52% { -webkit-transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, -36.929, 0, 0, 1); transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, -36.929, 0, 0, 1); } 2.6% { -webkit-transform: matrix3d(0.941, 0.338, 0, 0, -0.338, 0.941, 0, 0, 0, 0, 1, 0, -36.028, 0, 0, 1); transform: matrix3d(0.941, 0.338, 0, 0, -0.338, 0.941, 0, 0, 0, 0, 1, 0, -36.028, 0, 0, 1); } 5.01% { -webkit-transform: matrix3d(0.977, 0.215, 0, 0, -0.215, 0.977, 0, 0, 0, 0, 1, 0, -17.091, 0, 0, 1); transform: matrix3d(0.977, 0.215, 0, 0, -0.215, 0.977, 0, 0, 0, 0, 1, 0, -17.091, 0, 0, 1); } 5.11% { -webkit-transform: matrix3d(0.978, 0.21, 0, 0, -0.21, 0.978, 0, 0, 0, 0, 1, 0, -16.565, 0, 0, 1); transform: matrix3d(0.978, 0.21, 0, 0, -0.21, 0.978, 0, 0, 0, 0, 1, 0, -16.565, 0, 0, 1); } 7.53% { -webkit-transform: matrix3d(0.993, 0.119, 0, 0, -0.119, 0.993, 0, 0, 0, 0, 1, 0, -7.733, 0, 0, 1); transform: matrix3d(0.993, 0.119, 0, 0, -0.119, 0.993, 0, 0, 0, 0, 1, 0, -7.733, 0, 0, 1); } 7.61% { -webkit-transform: matrix3d(0.993, 0.116, 0, 0, -0.116, 0.993, 0, 0, 0, 0, 1, 0, -7.54, 0, 0, 1); transform: matrix3d(0.993, 0.116, 0, 0, -0.116, 0.993, 0, 0, 0, 0, 1, 0, -7.54, 0, 0, 1); } 10.01% { -webkit-transform: matrix3d(0.998, 0.056, 0, 0, -0.056, 0.998, 0, 0, 0, 0, 1, 0, -3.507, 0, 0, 1); transform: matrix3d(0.998, 0.056, 0, 0, -0.056, 0.998, 0, 0, 0, 0, 1, 0, -3.507, 0, 0, 1); } 10.11% { -webkit-transform: matrix3d(0.999, 0.054, 0, 0, -0.054, 0.999, 0, 0, 0, 0, 1, 0, -3.396, 0, 0, 1); transform: matrix3d(0.999, 0.054, 0, 0, -0.054, 0.999, 0, 0, 0, 0, 1, 0, -3.396, 0, 0, 1); } 15.02% { -webkit-transform: matrix3d(1, -0.005, 0, 0, 0.005, 1, 0, 0, 0, 0, 1, 0, -0.687, 0, 0, 1); transform: matrix3d(1, -0.005, 0, 0, 0.005, 1, 0, 0, 0, 0, 1, 0, -0.687, 0, 0, 1); } 15.22% { -webkit-transform: matrix3d(1, -0.006, 0, 0, 0.006, 1, 0, 0, 0, 0, 1, 0, -0.643, 0, 0, 1); transform: matrix3d(1, -0.006, 0, 0, 0.006, 1, 0, 0, 0, 0, 1, 0, -0.643, 0, 0, 1); } 20.02% { -webkit-transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.127, 0, 0, 1); transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.127, 0, 0, 1); } 20.22% { -webkit-transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.119, 0, 0, 1); transform: matrix3d(1, -0.017, 0, 0, 0.017, 1, 0, 0, 0, 0, 1, 0, -0.119, 0, 0, 1); } 34.53% { -webkit-transform: matrix3d(1, -0.003, 0, 0, 0.003, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, -0.003, 0, 0, 0.003, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 48.85% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 77.38% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .animation-slideInFromRight { -webkit-animation: slideInFromRight 500ms linear both; animation: slideInFromRight 500ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/uWrSO8 */ @-webkit-keyframes slideInFromRight { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes slideInFromRight { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .animation-slideOutFromRight { -webkit-animation: slideOutFromRight 500ms linear both; animation: slideOutFromRight 500ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/IJ7kgG */ @-webkit-keyframes slideOutFromRight { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 130.363, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 130.363, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 210.415, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 210.415, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 256.51, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 256.51, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 281.353, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 281.353, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.272, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.272, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 301.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 301.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.998, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.998, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } } @keyframes slideOutFromRight { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 130.363, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 130.363, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 210.415, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 210.415, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 256.51, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 256.51, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 281.353, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 281.353, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.272, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.272, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 301.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 301.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.998, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 299.998, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 300, 0, 0, 1); } } .animation-slideInFromLeft { -webkit-animation: slideInFromLeft 500ms linear both; animation: slideInFromLeft 500ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/xSahIo */ @-webkit-keyframes slideInFromLeft { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes slideInFromLeft { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -169.637, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -169.637, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -89.585, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -89.585, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -43.49, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -43.49, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -18.647, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -18.647, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.728, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.728, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.002, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -0.002, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .animation-slideOutFromLeft { -webkit-animation: slideOutFromLeft 500ms linear both; animation: slideOutFromLeft 500ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/pXexga */ @-webkit-keyframes slideOutFromLeft { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -130.363, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -130.363, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -210.415, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -210.415, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -256.51, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -256.51, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -281.353, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -281.353, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.272, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.272, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -301.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -301.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.998, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.998, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); } } @keyframes slideOutFromLeft { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -130.363, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -130.363, 0, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -210.415, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -210.415, 0, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -256.51, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -256.51, 0, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -281.353, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -281.353, 0, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.272, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.272, 0, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -301.732, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -301.732, 0, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.998, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -299.998, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -300, 0, 0, 1); } } .highly-animation-dropupIn { -webkit-animation: dropupIn 1000ms linear both; animation: dropupIn 1000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/2RK08n */ @-webkit-keyframes dropupIn { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 100, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 100, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 56.546, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 56.546, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 29.862, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 29.862, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 14.497, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 14.497, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 6.216, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 6.216, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.243, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.243, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.577, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.577, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.001, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.001, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes dropupIn { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 100, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 100, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 56.546, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 56.546, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 29.862, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 29.862, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 14.497, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 14.497, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 6.216, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 6.216, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.243, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.243, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.577, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -0.577, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.001, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0.001, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-minimize { animation: minimize 1000ms linear both; } /* Generated with Bounce.js. Edit at https://goo.gl/W52u59 */ @keyframes minimize { 0% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 17.382, 0, 1); } 6.41% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 28.055, 0, 1); } 9.61% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 34.201, 0, 1); } 12.81% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 37.514, 0, 1); } 19.22% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 39.903, 0, 1); } 25.63% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 40.231, 0, 1); } 65.67% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 40, 0, 1); } 100% { transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 40, 0, 1); } } .animation-dropupOut { -webkit-animation: dropupOut 1000ms linear both; animation: dropupOut 1000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/W7xJLZ */ @-webkit-keyframes dropupOut { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 32.591, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 32.591, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 52.604, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 52.604, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 64.127, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 64.127, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 70.338, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 70.338, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.818, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.818, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75.433, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75.433, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.999, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.999, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75, 0, 1); } } @keyframes dropupOut { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 32.591, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 32.591, 0, 1); } 6.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 52.604, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 52.604, 0, 1); } 9.61% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 64.127, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 64.127, 0, 1); } 12.81% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 70.338, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 70.338, 0, 1); } 19.22% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.818, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.818, 0, 1); } 25.63% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75.433, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75.433, 0, 1); } 65.67% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.999, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 74.999, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 75, 0, 1); } } .highly-animation-expand { -webkit-animation: expand 1000ms linear both; animation: expand 1000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/7lyFZr */ @-webkit-keyframes expand { 0% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.1% { -webkit-transform: matrix3d(0.916, 0, 0, 0, 0, 0.958, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.916, 0, 0, 0, 0, 0.958, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 8.11% { -webkit-transform: matrix3d(0.979, 0, 0, 0, 0, 0.989, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.979, 0, 0, 0, 0, 0.989, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.11% { -webkit-transform: matrix3d(1.004, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.004, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 16.12% { -webkit-transform: matrix3d(1.009, 0, 0, 0, 0, 1.004, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.009, 0, 0, 0, 0, 1.004, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 27.23% { -webkit-transform: matrix3d(1.002, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.002, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 38.34% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 60.56% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 82.78% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes expand { 0% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.1% { -webkit-transform: matrix3d(0.916, 0, 0, 0, 0, 0.958, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.916, 0, 0, 0, 0, 0.958, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 8.11% { -webkit-transform: matrix3d(0.979, 0, 0, 0, 0, 0.989, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.979, 0, 0, 0, 0, 0.989, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.11% { -webkit-transform: matrix3d(1.004, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.004, 0, 0, 0, 0, 1.002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 16.12% { -webkit-transform: matrix3d(1.009, 0, 0, 0, 0, 1.004, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.009, 0, 0, 0, 0, 1.004, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 27.23% { -webkit-transform: matrix3d(1.002, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.002, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 38.34% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 60.56% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 82.78% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-contract { -webkit-animation: contract 300ms linear both; animation: contract 300ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/0rfX4K */ @-webkit-keyframes contract { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.1% { -webkit-transform: matrix3d(0.884, 0, 0, 0, 0, 0.942, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.884, 0, 0, 0, 0, 0.942, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 8.11% { -webkit-transform: matrix3d(0.821, 0, 0, 0, 0, 0.911, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.821, 0, 0, 0, 0, 0.911, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.11% { -webkit-transform: matrix3d(0.796, 0, 0, 0, 0, 0.898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.796, 0, 0, 0, 0, 0.898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 16.12% { -webkit-transform: matrix3d(0.791, 0, 0, 0, 0, 0.896, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.791, 0, 0, 0, 0, 0.896, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 27.23% { -webkit-transform: matrix3d(0.798, 0, 0, 0, 0, 0.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.798, 0, 0, 0, 0, 0.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 38.34% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 60.56% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 82.78% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes contract { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.1% { -webkit-transform: matrix3d(0.884, 0, 0, 0, 0, 0.942, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.884, 0, 0, 0, 0, 0.942, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 8.11% { -webkit-transform: matrix3d(0.821, 0, 0, 0, 0, 0.911, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.821, 0, 0, 0, 0, 0.911, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.11% { -webkit-transform: matrix3d(0.796, 0, 0, 0, 0, 0.898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.796, 0, 0, 0, 0, 0.898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 16.12% { -webkit-transform: matrix3d(0.791, 0, 0, 0, 0, 0.896, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.791, 0, 0, 0, 0, 0.896, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 27.23% { -webkit-transform: matrix3d(0.798, 0, 0, 0, 0, 0.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.798, 0, 0, 0, 0, 0.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 38.34% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 60.56% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 82.78% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.8, 0, 0, 0, 0, 0.9, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-modalIn { -webkit-animation: modalIn 1000ms linear both; animation: modalIn 1000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/pR1rdh */ @-webkit-keyframes modalIn { 0% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.5% { -webkit-transform: matrix3d(1.207, 0, 0, 0, 0, 1.207, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.207, 0, 0, 0, 0, 1.207, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5.01% { -webkit-transform: matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 10.01% { -webkit-transform: matrix3d(1.063, 0, 0, 0, 0, 1.063, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.063, 0, 0, 0, 0, 1.063, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 15.02% { -webkit-transform: matrix3d(1.026, 0, 0, 0, 0, 1.026, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.026, 0, 0, 0, 0, 1.026, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 20.02% { -webkit-transform: matrix3d(1.01, 0, 0, 0, 0, 1.01, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01, 0, 0, 0, 0, 1.01, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 30.03% { -webkit-transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40.04% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes modalIn { 0% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.5% { -webkit-transform: matrix3d(1.207, 0, 0, 0, 0, 1.207, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.207, 0, 0, 0, 0, 1.207, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5.01% { -webkit-transform: matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 10.01% { -webkit-transform: matrix3d(1.063, 0, 0, 0, 0, 1.063, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.063, 0, 0, 0, 0, 1.063, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 15.02% { -webkit-transform: matrix3d(1.026, 0, 0, 0, 0, 1.026, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.026, 0, 0, 0, 0, 1.026, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 20.02% { -webkit-transform: matrix3d(1.01, 0, 0, 0, 0, 1.01, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01, 0, 0, 0, 0, 1.01, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 30.03% { -webkit-transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40.04% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .animation-modalOut { -webkit-animation: modalOut 1000ms linear both; animation: modalOut 1000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/Gbw2Uf */ @-webkit-keyframes modalOut { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.5% { -webkit-transform: matrix3d(1.093, 0, 0, 0, 0, 1.093, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.093, 0, 0, 0, 0, 1.093, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5% { -webkit-transform: matrix3d(1.159, 0, 0, 0, 0, 1.159, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.159, 0, 0, 0, 0, 1.159, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 10% { -webkit-transform: matrix3d(1.237, 0, 0, 0, 0, 1.237, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.237, 0, 0, 0, 0, 1.237, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 15% { -webkit-transform: matrix3d(1.274, 0, 0, 0, 0, 1.274, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.274, 0, 0, 0, 0, 1.274, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 20% { -webkit-transform: matrix3d(1.29, 0, 0, 0, 0, 1.29, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.29, 0, 0, 0, 0, 1.29, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 30% { -webkit-transform: matrix3d(1.299, 0, 0, 0, 0, 1.299, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.299, 0, 0, 0, 0, 1.299, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes modalOut { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.5% { -webkit-transform: matrix3d(1.093, 0, 0, 0, 0, 1.093, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.093, 0, 0, 0, 0, 1.093, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 5% { -webkit-transform: matrix3d(1.159, 0, 0, 0, 0, 1.159, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.159, 0, 0, 0, 0, 1.159, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 10% { -webkit-transform: matrix3d(1.237, 0, 0, 0, 0, 1.237, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.237, 0, 0, 0, 0, 1.237, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 15% { -webkit-transform: matrix3d(1.274, 0, 0, 0, 0, 1.274, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.274, 0, 0, 0, 0, 1.274, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 20% { -webkit-transform: matrix3d(1.29, 0, 0, 0, 0, 1.29, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.29, 0, 0, 0, 0, 1.29, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 30% { -webkit-transform: matrix3d(1.299, 0, 0, 0, 0, 1.299, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.299, 0, 0, 0, 0, 1.299, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 40% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.3, 0, 0, 0, 0, 1.3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animations-pop { -webkit-animation: pop 750ms linear normal both; animation: pop 750ms linear normal both; } /* Generated with Bounce.js. Edit at http://goo.gl/z2nb0D */ @-webkit-keyframes pop { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.843, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.843, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.31% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.937, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.937, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.8, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.8, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.51% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.617, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.617, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.82% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.317, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.317, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 25.03% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.152, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.152, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 37.54% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.031, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.031, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 50.05% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes pop { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.843, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.843, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.31% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.937, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.937, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.41% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.8, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.8, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.51% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.617, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.617, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.82% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.317, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.317, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 25.03% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.152, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.152, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 37.54% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.031, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.031, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 50.05% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-rotateThirty { -webkit-animation: rotateThirty 2000ms linear both; animation: rotateThirty 2000ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/gtLppt */ @-webkit-keyframes rotateThirty { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.3% { -webkit-transform: matrix3d(0.978, 0.208, 0, 0, -0.208, 0.978, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.978, 0.208, 0, 0, -0.208, 0.978, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.61% { -webkit-transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.91% { -webkit-transform: matrix3d(0.907, 0.421, 0, 0, -0.421, 0.907, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.907, 0.421, 0, 0, -0.421, 0.907, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 13.21% { -webkit-transform: matrix3d(0.885, 0.466, 0, 0, -0.466, 0.885, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.885, 0.466, 0, 0, -0.466, 0.885, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 19.82% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 26.33% { -webkit-transform: matrix3d(0.863, 0.505, 0, 0, -0.505, 0.863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.863, 0.505, 0, 0, -0.505, 0.863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 66.37% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes rotateThirty { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.3% { -webkit-transform: matrix3d(0.978, 0.208, 0, 0, -0.208, 0.978, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.978, 0.208, 0, 0, -0.208, 0.978, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.61% { -webkit-transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.94, 0.342, 0, 0, -0.342, 0.94, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.91% { -webkit-transform: matrix3d(0.907, 0.421, 0, 0, -0.421, 0.907, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.907, 0.421, 0, 0, -0.421, 0.907, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 13.21% { -webkit-transform: matrix3d(0.885, 0.466, 0, 0, -0.466, 0.885, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.885, 0.466, 0, 0, -0.466, 0.885, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 19.82% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 26.33% { -webkit-transform: matrix3d(0.863, 0.505, 0, 0, -0.505, 0.863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.863, 0.505, 0, 0, -0.505, 0.863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 66.37% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.866, 0.5, 0, 0, -0.5, 0.866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-animation-bounce { -webkit-animation: bounce 400ms linear both; animation: bounce 400ms linear both; } /* Generated with Bounce.js. Edit at http://goo.gl/XxjWMb */ @-webkit-keyframes bounce { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.4% { -webkit-transform: matrix3d(1.181, 0, 0, 0, 0, 1.181, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.181, 0, 0, 0, 0, 1.181, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1.198, 0, 0, 0, 0, 1.198, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.198, 0, 0, 0, 0, 1.198, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.73% { -webkit-transform: matrix3d(1.2, 0, 0, 0, 0, 1.2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.2, 0, 0, 0, 0, 1.2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.31% { -webkit-transform: matrix3d(1.183, 0, 0, 0, 0, 1.183, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.183, 0, 0, 0, 0, 1.183, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 7.06% { -webkit-transform: matrix3d(1.171, 0, 0, 0, 0, 1.171, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.171, 0, 0, 0, 0, 1.171, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.38% { -webkit-transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.41% { -webkit-transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.51% { -webkit-transform: matrix3d(1.087, 0, 0, 0, 0, 1.087, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.087, 0, 0, 0, 0, 1.087, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 14.11% { -webkit-transform: matrix3d(1.069, 0, 0, 0, 0, 1.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.069, 0, 0, 0, 0, 1.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.77% { -webkit-transform: matrix3d(1.034, 0, 0, 0, 0, 1.034, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.034, 0, 0, 0, 0, 1.034, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.82% { -webkit-transform: matrix3d(1.033, 0, 0, 0, 0, 1.033, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.033, 0, 0, 0, 0, 1.033, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 25.03% { -webkit-transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 37.54% { -webkit-transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 50.05% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } @keyframes bounce { 0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 2.4% { -webkit-transform: matrix3d(1.181, 0, 0, 0, 0, 1.181, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.181, 0, 0, 0, 0, 1.181, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 3.2% { -webkit-transform: matrix3d(1.198, 0, 0, 0, 0, 1.198, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.198, 0, 0, 0, 0, 1.198, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 4.73% { -webkit-transform: matrix3d(1.2, 0, 0, 0, 0, 1.2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.2, 0, 0, 0, 0, 1.2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 6.31% { -webkit-transform: matrix3d(1.183, 0, 0, 0, 0, 1.183, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.183, 0, 0, 0, 0, 1.183, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 7.06% { -webkit-transform: matrix3d(1.171, 0, 0, 0, 0, 1.171, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.171, 0, 0, 0, 0, 1.171, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.38% { -webkit-transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 9.41% { -webkit-transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.132, 0, 0, 0, 0, 1.132, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 12.51% { -webkit-transform: matrix3d(1.087, 0, 0, 0, 0, 1.087, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.087, 0, 0, 0, 0, 1.087, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 14.11% { -webkit-transform: matrix3d(1.069, 0, 0, 0, 0, 1.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.069, 0, 0, 0, 0, 1.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.77% { -webkit-transform: matrix3d(1.034, 0, 0, 0, 0, 1.034, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.034, 0, 0, 0, 0, 1.034, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 18.82% { -webkit-transform: matrix3d(1.033, 0, 0, 0, 0, 1.033, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.033, 0, 0, 0, 0, 1.033, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 25.03% { -webkit-transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.012, 0, 0, 0, 0, 1.012, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 37.54% { -webkit-transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.001, 0, 0, 0, 0, 1.001, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 50.05% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } } .highly-throbber { width: 100%; height: 100%; display: -webkit-box; display: -webkit-flex; display: -moz-box; display: -ms-flexbox; display: flex; -webkit-box-align: center; -webkit-align-items: center; -moz-box-align: center; -ms-flex-align: center; align-items: center; -webkit-box-pack: center; -webkit-justify-content: center; -moz-box-pack: center; -ms-flex-pack: center; justify-content: center; } .highly-throbber:after { display: block; position: relative; width: 30px; height: 30px; -webkit-animation: rotate 0.6s linear infinite; -moz-animation: rotate 0.6s linear infinite; -ms-animation: rotate 0.6s linear infinite; -o-animation: rotate 0.6s linear infinite; animation: rotate 0.6s linear infinite; -webkit-border-radius: 100%; -moz-border-radius: 100%; border-radius: 100%; border-top: 1px solid gray; border-bottom: 1px solid #404040; border-left: 1px solid gray; border-right: 1px solid #404040; content: ''; opacity: .7; box-sizing: border-box; } .highly-throbber.highly-throbber-large:after { width: 60px; height: 60px; } .highly-throbber.highly-throbber-medium:after { width: 45px; height: 45px; } .highly-throbber.highly-throbber-small:after { width: 15px; height: 15px; } .highly-throbber.highly-throbber-green:after { opacity: 1; border-top: 1px solid #2bd150; border-bottom: 1px solid #fff; border-left: 1px solid #2bd150; border-right: 1px solid #fff; } .highly-throbber.highly-throbber-blue:after { opacity: 1; border-top: 1px solid #0092c9; border-left: 1px solid #0092c9; } .highly-throbber.highly-throbber-white:after { opacity: 1; border-top: 1px solid white; border-left: 1px solid white; } .highly-throbber.highly-throbber-pause:after { -webkit-animation-play-state: paused; /* Chrome, Safari, Opera */ animation-play-state: paused; } /* * SCSS Tooltips * By David Tintner & Hacking UI * http://hackingui.com/front-end/scss-tooltips/ * * $direction: ne, nw, se, sw. relative to the element the tooltip is on * $bg-color: any CSS valid color string, will be applied as bg color of tooltip * Content for tooltip comes from data-tooltip attribute on element */ /* * UtilityBelt - a starter kit for any SASS project * By @dmtintner & @hackingui * Documentation and examples - hackingui.com/front-end/10-best-scss-utilities/ * V1.1.0 */ /* ## Triangle * @include triangle within a pseudo element and add positioning properties (ie. top, left) * $direction: up, down, left, right */ /* * Currency */ /* * Clearfix */ /* * Respond To */ /* * Ghost Vertical Align */ /* * Truncate Text */ /* * Animation */ /* * Alerted */ @-webkit-keyframes alertMe { from { border-width: 3px; border-color: gold; } to { border-width: 0; border-color: rgba(255, 215, 0, 0.1); } } @-moz-keyframes alertMe { from { border-width: 3px; border-color: gold; } to { border-width: 0; border-color: rgba(255, 215, 0, 0.1); } } @keyframes alertMe { from { border-width: 3px; border-color: gold; } to { border-width: 0; border-color: rgba(255, 215, 0, 0.1); } } /* * Resize Sprite - for resizing only a single image from a sprite * * params: $map = $<name>-sprites (ex. $icon-sprites) * $sprite = file name w/o file type ending (ex. globe) $percent = number (ex. 50) * * (if compass CSS3 mixins not included, uncomment the background-size row and comment the @include version) */ /* * Resizes all images in a given sprite * mixin courtesy of Wilker Lúcio https://gist.github.com/wilkerlucio/6442309 * params: $only = if you want to list specific files instead of regenerating every image (ex. globe, checkmark) */ /* * HUI Tooltips */ /* ## Text-align justify For perfectly aligned grids that don't rely on floating elements and difficult calculations - http://www.barrelny.com/blog/text-align-justify-and-rwd/ */ /* * Configuration */ .highly-tooltip { position: relative; } .highly-tooltip:before, .highly-tooltip:after { opacity: 0; z-index: 98; transition: opacity 150ms, visibility 0ms linear 150ms; pointer-events: none; } @media (max-width: 568px) { .highly-tooltip:before, .highly-tooltip:after { display: none; } } .highly-tooltip:before { content: attr(data-highly-tooltip); position: absolute; width: auto; padding: 5px 15px; line-height: 20px; text-align: center; font-size: 12px; font-weight: normal; letter-spacing: .03em; border: 1px solid #404040; box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); border-radius: 18px; background-color: black; color: white; } .highly-tooltip:after { content: ''; z-index: 111; } .highly-tooltip:hover { /* putting comment here so :hover is declared first by itself to fix ie10 bug with transitions on psuedo elements- http://css-tricks.com/pseudo-element-animationstransitions-bug-fixed-in-webkit/ */ } .highly-tooltip:hover:before, .highly-tooltip:hover:after { opacity: 1; pointer-events: all; transition-delay: 900ms; } @media (max-width: 568px) { .highly-tooltip:hover:before, .highly-tooltip:hover:after { display: none; } } .highly-tooltip--ne:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); } .highly-tooltip--ne:before { top: -8px; bottom: auto; left: 0; right: auto; transform: translate3d(0, -100%, 0); -webkit-transform: translate3d(0, -100%, 0); } .highly-tooltip--ne:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: none; top: -9px; bottom: auto; left: 50%; right: auto; } .highly-tooltip--n:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); } .highly-tooltip--n:before { top: -8px; bottom: auto; left: 50%; right: auto; transform: translate3d(-50%, -100%, 0); -webkit-transform: translate3d(-50%, -100%, 0); } .highly-tooltip--n:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: none; top: -9px; bottom: auto; left: 50%; right: auto; } .highly-tooltip--nw:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); transform: translate3d(50%, 0, 0); -webkit-transform: translate3d(50%, 0, 0); } .highly-tooltip--nw:before { top: -8px; bottom: auto; right: 0; left: auto; transform: translate3d(0, -100%, 0); -webkit-transform: translate3d(0, -100%, 0); } .highly-tooltip--nw:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: none; top: -9px; bottom: auto; right: 50%; left: auto; } .highly-tooltip--w:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); } .highly-tooltip--w:after { transform: translate3d(-100%, -50%, 0); -webkit-transform: translate3d(-100%, -50%, 0); } .highly-tooltip--w:before { top: 50%; bottom: auto; left: -8px; right: auto; transform: translate3d(-100%, -50%, 0); -webkit-transform: translate3d(-100%, -50%, 0); } .highly-tooltip--w:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-left: 5px solid black; border-right: none; top: 49%; bottom: auto; left: -3px; right: auto; } .highly-tooltip--e:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); transform: translate3d(50%, 0, 0); -webkit-transform: translate3d(50%, 0, 0); } .highly-tooltip--e:after { transform: translate3d(100%, -50%, 0); -webkit-transform: translate3d(100%, -50%, 0); } .highly-tooltip--e:before { top: 50%; bottom: auto; right: -8px; left: auto; transform: translate3d(100%, -50%, 0); -webkit-transform: translate3d(100%, -50%, 0); } .highly-tooltip--e:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-right: 5px solid black; border-left: none; top: 49%; bottom: auto; right: -3px; left: auto; } .highly-tooltip--se:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); } .highly-tooltip--se:before { bottom: -8px; top: auto; left: 0; right: auto; transform: translate3d(0, 100%, 0); -webkit-transform: translate3d(0, 100%, 0); } .highly-tooltip--se:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-bottom: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: none; bottom: -9px; top: auto; left: 50%; right: auto; } .highly-tooltip--s:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); } .highly-tooltip--s:before { bottom: -8px; top: auto; left: 50%; right: auto; transform: translate3d(-50%, 100%, 0); -webkit-transform: translate3d(-50%, 100%, 0); } .highly-tooltip--s:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-bottom: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: none; bottom: -9px; top: auto; left: 50%; right: auto; } .highly-tooltip--sw:after { transform: translate3d(-50%, 0, 0); -webkit-transform: translate3d(-50%, 0, 0); transform: translate3d(50%, 0, 0); -webkit-transform: translate3d(50%, 0, 0); } .highly-tooltip--sw:before { bottom: -8px; top: auto; right: 0; left: auto; transform: translate3d(0, 100%, 0); -webkit-transform: translate3d(0, 100%, 0); } .highly-tooltip--sw:after { content: ''; display: block; position: absolute; height: 0; width: 0; border-bottom: 5px solid black; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: none; bottom: -9px; top: auto; right: 50%; left: auto; } /* Simple Grid Learn More - http://dallasbass.com/simple-grid-a-lightweight-responsive-css-grid/ Project Page - http://thisisdallas.github.com/Simple-Grid/ Author - Dallas Bass Site - dallasbass.com */ [class*='highly-col-'] { float: left; padding-right: 20px; /* column-space */ -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } .highly-grid { width: 100%; margin: 0 auto; overflow: hidden; } .highly-grid:after { content: ""; display: table; clear: both; } .highly-grid-pad { padding-top: 20px; padding-left: 20px; /* grid-space to left */ padding-right: 0px; /* grid-space to right: (grid-space-left - column-space) e.g. 20px-20px=0 */ } /* Content Columns */ .highly-col-1-1 { width: 100%; } .highly-col-2-3, .highly-col-8-12 { width: 66.66%; } .highly-col-1-2, .highly-col-6-12 { width: 50%; } .highly-col-1-3, .highly-col-4-12 { width: 33.33%; } .highly-col-1-4, .highly-col-3-12 { width: 25%; } .highly-col-1-5 { width: 20%; } .highly-col-1-6, .highly-col-2-12 { width: 16.667%; } .highly-col-1-7 { width: 14.28%; } .highly-col-1-8 { width: 12.5%; } .highly-col-1-9 { width: 11.1%; } .highly-col-1-10 { width: 10%; } .highly-col-1-11 { width: 9.09%; } .highly-col-1-12 { width: 8.33%; } /* Layout Columns */ .highly-col-11-12 { width: 91.66%; } .highly-col-10-12 { width: 83.333%; } .highly-col-9-12 { width: 75%; } .highly-col-5-12 { width: 41.66%; } .highly-col-7-12 { width: 58.33%; } html.highly-on { -webkit-transform: initial; } html.highly-on body { margin-bottom: 50px; } html.highly-on body ::selection { background: #ff9d7f; /* WebKit/Blink Browsers */ text-shadow: none; } html.highly-on body ::-moz-selection { background: #ff9d7f; /* Gecko Browsers */ text-shadow: none; } html.highly-on body.highly-modal-open { overflow: hidden; } html.highly-on body.highly-modal-open ::selection { background: #ACCEF7; /* WebKit/Blink Browsers */ } html.highly-on body.highly-modal-open ::-moz-selection { background: #ACCEF7; /* Gecko Browsers */ } html.highly-invisible .highly-highlight { background-color: transparent !important; box-shadow: 0; } html.highly-site-medium .markup--quote { background-image: none !important; pointer-events: none !important; } .highly-share, .highly-summary, .highly-navbar { font-size: 14px; line-height: 20px; } a .highly-highlight, a highly-butter-surrounding-span { text-decoration: underline !important; } .highly-pull-right { float: right; } .highly-pull-left { float: left; } .highly-centered { text-align: center; } .highly-allcaps { text-transform: uppercase; letter-spacing: .1em !important; } .highly-red { color: #ff3c00; } .highly-blue { color: #00bbe4; } .highly-white { color: white !important; } .highly-green { color: #47d967 !important; } .highly-black { color: black !important; } .highly-color-twitter { color: #00aced; } .highly-line-height { line-height: 1.5em; } .highly-text { line-height: 20px; } .highly-text-12 { font-size: 12px; } .highly-line-30 { line-height: 30px; } .highly-line-50 { line-height: 50px; } .highly-text-thin { font-weight: 400; } .highly-text-weight-300 { font-weight: 300; } .highly-text-muted { color: gray; } .highly-gray { color: gray; } .highly-green { color: #47d967; } .highly-dark-gray { color: #404040; } .highly-space-vertical { padding: 15px 0; } .highly-space-top-15 { padding-top: 15px; } .highly-space-top-30 { padding-top: 30px; } .highly-space-top-60 { padding-top: 60px; } .highly-space-top { padding-top: 15px; } .highly-space-right-8 { margin-right: 8px !important; } .highly-space-bottom { padding-bottom: 15px; } .highly-space-horizontal { padding: 0 15px; } .highly-relative { position: relative; } .highly-block { display: block; } .highly-inline { display: inline; } .highly-borderless { border: 0 !important; } .highly-thin { font-weight: normal !important; } .highly-bold { font-weight: bold !important; } .highly-underline { text-decoration: underline; } .highly-transparent { background-color: transparent !important; } .highly-tour-top-bar-open { margin-top: 75px; } .highly-opacity-25 { opacity: .25; } .highly-opacity-50 { opacity: .5; } .highly-opacity-70 { opacity: .7; } .highly-font-size-default { font-size: 14px; } .highly-hide-on-touch { display: inherit; } .highly-touch .highly-hide-on-touch { display: none; } .highly-show-on-touch { display: none; } .highly-touch .highly-show-on-touch { display: inherit; } .highly-clickable { cursor: pointer; } .highly-clickable.highly-gray { color: gray; } .highly-clickable.highly-gray:hover { color: #a6a6a6; } .highly-clearfix:after { content: ""; display: table; clear: both; } .highly-link { color: white; text-decoration: none; cursor: pointer; } .highly-link:hover { text-decoration: underline; color: inherit; } .highly-link.highly-link-muted { color: gray; } .highly-red-link { color: #ff3c00; text-decoration: none; cursor: pointer; } .highly-red-link:hover { text-decoration: underline; color: #ff3c00; } .highly-highlights-exist { position: fixed; height: 70px; top: auto; bottom: 0; left: 0; z-index: 4444444444; -webkit-transition: bottom 0.15s ease-in-out; -moz-transition: bottom 0.15s ease-in-out; -o-transition: bottom 0.15s ease-in-out; transition: bottom 0.15s ease-in-out; } .highly-on .highly-highlights-exist { bottom: 70px; } .highly-highlights-exist.highly-open { display: block !important; } .highly-highlights-exist.highly-open .highly-highlights-exist-holder { bottom: 0; opacity: 1; -webkit-animation: dropupIn 500ms linear both; animation: dropupIn 500ms linear both; } .highly-highlights-exist-holder { position: absolute; top: auto; bottom: -70px; left: 0px; width: 410px; padding: 10px; box-sizing: border-box; background: transparent; height: 70px; font-size: 14px; font-family: Helvetica, sans-serif; color: gray; opacity: 0; -webkit-animation: dropupOut 500ms linear both; animation: dropupOut 500ms linear both; cursor: pointer !important; } .highly-highlights-exist-holder .highly-highlights-exist-bar { color: white; height: 50px; width: 400px; font-size: 12px; padding: 0 50px 0 0; margin: 0 0 0 0; letter-spacing: .1em; box-sizing: border-box; background: black; border-radius: 5px; border: 1px solid #404040; } .highly-highlights-exist-holder .highly-highlights-exist-bar:hover { border-color: gray; color: #ff3c00; } .highly-highlights-exist-holder .highly-highlights-exist-bar .highly-eyecon-highlighter { width: 10px; height: 20px; font-size: 15px; margin: -7px 0 0 0px; } .highly-highlights-exist-holder .highly-highlights-exist-bar .highly-highlights-exist-close-hover { float: right; margin: 0 -50px 0 0; color: gray; height: 50px; text-align: center; width: 50px; border-left: 1px solid rgba(128, 128, 128, 0.25); } .highly-highlights-exist-holder .highly-highlights-exist-bar .highly-highlights-exist-close-hover:hover { color: white; } .highly-highlights-exist-holder .highly-highlights-exist-bar .highly-highlights-exist-close-hover .highly-eyecon { font-size: 20px; line-height: 50px; } .highly-highlights-exist-holder .highly-highlights-exist-more { position: relative; display: inline-block; margin: 0 0 0 5px; background: transparent; color: gray; border: 1px solid rgba(128, 128, 128, 0.5); border-radius: 50%; width: 30px; height: 30px; padding: 0; padding-top: 5px; font-size: 13px; box-sizing: border-box; text-align: center; line-height: 19px; } .highly-highlights-exist-holder .highly-highlights-exist-more:hover { border-color: #ff3c00; color: #ff3c00; } .highly-highlights-exist-holder .highly-highlights-exist-more.highly-hidden { display: none; } .highly-highlights-exist-holder .highly-highlights-exist-message { line-height: 50px; } .highly-highlights-exist-holder .highly-sparkline-holder { margin: 0px 40px 0px 50px; height: 48px; } .highly-highlights-exist-holder .highly-sparkline-holder .highly-sparkline { height: 48px; } .highly-highlights-exist-holder .highly-sparkline-holder .highly-sparkline .highly-spark { height: 48px; } .highly-highlights-exist-holder .highly-sparkline-holder .highly-sparkline .highly-sparkline-readtime { line-height: 48px; white-space: nowrap; } .highly-highlights-exist-holder[data-head-count="1"] .highly-sparkline-holder { margin-left: 55px; } .highly-highlights-exist-holder[data-head-count="2"] .highly-sparkline-holder { margin-left: 90px; } .highly-highlights-exist-holder[data-head-count="3"] .highly-sparkline-holder { margin-left: 125px; } .highly-highlights-exist-holder[data-head-count="4"] .highly-sparkline-holder { margin-left: 160px; } .highly-highlights-exist-highlight-holder { position: absolute; bottom: 60px; opacity: 0; z-index: 2; padding: 10px 15px 5px 15px; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-highlights-exist-highlight-holder.highly-open { bottom: 70px; opacity: 1; } .highly-highlights-exist-highlight-holder:before { content: " "; position: absolute; top: 0px; background: #ffcebf; bottom: 26px; left: 0; right: 0; min-height: 28px; z-index: -1; } .highly-highlights-exist-highlight-holder .highly-highlights-exist-highlight { background-color: #ffcebf; box-shadow: 15px 0 0 #ffcebf, -15px 0 0 #ffcebf; padding: 9px 0 12px 0; } .highly-highlights-exist-highlight-holder .highly-highlights-exist-highlight-text { color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 18px; line-height: 1.5em; } .highly-highlights-exist-highlight-holder .highly-highlights-exist-highlight-count { color: black; opacity: .5; font-size: 14px; padding: 0 0 0 2px; } .highly-highlights-exist-highlight-holder:hover:before { background: #ff9d7f; } .highly-highlights-exist-highlight-holder:hover .highly-highlights-exist-highlight { background-color: #ff9d7f; box-shadow: 15px 0 0 #ff9d7f, -15px 0 0 #ff9d7f; } .highly-highlights-exist-highlighters { padding: 10px; margin: 0; height: 100%; float: left; box-sizing: border-box; } .highly-highlights-exist-highlighters .highly-highlighter-holder { margin: 0; float: left; display: block; height: 30px; width: 30px; } .highly-highlights-exist-highlighters .highly-highlighter-holder .highly-profile-pic { border: 2px solid transparent; box-sizing: border-box; margin: 0; } .highly-highlights-exist-highlighters .highly-highlighter-holder img.highly-profile-pic-img { z-index: 1; } .highly-highlights-exist-highlighters .highly-highlighter-holder:hover .highly-profile-pic { border-color: #ff3c00; } .highly-highlights-exist-highlighters .highly-highlighter-holder + .highly-highlighter-holder { margin-left: 5px; } .highly-highlights-exist-close-options { border: 1px solid red; height: 50px; box-sizing: border-box; padding: 0; position: absolute; top: 10px; left: 10px; right: 0; background: black; border-radius: 5px; border: 1px solid #404040; z-index: 5; opacity: 0; pointer-events: none; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-highlights-exist-close-options.highly-open { opacity: 1; pointer-events: auto; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option { width: 50%; box-sizing: border-box; float: left; color: white; line-height: 48px; padding: 0 15px; font-size: 14px; white-space: nowrap; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option:first-child { border-right: 1px solid #262626; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option .highly-eyecon { color: gray; vertical-align: middle; margin: -3px 5px 0 0; font-size: 30px; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option:hover, .highly-highlights-exist-close-options .highly-highlights-exist-close-option:hover .highly-eyecon { color: #ff3c00; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option.highly-highlights-exist-close-option-x { text-align: right; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option.highly-highlights-exist-close-option-x .highly-close-holder { float: right; font-size: 20px; line-height: 50px; margin-right: -17px; width: 50px; text-align: center; } .highly-highlights-exist-close-options .highly-highlights-exist-close-option.highly-highlights-exist-close-option-x .highly-eyecon { font-size: 20px; line-height: 50px; } .highly-highlights-exist-nux { -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; background-color: black; bottom: 140px; width: 400px; position: relative; text-align: center; font-size: 14px; font-family: Helvetica, sans-serif; padding-top: 30px; padding-bottom: 30px; border-radius: 5px; margin-left: 10px; line-height: 20px; font-weight: 300px; opacity: 0; } .highly-highlights-exist-nux.highly-open { opacity: 1; } .highly-highlights-exist-nux .highly-highlights-exist-nux-highly-title { font-size: 12px; letter-spacing: .09em; } .highly-highlights-exist-nux .highly-highlights-exist-nux-feature-text { font-size: 20px; } .highly-highlights-exist-nux .highly-highlights-exist-nux-explanation { color: white; } .highly-highlights-exist-nux .highly-highlights-exist-nux-img { width: 50px; margin: auto; margin-bottom: 10px; } .highly-highlights-exist-nux .highly-highlights-exist-nux-ok-btn { padding: 1px 0; margin-top: 20px; } .highly-highlights-exist-nux .highly-highlights-exist-nux-ok-btn:hover { color: #ff3c00; } .highly-highlights-exist-nux .highly-highlights-exist-learn, .highly-highlights-exist-nux .highly-highlights-exist-options { text-decoration: underline; cursor: pointer; } .highly-highlights-exist-nux .highly-highlights-exist-learn:hover, .highly-highlights-exist-nux .highly-highlights-exist-options:hover { color: #ff3c00; } .highly-block-modal { position: fixed; top: auto; bottom: 0; left: 0; z-index: 4444444444; -webkit-transition: bottom 0.15s ease-in-out; -moz-transition: bottom 0.15s ease-in-out; -o-transition: bottom 0.15s ease-in-out; transition: bottom 0.15s ease-in-out; } .highly-on .highly-block-modal { bottom: 50px; left: auto; right: 420px; } .highly-block-modal.highly-open { display: block !important; } .highly-block-modal.highly-open .highly-block-modal-holder { bottom: 0; opacity: 1; -webkit-animation: dropupIn 500ms linear both; animation: dropupIn 500ms linear both; } .highly-block-modal-holder { position: absolute; top: auto; bottom: -70px; left: 0px; width: 410px; padding: 10px; box-sizing: border-box; background: transparent; font-size: 14px; font-family: Helvetica, sans-serif; color: gray; opacity: 0; -webkit-animation: dropupOut 500ms linear both; animation: dropupOut 500ms linear both; cursor: default; } .highly-block-modal-box { background: black; color: white; width: 400px; box-sizing: border-box; padding: 0; border-color: gray; margin: 0 0 0 0; letter-spacing: .1em; border-radius: 5px; text-align: center; } .highly-block-modal-box .highly-title { color: #ff3c00; line-height: 20px; position: relative; padding: 15px 0 0 0; } .highly-block-modal-box .highly-message { color: white; line-height: 20px; } .highly-block-modal-box .highly-btns { margin-top: 15px; } .highly-block-modal-box .highly-btns .highly-btn.highly-btn-row { line-height: 50px; border-top: 1px solid #262626; border-radius: 0; display: block; padding: 0; } .highly-block-modal-box .highly-btns .highly-btn.highly-btn-row:hover { color: #ff3c00; } .highly-block-modal-box .highly-block-modal-close { position: absolute; right: 0; top: 0; color: gray; height: 50px; width: 50px; text-align: center; } .highly-block-modal-box .highly-block-modal-close:hover { color: white; } .highly-block-modal-box .highly-block-modal-close .highly-eyecon { font-size: 20px; line-height: 50px; } .highly-navbar { position: fixed; top: auto; bottom: -50px; left: 0; right: 0; background: black; background: transparent; height: 50px; z-index: 4444444444; font-size: 14px; font-family: Helvetica, sans-serif; color: gray; opacity: 0; cursor: default; box-sizing: border-box; -webkit-transform: translateZ(0); -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; -webkit-animation: dropupOut 500ms linear both; animation: dropupOut 500ms linear both; } .highly-navbar .highly-crowd-control-nux { -webkit-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; background-color: black; bottom: 60px; width: 290px; position: absolute; right: 20px; text-align: center; font-size: 14px; font-family: Helvetica, sans-serif; padding-top: 30px; padding-bottom: 30px; border-radius: 5px; margin-left: 10px; line-height: 20px; font-weight: 300px; display: none; opacity: 0; } .highly-navbar .highly-crowd-control-nux.highly-open { opacity: 1; } .highly-navbar .highly-crowd-control-nux.highly-close, .highly-touch .highly-navbar .highly-crowd-control-nux { opacity: 0; bottom: 260px; pointer-events: none; } .highly-navbar .highly-crowd-control-nux .highly-cc-ropes-img { height: 35px; margin: 15px auto; background: transparent url("https://s3-us-west-1.amazonaws.com/highly/images/foundation/150715/rope.svg") no-repeat center center; background-size: contain; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-highly-title { font-size: 12px; letter-spacing: .09em; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-feature-text { font-size: 20px; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-explanation { color: white; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-img { width: 50px; margin: auto; margin-bottom: 10px; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-ok-btn { padding: 1px 0; margin-top: 20px; } .highly-navbar .highly-crowd-control-nux .highly-crowd-control-nux-ok-btn:hover { color: #ff3c00; } .highly-touch .highly-navbar { height: 70px; } .highly-navbar:before { content: " "; background: black; display: block; position: absolute; top: 0; left: 0; right: 0; bottom: -50px; z-index: -1; border-top: 1px solid #262626; } .highly-touch .highly-navbar:before { background-color: black; } .highly-navbar .highly-dropup { z-index: -2; } .highly-on .highly-navbar { bottom: 0; opacity: 1; -webkit-animation: dropupIn 500ms linear both; animation: dropupIn 500ms linear both; } .highly-navbar.highly-hide { bottom: -50px; opacity: 0; } .highly-navbar.highly-minimize { bottom: -40px; opacity: 1; } .highly-page-settings .highly-navbar, .highly-page-tweet .highly-navbar, .highly-page-login .highly-navbar { bottom: -50px; opacity: 0; -webkit-animation: dropupOut 500ms linear both; animation: dropupOut 500ms linear both; } .highly-navbar.highly-navbar-example { border-color: #1a1a1a; pointer-events: none; } .highly-navbar .highly-navbar-highlight-button { opacity: 0; width: 100%; position: relative; margin-top: -129px; border-radius: 5px; float: left; display: none; color: white !important; font-size: 17px; background: black; text-align: center; padding-top: 10px; padding-bottom: 10px; font-weight: 300; } .highly-navbar .highly-navbar-highlight-button.highly-open { -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; opacity: 1; display: block; } #highly-navbar-privacy-enabled-notification { display: none; color: #ff3c00; background: #000000; border-radius: 5px; position: absolute; right: 0; left: 0; height: 50px; top: -51px; } #highly-navbar-privacy-enabled-notification .highly-label { padding: 0; float: left; padding-left: 10px; height: 100%; line-height: 50px; } #highly-navbar-privacy-enabled-notification .highly-navbar-privacy-enabled-notification-holder { margin: auto; } .highly-jump .highly-btn-tooltip { position: fixed; bottom: 45px; left: 50%; z-index: -2; width: 100px; opacity: 0; pointer-events: none; box-sizing: border-box; -webkit-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; transition: opacity 0.3s ease-in-out, bottom 0.3s ease-in-out; } .highly-jump .highly-btn-tooltip.highly-open { bottom: 55px; opacity: 1; pointer-events: auto; } .highly-touch .highly-jump .highly-btn-tooltip.highly-open { bottom: 80px; } .highly-jump .highly-btn-tooltip:before { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid #ff3c00; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: none; bottom: -5px; left: 50%; margin: 0 0 0 -3px; } .highly-jump .highly-btn-tooltip .highly-eyecon { font-size: 30px; margin: -3px -3px 0 -10px; line-height: 25px; } .highly-navbar-button { height: 50px; width: 40px; text-align: center; cursor: pointer; position: relative; background-color: transparent !important; padding: 0 !important; } .highly-navbar-button.highly-navbar-button-head { width: 50px; } .highly-navbar-button.highly-navbar-button-head:hover { background: transparent; } .highly-navbar-button.highly-navbar-button-head .highly-inner { position: relative; } .highly-navbar-button.highly-navbar-button-head .highly-inner:after { position: absolute; content: " "; z-index: 2; top: 0; right: 0; bottom: 0; left: 0; border-radius: 50%; box-sizing: border-box; border: 1px solid rgba(128, 128, 128, 0.5); } .highly-navbar-button .highly-navbar-button-head-username { display: none; position: absolute; top: 0; left: 0; z-index: 100; line-height: 15px; margin: 17px 0 0 45px; pointer-events: none; white-space: nowrap; } .highly-has-privacy .highly-navbar-button .highly-navbar-button-head-username { margin-top: 9px; } .highly-touch .highly-navbar-button .highly-navbar-button-head-username { display: block; position: absolute; right: 0; } .highly-navbar-button .highly-inner { height: 30px; width: 30px; margin-top: 10px; border-radius: 50%; overflow: hidden; display: inline-block; box-sizing: border-box; } .highly-navbar-button .highly-inner .highly-eyecon { font-size: 30px !important; line-height: 30px !important; } .highly-navbar-button .highly-inner img { max-height: 30px; max-width: 30px; width: 30px; height: 30px; margin: 0; vertical-align: top; padding: 0; z-index: 1; position: relative; border-radius: 50%; overflow: hidden; background: #404040; } .highly-navbar-button:hover { color: white; } .highly-navbar-button:hover#highly-navbar-share-button .highly-inner .highly-eyecon { color: #47d967; } .highly-navbar-button:hover#highly-navbar-summary-button .highly-inner .highly-eyecon { color: #ff3c00; } .highly-navbar-button:hover#highly-navbar-more-button .highly-inner .highly-eyecon { color: white; } .highly-navbar-button#highly-navbar-share-button .highly-inner { margin-top: 11px; } .highly-navbar-button#highly-navbar-share-button.highly-selected .highly-inner .highly-eyecon { color: #47d967; } .highly-navbar-button#highly-navbar-summary-button.highly-selected .highly-inner .highly-eyecon { color: #ff3c00; } .highly-navbar-button#highly-navbar-privacy-button { width: 85px; line-height: 50px; text-align: center; padding: 0 0px !important; box-sizing: border-box; white-space: nowrap; visibility: hidden; opacity: 0; text-transform: uppercase; letter-spacing: .09em; font-size: 12px; font-weight: normal; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; -o-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; } .highly-has-privacy .highly-navbar-button#highly-navbar-privacy-button { visibility: visible; opacity: 1; } .highly-touch .highly-navbar-button#highly-navbar-privacy-button { position: absolute; left: 50px; width: 140px; } .highly-touch .highly-navbar-button#highly-navbar-privacy-button .highly-label { padding: 8px 0 0 0; display: block; text-align: left; } .highly-navbar-button#highly-navbar-privacy-button .highly-loading { color: rgba(128, 128, 128, 0.5); position: absolute; top: 30px; left: 0; right: 0; padding: 0 10px; background: black; visibility: hidden; opacity: 0; pointer-events: none; -webkit-transition: all 0.15s ease-in-out; -moz-transition: all 0.15s ease-in-out; -o-transition: all 0.15s ease-in-out; transition: all 0.15s ease-in-out; } .highly-touch .highly-navbar-button#highly-navbar-privacy-button .highly-loading { text-align: left; padding: 8px 0 0 0; left: 0px; background: black; } .highly-navbar-button#highly-navbar-privacy-button .highly-loading.highly-on { visibility: visible; opacity: 1; top: 0; } .highly-navbar-button#highly-navbar-privacy-button:hover { color: #ff3c00; } .highly-navbar-button#highly-secondary-highlighter-button { position: absolute; left: 45px; top: 15px; height: 20px; width: 20px; z-index: -1; opacity: 1; -webkit-transition: all 0.15s ease-in-out; -moz-transition: all 0.15s ease-in-out; -o-transition: all 0.15s ease-in-out; transition: all 0.15s ease-in-out; } .highly-navbar-button#highly-secondary-highlighter-button.highly-hide { left: 25px; opacity: 0; } .highly-navbar-button#highly-secondary-highlighter-button .highly-inner { margin-top: 0; height: 20px; width: 20px; } .highly-navbar-button#highly-secondary-highlighter-button .highly-inner img { max-height: 20px; max-width: 20px; } .highly-touch .highly-navbar-button#highly-secondary-highlighter-button { height: 30px; width: 30px; } .highly-touch .highly-navbar-button#highly-secondary-highlighter-button .highly-inner { margin-top: 0; height: 30px; width: 30px; } .highly-touch .highly-navbar-button#highly-secondary-highlighter-button .highly-inner img { max-height: 30px; max-width: 30px; } .highly-navbar-button#highly-secondary-highlighter-button:hover { z-index: 2; } .highly-touch .highly-navbar-button { display: none; } la .highly-touch .highly-navbar-button.highly-navbar-button-head { display: block; margin-left: 0px; } .highly-touch .highly-navbar-button#highly-navbar-share-button, .highly-touch .highly-navbar-button#highly-navbar-privacy-button { display: block; } .highly-navbar-sparkline-cover { background: rgba(255, 255, 0, 0.2); background: transparent; position: absolute; top: -1px; left: 0; right: 0; box-sizing: border-box; line-height: 10px; font-size: 10px; height: 27px; cursor: pointer; z-index: 20; display: none; } .highly-touch .highly-navbar-sparkline-cover { display: block; } #highly-navbar-more-highlighters { display: none; } .highly-touch .highly-navbar-has-more-highlighters #highly-navbar-more-highlighters { display: block; } .highly-navbar-more-highlighters { height: 30px; width: 30px; border: 1px solid rgba(128, 128, 128, 0.5); background: transparent; text-align: center; border-radius: 100%; line-height: 29px; font-size: 12px; display: inline-block; margin: 10px 0 0 0; box-sizing: border-box; } .highly-navbar-tiny-logo { position: absolute; font-size: 12px; right: 0; top: 0; width: 0; margin: 0; overflow: hidden; text-transform: uppercase; white-space: nowrap; z-index: 20; line-height: 30px; box-sizing: border-box; padding: 0; opacity: 0; background: black; letter-spacing: .1em !important; color: rgba(128, 128, 128, 0.5) !important; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-minimize .highly-navbar-tiny-logo { width: 60px; opacity: 1; } .highly-has-secondary .highly-navbar-button#highly-navbar-oh-button .highly-inner { position: relative; } .highly-has-secondary .highly-navbar-button#highly-navbar-oh-button .highly-inner:after { border: 2px solid #ff3c00; } .highly-upgrade-box-blackout { background: rgba(0, 0, 0, 0.5); position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: 5px; display: none; pointer-events: auto; } #highly-navbar-privacy.highly-upgrade-open .highly-upgrade-box-blackout { display: block; } .highly-upgrade-box { padding: 10px 15px; line-height: 1.5em; color: white; font-size: 14px; position: relative; } .highly-upgrade-box .highly-privacy-topper { padding-top: 5px; } .highly-touch .highly-upgrade-box .highly-privacy-topper br { display: none; } .highly-upgrade-box .highly-btn.highly-btn-outline { color: white; border-color: rgba(191, 191, 191, 0.5); box-shadow: none; box-sizing: border-box; -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; transition: all 0.1s ease-in-out; } .highly-upgrade-box .highly-btn.highly-btn-outline:hover { border-color: #ff3c00; color: #ff3c00 !important; } .highly-upgrade-box .highly-btn.highly-btn-outline.bounce { padding: 0 18px; border-color: #ff3c00; } .highly-upgrade-box .highly-btn-group-term { margin: 0 30px; padding: 25px 0 30px 0; font-size: 0; } .highly-upgrade-box .highly-btn-group-term .highly-btn { height: 32px; width: 100%; color: white; font-weight: normal; border-color: transparent !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn input[type="radio"] { visibility: hidden; width: 0px; font-size: 0; } .highly-upgrade-box .highly-btn-group-term .highly-btn i.highly-eyecon { display: none !important; width: 30px; margin-left: -15px; } .highly-upgrade-box .highly-btn-group-term .highly-btn i.highly-eyecon-radio { font-size: 27px; color: rgba(128, 128, 128, 0.5); } .highly-upgrade-box .highly-btn-group-term .highly-btn i.highly-eyecon-check { font-size: 32px; color: white; } .highly-upgrade-box .highly-btn-group-term .highly-btn i.highly-eyecon-off { display: inline-block !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn.highly-active { border-color: rgba(128, 128, 128, 0.5) !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn.highly-active i.highly-eyecon-on { display: inline-block !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn.highly-active i.highly-eyecon-off { display: none !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn.highly-submit { margin-top: 10px; border-radius: 5px; background: white; cursor: pointer; } .highly-upgrade-box .highly-btn-group-term .highly-btn.highly-submit:hover { background: #e6e6e6; } .highly-upgrade-box .highly-btn-group-term .highly-plan-item { width: 50%; text-align: center; color: white; display: inline-block; background: rgba(255, 60, 0, 0.25); border-radius: 0; box-sizing: border-box; } .highly-upgrade-box .highly-btn-group-term .highly-plan-item#highly-monthly-item { border-top-left-radius: 5px; border-bottom-left-radius: 5px; } .highly-upgrade-box .highly-btn-group-term .highly-plan-item#highly-yearly-item { border-top-right-radius: 5px; border-bottom-right-radius: 5px; } .highly-upgrade-box .highly-btn-group-term .highly-plan-item:hover { background: rgba(255, 60, 0, 0.5); color: white; } .highly-upgrade-box .highly-btn-group-term .highly-plan-item.highly-active { background: #ff3c00; } .highly-upgrade-box .highly-btn-group-term .highly-also-available-teams { font-size: 12px; } .highly-upgrade-box .highly-btn-group-term .highly-also-available-teams:hover { cursor: pointer; color: white !important; } .highly-upgrade-box .highly-btn-group-term .highly-btn-block + .highly-btn-block { margin-top: 0; } .highly-navbar-privacy-get-item #highly-navbar-privacy-touch-msg { margin: 10px 0 -10px; line-height: 30px; } .highly-navbar-privacy-get-item .highly-btn.highly-btn-outline { border-color: rgba(191, 191, 191, 0.5); box-shadow: none; box-sizing: border-box; -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; transition: all 0.1s ease-in-out; } .highly-navbar-privacy-get-item .highly-btn.highly-btn-outline:hover { border-color: #ff3c00; color: #ff3c00; } .highly-navbar-privacy-get-item .highly-btn.highly-btn-outline.highly-bounce { border-color: #ff3c00; background: #ff3c00; color: white; } .highly-navbar-privacy-get-item .highly-help-cc { position: absolute; height: 14px; display: block; width: 10px; right: 28px; top: 17px; } .highly-navbar-privacy-get-item .highly-help-cc .highly-question-mark { color: gray; font-size: 14px; display: block; width: 30px; line-height: 30px; height: 30px; text-align: center; position: absolute; right: -22px; top: -7px; z-index: 1111111111; pointer-events: auto; cursor: pointer; } .highly-navbar-privacy-get-item .highly-help-cc .highly-question-mark:hover { color: #ff3c00; } .highly-navbar-privacy-get-item #highly-navbar-privacy-touch-close { color: #ff3c00; margin-top: -5px; } .highly-navbar-privacy-get-item .highly-btn { margin: 0 0 20px 0; } .highly-touch .highly-navbar-privacy-get-item .highly-privacy-is-subscribed-header { display: none; } .highly-navbar-privacy-get-item .highly-privacy-is-subscribed-header { padding-left: 8px; } .highly-navbar-privacy-get-item.highly-subscribed .highly-cc-ropes-img, .highly-navbar-privacy-get-item.highly-subscribed #highly-navbar-privacy-get-button, .highly-navbar-privacy-get-item.highly-subscribed #highly-navbar-privacy-touch-msg { display: none; } .highly-navbar-privacy-get-item.highly-subscribed .highly-help { display: inline; } .highly-navbar-privacy-get-item.highly-subscribed .highly-privacy-is-subscribed-header { display: block; } .highly-privacy-option-holder { font-size: 0; text-align: center; padding: 0 5px 10px; } .highly-privacy-description { text-align: center; opacity: 1; height: 100%; position: absolute; width: 100%; height: 50px; box-sizing: border-box; top: 0; color: white !important; background: black; border-radius: 5px 5px 0 0; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-privacy-description.highly-hide { opacity: 0; } .highly-privacy-option-holder .highly-privacy-option { color: white; font-size: 12px; line-height: 30px; font-weight: normal; height: 30px; text-align: center; border-radius: 0; width: 32%; display: inline-block; white-space: nowrap; background: rgba(255, 60, 0, 0.25); } .highly-privacy-option-holder .highly-privacy-option.highly-disabled { opacity: .5; cursor: default; color: rgba(255, 255, 255, 0.5); } .highly-privacy-option-holder .highly-privacy-option.highly-disabled:hover { opacity: .5; color: rgba(255, 255, 255, 0.5); background: rgba(255, 60, 0, 0.25); } .highly-privacy-option-holder .highly-privacy-option.highly-disabled:active { pointer-events: none; } .highly-privacy-option-holder .highly-privacy-option:first-child { border-radius: 5px 0 0 5px; } .highly-privacy-option-holder .highly-privacy-option:last-child { border-radius: 0 5px 5px 0; } .highly-privacy-option-holder .highly-privacy-option span { display: block; } .highly-touch .highly-privacy-option-holder .highly-privacy-option span { display: inline-block; line-height: 30px; } .highly-privacy-option-holder .highly-privacy-option.highly-selected, .highly-privacy-option-holder .highly-privacy-option.highly-selected .highly-name, .highly-privacy-option-holder .highly-privacy-option.highly-selected i.highly-eyecon { color: white; cursor: default; pointer-events: auto; } .highly-privacy-option-holder .highly-privacy-option .highly-name { font-size: 14px; } .highly-privacy-option-holder .highly-privacy-option i.highly-eyecon { color: white; font-size: 30px; margin: 0 -10px 0 0; } .highly-privacy-option-holder .highly-privacy-option .description, .highly-privacy-option-holder .highly-privacy-option i.highly-eyecon { display: none; } .highly-privacy-option-holder .highly-privacy-option:hover { background: rgba(255, 60, 0, 0.5); color: white; text-decoration: none; } .highly-privacy-option-holder .highly-privacy-option:hover .highly-name, .highly-privacy-option-holder .highly-privacy-option:hover i.highly-eyecon { color: white; } .highly-privacy-option-holder .highly-privacy-option.highly-selected { background: #ff3c00; } .highly-teams-option-container .highly-teams-option { text-align: left; line-height: 50px; font-size: 14px; color: #e6e6e6; border-top: 1px solid #262626; padding: 0 15px; cursor: pointer; } .highly-teams-option-container .highly-teams-option.highly-add-team { text-align: center; } .highly-teams-option-container .highly-teams-option .highly-checkbox { height: 30px; width: 30px; margin: 10px -5px 0 0; box-sizing: border-box; border: 1px solid #404040; text-align: center; border-radius: 50%; } .highly-teams-option-container .highly-teams-option .highly-checkbox .highly-eyecon-check-skinny { color: white; display: none; line-height: 30px; font-size: 30px; line-height: 30px; } .highly-teams-option-container .highly-teams-option:hover, .highly-teams-option-container .highly-teams-option:hover i.highly-eyecon { color: white; } .highly-teams-option-container .highly-teams-option.highly-selected .highly-checkbox { background: #ff3c00; border: 0; } .highly-teams-option-container .highly-teams-option.highly-selected .highly-checkbox .highly-eyecon-check { display: block; } .highly-teams-option-container .highly-teams-option i.highly-eyecon { color: white; font-size: 30px; line-height: 50px; } .highly-teams-option-container .highly-teams-option i.highly-eyecon.highly-eyecon-plus-lg { font-size: 20px; } .highly-teams-option-container .highly-teams-option.highly-teams-option-muted { color: gray; } .highly-teams-option-container .highly-teams-option.highly-teams-option-muted i.highly-eyecon { color: gray; } .highly-teams-option-container .highly-teams-option.highly-teams-option-muted:hover, .highly-teams-option-container .highly-teams-option.highly-teams-option-muted:hover i.highly-eyecon { color: white; } .highly-teams-option-container .highly-teams-option.highly-disabled { opacity: .5; cursor: default; color: rgba(255, 255, 255, 0.5); } .highly-teams-option-container .highly-teams-option.highly-disabled:hover { color: inherit !important; } .highly-teams-option-container .highly-teams-option.highly-disabled:active { pointer-events: none !important; } .highly-teams-option-container .highly-teams-option.highly-disabled .highly-team-privacy:hover { color: inherit; } .highly-teams-option-container .highly-teams-option .highly-team-privacy:hover { color: #ff3c00; } .highly-profile-pic { height: 30px; width: 30px; overflow: hidden; border-radius: 50%; float: left; display: block; margin: 5px 20px 0px 10px; position: relative; } .highly-profile-pic img { height: 100%; width: 100%; top: 0; left: 0; margin: 0; position: absolute; padding: 0; background: #404040; } #highly-twitter-avatar-img, .highly-selected-img { background: #404040; position: relative; border-radius: 50%; overflow: hidden; } .highly-selected-img[alt]:after, #highly-twitter-avatar-img[alt]:after, #highly-current-highlighter-picture[alt]:after, #highly-secondary-highlighter-picture[alt]:after, .highly-profile-pic img[alt]:after, .highly-friend-img[alt]:after { display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: gray; color: white; font-family: 'Helvetica'; font-weight: 300; line-height: 2; font-size: 15px; text-transform: uppercase; text-align: center; content: attr(alt); } #highly-highlights-exist-highlighters .highly-selected-img[alt]:after, #highly-highlights-exist-highlighters #highly-twitter-avatar-img[alt]:after, #highly-highlights-exist-highlighters #highly-current-highlighter-picture[alt]:after, #highly-highlights-exist-highlighters #highly-secondary-highlighter-picture[alt]:after, #highly-highlights-exist-highlighters .highly-profile-pic img[alt]:after, #highly-highlights-exist-highlighters .highly-friend-img[alt]:after { font-size: 13px; } .highly-summary .highly-highlights-author .highly-selected-img[alt]:after, .highly-summary .highly-highlights-author #highly-twitter-avatar-img[alt]:after, .highly-summary .highly-highlights-author #highly-current-highlighter-picture[alt]:after, .highly-summary .highly-highlights-author #highly-secondary-highlighter-picture[alt]:after, .highly-summary .highly-highlights-author .highly-profile-pic img[alt]:after, .highly-summary .highly-highlights-author .highly-friend-img[alt]:after { font-size: 30px; } #highly-secondary-highlighter-picture[alt]:after { font-size: 11px; } #highly-twitter-avatar-img[alt]:after, .highly-friend-img[alt]:after { font-size: 17px; border-radius: 50%; } .highly-sparkline-holder, .highly-sparkline-holder-example { position: relative; height: 20px; width: auto; top: auto; margin: 0; -webkit-transition: margin 0.3s ease-in-out; -moz-transition: margin 0.3s ease-in-out; -o-transition: margin 0.3s ease-in-out; transition: margin 0.3s ease-in-out; } .highly-navbar .highly-sparkline-holder, .highly-navbar .highly-sparkline-holder-example { margin: 1px 150px 0px 50px; height: 49px; } .highly-touch .highly-sparkline-holder, .highly-touch .highly-sparkline-holder-example { height: 29px; } .highly-navbar.highly-has-secondary .highly-sparkline-holder, .highly-navbar.highly-has-secondary .highly-sparkline-holder-example { margin-left: 75px; } .highly-touch .highly-navbar.highly-has-secondary .highly-sparkline-holder, .highly-touch .highly-navbar.highly-has-secondary .highly-sparkline-holder-example { margin-left: 5px; } .highly-navbar.highly-has-privacy .highly-sparkline-holder, .highly-navbar.highly-has-privacy .highly-sparkline-holder-example { margin-right: 235px; } .highly-sparkline-holder .highly-sparkline-readtime, .highly-sparkline-holder-example .highly-sparkline-readtime { background: rgba(0, 0, 0, 0.9); white-space: nowrap; text-align: center; padding-left: 3px; padding-right: 10px; } .highly-touch .highly-sparkline-holder .highly-sparkline-readtime, .highly-touch .highly-sparkline-holder-example .highly-sparkline-readtime { background: black; } .highly-sparkline-holder:before, .highly-sparkline-holder-example:before { position: absolute; height: 1px; line-height: 1px; background: #404040; top: 50%; left: 0; right: 0; content: " "; margin-top: -1px; } .highly-sparkline-holder .highly-sparkline, .highly-sparkline-holder .highly-sparkline-pinned, .highly-sparkline-holder-example .highly-sparkline, .highly-sparkline-holder-example .highly-sparkline-pinned { position: absolute; height: 20px; top: 0; left: 0; right: 0; } .highly-navbar .highly-sparkline-holder .highly-sparkline, .highly-navbar .highly-sparkline-holder .highly-sparkline-pinned, .highly-navbar .highly-sparkline-holder-example .highly-sparkline, .highly-navbar .highly-sparkline-holder-example .highly-sparkline-pinned { height: 49px; } .highly-touch .highly-sparkline-holder .highly-sparkline, .highly-touch .highly-sparkline-holder .highly-sparkline-pinned, .highly-touch .highly-sparkline-holder-example .highly-sparkline, .highly-touch .highly-sparkline-holder-example .highly-sparkline-pinned { height: 29px; } .highly-sparkline-holder .highly-sparkline:before, .highly-sparkline-holder .highly-sparkline-pinned:before, .highly-sparkline-holder-example .highly-sparkline:before, .highly-sparkline-holder-example .highly-sparkline-pinned:before { position: absolute; height: 1px; line-height: 1px; background: #404040; top: 50%; left: 0; right: 0; content: " "; margin-top: -1px; } .highly-sparkline-holder .highly-sparkline .highly-sparkline-readtime, .highly-sparkline-holder .highly-sparkline-pinned .highly-sparkline-readtime, .highly-sparkline-holder-example .highly-sparkline .highly-sparkline-readtime, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-sparkline-readtime { font-size: 12px; position: absolute; right: -30px; top: 1px; height: 100%; line-height: 20px; color: gray; width: 30px; padding-left: 10px; } .highly-navbar .highly-sparkline-holder .highly-sparkline .highly-sparkline-readtime, .highly-navbar .highly-sparkline-holder .highly-sparkline-pinned .highly-sparkline-readtime, .highly-navbar .highly-sparkline-holder-example .highly-sparkline .highly-sparkline-readtime, .highly-navbar .highly-sparkline-holder-example .highly-sparkline-pinned .highly-sparkline-readtime { line-height: 49px; } .highly-sparkline-holder .highly-sparkline .highly-spark, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark, .highly-sparkline-holder-example .highly-sparkline .highly-spark, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark { position: absolute; top: 0; height: 20px; z-index: 2; cursor: pointer; min-width: 3px; } .highly-navbar .highly-sparkline-holder .highly-sparkline .highly-spark, .highly-navbar .highly-sparkline-holder .highly-sparkline-pinned .highly-spark, .highly-navbar .highly-sparkline-holder-example .highly-sparkline .highly-spark, .highly-navbar .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark { height: 49px; } .highly-touch .highly-sparkline-holder .highly-sparkline .highly-spark, .highly-touch .highly-sparkline-holder .highly-sparkline-pinned .highly-spark, .highly-touch .highly-sparkline-holder-example .highly-sparkline .highly-spark, .highly-touch .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark { height: 29px; } .highly-sparkline-holder .highly-sparkline .highly-spark:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:after { position: absolute; height: 5px; line-height: 1px; background-color: #ff3c00; top: 50%; width: 100%; margin-top: -3px; content: " "; border-left: 1px solid rgba(0, 0, 0, 0.2); border-right: 1px solid rgba(0, 0, 0, 0.2); -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; transition: all 0.1s ease-in-out; } .highly-has-secondary .highly-sparkline-holder .highly-sparkline .highly-spark:after, .highly-has-secondary .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:after, .highly-has-secondary .highly-sparkline-holder-example .highly-sparkline .highly-spark:after, .highly-has-secondary .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:after { margin-top: -6px; } .highly-sparkline-holder .highly-sparkline .highly-spark.highly-animation-pop:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark.highly-animation-pop:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark.highly-animation-pop:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark.highly-animation-pop:after { -webkit-animation: pop 750ms linear normal both; animation: pop 750ms linear normal both; } .highly-sparkline-holder .highly-sparkline .highly-spark:hover:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:hover:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark:hover:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:hover:after { background-color: #ffcebf; } .highly-sparkline-holder .highly-sparkline .highly-spark:active:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:active:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark:active:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:active:after { background-color: #ff3c00; } .highly-sparkline-holder .highly-sparkline .highly-spark.highly-selected:after, .highly-sparkline-holder .highly-sparkline .highly-spark.highly-hovered:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark.highly-selected:after, .highly-sparkline-holder .highly-sparkline-pinned .highly-spark.highly-hovered:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark.highly-selected:after, .highly-sparkline-holder-example .highly-sparkline .highly-spark.highly-hovered:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark.highly-selected:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark.highly-hovered:after { background-color: #ffcebf; } .highly-sparkline-holder .highly-sparkline-pinned, .highly-sparkline-holder-example .highly-sparkline-pinned { top: 0; opacity: 1; pointer-events: none; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; } .highly-sparkline-holder .highly-sparkline-pinned.highly-hidden, .highly-sparkline-holder-example .highly-sparkline-pinned.highly-hidden { top: -5px; opacity: 0; } .highly-sparkline-holder .highly-sparkline-pinned .highly-spark, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark { top: 0; z-index: 1; pointer-events: auto; } .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:after, .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:after { background-color: #404040; top: 50%; } .highly-has-secondary .highly-sparkline-holder .highly-sparkline-pinned .highly-spark:after, .highly-has-secondary .highly-sparkline-holder-example .highly-sparkline-pinned .highly-spark:after { margin-top: 0px; } .highly-sparkline-holder .highly-sparkline-progress, .highly-sparkline-holder-example .highly-sparkline-progress { position: absolute; top: 50%; left: 0; background: transparent; max-width: 100%; z-index: 1; height: 1px; margin: -1px 0 0 0; overflow: hidden; z-index: 3; pointer-events: none; -webkit-transition: width 0.2s ease-in-out; -moz-transition: width 0.2s ease-in-out; -o-transition: width 0.2s ease-in-out; transition: width 0.2s ease-in-out; } .highly-sparkline-holder .highly-sparkline-progress:before, .highly-sparkline-holder-example .highly-sparkline-progress:before { background-image: -webkit-linear-gradient(left, color-stop(rgba(255, 255, 255, 0) 0%), color-stop(white 100%)); background-image: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, white 100%); background-repeat: repeat-x; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00FFFFFF', endColorstr='#FFFFFFFF', GradientType=1); position: absolute; top: 0; right: 0; width: 120px; height: 1px; display: block; content: " "; overflow: hidden; opacity: .5; } .highly-sparkline-holder:hover .highly-spark:after, .highly-sparkline-holder-example:hover .highly-spark:after { height: 100%; top: 0; margin-top: 0 !important; } .highly-sparkline-holder:hover .highly-spark.highly-selected:hover:after, .highly-sparkline-holder-example:hover .highly-spark.highly-selected:hover:after { background-color: #ffcebf; } .highly-touch .highly-sparkline-holder, .highly-touch .highly-sparkline-holder-example { margin: 1px 55px 10px 70px; } .highly-sparkline-holder-example .highly-sparkline .highly-spark:after { background-color: #ff3c00; } .highly-sparkline-heatmap.highly-sparkline .highly-spark:after { opacity: .4; } .highly-sparkline-heatmap.highly-sparkline .highly-spark:hover:after { opacity: 1; background-color: #ff3c00; } .highly-dropup { position: fixed; bottom: 40px; left: 0; right: 0; background: black; padding: 10px 0 10px 0; line-height: 20px; font-size: 14px; border-bottom: 1px solid gray; letter-spacing: .005em !important; opacity: 0; pointer-events: none; border-radius: 5px; -webkit-box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); -moz-box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); -webkit-animation: dropupOut 800ms linear both; animation: dropupOut 800ms linear both; -webkit-transition: opacity 0.15s ease-in-out; -moz-transition: opacity 0.15s ease-in-out; -o-transition: opacity 0.15s ease-in-out; transition: opacity 0.15s ease-in-out; } .highly-dropup #highly-navbar-privacy-get-button { width: 37%; border-radius: 5px; } .highly-dropup.highly-dropup-right { right: 0; left: auto; } .highly-dropup.highly-dropup-privacy { right: 0px; width: 320px; left: auto; padding-top: 0; font-weight: normal; } .highly-dropup.highly-dropup-privacy .highly-small-rope { height: auto; width: 20px; margin-top: 14px; display: inline; float: left; margin-left: 20%; } .highly-touch .highly-dropup.highly-dropup-privacy { left: 0px; right: 0px; width: auto; bottom: 50px; box-shadow: 0 0 20px 0 rgba(128, 128, 128, 0.35); border-radius: 0; } .highly-touch .highly-dropup.highly-dropup-privacy #highly-navbar-privacy-get-button { margin: 20px 0 10px; } .highly-dropup .highly-item { color: white; display: block; padding: 0 15px; text-decoration: none; pointer-events: none; } .highly-dropup .highly-item:hover { color: white; text-decoration: underline; } .highly-dropup .highly-item.highly-item-more { line-height: 40px; padding: 0; position: relative; padding-left: 200px; min-height: 40px; } .highly-dropup .highly-item.highly-item-more .highly-more-highlights-count, .highly-dropup .highly-item.highly-item-more .highly-more-highlighters-count { position: absolute; color: gray; top: 0; left: 45px; font-size: 12px; } .highly-dropup .highly-item.highly-item-more .highly-more-highlighters-count { left: 0; margin: 5px 0 0 10px; height: 30px; width: 30px; overflow: hidden; border-radius: 50%; border: 1px solid #404040; line-height: 30px; text-align: center; } .highly-dropup .highly-item.highly-item-more .highly-item-user-message { right: 0; left: 80px; color: white; position: absolute; } .highly-dropup .highly-item.highly-item-more:hover, .highly-dropup .highly-item.highly-item-more.highly-selected { text-decoration: none; background: #141414; } .highly-dropup .highly-item.highly-item-more:hover .highly-item-user-message, .highly-dropup .highly-item.highly-item-more.highly-selected .highly-item-user-message { color: #ff3c00; } .highly-dropup .highly-item.highly-item-user { line-height: 40px; padding: 0; position: relative; padding-left: 200px; min-height: 40px; } .highly-dropup .highly-item.highly-item-user .highly-profile-pic, .highly-dropup .highly-item.highly-item-user .highly-profile-count, .highly-dropup .highly-item.highly-item-user .highly-profile-username, .highly-dropup .highly-item.highly-item-user .highly-item-user-message { position: absolute; left: 0; top: 0; } .highly-dropup .highly-item.highly-item-user .highly-profile-pic { margin: 5px 0 0 10px; } .highly-dropup .highly-item.highly-item-user .highly-profile-pic .highly-eyecon-smile-clear { font-size: 30px; background-color: #ff3c00; color: white; } .highly-dropup .highly-item.highly-item-user .highly-profile-count { left: 45px; font-size: 12px; } .highly-dropup .highly-item.highly-item-user .highly-profile-username { left: 80px; width: 125px; overflow: hidden; white-space: nowrap; color: white; text-align: left; } .highly-dropup .highly-item.highly-item-user .highly-item-user-message { right: 0; left: 80px; color: white; } .highly-dropup .highly-item.highly-item-user .highly-item-system-message { position: absolute; right: 0; left: 15px; color: white; } .highly-dropup .highly-item.highly-item-user:hover, .highly-dropup .highly-item.highly-item-user.highly-selected { text-decoration: none; } .highly-dropup .highly-item.highly-item-user:hover .highly-profile-username, .highly-dropup .highly-item.highly-item-user.highly-selected .highly-profile-username { color: #ff3c00; } .highly-dropup .highly-item.highly-btn-disabled { opacity: .5; cursor: default; pointer-events: none !important; } .highly-dropup .highly-item.highly-btn-disabled:hover { color: inherit !important; } .highly-dropup .highly-item .highly-clue { float: right; } .highly-dropup.highly-dropup-users { padding: 5px 0 15px 0; } .highly-dropup.highly-dropup-linklist .highly-item { line-height: 40px; text-align: left; padding: 0 25px; min-width: 80px; } .highly-dropup.highly-dropup-linklist .highly-item:hover { color: #ff3c00; text-decoration: none; background: #141414; } .highly-dropup.highly-open { opacity: 1; bottom: 35px; cursor: default; pointer-events: auto; padding-bottom: 15px; -webkit-animation: dropupIn 500ms linear both; animation: dropupIn 500ms linear both; } .highly-dropup.highly-open .highly-item { pointer-events: auto; } .highly-highlight-menu { height: 60px; position: absolute; display: none; opacity: 0; z-index: 1111111111; color: gray; font-family: Helvetica, sans-serif; top: 40%; left: 0; cursor: default; pointer-events: none; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; -o-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; } .highly-highlight-menu .highly-inner { background-color: #262626; height: 50px; white-space: nowrap; border-radius: 8px; padding: 0; position: relative; margin-top: 10px; -webkit-transition: margin-top 0.2s ease-in-out; -moz-transition: margin-top 0.2s ease-in-out; -o-transition: margin-top 0.2s ease-in-out; transition: margin-top 0.2s ease-in-out; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option { border-right: 1px solid rgba(128, 128, 128, 0.25); display: inline-block; margin: 0 1px 0 -5px; cursor: pointer; vertical-align: top; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option:first-child { border-left: 0; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span { font-size: 30px !important; line-height: 50px !important; height: 50px; width: 50px; text-align: center; display: block; color: white; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-twitter { font-size: 25px !important; border: 0; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-twitter:hover { color: #00bbe4; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-slack:hover { color: #3EB890; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-round { font-size: 25px !important; margin-top: 1px; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-round:hover { color: #47d967; } .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-circles { display: none !important; } .highly-os-windows .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-circles { display: block !important; } .highly-os-windows .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-circles:hover { color: #47d967; } .highly-os-windows .highly-highlight-menu .highly-inner .highly-highlight-menu-option span.highly-eyecon-share-round { display: none !important; } .highly-highlight-menu .highly-highlight-menu-faces { -webkit-transition: opacity 0.3s ease-in-out, top 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out, top 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out, top 0.3s ease-in-out; transition: opacity 0.3s ease-in-out, top 0.3s ease-in-out; position: relative; display: inline-block; height: 50px; width: 42px; margin-bottom: -10px; cursor: default; padding-right: 5px; font-size: 0; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face { position: relative; display: inline-block; margin: 0 2px; padding: 8px 0; cursor: pointer; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face .highly-profile-pic { -webkit-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -moz-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -o-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; transition: height 0.5s ease-in-out, width 0.5s ease-in-out; margin: 2px 0 -2px 0; border: 2px solid transparent; width: 34px; height: 34px; box-sizing: border-box; top: -2px; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face .highly-profile-pic img { left: 15px; margin: 0 0 0 -15px; padding: 0; z-index: 1; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face .highly-profile-pic.highly-animate-avatar { -webkit-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -moz-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -o-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; transition: height 0.5s ease-in-out, width 0.5s ease-in-out; width: 34px; height: 34px; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face .highly-profile-pic.highly-pre-animate-avatar { -webkit-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -moz-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; -o-transition: height 0.5s ease-in-out, width 0.5s ease-in-out; transition: height 0.5s ease-in-out, width 0.5s ease-in-out; width: 0; height: 0; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face .highly-username { position: absolute; top: -15px; opacity: 0; font-size: 11px; text-align: center; width: 100%; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face:hover .highly-profile-pic { border: 2px solid #ff3c00; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-face:hover .highly-username { color: #ff3c00; } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-more { position: relative; display: inline-block; margin: 0 2px; color: gray; border: 1px solid rgba(128, 128, 128, 0.5); border-radius: 50%; width: 33px; height: 33px; line-height: 31px; font-size: 14px; box-sizing: border-box; vertical-align: top; top: 8px; text-align: center; /* &:hover { border-color: $red; } */ } .highly-highlight-menu .highly-highlight-menu-faces .highly-highlight-menu-more.highly-hidden { display: none; } .highly-highlight-menu:hover .highly-highlight-menu-face .highly-username { top: -20px; opacity: 1; } .highly-highlight-menu.highly-highlight-menu-active { pointer-events: auto; opacity: 1; } .highly-highlight-menu.highly-highlight-menu-active .highly-inner { margin-top: 0px; } .highly-highlight-menu.highly-highlight-menu-active .highly-highlight-menu-faces { opacity: 1; } .highly-session .highly-modal { z-index: 55555555555; } .highly-session .highly-error-505 .highly-modal-title-small { border-bottom: 0; margin-bottom: 0; padding-bottom: 0; font-weight: normal; } .highly-settings-logged-in #highly-settings-logged-in-profile { height: 90px; padding: 0 0 15px; } .highly-settings-logged-in #highly-settings-logged-in-profile .highly-row { line-height: 20px; } .highly-settings-logged-in .highly-link-to-profile-label { position: absolute; width: 60px; text-align: center; top: 62px; left: 0; font-size: 12px; cursor: pointer; } .highly-settings-logged-in .highly-link-to-profile-label:hover { color: white; } .highly-settings-logged-in .highly-signout { cursor: pointer; } .highly-settings-logged-in .highly-signout:hover { color: white; text-decoration: none; } .highly-settings-logged-in .highly-profile-pic { width: 60px; height: 60px; margin: 0px 20px 30px 0; } .highly-settings-logged-in .highly-profile-pic img[alt]:after { font-size: 30px; } .highly-settings-logged-in .highly-link-to-profile { color: white; } .highly-settings-logged-in .highly-row-setting .highly-label { color: white; } .highly-value-radio { padding: 0 5px; line-height: 30px; display: inline-block; } .highly-settings-footer { padding: 10px 0; } div.highly-legal { font-size: 11px; line-height: 14px; color: #404040; font-weight: normal; } .highly-badge { position: absolute; left: 25px; top: -30px; border-radius: 12px; background-color: white; border: 1px solid #bfbfbf; color: #bfbfbf; font-size: 10px; font-weight: 300; line-height: 10px; padding: 3px; min-width: 10px; text-align: center; z-index: -3; visibility: hidden; } .highly-badge.highly-badge-right { left: 10px; } .highly-badge.highly-badge-red { border-color: #ff3c00; color: #ff3c00; } .highly-development .highly-badge { visibility: visible; } .highly-hint-key { border: 1px solid #bfbfbf; color: black; text-align: center; width: 30px; height: 30px; border-radius: 3px; display: inline-block; margin: 0 3px; line-height: 30px; font-weight: 300; vertical-align: middle; } .highly-hint-key.highly-hint-key-space { width: 95px; } .highly-hint-key.highly-hint-key-red { color: #ff3c00; } .highly-hint-key.highly-hint-key-green { color: #47d967; } .highly-hint-key.highly-hint-key-flat { border: 0; background: gray; } .highly-undo { z-index: 3333333333; outline: 0; position: fixed; bottom: 64px; left: 15px; text-align: right; background: black; color: white !important; padding: 0px; font-family: Helvetica, sans-serif; font-size: 14px; line-height: 30px; opacity: 0; pointer-events: none; -webkit-transition: opacity 0.4s ease-in-out; -moz-transition: opacity 0.4s ease-in-out; -o-transition: opacity 0.4s ease-in-out; transition: opacity 0.4s ease-in-out; -webkit-animation: slideOutFromLeft 1400ms linear both; animation: slideOutFromLeft 1400ms linear both; } .highly-undo .highly-btn.highly-btn-outline { background: black; border-color: gray; color: gray; line-height: 23px; } .highly-undo .highly-btn.highly-btn-outline .highly-eyecon { float: right; font-size: 30px; line-height: 23px; margin: 0 -5px 0 5px; } .highly-undo .highly-btn.highly-btn-outline:hover { color: #ff3c00; border-color: #ff3c00; } .highly-undo .highly-undo-close { float: right; color: gray; background: transparent; padding: 0; min-width: inherit; margin: 0px -50px 0px 0px; height: 50px; width: 50px; line-height: 50px; } .highly-undo .highly-undo-close:hover { color: white; } .highly-undo .highly-undo-close .highly-eyecon { font-size: 20px; line-height: 30px; } .highly-undo.highly-open { opacity: 1; pointer-events: auto; -webkit-animation: slideInFromLeft 800ms linear both; animation: slideInFromLeft 800ms linear both; } .highly-clue { float: right; color: gray; width: 40px; text-align: center; margin: 0 -25px 0 10px; font-size: 14px; } .highly-hint { z-index: 2222222222; outline: 0; position: fixed; top: 15px; right: 15px; text-align: right; background: transparent; color: white; padding: 0; font-family: Helvetica, sans-serif; font-size: 14px; line-height: 30px; opacity: 0; pointer-events: none; cursor: default; -webkit-box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); -moz-box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); box-shadow: 0 0 3px rgba(255, 255, 255, 0.35); -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; -webkit-animation: slideOutFromRight 1800ms linear both; animation: slideOutFromRight 1800ms linear both; } .highly-hint .highly-hint-key { color: white; } .highly-hint .highly-hint-tour-circle { background: white; height: 20px; width: 20px; border-radius: 50%; line-height: 20px; margin: 0 auto 5px; display: block; } .highly-hint .highly-hint-tour-circle.highly-grow { -webkit-animation: grow 1.5s infinite, opacityCycle 1.5s infinite; animation: grow 1.5s infinite, opacityCycle 1.5s infinite; } .highly-hint .highly-hint-tour-circle .highly-eyecon { color: #ff3c00; font-size: 25px !important; line-height: 20px; margin: 2px 0 0 -2px !important; } .highly-hint .highly-hint-tour-state { letter-spacing: inherit; } .highly-hint div.highly-hint-message { white-space: nowrap; float: right; color: #bfbfbf; background: black; padding: 10px 50px 10px 15px; border: 1px solid gray; border-radius: 5px; } .highly-hint div.highly-hint-message span, .highly-hint div.highly-hint-message div { color: #bfbfbf; font-family: Helvetica, sans-serif; } .highly-hint div.highly-hint-message span.highly-white, .highly-hint div.highly-hint-message div.highly-white { color: white; } .highly-hint div.highly-hint-message .highly-eyecon-lock { font-size: 30px; float: left; margin: 5px 5px 0 -10px; } .highly-hint div.highly-hint-message .highly-throbber { position: absolute; left: 14px; top: 0; width: auto; z-index: 2; } .highly-hint div.highly-hint-message .highly-throbber:after { width: 34px; height: 34px; } .highly-hint div.highly-hint-message .highly-maker-true { padding-left: 35px; } .highly-hint div.highly-hint-message.highly-link:hover { color: #ff3c00; text-decoration: none; } .highly-hint div.highly-hint-message#highly-hint-message-login:hover { border-color: white; color: white; } .highly-hint div.highly-hint-message#highly-hint-message-login .highly-white { font-weight: bold; padding-left: 10px; } .highly-hint div.highly-hint-message#highly-hint-message-login .highly-btn { border-radius: 0; padding: 10px; padding: 10px 15px; min-width: inherit; } .highly-hint div.highly-hint-message#highly-hint-message-login .highly-btn#highly-hint-login-signin { border-left: 1px solid #404040; color: white; } .highly-hint div.highly-hint-message#highly-hint-message-login .highly-btn:hover, .highly-hint div.highly-hint-message#highly-hint-message-login .highly-btn:hover .highly-white, .highly-hint div.highly-hint-message#highly-hint-message-login .highly-btn:hover span { color: #ff3c00 !important; } .highly-hint div.highly-hint-message#highly-hint-message-missing { padding: 10px 120px 10px 20px; cursor: pointer; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-primary, .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary { opacity: 0; height: 0; width: 0; pointer-events: none; padding: 0; box-sizing: border-box; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; -o-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-primary.highly-open, .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary.highly-open { opacity: 1; height: auto; width: auto; pointer-events: auto; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary.highly-open { cursor: default; margin-right: -60px; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-primary span.highly-gray, .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-primary span.highly-underline { color: gray; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-hint-missing-info-button { min-width: inherit; margin: 3px -75px 0 10px; width: 35px; height: 35px; line-height: 25px; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-hint-missing-info-button:hover { color: #ff3c00; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-eyecon-target { font-size: 50px; margin: -5px 5px -5px -15px; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary { float: left; margin: -35px -10px 0 0; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-lead, .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-lead span { color: #ff3c00; font-weight: bold; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-nowrap { font-size: 14px; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-nowrap .highly-gray { color: gray; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-message-secondary-action { margin: 15px 0 -10px 0; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-message-secondary-action .highly-btn-row { border-top: 1px solid #404040; border-radius: 0; display: block; text-align: left; padding: 10px 0; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-message-secondary-action .highly-btn-row:hover { color: #ff3c00; } .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-message-secondary-action .highly-btn-row .highly-eyecon-target, .highly-hint div.highly-hint-message#highly-hint-message-missing .highly-message-secondary .highly-message-secondary-action .highly-btn-row .highly-eyecon { color: #ff3c00; font-size: 30px; margin: -4px 5px 0 0px; } .highly-hint div.highly-hint-message#highly-hint-message-blocked:hover { border-color: #ff3c00; cursor: pointer; } .highly-hint div.highly-hint-message#highly-hint-message-blocked .highly-eyecon-block { color: #ff3c00; font-size: 30px; margin: 0 5px 0 0; vertical-align: middle; } .highly-hint div.highly-hint-message.highly-hint-ios-native-highlight { top: inherit; bottom: 75px; } .highly-hint div.highly-hint-message.highly-hint-message-error, .highly-hint div.highly-hint-message.highly-hint-message-twoline { line-height: 20px; text-align: left; padding: 8px 50px 8px 15px; } .highly-hint div.highly-hint-message.highly-hint-message-error .highly-profile-pic, .highly-hint div.highly-hint-message.highly-hint-message-twoline .highly-profile-pic { margin-top: 5px; } .highly-hint div.highly-hint-message.highly-hint-message-twoline { padding: 10px 95px 10px 20px; } .highly-hint div.highly-hint-message .highly-profile-pic { margin: 0 10px 0 -5px; } .highly-hint div.highly-hint-message .highly-profile-pic .highly-profile-pic-img { left: 0; } .highly-hint div.highly-hint-message .highly-profile-pic-img { z-index: 1; } .highly-hint div.highly-hint-message.highly-hint-message-blue { background: #00aced; color: white; border-color: #3bc9ff; } .highly-hint div.highly-hint-message.highly-hint-message-blue .highly-eyecon-twitter { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-blue span { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-green { background: #47d967; color: white; border-color: #86e69b; } .highly-hint div.highly-hint-message.highly-hint-message-green .highly-eyecon-smile-clear { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-green span { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-red { background: #ff3c00; color: white; border-color: #ff774d; } .highly-hint div.highly-hint-message.highly-hint-message-red .highly-eyecon-smile-clear { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-red .highly-eyecon { font-size: 25px; vertical-align: middle; margin: -3px 5px 0 0; } .highly-hint div.highly-hint-message.highly-hint-message-red span { color: white; } .highly-hint div.highly-hint-message.highly-hint-message-red .highly-copy-text-inner { color: #ffd8cc; } .highly-hint div.highly-hint-message.highly-hint-tour { border: 0; } .highly-hint div.highly-hint-message#highly-ios-nux-tour-gif { padding: 0; width: 35%; position: absolute; right: 2%; } .highly-hint div.highly-hint-message#highly-ios-nux-tour-gif img { width: 100%; } .highly-hint.highly-hint-centered { left: 15px; -webkit-transition-property: none; -moz-transition-property: none; -o-transition-property: none; transition-property: none; } .highly-hint.highly-hint-centered div.highly-hint-message { text-align: center; float: none; padding: 15px; } .highly-hint.highly-hint-centered div.highly-hint-message.highly-allcaps { line-height: 20px; font-size: 12px; } .highly-hint.highly-non-closable div.highly-hint-message { padding-right: 15px; } .highly-hint.highly-non-closable div.highly-hint-message#highly-hint-message-login { padding: 0; } .highly-hint.highly-non-closable div.highly-hint-message-twoline { padding-right: 55px; } .highly-hint .highly-eyecon-highlighter { color: #ff3c00; font-size: 20px; display: block; float: left; width: 20px; text-align: center; margin: 5px 5px 0 -5px; } .highly-hint .highly-eyecon-twitter, .highly-hint .highly-eyecon-smile-clear { color: #00aced; font-size: 27px; margin: -4px 5px 0 -3px; vertical-align: middle; } .highly-hint .highly-eyecon-smile-clear { color: #47d967; margin: -3px 0px 0 -8px; font-size: 35px; } .highly-hint .highly-eyecon-check { font-size: 40px; color: #47d967; line-height: 30px; vertical-align: middle; float: left; margin: 0 0 0 -10px; } .highly-hint .highly-eyecon-wrench { color: #ff3c00; font-size: 27px; margin: -2px 5px -2px -5px; vertical-align: middle; } .highly-hint .highly-hint-close { position: absolute; right: 0; top: 50%; color: rgba(255, 255, 255, 0.5); background: transparent; padding: 0; min-width: inherit; margin: -25px 0 0 0; height: 50px; width: 50px; box-shadow: none; } .highly-hint .highly-hint-close:hover { color: white; } .highly-hint .highly-hint-close .highly-eyecon { font-size: 20px; line-height: 30px; } .highly-hint.highly-non-closable .highly-hint-close { display: none; } .highly-hint .highly-btn-outline { padding: 5px 10px; min-width: 100px; display: inline-block; line-height: 18px; box-sizing: border-box; margin-left: 5px; } .highly-hint .highly-btn-outline .highly-eyecon { font-size: 20px; margin-top: -4px; } .highly-hint #highly-trouble-sending-email { color: #ff3c00; font-weight: bold; } .highly-hint .highly-ios-longtap-tip { padding-left: 0; line-height: 20px; } .highly-hint .highly-ios-longtap-tip .highly-ios-longtap-gif { display: inline-block; height: 40px; float: left; } .highly-hint .highly-ios-longtap-tip .highly-ios-longtap-tip-message { position: relative; width: 50%; display: inline-block; text-align: left; } .highly-hint.highly-open { opacity: 1; pointer-events: auto; -webkit-animation: slideInFromRight 800ms linear both; animation: slideInFromRight 800ms linear both; } .highly-hint.highly-open .highly-hint-ios-native-highlight { -webkit-animation: none; animation: none; } .highly-modal { z-index: 3333333333; overflow: hidden; outline: 0; position: fixed; top: 0; right: 0; bottom: 0; left: 0; font-family: Helvetica, sans-serif; cursor: default; pointer-events: none; opacity: 0; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; -o-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; } .highly-modal.highly-modal-open { overflow-x: hidden; overflow-y: auto; display: block; pointer-events: auto; opacity: 1; } .highly-modal.highly-modal-tour { z-index: 55555555555; -webkit-transition: top 0.6s ease-in-out; -moz-transition: top 0.6s ease-in-out; -o-transition: top 0.6s ease-in-out; transition: top 0.6s ease-in-out; } .highly-tour-top-bar-open .highly-modal.highly-modal-tour { top: 75px; } .highly-modal a, .highly-modal a:visited, .highly-modal a:active, .highly-modal a:link { color: gray !important; text-decoration: none; } .highly-modal a:hover, .highly-modal a:visited:hover, .highly-modal a:active:hover, .highly-modal a:link:hover { color: white !important; text-decoration: none; } .highly-modal.highly-modal-white a, .highly-modal.highly-modal-white a:visited, .highly-modal.highly-modal-white a:active, .highly-modal.highly-modal-white a:link { color: black !important; text-decoration: none; } .highly-modal.highly-modal-white a:hover { color: #ff3c00 !important; text-decoration: none; } .highly-modal.highly-modal-white a.highly-red-link { color: #ff3c00 !important; } .highly-modal.highly-modal-white a.highly-red-link:hover { color: #d63200 !important; } .highly-modal .highly-btn-outline { background: transparent; color: white; } .highly-modal .highly-header { font-size: 18px; color: white; } .highly-modal .highly-row { line-height: 30px; padding: 15px 0; border-bottom: 1px solid #404040; } .highly-modal .highly-row.highly-row-no-border { border: none; } .highly-modal .highly-row .highly-row { padding: 0; border: none; } .highly-modal .highly-row-link { display: block; } .highly-modal#highly-dialog-modal .highly-btn { display: none; } .highly-modal#highly-dialog-modal .highly-btn.highly-active { display: inline; } .highly-modal#highly-dialog-modal #highly-modal-aext-nux-img-holder { margin: 0 -15px; } .highly-modal#highly-dialog-modal #highly-modal-aext-nux-img-holder img { max-width: 100%; } .highly-modal-native-dialog-hint { color: white; font-size: 12px; text-transform: uppercase; letter-spacing: .1em !important; line-height: 25px; padding: 10px 0; text-align: center; position: relative; height: 250px; box-sizing: border-box; } .highly-modal-native-dialog-hint .highly-modal-native-dialog-hint-message { color: white; line-height: 45px; margin-bottom: 50px; } .highly-modal-img-holder { text-align: center; padding: 30px 0; } .highly-modal-img-holder .highly-modal-img { width: 50px; } .highly-modal-backdrop { position: fixed; top: 0; right: 0; left: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); transition: opacity .15s linear; box-sizing: border-box; opacity: .97; -webkit-transform: translateZ(0); } .highly-modal-white .highly-modal-backdrop { background: white; } .highly-modal-tour .highly-modal-backdrop { background: white; opacity: 1; } .highly-tour-top-bar-open .highly-modal-backdrop { -webkit-transition: top 0.6s ease-in-out; -moz-transition: top 0.6s ease-in-out; -o-transition: top 0.6s ease-in-out; transition: top 0.6s ease-in-out; top: 75px; } .highly-modal-loading-holder { position: absolute; top: 0; right: 0; left: 0; bottom: 0; background: rgba(0, 0, 0, 0.85); z-index: 3; display: none; } .highly-modal-loading-holder .highly-throbber { height: 30px; width: 30px; position: absolute; left: 50%; top: 35%; margin: -15px 0 0 -15px; content: "YO"; } .highly-modal-loading .highly-modal-loading-holder { display: block; } .highly-modal-close { width: 60px; height: 60px; text-align: center; padding: 0; cursor: pointer; background: 0 0; border: 1px solid transparent; border-radius: 50%; position: fixed; top: 15px; left: 15px; z-index: 2; color: white; box-shadow: none; } .highly-modal-close .highly-eyecon { color: gray; width: 100%; height: 100%; font-size: 25px; line-height: 57px; -webkit-transition: color 0.2s ease-in-out; -moz-transition: color 0.2s ease-in-out; -o-transition: color 0.2s ease-in-out; transition: color 0.2s ease-in-out; } .highly-modal-close:hover, .highly-modal-close:hover .highly-eyecon { color: white; background-color: transparent; } .highly-modal-white .highly-modal-close:hover, .highly-modal-white .highly-modal-close:hover .highly-eyecon { color: black; } .highly-modal-close:focus { outline: none; } .highly-modal-close-companion { position: fixed; top: 20px; right: 30px; } .highly-modal-close + .highly-modal-close-companion { right: 85px; } .highly-modal-content-holder { transform: translate(0, 0); } .highly-modal-content { transform: translate(0, 0); width: 400px; padding: 100px 0 0; margin: 30px auto; position: relative; box-sizing: border-box; color: white; font-size: 14px; text-align: left; -webkit-animation: modalOut 500ms linear both; animation: modalOut 500ms linear both; } .highly-modal-open .highly-modal-content { -webkit-animation: modalIn 300ms linear both; animation: modalIn 300ms linear both; } .highly-modal-content.highly-modal-content-500 { width: 500px; max-width: 100%; } .highly-modal-content.highly-modal-content-600 { width: 600px; max-width: 100%; } .highly-modal-content.highly-modal-content-650 { width: 650px; max-width: 100%; } .highly-modal-content.highly-modal-content-750 { width: 750px; max-width: 100%; } .highly-modal-content.highly-modal-content-centered { text-align: center; } div.highly-modal-title { font-size: 30px; font-weight: bold; line-height: 30px; border-bottom: 0; margin: 0 0 15px; color: white; border-bottom: 1px solid #404040; padding: 0 0 15px 0; } div.highly-modal-title.highly-modal-title-large { font-size: 60px; line-height: 50px; color: white; } div.highly-modal-title.highly-modal-title-small { font-size: 20px; line-height: 20px; } div.highly-modal-title .highly-modal-title-subline { font-weight: 300; padding: 30px 0 60px 0; font-size: 20px; } .highly-modal-white div.highly-modal-title { color: #404040; border-bottom-color: #e6e6e6; } .highly-modal-message { color: #bfbfbf; margin: 0 0 30px 0; } .highly-white-back { background: white; } .highly-form-group { margin: 0 0 1px 0; position: relative; height: 45px; } .highly-form-group:before { display: table; content: " "; } .highly-form-group.highly-left-inner-addon .highly-eyecon { position: absolute; line-height: 45px; pointer-events: none; width: 45px; text-align: center; font-size: 22px; color: #bfbfbf; z-index: 2; top: 0; left: 0; } .highly-form-group.highly-left-inner-addon:after { content: " "; height: 1px; background: #e3e1df; position: absolute; bottom: -1px; right: 0; display: block; left: 15px; } .highly-form-group:last-child:after { display: none; } .highly-form-control, input[type='text'].highly-form-control, input[type='email'].highly-form-control, input[type='password'].highly-form-control { font-family: Helvetica, sans-serif; height: 45px; border: 0; border-radius: 0; box-shadow: none; display: block; width: 100%; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #404040; background-color: white; background-image: none; box-sizing: border-box; letter-spacing: 0 !important; font-weight: normal; text-transform: inherit; } .highly-form-control:focus, input[type='text'].highly-form-control:focus, input[type='email'].highly-form-control:focus, input[type='password'].highly-form-control:focus { box-shadow: none; outline: none; color: inherit; } .highly-left-inner-addon .highly-form-control, .highly-left-inner-addon input[type='text'].highly-form-control, .highly-left-inner-addon input[type='email'].highly-form-control, .highly-left-inner-addon input[type='password'].highly-form-control { padding-left: 45px !important; } .highly-form-error { padding: 15px 0; font-size: 14px; line-height: 20px; color: #ff3c00; } .highly-form-group-submit { padding-top: 15px; } .highly-btn, input[type="button"].highly-btn { border: 0; font-family: Helvetica, sans-serif; font-size: 14px; font-weight: 300; border-radius: 24px; margin-bottom: 0; padding: 10px 20px; line-height: 25px; min-width: 60px; text-align: center; white-space: nowrap; vertical-align: middle; display: inline-block; touch-action: manipulation; cursor: pointer; width: auto; box-shadow: none; height: auto; text-transform: none; } .highly-btn:hover, input[type="button"].highly-btn:hover { text-decoration: none !important; box-shadow: none; } .highly-btn:focus, input[type="button"].highly-btn:focus { outline: none; } .highly-btn.highly-btn-sm, input[type="button"].highly-btn.highly-btn-sm { padding: 5px 10px; min-width: inherit; line-height: 20px; } .highly-btn.highly-btn-md, input[type="button"].highly-btn.highly-btn-md { padding: 0 15px; font-size: 14px; min-width: inherit; line-height: 30px; } .highly-btn.highly-btn-lg, input[type="button"].highly-btn.highly-btn-lg { padding: 15px 25px; min-width: inherit; line-height: 30px; } .highly-btn.highly-btn-round, input[type="button"].highly-btn.highly-btn-round { height: 60px; width: 60px; min-width: initial; border-radius: 30px; line-height: 60px; padding: 0; text-align: center; } .highly-btn.highly-btn-round .highly-eyecon, input[type="button"].highly-btn.highly-btn-round .highly-eyecon { font-size: 30px; line-height: 58px; } .highly-btn.highly-btn-block, input[type="button"].highly-btn.highly-btn-block { display: block; width: 100%; } .highly-btn.highly-btn-default, input[type="button"].highly-btn.highly-btn-default { background: #bfbfbf; color: black; } .highly-btn.highly-btn-default:hover, input[type="button"].highly-btn.highly-btn-default:hover { background: #a6a6a6; } .highly-btn.highly-btn-red, input[type="button"].highly-btn.highly-btn-red { background: #ff3c00; color: white; } .highly-btn.highly-btn-red:hover, input[type="button"].highly-btn.highly-btn-red:hover { background: #e63600; } .highly-btn.highly-btn-green, input[type="button"].highly-btn.highly-btn-green { background: #47d967; color: white; } .highly-btn.highly-btn-green:hover, input[type="button"].highly-btn.highly-btn-green:hover { background: #32d556; } .highly-btn.highly-btn-outline, input[type="button"].highly-btn.highly-btn-outline { border: 1px solid #404040; } .highly-btn.highly-btn-outline:hover, input[type="button"].highly-btn.highly-btn-outline:hover { border-color: white; } .highly-modal-white .highly-btn.highly-btn-outline, .highly-modal-white input[type="button"].highly-btn.highly-btn-outline { border: 1px solid gray; background: white; color: gray; } .highly-modal-white .highly-btn.highly-btn-outline:hover, .highly-modal-white input[type="button"].highly-btn.highly-btn-outline:hover { border-color: #ff3c00; color: #ff3c00 !important; } .highly-modal-white .highly-btn.highly-btn-outline:focus, .highly-modal-white .highly-btn.highly-btn-outline:active, .highly-modal-white input[type="button"].highly-btn.highly-btn-outline:focus, .highly-modal-white input[type="button"].highly-btn.highly-btn-outline:active { color: #cc3000; border-color: #cc3000; } .highly-btn.highly-btn-outline-red, input[type="button"].highly-btn.highly-btn-outline-red { border: 1px solid #404040; } .highly-btn.highly-btn-outline-red:hover, input[type="button"].highly-btn.highly-btn-outline-red:hover { border-color: #ff3c00; } .highly-btn.highly-btn-clear, input[type="button"].highly-btn.highly-btn-clear { background: transparent; color: gray; } .highly-btn.highly-btn-clear:hover, input[type="button"].highly-btn.highly-btn-clear:hover { color: white; background: transparent; } .highly-btn.highly-btn-twitter, input[type="button"].highly-btn.highly-btn-twitter { background: #00aced; color: white; } .highly-btn.highly-btn-twitter:hover, input[type="button"].highly-btn.highly-btn-twitter:hover { background: #0087ba; color: white; } .highly-btn.highly-btn-dark, input[type="button"].highly-btn.highly-btn-dark { background: #262626; color: gray; } .highly-btn.highly-btn-dark:hover, input[type="button"].highly-btn.highly-btn-dark:hover { background: #2e2e2e; color: white; } .highly-btn:disabled, .highly-btn.highly-btn-disabled, input[type="button"].highly-btn:disabled, input[type="button"].highly-btn.highly-btn-disabled { background: #1a1a1a; color: #404040; opacity: 1; cursor: default; } .highly-btn:disabled:hover, .highly-btn.highly-btn-disabled:hover, input[type="button"].highly-btn:disabled:hover, input[type="button"].highly-btn.highly-btn-disabled:hover { background: #1a1a1a; color: #404040; } .highly-modal-white .highly-btn:disabled, .highly-modal-white .highly-btn.highly-btn-disabled, .highly-modal-white input[type="button"].highly-btn:disabled, .highly-modal-white input[type="button"].highly-btn.highly-btn-disabled { background: white; color: #bfbfbf; opacity: 1; cursor: default; border: 1px solid #bfbfbf; } .highly-modal-white .highly-btn:disabled:hover, .highly-modal-white .highly-btn.highly-btn-disabled:hover, .highly-modal-white input[type="button"].highly-btn:disabled:hover, .highly-modal-white input[type="button"].highly-btn.highly-btn-disabled:hover { background: white; color: #bfbfbf; } .highly-btn .highly-eyecon, input[type="button"].highly-btn .highly-eyecon { vertical-align: middle; } .highly-btn .highly-eyecon.highly-eyecon-highlighter, .highly-btn .highly-eyecon.highly-eyecon-chat, input[type="button"].highly-btn .highly-eyecon.highly-eyecon-highlighter, input[type="button"].highly-btn .highly-eyecon.highly-eyecon-chat { font-size: 30px; width: 30px; height: 25px; line-height: 25px; margin: 0 0 0 -10px; } .highly-btn .highly-eyecon.highly-eyecon-highlighter, input[type="button"].highly-btn .highly-eyecon.highly-eyecon-highlighter { font-size: 20px; } .highly-value-radio { color: gray; cursor: pointer; } .highly-value-radio:hover { color: white; } .highly-value-radio.highly-selected { color: red; cursor: default; } .highly-value-radio.highly-selected:hover { color: #ff3c00; } .highly-summary .highly-modal-content { padding-top: 0; } .highly-summary .highly-modal-title { color: white; font-weight: 300; padding: 5px 0; margin: 0; border: none; font-size: 24px; line-height: 1.5em; } .highly-summary .highly-article-summary-details { display: block; -webkit-font-smoothing: antialiased; } .highly-summary .highly-highlights-author { padding: 10px 0; max-height: 60px; overflow: hidden; font-size: 14px; line-height: 40px; box-sizing: border-box; margin-bottom: 10px; } .highly-summary .highly-highlights-author .highly-profile-pic { float: left; width: 60px; height: 60px; margin: -10px 10px -10px 0; background: transparent; overflow: hidden; display: inline-block; vertical-align: middle; position: relative; box-sizing: border-box; } .highly-summary .highly-highlights-author .highly-profile-pic .highly-profile-pic-img { position: absolute; top: 0px; left: 0px; background: black; border: 1px solid rgba(128, 128, 128, 0.5); box-sizing: border-box; border-radius: 50%; width: 60px; background: #404040; } .highly-summary .highly-article-summary-current-highlighter-info { line-height: 40px; color: gray; position: relative; -webkit-font-smoothing: antialiased; } .highly-summary .highly-article-summary-current-highlighter-info a { color: gray; } .highly-highlights-list .highly-highlights-list-item { position: relative; padding: 8px 40px 5px 15px; text-decoration: none; margin: 0 0 1px 0; border-top: 1px solid #bfbfbf; -webkit-transition: border-color 0.2s ease-in-out; -moz-transition: border-color 0.2s ease-in-out; -o-transition: border-color 0.2s ease-in-out; transition: border-color 0.2s ease-in-out; } .highly-highlights-list .highly-highlights-list-item:last-child { margin-bottom: 90px; } .highly-highlights-list .highly-highlights-list-item:before { content: " "; position: absolute; top: 0px; background: white; bottom: 29px; left: 0; right: 0; min-height: 50px; -webkit-transition: background-color 0.2s ease-in-out; -moz-transition: background-color 0.2s ease-in-out; -o-transition: background-color 0.2s ease-in-out; transition: background-color 0.2s ease-in-out; } .highly-highlights-list .highly-highlights-list-item:after { content: " "; position: absolute; background: rgba(255, 60, 0, 0); top: -1px; bottom: -1px; left: 0; width: 0px; z-index: 2; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; } .highly-highlights-list .highly-highlights-list-item.highly-my-highlight:after { background: #ff3c00; width: 3px; left: -3px; } .highly-highlights-list .highly-highlights-list-item .highly-content { color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 24px; line-height: 1.5em; background-color: white; box-shadow: 10px 0 0 white, -15px 0 0 white; padding: 7px 0 12px 0; position: relative; z-index: 2; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; } .highly-highlights-list .highly-highlights-list-item .highly-content .highly-content-text { color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 24px; line-height: 1.5em; } .highly-highlights-list .highly-highlights-list-item .highly-content:hover { text-decoration: none; } .highly-highlights-list .highly-highlights-list-item .highly-content:hover .highly-content-text { text-decoration: none; color: #ff3c00; } .highly-highlights-list .highly-highlights-list-item .highly-content sup { padding: 0 4px 0 6px; font-size: 17px; font-family: Helvetica, sans-serif; border-radius: 10px; top: 0; color: gray; display: inline-block; vertical-align: baseline; line-height: 0; } .highly-highlights-list .highly-highlights-list-item.highly-selected .highly-content { background-color: #ffcebf; box-shadow: 10px 0 0 #ffcebf, -15px 0 0 #ffcebf; } .highly-highlights-list .highly-highlights-list-item.highly-selected:before { background-color: #ffcebf; } .highly-highlights-list .highly-highlights-list-item.highly-hovered .highly-content { color: #ff3c00; } .highly-highlights-list .highly-highlights-list-item .highly-highlight-share { color: gray; margin-left: 0; opacity: 0; position: absolute; bottom: -1px; top: -1px; left: -130px; width: 60px; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-highlights-list .highly-highlights-list-item .highly-highlight-share .highly-eyecon { position: absolute; top: 50%; left: 15px; width: 30px; height: 30px; margin: -17px 0 0 0; line-height: 30px; font-size: 30px; } .highly-highlights-list .highly-highlights-list-item .highly-highlight-share:hover { opacity: 1 !important; } .highly-highlights-list .highly-highlights-list-item .highly-highlight-share:hover .highly-eyecon { color: #47d967; cursor: pointer; } .highly-highlights-list .highly-highlights-list-item:hover:after { left: -70px; width: 70px; opacity: 0; } .highly-highlights-list .highly-highlights-list-item:hover .highly-rehighlighter { opacity: 1; background: rgba(255, 60, 0, 0.13); } .highly-highlights-list .highly-highlights-list-item:hover .highly-highlight-share { opacity: .4; margin-left: 0; } .highly-highlights-list .highly-highlights-list-item:hover .highly-top-highlight-hint .highly-top-highlight-hint-holder { margin-top: 0; opacity: 1; -webkit-transition: all 0.2s ease-in-out; -moz-transition: all 0.2s ease-in-out; -o-transition: all 0.2s ease-in-out; transition: all 0.2s ease-in-out; -webkit-transition-delay: 1s; /* Safari */ transition-delay: 1s; } .highly-summary .highly-highlights-list { padding: 15px 0 0; } .highly-summary .highly-highlights-list .highly-rehighlighter { position: absolute; top: 0; left: -70px; width: 70px; height: auto; bottom: 0; z-index: 3; opacity: 0; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action { left: 0; top: -1px; bottom: -1px; background: transparent; height: 100%; display: -webkit-box; display: -webkit-flex; display: -moz-box; display: -ms-flexbox; display: flex; -webkit-box-align: center; -webkit-align-items: center; -moz-box-align: center; -ms-flex-align: center; align-items: center; -webkit-box-pack: center; -webkit-justify-content: center; -moz-box-pack: center; -ms-flex-pack: center; justify-content: center; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action .highly-eyecon { position: initial; color: gray; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action .highly-eyecon.highly-eyecon-highlighter { font-size: 28px !important; margin-left: 3px; width: auto; font-weight: normal; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action .highly-rehighlight-count { font-size: 17px !important; font-weight: 300; padding: 0 0 0 5px; position: initial; display: block; color: gray; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action.highly-unhighlight .highly-rehighlight-count, .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action.highly-unhighlight .highly-eyecon { color: #ff3c00; } .highly-summary .highly-highlights-list .highly-rehighlighter .highly-action:hover { background: rgba(255, 60, 0, 0.13); } .highly-summary .highly-highlights-list.highly-highlights-list-missing .highly-highlights-list-item { border: none; } .highly-summary .highly-highlights-list.highly-highlights-list-missing .highly-highlights-list-item:before { background: transparent; } .highly-summary .highly-highlights-list.highly-highlights-list-missing .highly-highlights-list-item .highly-content { opacity: .5; } .highly-top-highlight-hint { background: transparent; color: white; position: absolute; height: 35px; top: -35px; left: -130px; right: 0; z-index: 5; overflow: hidden; pointer-events: none; } .highly-top-highlight-hint .highly-top-highlight-hint-holder { position: relative; margin-top: 35px; opacity: 0; -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; transition: all 0.1s ease-in-out; -webkit-transition-delay: 0; /* Safari */ transition-delay: 0; } .highly-top-highlight-hint .highly-hover-hint { text-transform: uppercase; position: absolute; top: 0; height: 35px; line-height: 35px; display: inline; box-sizing: border-box; padding: 0 5px; font-size: 13px; letter-spacing: 2px; font-weight: 300; } .highly-top-highlight-hint .highly-hover-hint.highly-hover-hint-share { left: 0; width: 60px; text-align: center; color: gray; } .highly-top-highlight-hint .highly-hover-hint.highly-hover-hint-rehi { left: 60px; width: 70px; text-align: center; background: rgba(128, 128, 128, 0.5); color: white; } .highly-top-highlight-hint .highly-hover-hint.highly-hover-hint-text { background: gray; color: white; left: 130px; right: 0; padding-left: 15px; } #highly-highlights-list-empty { text-align: center; padding: 15px 0; } #highly-highlights-list-empty .highly-image { background: transparent url("chrome-extension://__MSG_@@extension_id__/images/highlighter.png"); height: 200px; } .highly-share .highly-sparkline-holder { margin-top: 0px; margin-bottom: 30px; margin-right: 15px; } div.highly-share-unlisted-hint { background: #47d967; color: black; line-height: 50px; position: fixed; right: 15px; top: 15px; padding: 0 15px; border-radius: 5px; font-weight: 400; z-index: 2222222222; } div.highly-share-unlisted-hint .uppercase { text-transform: uppercase; letter-spacing: .1em; font-size: 12px; padding-right: 10px; } div.highly-share-unlisted-hint .highly-eyecon { vertical-align: middle; margin: 0 7px 0 -5px; font-size: 30px; } div.highly-share-private-hint, div.highly-share-tweet-private-hint { background: #ff3c00; color: black; line-height: 50px; position: fixed; right: 15px; top: 15px; padding: 0 15px; border-radius: 5px; font-weight: 400; z-index: 2222222222; } div.highly-share-private-hint .uppercase, div.highly-share-tweet-private-hint .uppercase { text-transform: uppercase; letter-spacing: .1em; font-size: 12px; padding-right: 10px; } div.highly-share-private-hint .highly-eyecon, div.highly-share-tweet-private-hint .highly-eyecon { vertical-align: middle; margin: 0 7px 0 -5px; font-size: 30px; } .highly-share-private h4 { font-weight: 300; font-size: 20px; line-height: 1.3em; } .highly-share-private .highly-btn-outline { min-width: 100px; background-color: transparent; color: #bfbfbf; } .highly-share-private .highly-btn-outline:hover { color: #ff3c00; border-color: #ff3c00; } .highly-share-topper { position: relative; height: 120px; color: gray; padding: 50px 0 0; } .highly-share-topper .highly-share-preview-text { font-family: "TrolaText", Georgia, serif !important; font-size: 18px; line-height: 1.5em; color: white; overflow: hidden; position: absolute; bottom: 35px; left: 0; right: 0; max-height: 190px; -webkit-font-smoothing: antialiased; } .highly-share-topper .highly-share-preview-highlighter { position: absolute; bottom: 0; left: 0; right: 0; text-align: left; font-size: 11px; line-height: 30px; } .highly-share-buttons { margin-bottom: 45px; background-color: inherit !important; } .highly-share-buttons.highly-share-buttons-teaser { margin: 0 0 20px; pointer-events: none !important; } .highly-share-buttons.highly-share-buttons-teaser .highly-eyecon { color: #404040; } .highly-share-buttons .highly-btn { background: transparent; padding: 0 3px; display: block; float: left; min-width: initial; width: 16.66%; border-right: 1px solid #262626; border-radius: 0; position: relative; box-sizing: border-box; } .highly-share-buttons .highly-btn .highly-label { position: absolute; text-align: center; left: 0; right: 0; top: 70%; color: gray; font-size: 14px; opacity: 0; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; -o-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; } .highly-share-buttons .highly-btn:hover { text-decoration: none; background: transparent; } .highly-share-buttons .highly-btn:hover .highly-eyecon { opacity: 1; } .highly-share-buttons .highly-btn:hover.highly-btn-facebook .highly-eyecon { color: #3B5998; } .highly-share-buttons .highly-btn:hover.highly-btn-twitter .highly-eyecon { color: #00aced; } .highly-share-buttons .highly-btn:hover.highly-btn-slack .highly-eyecon { color: #3EB890; } .highly-share-buttons .highly-btn:hover.highly-btn-pinterest .highly-eyecon { color: #cb2027; } .highly-share-buttons .highly-btn:hover.highly-btn-linkedin .highly-eyecon { color: #007bb6; } .highly-share-buttons .highly-btn:hover.highly-btn-pocket .highly-eyecon { color: #d3505a; } .highly-share-buttons .highly-btn:hover.highly-btn-evernote .highly-eyecon { color: #5ba525; } .highly-share-buttons .highly-btn:hover.highly-btn-email .highly-eyecon { color: #47d967; } .highly-share-buttons .highly-btn:hover.highly-btn-link .highly-eyecon { color: #ff3c00; } .highly-share-buttons .highly-btn.highly-btn-link { border-right: 0; } .highly-share-buttons .highly-btn.highly-disabled { pointer-events: none; } .highly-share-buttons .highly-eyecon { font-size: 32px !important; line-height: 100px !important; vertical-align: middle; color: white; opacity: .5; } .highly-share-buttons .highly-eyecon.highly-disabled { pointer-events: none; opacity: .25; } .highly-share-buttons .highly-eyecon.highly-selected { pointer-events: none; opacity: 1; } .highly-share-buttons:hover .highly-btn .highly-label { opacity: 1; } .highly-tweet .highly-tweet-topper { text-align: center; } .highly-tweet .highly-tweet-topper .highly-btn .highly-eyecon { font-size: 20px; } .highly-tweet .highly-tweet-topper .highly-tweet-connect-preview { text-align: center; position: relative; margin: 0 0 10px 0; } .highly-tweet .highly-tweet-topper .highly-tweet-connect-preview img { margin: 0 auto; display: block; width: 375px; border-radius: 5px; } .highly-tweet .highly-tweet-composer { background: transparent; position: relative; } .highly-tweet .highly-tweet-header { padding: 0 0 15px 0; height: 60px; line-height: 60px; box-sizing: border-box; } .highly-tweet .highly-tweet-header .highly-link { line-height: 45px; } .highly-tweet .highly-tweet-header img { width: 45px; height: 45px; margin-right: 15px; border-radius: 50%; vertical-align: middle; text-indent: -999px; } .highly-tweet .highly-tweet-header .highly-eyecon-twitter { color: #00bbe4; font-size: 25px; } .highly-tweet #highly-tweet-form { position: relative; } .highly-tweet .highly-tweet-preview { background: white; padding: 15px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder { position: relative; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder textarea.highly-form-control { padding: 0; border-radius: 0; border: 0; box-shadow: none; max-height: 180px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options { position: absolute; right: 0; bottom: -30px; line-height: 30px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn { padding: 0 5px; font-size: 15px; text-align: center; height: 15px; min-width: initial; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-default { background: #bfbfbf; color: white; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-default:hover { background: gray; color: white; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-clear { color: #bfbfbf; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-clear:hover { color: gray; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-clear.highly-on { color: #666666; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn.highly-btn-clear.highly-on:hover { color: #4d4d4d; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn .highly-eyecon { margin: 0; vertical-align: middle; height: 15px; line-height: 15px; display: block; float: left; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn .highly-eyecon-quote { font-size: 30px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn .highly-eyecon-quote:before { margin: 0 -7px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn .highly-eyecon-plus { font-size: 20px; margin: 0 -5px; } .highly-tweet .highly-tweet-preview .highly-tweet-message-holder .highly-textarea-options .highly-btn .highly-eyecon-highlight-image { font-size: 30px; } .highly-tweet .highly-tweet-link-holder { line-height: 30px; } .highly-tweet .highly-tweet-link-holder a { color: #00bbe4 !important; } .highly-tweet .highly-tweet-link-holder a:hover { color: #00bbe4 !important; text-decoration: underline; } .highly-tweet .highly-tweet-image-holder { position: relative; margin-top: 5px; } .highly-tweet .highly-tweet-image-holder .highly-share-image { max-width: 100%; vertical-align: middle; max-height: 450px; border: 1px solid #dedede; } .highly-tweet .highly-tweet-noimage, .highly-tweet .highly-tweet-image-holder .highly-tweet-fetching { background: #bfbfbf; color: gray; text-align: center; height: 250px; padding-top: 12%; line-height: 25px; box-sizing: border-box; margin-top: 5px; } .highly-tweet .highly-tweet-footer { color: gray; padding: 0; position: absolute; top: -60px; right: 0; } .highly-tweet .highly-tweet-footer .highly-tweet-status-message { line-height: 15px; max-width: 70%; padding: 15px 0; } .highly-tweet .highly-tweet-footer .highly-tweet-status-loading { padding: 5px 10px; position: relative; height: 45px; } .highly-tweet .highly-tweet-footer .highly-tweet-status-icon { position: absolute; left: 0; text-align: center; right: 0; line-height: 45px; font-size: 30px; color: white; display: block; } .highly-tweet .highly-tweet-footer .highly-tweet-character-count { line-height: 45px; padding: 0 15px; text-align: right; color: gray; } .highly-tweet .highly-tweet-footer .highly-tweet-character-count.highly-red { color: #ff3c00; } .highly-popup-menu { position: absolute; width: 100px; top: -70px; left: 50%; right: 0; background: #404040; color: white; margin-left: -50px; z-index: 3; pointer-events: none; opacity: 0; -webkit-transition: all 0.15s ease-in-out; -moz-transition: all 0.15s ease-in-out; -o-transition: all 0.15s ease-in-out; transition: all 0.15s ease-in-out; } .highly-popup-menu.highly-open { top: -80px; opacity: 1; pointer-events: auto; } .highly-popup-menu:before { content: ''; display: block; position: absolute; height: 0; width: 0; border-top: 5px solid #404040; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: none; top: 100%; left: 50%; margin-left: -3px; z-index: -1; } .highly-popup-menu .highly-label { padding: 8px 10px 2px; text-align: center; display: block; font-size: 12px; line-height: 15px; color: gray; white-space: nowrap; } .highly-popup-menu .highly-item { padding: 5px 15px; width: 100%; display: block; color: white; cursor: pointer; font-size: 12px; text-align: center; box-sizing: border-box; } .highly-popup-menu .highly-item:hover { background: #2b2b2b; } #highly-share-type.highly-hide { display: none !important; } #highly-share-type .highly-btn-radio-group { font-size: 14px; } #highly-share-type .highly-btn-radio-group.highly-active { color: white !important; pointer-events: none; } #highly-share-type.highly-share-type-radios { position: relative; top: -25px; opacity: 1; display: inline; -webkit-box-align: center; -webkit-box-pack: center; display: -webkit-box; } #highly-share-type.highly-share-type-radios .highly-btn-radio-group { color: gray; padding-right: 2px; display: inline; } #highly-share-type.highly-share-type-radios .highly-btn-radio-group span { width: auto; } #highly-share-type.highly-share-type-radios .highly-btn-radio-group span.highly-active { color: white; cursor: pointer; } #highly-share-type.highly-share-type-radios .highly-btn-radio-group span:hover { color: #ff3c00; cursor: pointer; } #highly-share-type.highly-share-type-radios .highly-btn-radio-group input[type="radio"] { visibility: hidden; width: 0px; font-size: 0; position: absolute; } .highly-copy-link { line-height: 45px; color: gray; height: 90px; overflow: hidden; opacity: 1; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-copy-link .highly-btn-clear { padding: 10px 0; min-width: inherit; } .highly-copy-link.highly-hide { height: 0px; opacity: 0; overflow: hidden; } .highly-share-email { position: relative; opacity: 1; height: 15em; overflow: hidden; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-share-email.highly-hide { height: 0px; opacity: 0; overflow: hidden; } .highly-share-email .highly-to-label { position: absolute; top: 0; left: 0; width: 45px; text-align: center; line-height: 45px; color: gray; } .highly-share-email #highly-share-email-input-holder { background-color: #fff; border: 0; display: inline-block; padding: 10px; margin-bottom: 0px; color: #555; vertical-align: middle; border-radius: 0; width: 100%; max-width: 100%; padding: 5px 110px 0 45px; line-height: 35px; min-height: 45px; margin-bottom: 2px; box-sizing: border-box; } .highly-share-email #highly-email-input-error { color: #ff3c00; position: absolute; top: -30px; } .highly-share-email #highly-email-input-error.highly-hide { opacity: 0; height: 0; margin-bottom: 0; } .highly-share-email input#highly-share-email-input { line-height: 35px; border: none; box-shadow: none; outline: none; background-color: transparent; padding: 0; margin: 0 0 5px 0; width: 100%; max-width: inherit; min-width: 100px; height: 35px; font-weight: 300; font-size: 14px; font-family: Helvetica, sans-serif; text-transform: inherit; letter-spacing: inherit; } .highly-share-email #highly-share-email-submit { text-align: center; position: absolute; width: 100px; height: 45px; top: 0px; margin: 0px; border-radius: 0px; right: 0px; min-width: inherit; padding: 5px 15px; line-height: 25px; color: white; pointer-events: none; } .highly-share-email #highly-share-email-submit:hover { background: gray; } .highly-share-email #highly-share-email-submit:focus { background: gray; } .highly-share-email #highly-share-email-submit.highly-valid { pointer-events: auto; color: black; background: #47d967; display: block; } .highly-share-email #highly-share-email-submit.highly-valid:hover { background: #26b846; } .highly-share-email #highly-share-email-submit.highly-valid:focus { background: #26b846; } .highly-share-email .highly-email-input-error input { color: #ff3c00; } .highly-share-email #highly-shareEmail-hide { position: absolute; min-width: inherit; color: gray; right: 0; padding-right: 0; background: transparent; } .highly-share-email #highly-shareEmail-hide:hover { cursor: pointer; color: white; } .highly-share-slack { position: relative; opacity: 1; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-share-slack.highly-hide { opacity: 0; height: 0; overflow: hidden; } .highly-share-slack .highly-to-label { position: absolute; top: 0; left: 0; width: 45px; text-align: center; line-height: 45px; color: gray; } .highly-share-slack .highly-share-teams-dropdown { -webkit-appearance: menulist-button; width: 40%; height: 35px; margin-top: 1px; margin-right: 5%; float: right; } .highly-share-slack .highly-share-teams-dropdown.highly-hide { display: none; } .highly-share-slack .highly-please-select-team-error { margin-top: 25px; cursor: pointer; } .highly-share-slack .highly-please-select-team-error.highly-hide { display: none; } .highly-share-slack .highly-please-select-team-other-highlighter-error { margin-top: 25px; cursor: pointer; color: #ff3c00; } .highly-share-slack .highly-please-select-team-other-highlighter-error.highly-hide { display: none; } .highly-share-slack .highly-selected-channel { margin: 0 5px 5px 0; line-height: 30px; top: 25px; border-radius: 15px; overflow: hidden; height: 0; padding: 32px 0 0 5px; position: relative; display: inline; white-space: nowrap; } .highly-share-slack .highly-selected-channel .highly-selected-channel-name { position: absolute; width: auto; background: rgba(191, 191, 191, 0.5); padding: 0 10px; border-radius: 15px; color: black; top: 0px; } .highly-share-slack .highly-selected-channel .highly-remove { cursor: pointer; color: gray; z-index: 2; border-radius: 10px; margin-left: 10px; box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); } .highly-share-slack .highly-selected-channel .highly-remove:before { content: "×"; width: 100%; height: 30px; line-height: 30px; color: gray; background: transparent; font-size: 20px; font-weight: 300; } .highly-share-slack .highly-selected-channel .highly-remove:hover { color: black; } .highly-share-slack .highly-selected-channel:hover .highly-remove { color: black; } .highly-share-slack .highly-selected-channel img { position: absolute; top: 50%; left: 50%; border-radius: 100%; height: 34px; width: 34px; margin-top: -17px; margin-left: -17px; z-index: 1; } .highly-share-slack input#highly-share-slack-input { line-height: 35px; border: none; box-shadow: none; outline: none; background-color: transparent; padding: 0; margin: 0 5px 5px 0; width: 95%; max-width: inherit; min-width: 100px; height: 35px; font-weight: 300; font-size: 14px; font-family: Helvetica, sans-serif; text-transform: inherit; letter-spacing: inherit; } .highly-share-slack input#highly-share-slack-input.highly-hide { display: none; } .highly-share-slack input#highly-share-slack-input::-webkit-input-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-slack input#highly-share-slack-input::-moz-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-slack input#highly-share-slack-input:-ms-input-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-slack .highly-share-slack-input-holder { background-color: #fff; border: 0; display: inline-block; padding: 10px; margin-bottom: 0px; color: #555; vertical-align: middle; border-radius: 0; width: 100%; max-width: 100%; padding: 5px 90px 0 45px; line-height: 35px; min-height: 45px; margin-bottom: 2px; box-sizing: border-box; } .highly-share-slack .highly-share-slack-input-holder.highly-has-teams input#highly-share-slack-input { width: 50%; } .highly-share-slack .highly-share-slack-input-holder.highly-has-teams .highly-selected-channel { width: 50%; } .highly-share-slack .highly-btn-select-team { width: 125px; height: 30px; margin-right: 10px; line-height: 0; padding-left: 17px; } .highly-share-slack .highly-btn-share-slack { text-align: center; position: absolute; width: 100px; height: 45px; top: 0px; margin: 0px; border-radius: 0px; right: 0px; min-width: inherit; padding: 5px 15px; line-height: 25px; color: white; pointer-events: none; } .highly-share-slack .highly-btn-share-slack:hover { background: gray; } .highly-share-slack .highly-btn-share-slack:focus { background: gray; } .highly-share-slack .highly-btn-share-slack.highly-valid { pointer-events: auto; color: black; background: #47d967; display: block; } .highly-share-slack .highly-btn-share-slack.highly-valid:hover { background: #26b846; } .highly-share-slack .highly-btn-share-slack.highly-valid:focus { background: #26b846; } .highly-share-slack .highly-share-slack-channel-list { padding-bottom: 90px; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel { margin: 0; position: relative; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel label { font-size: 14px; display: block; color: #bfbfbf; line-height: 45px; height: auto; border-bottom: 1px solid #262626; padding-left: 10px; padding-right: 0px; margin: 0 0 0 40px; cursor: pointer; font-weight: normal; text-transform: inherit; float: none; font-family: Helvetica, sans-serif; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-eyecon { position: absolute; right: 5px; top: 50%; height: 20px; margin-top: -10px; font-size: 45px; line-height: 20px; color: #47d967; display: none !important; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-checkbox { position: absolute; top: 14px; right: -16px; opacity: .3; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel img, .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-circle-holder { position: absolute; top: 50%; left: 1px; border-radius: 100%; height: 35px; width: 35px; margin-top: -17.5px; padding: 0; overflow: hidden; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel img.highly-hide, .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-circle-holder.highly-hide { display: none; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-circle-holder { border: 1px solid #262626; text-align: center; line-height: 31px; color: gray; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel .highly-circle-holder .eyecon { font-size: 20px; line-height: 30px; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel:hover { background: black; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel:hover label { color: white; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel.highly-selected .highly-eyecon { display: block !important; } .highly-share-slack .highly-share-slack-channel-list .highly-slack-channel.highly-hide { display: none; } .highly-share-slack .highly-share-slack-channel-list.highly-hide { display: none; } .highly-share-slack .highly-slack-connect-preview { text-align: center; position: relative; margin: 10px 0 10px 0; } .highly-share-slack .highly-slack-connect-preview img { margin: 0 auto; margin-top: 30px; display: block; max-width: 80%; border-radius: 5px; } .highly-share-slack .highly-slack-connect-preview .highly-pointer-top:before { position: relative; top: 30px; } .highly-share-slack .highly-slack-connect-preview .highly-btn { padding: 8px 20px; position: relative; width: auto; border-radius: 22px; pointer-events: auto; } .highly-share-slack .highly-slack-connect-preview .highly-btn.highly-btn-slack { background-color: #3EB890; color: white; margin-right: 10px; } .highly-share-slack .highly-slack-connect-preview .highly-btn.highly-btn-slack:hover { background-color: #38a581 !important; color: white; } .highly-share-slack .highly-slack-connect-preview .highly-btn.highly-btn-slack:focus { background-color: #349978 !important; color: white; } .highly-share-slack .highly-slack-connect-preview .highly-btn:hover { border-color: #ff3c00 !important; color: #ff3c00; cursor: pointer; background: transparent; } .highly-share-slack .highly-slack-connect-preview .highly-eyecon { font-size: 30px; } .highly-share-slack .highly-slack-connect-preview.highly-hide { display: none; } .highly-share-slack .highly-slack-connect-error { text-align: center; color: #ff3c00; } .highly-share-slack .highly-slack-connect-error.highly-hide { display: none; } .highly-share-slack .highly-slack-connect-error .highly-btn-slack { pointer-events: auto !important; background-color: #3EB890; color: white; padding: 10px 20px; position: relative; width: auto; border-radius: 22px; margin-top: 30px; } .highly-share-slack .highly-slack-connect-error .highly-btn-slack:hover { background-color: #38a581 !important; } .highly-share-slack .highly-slack-connect-error .highly-btn-slack:focus { background-color: #349978 !important; } .highly-share-slack .highly-slack-connect-error .highly-eyecon { font-size: 30px; } .highly-share-native { position: relative; opacity: 1; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-share-native.highly-hide { opacity: 0; overflow: hidden; } .highly-share-native .highly-to-label { position: absolute; top: 0; left: 0; width: 45px; text-align: center; line-height: 45px; color: gray; } .highly-share-native .highly-share-native-input-holder { background-color: #fff; border: 0; display: inline-block; padding: 10px; margin-bottom: 0px; color: #555; vertical-align: middle; border-radius: 0; width: 100%; max-width: 100%; padding: 5px 90px 0 45px; line-height: 35px; min-height: 45px; margin-bottom: 2px; box-sizing: border-box; } .highly-share-native .highly-selected-head { margin: 0 5px 5px 0; color: white; background: transparent; line-height: 35px; float: left; border-radius: 0; overflow: hidden; height: 0; padding: 35px 0 0 0; width: 35px; position: relative; display: inline; } .highly-share-native .highly-selected-head .highly-remove { cursor: pointer; position: absolute; top: 0; right: 0; height: 15px; width: 15px; background: black; display: none; z-index: 2; border-radius: 10px; } .highly-share-native .highly-selected-head .highly-remove:before { content: "×"; text-align: center; width: 100%; position: absolute; top: 0px; left: 0; height: 15px; line-height: 14px; font-size: 11px; } .highly-share-native .highly-selected-head .highly-remove:hover { background-color: #FF5200; box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); } .highly-share-native .highly-selected-head .highly-remove:hover:active { box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125); } .highly-share-native .highly-selected-head:hover .highly-remove { display: block; } .highly-share-native .highly-selected-head img { position: absolute; top: 50%; left: 50%; border-radius: 100%; height: 34px; width: 34px; margin-top: -17px; margin-left: -17px; z-index: 1; } .highly-share-native input#highly-share-native-input { line-height: 35px; border: none; box-shadow: none; outline: none; background-color: transparent; padding: 0; margin: 0 5px 5px 0; width: auto !important; max-width: inherit; min-width: 100px; height: 35px; font-weight: 300; font-size: 14px; font-family: Helvetica, sans-serif; text-transform: inherit; letter-spacing: inherit; } .highly-share-native input#highly-share-native-input::-webkit-input-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-native input#highly-share-native-input::-moz-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-native input#highly-share-native-input:-ms-input-placeholder { font-family: Helvetica, sans-serif; font-size: 14px; } .highly-share-native .highly-btn { text-align: center; position: absolute; width: 100px; height: 45px; top: 0px; margin: 0px; border-radius: 0px; right: 0px; min-width: inherit; padding: 5px 15px; line-height: 25px; color: white; pointer-events: none; } .highly-share-native .highly-btn:hover { background: gray; } .highly-share-native .highly-btn:focus { background: gray; } .highly-share-native .highly-btn.highly-valid { pointer-events: auto; color: black; background: #47d967; display: block; } .highly-share-native .highly-btn.highly-valid:hover { background: #26b846; } .highly-share-native .highly-btn.highly-valid:focus { background: #26b846; } .highly-share-native .highly-share-friend-list { padding-bottom: 90px; } .highly-share-native .highly-share-friend-list .highly-friend { margin: 0; position: relative; } .highly-share-native .highly-share-friend-list .highly-friend label { font-size: 14px; display: block; color: #bfbfbf; line-height: 45px; height: auto; border-bottom: 1px solid #262626; padding-left: 10px; padding-right: 0px; margin: 0 0 0 40px; cursor: pointer; font-weight: normal; text-transform: inherit; float: none; font-family: Helvetica, sans-serif; } .highly-share-native .highly-share-friend-list .highly-friend .highly-eyecon { position: absolute; right: 5px; top: 50%; height: 20px; margin-top: -10px; font-size: 45px; line-height: 20px; color: #47d967; display: none !important; } .highly-share-native .highly-share-friend-list .highly-friend .highly-checkbox { position: absolute; top: 14px; right: -16px; opacity: .3; } .highly-share-native .highly-share-friend-list .highly-friend img { position: absolute; top: 50%; left: 1px; border-radius: 100%; height: 35px; width: 35px; margin-top: -17.5px; padding: 0; overflow: hidden; background: #404040; } .highly-share-native .highly-share-friend-list .highly-friend:hover { background: black; } .highly-share-native .highly-share-friend-list .highly-friend:hover label { color: white; } .highly-share-native .highly-share-friend-list .highly-friend.highly-selected .highly-eyecon { display: block !important; } .highly-share-bottom { position: relative; } .highly-share-pending { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(20, 20, 20, 0.9); padding-top: 60px; display: none; } .highly-share-pending.highly-active { display: block; } .highly-note-over-300-ch { color: #ff3c00; } .highly-note-under-250-ch { opacity: 0; } .highly-note-ch-count { float: right; position: relative; top: -35px; right: 15px; margin-bottom: 5px; } .highly-more-results { padding-bottom: 100px; } .highly-items { margin-top: 0; border-top: 1px solid #262626; position: relative; } .highly-items .highly-item { text-align: left; display: block; border-bottom: 1px solid #262626; height: 55px; color: #404040; cursor: pointer; box-sizing: border-box; position: relative; } .highly-items .highly-item .highly-profile-pic { height: 45px; width: 45px; margin: 5px 10px 0 0; float: left; } .highly-items .highly-item .highly-profile-pic img { border-radius: 50%; overflow: hidden; } .highly-items .highly-item .highly-profile-pic img[alt]:after { font-size: 23px; border-radius: 50%; overflow: hidden; } .highly-items .highly-item .highly-profile-username { color: white; padding: 0; display: block; text-align: left; line-height: 55px; } .highly-items .highly-item .highly-profile-meta { position: absolute; right: 100px; top: 0; line-height: 55px; } .highly-items .highly-item .highly-profile-label { display: block; font-weight: normal; color: #404040; } .highly-items .highly-item .highly-pull-right .highly-btn { margin-top: 10px; padding: 7px 15px 3px; } .highly-items .highly-item:hover .highly-profile-username, .highly-items .highly-item:hover .highly-profile-count { color: #ff3c00; } .highly-full-logo { color: black; z-index: 100; text-align: center; } .highly-full-logo.highly-full-logo-upper-left { position: fixed; top: 10px; left: 10px; } .highly-full-logo.highly-full-logo-black .highly-full-logo-text .highly-eyecon-logo-letters { color: black; } .highly-full-logo.highly-full-logo-black .highly-full-logo-block { background: black; } .highly-full-logo .highly-full-logo-link { padding: 15px; width: 150px; height: 50px; display: inline-block; position: relative; box-sizing: border-box; } .highly-full-logo .highly-full-logo-block { position: absolute; top: 15px; left: 15px; display: block; height: 19px; width: 19px; background: white; text-align: center; } .highly-full-logo .highly-full-logo-block .highly-eyecon-highlighter-tiny { color: #ff3c00; font-size: 19px; width: 5px; position: absolute; left: 9.5px; margin: 0 0 0 -2.5px; } .highly-full-logo .highly-full-logo-text { position: absolute; left: 41px; top: 14px; } .highly-full-logo .highly-full-logo-text .highly-eyecon-logo-letters { color: white; font-size: 21px; margin: 0; padding: 0; } .highly-full-logo .highly-tagline { color: gray; text-transform: uppercase; font-size: 11px; position: absolute; right: 18px; top: 40px; letter-spacing: .05em; line-height: 11px; } .highly-tour .highly-full-logo { position: fixed; top: 15px; left: 15px; pointer-events: none; opacity: 1; -webkit-transition: all 0.6s ease-in-out; -moz-transition: all 0.6s ease-in-out; -o-transition: all 0.6s ease-in-out; transition: all 0.6s ease-in-out; } .highly-tour .highly-full-logo.highly-dimmed { opacity: .25; } .highly-tour-top-bar-open .highly-tour .highly-full-logo { top: 95px; } .highly-tour .highly-tour-browser-button-key { position: fixed; top: 25px; right: 25px; height: 30px; overflow: hidden; opacity: 0; font-weight: 300; font-size: 14px; pointer-events: none; } .highly-tour .highly-tour-browser-button-key.highly-open { pointer-events: auto; } .highly-tour .highly-tour-browser-button-key div { line-height: 30px; white-space: nowrap; text-align: right; } .highly-tour .highly-tour-browser-button-key div img { margin: 0 0 0 10px; vertical-align: middle; } .highly-tour .highly-tour-browser-button-key div .highly-red { font-weight: bold; } .highly-tour .highly-tour-browser-button-key div.highly-tour-browser-button-off { margin-top: 31px; } .highly-tour .highly-tour-browser-button-key.highly-open { opacity: 1; } .highly-tour .highly-tour-browser-button-key.highly-open .highly-tour-browser-button-off { margin-top: 0px; } .highly-tour .highly-tour-browser-button-key.highly-enabled .highly-tour-browser-button-off { margin-top: -31px; } .highly-tour .highly-tour-stop { position: relative; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow .highly-title { height: 90px; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-title { opacity: 0; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder #highly-tour-face-icon { display: none; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder .highly-tour-key-img { border-color: #ff3c00; color: #ff3c00; opacity: 0; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder .highly-eyecon-highlighter { color: #ff3c00; -webkit-animation: rotateThirty 2000ms linear both; animation: rotateThirty 2000ms linear both; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder .highly-tour-highlighter-activated-hint { opacity: 1; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder .highly-tour-hint-text { display: none; } .highly-tour .highly-tour-stop.highly-tour-stop-slideshow.highly-done .highly-tour-icon-holder .highly-tour-img-drag { opacity: 1; } .highly-tour .highly-tour-stop .highly-title { color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 24px; line-height: 1.5em; margin: 0 0 15px 0; position: relative; } .highly-tour .highly-tour-stop .highly-title .highly-line-item { height: 0; opacity: 0; color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 24px; line-height: 1.5em; -webkit-transition: all 0.6s ease-in-out; -moz-transition: all 0.6s ease-in-out; -o-transition: all 0.6s ease-in-out; transition: all 0.6s ease-in-out; } .highly-tour .highly-tour-stop .highly-title .highly-line-item.highly-open { height: 35px; opacity: 1; } .highly-tour .highly-tour-stop .highly-title .highly-inner { position: absolute; bottom: 0; left: 0; right: 0; } .highly-tour .highly-tour-stop .highly-subtitle { color: black; margin: -10px 0 0; } .highly-tour .highly-tour-stop .highly-tour-icon-holder { position: relative; padding: 90px 0 30px 0; margin-top: 60px; height: 90px; } .highly-tour .highly-tour-stop .highly-tour-icon-holder img.highly-key-image { position: absolute; top: 0; left: 50%; margin: 0 0 0 -90px; } .highly-tour .highly-tour-stop .highly-tour-icon-holder #highly-tour-face-icon.highly-tour-image-keyboard { position: absolute; top: 0; left: 50%; margin: 0 0 0 -300px; } .highly-tour .highly-tour-stop .highly-tour-icon-holder .highly-tour-key-img { height: 180px; width: 180px; position: absolute; top: 0; left: 50%; margin: 0 0 0 -90px; border: 1px solid gray; border-radius: 10px; text-align: center; padding: 90px 0 0 0; line-height: 90px; font-size: 60px; font-family: Helvetica, sans-serif; font-weight: normal; overflow: hidden; box-sizing: border-box; opacity: 0; color: black; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-tour .highly-tour-stop .highly-tour-icon-holder .highly-tour-key-img.highly-open { opacity: 1; } .highly-tour .highly-tour-stop .highly-tour-icon-holder .highly-tour-key-img.highly-focus { border-color: #ff3c00; color: #ff3c00; } .highly-tour .highly-tour-stop .highly-tour-icon-holder .highly-tour-highlighter-activated-hint { padding: 15px 0; opacity: 0; -webkit-transition: opacity 0.3s ease-in-out; -moz-transition: opacity 0.3s ease-in-out; -o-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } .highly-tour .highly-tour-stop .highly-tour-icon-holder .highly-tour-img-drag { position: absolute; top: -13px; left: 50%; margin-left: -112px; z-index: -1; opacity: 0; -webkit-transition: opacity 2s ease-in-out; -moz-transition: opacity 2s ease-in-out; -o-transition: opacity 2s ease-in-out; transition: opacity 2s ease-in-out; } .highly-tour .highly-tour-stop .highly-eyecon-highlighter { position: absolute; left: 50%; margin: 0 0 0 -7px; top: -20px; font-size: 60px; color: black; opacity: 0; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } .highly-tour .highly-tour-stop .highly-eyecon-highlighter.highly-open { top: 25px; opacity: 1; } .highly-tour .highly-tour-stop .highly-tour-hint-text { position: absolute; left: 0; right: 0; top: -100px; line-height: 20px; opacity: 0; font-weight: 300; -webkit-transition: opacity 0.8s ease-in-out; -moz-transition: opacity 0.8s ease-in-out; -o-transition: opacity 0.8s ease-in-out; transition: opacity 0.8s ease-in-out; } .highly-tour .highly-tour-stop .highly-tour-hint-text.highly-open { opacity: 1; } .highly-tour .highly-tour-stop .highly-tour-hint-text .highly-tip-title { color: #ff3c00; text-transform: uppercase; font-weight: bold; display: block; } .highly-tour .highly-tour-stop .highly-tour-make-share-holder { position: absolute; right: -170px; top: 30%; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder { color: black; font-family: "TrolaText", Georgia, serif !important; font-weight: normal; letter-spacing: -.01em; -webkit-font-smoothing: antialiased; font-size: 24px; line-height: 1.5em; text-align: left; padding: 0 90px; margin: 0 -50px; cursor: url(https://s3-us-west-1.amazonaws.com/highly/images/misc/cursor-on.png) 5 20, auto; cursor: -webkit-image-set(url("https://s3-us-west-1.amazonaws.com/highly/images/misc/cursor-on.png") 1x) 5 20, auto; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder h1 { font-size: 50px; line-height: 55px; font-family: Helvetica, sans-serif; font-weight: bold; margin: 0 0 30px 0; color: #404040; text-align: center; letter-spacing: -.03em !important; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder ::selection { background: #ff9d7f; /* WebKit/Blink Browsers */ } .highly-tour .highly-tour-stop .highly-tour-make-content-holder ::-moz-selection { background: #ff9d7f; /* Gecko Browsers */ } .highly-tour .highly-tour-stop .highly-tour-make-content-holder p { margin: 0 0 25px 0; line-height: 35px; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder p:last-child { margin-bottom: 0; } .highly-tour #highly-tour-publisher-icons { vertical-align: middle; opacity: .5; } .highly-tour .highly-arrow-holder { position: relative; height: 170px; margin-top: -110px; opacity: 1; } .highly-tour .highly-arrow-holder img { position: absolute; left: 50%; margin: 0 0 0 -55px; top: 0; } .highly-tour img.highly-tour-share-preview { max-width: 100%; } .highly-tour .highly-tour-url-bar-hint { position: fixed; top: 0; left: 0; right: 0; height: 75px; overflow: hidden; background: gray; line-height: 20px; padding: 25px 40px; color: white; box-sizing: border-box; display: none; font-size: 14px; cursor: default; } .highly-tour-top-bar-open .highly-tour .highly-tour-url-bar-hint { display: block; } .highly-tour .highly-tour-url-bar-hint .highly-pull-right { color: black; line-height: 20px; } .highly-tour .highly-tour-url-bar-hint .highly-pull-right a { color: inherit; display: inline-block; } .highly-tour .highly-tour-url-bar-hint .highly-pull-right a .highly-eyecon { font-size: 23px; line-height: 20px; vertical-align: middle; } .highly-tour .highly-tour-url-bar-hint .highly-pull-right a:hover .highly-eyecon { color: white; } .highly-eyecon-circle { height: 90px; width: 90px; line-height: 90px; border-radius: 50%; position: relative; margin: 0 0 30px 0; } .highly-eyecon-circle .highly-eyecon { position: absolute; margin-left: -60px; width: 120px; left: 50%; top: 0; font-size: 120px; line-height: 100px; } .highly-eyecon-circle.highly-eyecon-circle-green { background-color: #47d967 !important; } .highly-eyecon-circle.highly-eyecon-circle-green .highly-eyecon { color: white; } .highly-eyecon-circle.highly-eyecon-circle-sm { height: 30px; width: 30px; line-height: 30px; } .highly-eyecon-circle.highly-eyecon-circle-sm .highly-eyecon { margin-left: -15px; width: 30px; font-size: 30px; line-height: 30px; } .highly-eyecon-circle.highly-eyecon-circle-sm .highly-eyecon.highly-eyecon-plane { margin-left: -13px; } .highly-tour-share-preview-overlay { position: absolute; top: 120px; left: 0; right: 0; bottom: 0; text-align: center; -webkit-transition: background-color 0.2s ease-in-out; -moz-transition: background-color 0.2s ease-in-out; -o-transition: background-color 0.2s ease-in-out; transition: background-color 0.2s ease-in-out; } .highly-tour-share-preview-overlay .highly-btn { margin-top: 40%; opacity: 0; -webkit-transition: opacity 0.4s ease-in-out; -moz-transition: opacity 0.4s ease-in-out; -o-transition: opacity 0.4s ease-in-out; transition: opacity 0.4s ease-in-out; } .highly-tour-share-preview-overlay:hover { background: rgba(21, 21, 21, 0.85); } .highly-tour-share-preview-overlay:hover .highly-btn { opacity: 1; } .highly-social-samples { padding: 5px 0; } .highly-social-samples .highly-eyecon { font-size: 25px; color: #bfbfbf; } .highly-social-samples .highly-eyecon:first-child, .highly-social-samples .highly-eyecon:last-child { margin-top: 5px; } .highly-logo-box { background: black; overflow: hidden; position: relative; height: 90px; width: 90px; margin: 0 auto; } .highly-logo-box .highly-eyecon-marker-tall-tip { color: #ff3c00; position: absolute; width: 130px; height: 130px; left: 50%; top: -25px; font-size: 130px; margin-left: -65px; opacity: 0; -webkit-transition: opacity 1s ease-in-out; -moz-transition: opacity 1s ease-in-out; -o-transition: opacity 1s ease-in-out; transition: opacity 1s ease-in-out; } .highly-logo-box.highly-action .highly-eyecon-marker-tall-tip { opacity: 1; -webkit-animation: marker 5000ms linear normal both; animation: marker 5000ms linear normal both; } .highly-eyecon-logo-letters { font-size: 33.7px; color: black; margin: 20px 0 10px; padding-left: 8px; } div.highly-logo-tagline { color: #ff3c00; font-size: 21px; font-weight: 300; line-height: 30px; text-align: center; } #highly-success .highly-success-logo-holder { padding: 0 0 30px 0; color: black; } #highly-success .highly-success-features { width: 400px; max-width: 100%; margin: 0 auto; } #highly-success .highly-success-features [class*='highly-col-'] .highly-eyecon { font-size: 60px; display: block; width: 100%; text-align: center; color: red; padding: 5px 0; } #highly-help-modal .highly-help-two-column { position: relative; color: gray; width: 250px; margin: 0 auto; } #highly-help-modal .highly-help-two-column:before { content: " "; display: block; position: absolute; width: 1px; top: 0; bottom: 0; left: 50%; margin-left: -1px; background: #404040; } #highly-help-modal .highly-help-two-column .highly-column { float: left; width: 50%; height: 150px; position: relative; } #highly-help-modal .highly-help-two-column .highly-help-item { line-height: 50px; text-align: left; padding: 0 20px; white-space: nowrap; } #highly-help-modal .highly-help-two-column .highly-help-item.highly-help-item-v-centered { position: absolute; top: 50%; margin-top: -25px; left: 0; } #highly-help-modal .highly-help-two-column .highly-hint-key-image { background: #ebebeb url("https://s3-us-west-1.amazonaws.com/highly/images/misc/chrome-browser-icon-off.png") no-repeat center center; } #highly-help-modal .highly-help-two-column .highly-blue-back { background: #afd5fc; padding: 5px 0; } .highly-help-overlay { position: fixed; text-align: left; color: gray; font-size: 14px; font-weight: normal; } .highly-help-overlay b { color: black; font-weight: bold; } .highly-help-overlay.highly-help-overlay-highlighting { width: 400px; margin: 0 0 0 -200px; left: 50%; bottom: 230px; text-align: center; } .highly-help-overlay.highly-help-overlay-map { width: 400px; margin: 0 0 0 -200px; left: 50%; bottom: 60px; text-align: center; } .highly-help-overlay.highly-help-overlay-people { left: 55px; bottom: 60px; } .highly-help-overlay.highly-help-overlay-people .highly-help-overlay-people-heads { position: absolute; left: -55px; top: -40px; width: 50px; opacity: .5; } .highly-help-overlay.highly-help-overlay-summary { right: 42px; bottom: 110px; text-align: right; } .highly-help-overlay.highly-help-overlay-share { right: 82px; bottom: 60px; text-align: right; } .highly-help-overlay.highly-help-overlay-summary:after, .highly-help-overlay.highly-help-overlay-share:after { content: " "; position: absolute; right: 18px; top: 32px; height: 80px; width: 1px; overflow: hidden; background: #bfbfbf; } body.highly-dev-mode { border-left: 3px solid #ff3c00; } body.highly-dev-mode .highly-main-article-content-container { background-color: rgba(255, 0, 0, 0.1); border: 1px solid red; } .highly-on .highly-highlight-menu { display: block; } .highly-highlight { cursor: pointer; background: #ffcebf !important; padding: 2px 0; color: black; box-shadow: 0px 0 0 #ffcebf, 0px 0 0 #ffcebf; text-shadow: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); max-width: none !important; } .highly-highlight.highly-highlight-hovered { color: black; background: #ff9d7f !important; box-shadow: 0px 0 0 #ff9d7f, 0px 0 0 #ff9d7f; } .highly-highlight.highly-highlight-theirs { background: #ededed !important; box-shadow: 0px 0 0 #ededed, 0px 0 0 #ededed; } .highly-highlight.highly-highlight-theirs.highly-highlight-hovered { background: #d4d4d4 !important; box-shadow: 0px 0 0 #d4d4d4, 0px 0 0 #d4d4d4; } .highly-highlight.highly-highlight-ours { background: #ffb39b !important; box-shadow: 0px 0 0 #ffb39b, 0px 0 0 #ffb39b; } div.highly-rehighlighter { position: relative; display: inline-block; top: 0; border-right: 1px solid rgba(128, 128, 128, 0.25); height: 50px; width: 50px; cursor: default; color: white; } .highly-summary div.highly-rehighlighter { display: block; position: absolute; top: 0; left: -70px; width: 70px; bottom: 0; z-index: 3; opacity: 0; } div.highly-rehighlighter .highly-action { cursor: pointer; height: 50px; } div.highly-rehighlighter .highly-action * { position: absolute; } div.highly-rehighlighter .highly-action .highly-eyecon-highlighter { line-height: 50px !important; } div.highly-rehighlighter .highly-action .highly-eyecon-highlighter { top: 0; text-align: center; width: 100%; font-style: inherit; font-weight: bold; font-size: 20px !important; left: 0; color: white; } div.highly-rehighlighter .highly-action .highly-eyecon-highlighter img { margin: 1px 0 0 -23px; } div.highly-rehighlighter .highly-action .highly-strikethrough { top: 23px; left: 7px; right: 7px; border-top: 1px solid #ff3c00; border-bottom: 2px solid #262626; z-index: 2; display: none; } div.highly-rehighlighter .highly-action .highly-eyecon-plus-lg { top: 13px; left: 13px; font-size: 25px !important; } div.highly-rehighlighter .highly-action .highly-eyecon-plus { top: 6px; left: -5px; font-size: 30px !important; } div.highly-rehighlighter .highly-action .highly-eyecon-trash { font-size: 30px; right: 5px; color: gray; } div.highly-rehighlighter .highly-action .highly-eyecon-trash:hover { color: #ff3c00; } div.highly-rehighlighter .highly-action.highly-rehighlight .highly-eyecon-highlighter, div.highly-rehighlighter .highly-action.highly-rehighlight .highly-eyecon-plus { color: white; } div.highly-rehighlighter .highly-action:hover { color: #ff3c00; } div.highly-rehighlighter .highly-action:hover .highly-eyecon-highlighter, div.highly-rehighlighter .highly-action:hover .highly-eyecon-plus { color: #ff3c00; } div.highly-rehighlighter .highly-action.highly-unhighlight .highly-eyecon-highlighter { color: #ff3c00; } div.highly-rehighlighter .highly-rehighlight-count { font-size: 14px !important; line-height: 50px !important; position: absolute; top: 0; left: 30px; pointer-events: none; } .highly-unhighlight div.highly-rehighlighter .highly-rehighlight-count { color: #ff3c00; } .highly-summary div.highly-rehighlighter .highly-rehighlight-count { display: none; } div.highly-rehighlighter .highly-rehighlight-count.highly-selected { color: #ff3c00; } div.highly-rehighlighter:hover .highly-rehighlight-count { color: #ff3c00; } div.highly-rehighlighter .highly-action.highly-unhighlight:hover .highly-strikethrough { display: block; } div.highly-rehighlighter .highly-loading { position: absolute; padding: 0; top: 0; width: 100%; height: 100%; text-align: center; color: gray; } .highly-pointer-bottom { background-color: black; } .highly-pointer-bottom:before { content: " "; display: block; position: absolute; left: 50%; width: 0; height: 0; bottom: -10px; margin-left: -10px; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid black; } .highly-pointer-bottom.highly-pointer-bottom-small:before { bottom: -4px; margin-left: -5px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 5px solid black; } .highly-pointer-bottom.highly-pointer-bottom-white:before { border-top-color: white; } .highly-pointer-top { background-color: black; } .highly-pointer-top:before { content: " "; display: block; position: absolute; left: 50%; width: 0; height: 0; top: -10px; margin-left: -10px; border-left: 10px solid transparent; border-right: 10px solid transparent; border-bottom: 10px solid black; } .highly-pointer-top.highly-pointer-top-small:before { top: -4px; margin-left: -5px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: 5px solid black; } .highly-pointer-top.highly-pointer-top-white:before { border-bottom-color: white; } .highly-dot { background-color: #ff3c00; border-radius: 50%; width: 2px; height: 2px; position: absolute; left: 5px; bottom: 5px; display: none; } #highly-clipboard-container { position: fixed; left: 0px; top: 0px; width: 0px; height: 0px; z-index: 100; display: block; opacity: 0; } #highly-clipboard { width: 1px; height: 1px; padding: 0px; } .highly-note-field { width: 100%; font: 14px Helvetica; padding: 15px 45px 15px 15px; margin-top: 10px; line-height: 20px; font-size: 14px; background: #202020; color: rgba(80, 80, 80, 0.5); height: 45px; box-sizing: border-box; -webkit-transition: height 0.1s ease-in-out; -moz-transition: height 0.1s ease-in-out; -o-transition: height 0.1s ease-in-out; transition: height 0.1s ease-in-out; outline: none; border-radius: 0; border: 0; } .highly-note-field::-webkit-input-placeholder { color: gray; opacity: .5; line-height: 15px; } .highly-note-field:-moz-placeholder { color: gray; opacity: .5; line-height: 15px; } .highly-note-field::-moz-placeholder { color: gray; opacity: .5; line-height: 15px; } .highly-note-field:-ms-input-placeholder { color: gray; opacity: .5; line-height: 15px; } .highly-note-field:hover { background: #404040; } .highly-note-field-holder { position: relative; } .highly-note-has-content { background: white; font: 14px Helvetica; color: black; height: 105px; } .highly-note-has-content:hover { background: white; } .highly-x { height: 50px; width: 50px; font-size: 25px; text-align: center; line-height: 54px; color: white !important; } .highly-x:hover { color: #ff3c00 !important; } .highly-cc-ropes-img { height: 30px; width: 50px; margin: 15px auto; background: transparent url("https://s3-us-west-1.amazonaws.com/highly/images/foundation/150715/rope.svg") no-repeat center center; background-size: contain; } .highly-half-circle { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: -webkit-box; display: -webkit-flex; display: -moz-box; display: -ms-flexbox; display: flex; -webkit-box-align: center; -webkit-align-items: center; -moz-box-align: center; -ms-flex-align: center; align-items: center; -webkit-box-pack: center; -webkit-justify-content: center; -moz-box-pack: center; -ms-flex-pack: center; justify-content: center; } .highly-half-circle:after { display: block; width: 100%; height: 100%; -webkit-border-radius: 100%; -moz-border-radius: 100%; border-radius: 100%; border-bottom: 0.12em solid transparent; border-top: 0.12em solid #ff3c00; border-right: 0.12em solid transparent; border-left: 0.12em solid #ff3c00; content: ''; opacity: .5; box-sizing: border-box; top: 0; left: 0; position: absolute; } #secondCaret .highly-half-circle:after { bottom: 0; top: auto; border-top: 0.12em solid transparent; border-bottom: 0.12em solid #ff3c00; border-left: 0.12em solid transparent; border-right: 0.12em solid #ff3c00; } body.highly-butter-custom-selection-style { -webkit-touch-callout: none !important; /* -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; */ } body.highly-butter-custom-selection-style a { -webkit-user-select: none !important; -moz-user-select: none !important; -ms-user-select: none !important; user-select: none !important; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-span { background: #ffb199 !important; position: relative; color: black; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-caret { content: " "; height: 2em; width: 2em; margin: -.8em 0 0 -1em; position: absolute; color: red; padding: 0; overflow: hidden; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-caret#secondCaret { margin-top: .2em; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-caret:before { content: ""; width: .12em; margin-left: -.06em; height: auto; position: absolute; background: #ff3c00; left: 50%; overflow: hidden; top: 50%; bottom: 0; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-caret#secondCaret:before { top: 0; bottom: 50%; } body.highly-butter-custom-selection-style span.highly-butter-surrounding-caret:after { content: ""; position: absolute; left: 50%; margin-left: -.2em; margin-top: -.2em; width: .4em; height: .4em; background: #ff3c00; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; top: 50%; } body.highly-butter-custom-selection-style .highly-butter-tooltip-container .highly-eyecon { line-height: 44px; } body.highly-butter-custom-selection-style .prevent-native-select { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } #highly-butter-clear { margin-left: 0; } @media (min-width: 768px) and (max-width: 979px) { .notablet { display: none !important; } .highly-help-overlay-map { display: none; } } @media screen and (max-width: 1024px) { .highly-help-overlay-map { display: none; } .highly-hint { left: 15px; } .highly-hint div.highly-hint-message { white-space: normal; float: none; text-align: center; } .highly-hint div.highly-hint-message br { display: none; } .highly-hint div.highly-hint-message.highly-hint-message-twoline { padding-right: 50px; } .highly-modal.highly-dialog-modal { display: -webkit-box; display: -webkit-flex; display: -moz-box; display: -ms-flexbox; display: flex; -webkit-box-align: center; -webkit-align-items: center; -moz-box-align: center; -ms-flex-align: center; align-items: center; -webkit-box-pack: center; -webkit-justify-content: center; -moz-box-pack: center; -ms-flex-pack: center; justify-content: center; } .highly-modal.highly-dialog-modal .highly-modal-content-holder { width: 100%; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-modal-content { margin: 0 20px; border-radius: 5px; background: white; color: gray; padding-bottom: 15px; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-modal-content .highly-btn-outline { background: transparent; color: black; } .highly-modal.highly-dialog-modal div.highly-modal-title { color: black; font-size: 12px; text-transform: uppercase; letter-spacing: .1em !important; font-weight: normal; border-color: lightgray; padding: 0; line-height: 50px; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-btn-outline { border-radius: 0; border: 0; border-top: 1px solid #bfbfbf; width: 100%; box-sizing: border-box; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-dialog-button-holder { margin: 0 -15px -15px; font-size: 0; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-dialog-button-holder.highly-dialog-button-holder-multiple .highly-btn-outline { width: 50%; } .highly-modal.highly-dialog-modal .highly-modal-content-holder .highly-dialog-button-holder.highly-dialog-button-holder-multiple .highly-btn-outline:last-child { border-left: 1px solid #bfbfbf; } .highly-modal.highly-dialog-modal .highly-throbber:after { margin: auto; margin-top: 55%; } .highly-modal-close { border-color: transparent; width: 30px; height: 30px; top: 15px; right: 10px; left: auto; } .highly-modal-close .highly-eyecon { line-height: 30px; } .highly-modal-close:hover { border-color: transparent; } .highly-modal-close + .highly-modal-close-companion { right: 50px; top: 10px; } .highly-modal-content { padding: 0 15px; width: auto; } div.highly-modal-title.highly-modal-title-small { font-weight: normal; text-transform: uppercase; letter-spacing: .15em; font-size: 14px; margin: -10px 0 5px 0; } .highly-tweet .highly-tweet-composer { padding-top: 15px; } .highly-highlights-list { margin: 0 -15px; } .highly-highlights-list .highly-highlights-list-item { padding: 8px 40px 5px 15px; } .highly-highlights-list .highly-highlights-list-item .highly-content .highly-content-text { font-size: 19px; line-height: 30px; } .highly-highlights-list .highly-highlights-list-item:before { bottom: 29px; min-height: 45px; } .highly-highlights-list .highly-highlights-list-item .highly-highlight-share { visibility: hidden; } .highly-summary .highly-highlights-list .highly-rehighlighter { opacity: 1; } .highly-summary .highly-sparkline { right: 25px; } .highly-summary .highly-modal-title { font-size: 16px; } .highly-summary .highly-rehighlighter { left: auto; right: -5px; top: 0; z-index: 3; opacity: 1; } .highly-summary .highly-rehighlighter .highly-action .highly-strikethrough { border-bottom-color: white; } .highly-summary .highly-rehighlighter .highly-action .highly-eyecon-highlighter { font-size: 20px; } .highly-touch .highly-navbar { padding: 20px 5px 0; } .highly-touch .highly-navbar:before { background-color: black; } .highly-navbar .highly-navbar-button { width: 40px; } .highly-navbar .highly-navbar-button#highly-secondary-highlighter-button { left: 40px; } .highly-touch .highly-navbar .highly-navbar-button#highly-secondary-highlighter-button { left: auto; right: 50px; top: 30px; } .highly-touch .highly-navbar .highly-navbar-button#highly-navbar-summary-button, .highly-touch .highly-navbar .highly-navbar-button#highly-navbar-more-button { display: none; } .highly-touch .highly-navbar .highly-navbar-button { display: none; } .highly-touch .highly-navbar .highly-navbar-button.highly-navbar-button-head { display: block; margin-left: 0px; } .highly-navbar .highly-sparkline-holder { margin: 1px 150px 10px 45px; } .highly-touch .highly-navbar .highly-sparkline-holder { margin: -20px 25px 0px 5px; } .highly-touch .highly-navbar .highly-sparkline-holder .highly-sparkline-readtime { background: black; line-height: 27px; color: rgba(128, 128, 128, 0.5); } .highly-navbar.highly-minimize .highly-sparkline-holder { margin: -20px 85px 0px 5px; } .highly-navbar.highly-has-secondary .highly-sparkline-holder { margin-left: 70px; } .highly-touch .highly-navbar.highly-has-secondary .highly-sparkline-holder { margin-left: 5px; } .highly-touch .highly-navbar.highly-navbar-has-more-highlighters .highly-navbar-button#highly-secondary-highlighter-button { right: 90px; } .highly-dropup .highly-item.highly-item-user .highly-profile-pic { margin: 5px 0 0 5px; } .highly-dropup highly-dropup-privacy { max-width: 100%; } .highly-share-topper .highly-share-preview-text { font-size: 17px; line-height: 21px; } .highly-share-buttons.highly-share-buttons-teaser { margin-top: 100px; } .highly-share-buttons .highly-eyecon { line-height: 60px !important; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder { margin-top: 100px; font-size: 18px; line-height: 23px; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder h1 { font-size: 30px; line-height: 35px; } .highly-tour .highly-tour-stop .highly-tour-make-content-holder p { margin-bottom: 15px; } .highly-more-results.highly-items { margin: 0 -15px; } .highly-more-results.highly-items .highly-item { height: 55px; } .highly-more-results.highly-items .highly-item .highly-profile-pic { height: 30px; width: 30px; margin: 12px 10px 0 10px; float: left; } .highly-more-results.highly-items .highly-item .highly-profile-meta { right: 90px; } .highly-more-results.highly-items .highly-item .highly-pull-right .highly-btn { padding: 3px; margin: 11px 10px 0 0; font-size: 14px; line-height: 25px; } .highly-share-slack .highly-share-slack-input-holder.highly-has-teams input#highly-share-slack-input { min-width: auto !important; } } </style><style>			@font-face {			    font-family: 'TrolaText';			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_0_0.eot');			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_0_0.eot') format('embedded-opentype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_0_0.woff') format('woff'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_0_0.ttf') format('truetype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_0_0.svg') format('svg');			    font-weight: bold;			    font-style: italic;			  }						@font-face {			    font-family: 'TrolaText';			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_1_0.eot');			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_1_0.eot') format('embedded-opentype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_1_0.woff') format('woff'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_1_0.ttf') format('truetype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_1_0.svg') format('svg');			    font-weight: bold;			    font-style: normal;			  }						@font-face {			    font-family: 'TrolaText';			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_2_0.eot');			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_2_0.eot') format('embedded-opentype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_2_0.woff') format('woff'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_2_0.ttf') format('truetype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_2_0.svg') format('svg');			    font-weight: normal;			    font-style: italic;			  }						@font-face {			    font-family: 'TrolaText';			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_3_0.eot');			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_3_0.eot') format('embedded-opentype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_3_0.woff') format('woff'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_3_0.ttf') format('truetype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/trola/2F02A7_3_0.svg') format('svg');			    font-weight: normal;			    font-style: normal;			  }						@font-face {			    font-family: 'highlyfont';			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/highlyfont.eot');			    src:url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/highlyfont.eot') format('embedded-opentype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/highlyfont.woff') format('woff'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/highlyfont.ttf') format('truetype'),			    url('chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/fonts/highlyfont.svg') format('svg');			    font-weight: normal;			    font-style: normal;			  }							.highly-on {					cursor: url(chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/images/cursor-on.png) 5 20, auto !important;  				cursor: -webkit-image-set(url("chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/images/cursor-on.png") 1x) 5 20, auto !important; }  				.highly-on .highly-main-article-content-container {    			cursor: url(chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/images/cursor-on.png)) 5 20, auto; }  				.highly-on .highly-highlight-menu {    			display: block; 				}			</style><link rel="stylesheet" type="text/css" href="chrome-extension://ejfajpmpabphhkcacijnhggimhelopfg/styles.css"></head>
<body class="book toc2 toc-left" data-gr-c-s-loaded="true">
<div id="header">
<h1>Groovy Language Documentation</h1>
<div class="details">
<span id="revnumber">version 3.0.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_language_specification">1. Groovy Language Specification</a>
<ul class="sectlevel2">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax">1.1. Syntax</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_comments">1.1.1. Comments</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_single_line_comment">Single-line comment</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiline_comment">Multiline comment</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovydoc_comment">Groovydoc comment</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_shebang_line">Shebang line</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_keywords">1.1.2. Keywords</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_identifiers">1.1.3. Identifiers</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_identifiers">Normal identifiers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_quoted_identifiers">Quoted identifiers</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#all-strings">1.1.4. Strings</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_single_quoted_string">Single-quoted string</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_concatenation">String concatenation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_triple_single_quoted_string">Triple-single-quoted string</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_escaping_special_characters">Escaping special characters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_unicode_escape_sequence">Unicode escape sequence</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_double_quoted_string">Double-quoted string</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_interpolation">String interpolation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_special_case_of_interpolating_closure_expressions">Special case of interpolating closure expressions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interoperability_with_java">Interoperability with Java</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstring_and_string_hashcodes">GString and String hashCodes</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_triple_double_quoted_string">Triple-double-quoted string</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_slashy_string">Slashy string</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_special_cases">Special cases</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dollar_slashy_string">Dollar slashy string</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_summary_table">String summary table</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_characters">Characters</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_numbers">1.1.5. Numbers</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integral_literals">Integral literals</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternative_non_base_10_representations">Alternative non-base 10 representations</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_binary_literal">Binary literal</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_octal_literal">Octal literal</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_hexadecimal_literal">Hexadecimal literal</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decimal_literals">Decimal literals</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_underscore_in_literals">Underscore in literals</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_number_type_suffixes">Number type suffixes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_math_operations">Math operations</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#integer_division">The case of the division operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#power_operator">The case of the power operator</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_booleans">1.1.6. Booleans</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_lists">1.1.7. Lists</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arrays">1.1.8. Arrays</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maps">1.1.9. Maps</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovy-operators">1.2. Operators</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arithmetic_operators">1.2.1. Arithmetic operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_arithmetic_operators">Normal arithmetic operators</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_unary_operators">Unary operators</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assignment_arithmetic_operators">Assignment arithmetic operators</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_relational_operators">1.2.2. Relational operators</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_logical_operators">1.2.3. Logical operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_precedence">Precedence</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_short_circuiting">Short-circuiting</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bitwise_operators">1.2.4. Bitwise operators</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conditional_operators">1.2.5. Conditional operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_not_operator">Not operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ternary_operator">Ternary operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_elvis_operator">Elvis operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_operators">1.2.6. Object operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_safe_navigation_operator">Safe navigation operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_direct_field_access_operator">Direct field access operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#method-pointer-operator">Method pointer operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#method-reference-operator">Method reference operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_regular_expression_operators">1.2.7. Regular expression operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_pattern_operator">Pattern operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_find_operator">Find operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_match_operator">Match operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_operators">1.2.8. Other operators</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_operator">Spread operator</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spreading_method_arguments">Spreading method arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_list_elements">Spread list elements</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_map_elements">Spread map elements</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_range_operator">Range operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spaceship_operator">Spaceship operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#subscript-operator">Subscript operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_membership_operator">Membership operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_identity_operator">Identity operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_coercion_operator">Coercion operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_diamond_operator">Diamond operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_call_operator">Call operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operator_precedence">1.2.9. Operator precedence</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Operator-Overloading">1.2.10. Operator overloading</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_program_structure">1.3. Program structure</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_package_names">1.3.1. Package names</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_imports">1.3.2. Imports</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_imports">Default imports</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_import">Simple import</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_star_import">Star import</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_import">Static import</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_import_aliasing">Static import aliasing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_star_import">Static star import</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_aliasing">Import aliasing</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_scripts_versus_classes">1.3.3. Scripts versus classes</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_static_void_main_vs_script">public static void main vs script</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_script_class">Script class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods">Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variables">Variables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_orientation">1.4. Object orientation</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_types">1.4.1. Types</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_primitive_types">Primitive types</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class">Class</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_class">Normal class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inner_class">Inner class</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_anonymous_inner_class">Anonymous inner class</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_class">Abstract class</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interface">Interface</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_constructors">Constructors</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_positional_parameters">Positional parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_parameters">Named parameters</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_2">Methods</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_definition">Method definition</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_parameters_2">Named parameters</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mixing_named_and_positional_parameters">Mixing named and positional parameters</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_arguments">Default arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_varargs">Varargs</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_selection_algorithm">Method selection algorithm</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exception_declaration">Exception declaration</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fields_and_properties">Fields and properties</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#fields">Fields</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#properties">Properties</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_annotation">Annotation</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ann-definition">Annotation definition</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ann-placement">Annotation placement</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_annotation_member_values">Annotation member values</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_retention_policy">Retention policy</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_annotation_parameters">Closure annotation parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_meta_annotations">Meta-annotations</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declaring_meta_annotations">Declaring meta-annotations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-behavior">Behavior of meta-annotations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-members">Meta-annotation parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#handling_duplicate_annotations">Handling duplicate annotations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-processor">Custom annotation processors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance">Inheritance</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#generics">Generics</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traits">1.4.2. Traits</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_3">Methods</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_methods">Public methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_methods">Abstract methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_private_methods">Private methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_final_methods">Final methods</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_meaning_of_this">The meaning of this</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interfaces">Interfaces</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_properties">Properties</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fields">Fields</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_private_fields">Private fields</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_fields">Public fields</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composition_of_behaviors">Composition of behaviors</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overriding_default_methods">Overriding default methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_traits">Extending traits</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_inheritance">Simple inheritance</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_inheritance">Multiple inheritance</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_duck_typing_and_traits">Duck typing and traits</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_code">Dynamic code</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_methods_in_a_trait">Dynamic methods in a trait</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_inheritance_conflicts">Multiple inheritance conflicts</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_conflict_resolution">Default conflict resolution</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_user_conflict_resolution">User conflict resolution</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_implementation_of_traits">Runtime implementation of traits</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementing_a_trait_at_runtime">Implementing a trait at runtime</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementing_multiple_traits_at_once">Implementing multiple traits at once</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_chaining_behavior">Chaining behavior</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_semantics_of_super_inside_a_trait">Semantics of super inside a trait</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_features">Advanced features</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sam_type_coercion">SAM type coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_java_8_default_methods">Differences with Java 8 default methods</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_mixins">Differences with mixins</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods_properties_and_fields">Static methods, properties and fields</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance_of_state_gotchas">Inheritance of state gotchas</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_self_types">Self types</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_constraints_on_traits">Type constraints on traits</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#traits-selftype">The @SelfType annotation</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_limitations">Limitations</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compatibility_with_ast_transformations">Compatibility with AST transformations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_prefix_and_postfix_operations">Prefix and postfix operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures">1.5. Closures</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax_2">1.5.1. Syntax</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_defining_a_closure">Defining a closure</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-as-object">Closures as an object</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_calling_a_closure">Calling a closure</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters">1.5.2. Parameters</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_parameters">Normal parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#implicit-it">Implicit parameter</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_varargs_2">Varargs</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_strategy">1.5.3. Delegation strategy</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_closures_vs_lambda_expressions">Groovy closures vs lambda expressions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-owner">Owner, delegate and this</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-this">The meaning of this</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_owner_of_a_closure">Owner of a closure</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegate_of_a_closure">Delegate of a closure</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_strategy_2">Delegation strategy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures_in_gstrings">1.5.4. Closures in GStrings</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_coercion">1.5.5. Closure coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_functional_programming">1.5.6. Functional programming</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_currying">Currying</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_left_currying">Left currying</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_right_currying">Right currying</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_index_based_currying">Index based currying</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_memoization">Memoization</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composition">Composition</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_trampoline">Trampoline</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_pointers">Method pointers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_semantics">1.6. Semantics</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_statements">1.6.1. Statements</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_definition">Variable definition</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_assignment">Variable assignment</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_assignment">Multiple assignment</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overflow_and_underflow">Overflow and Underflow</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_destructuring_with_multiple_assignment">Object destructuring with multiple assignment</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_control_structures">Control structures</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conditional_structures">Conditional structures</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_if_else">if / else</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_switch_case">switch / case</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_looping_structures">Looping structures</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classic_for_loop">Classic for loop</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_for_in_loop">for in loop</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_while_loop">while loop</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exception_handling">Exception handling</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_try_catch_finally">try / catch / finally</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multi_catch">Multi-catch</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_power_assertion">Power assertion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_labeled_statements">Labeled statements</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expressions">1.6.2. Expressions</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#gpath_expressions">GPath expressions</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_navigation">Object navigation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expression_deconstruction">Expression Deconstruction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath_for_xml_navigation">GPath for XML navigation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_promotion_and_coercion">1.6.3. Promotion and coercion</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_number_promotion">Number promotion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-coercion">Closure to type coercion</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assigning_a_closure_to_a_sam_type">Assigning a closure to a SAM type</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_calling_a_method_accepting_a_sam_type_with_a_closure">Calling a method accepting a SAM type with a closure</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_to_arbitrary_type_coercion">Closure to arbitrary type coercion</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_to_type_coercion">Map to type coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_to_enum_coercion">String to enum coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_type_coercion">Custom type coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class_literals_vs_variables_and_the_as_operator">Class literals vs variables and the as operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optionality">1.6.4. Optionality</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_parentheses">Optional parentheses</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_semicolons">Optional semicolons</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_return_keyword">Optional return keyword</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_public_keyword">Optional public keyword</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">1.6.5. The Groovy Truth</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_boolean_expressions">Boolean expressions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_collections_and_arrays">Collections and Arrays</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_matchers">Matchers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterators_and_enumerations">Iterators and Enumerations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maps_2">Maps</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strings">Strings</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_numbers_2">Numbers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_references">Object References</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizing_the_truth_with_asboolean_methods">Customizing the truth with asBoolean() methods</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_typing">1.6.6. Typing</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_typing">Optional typing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#static-type-checking">Static type checking</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_code_typechecked_code_annotation">The <code>@TypeChecked</code> annotation</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_activating_type_checking_at_compile_time">Activating type checking at compile time</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_skipping_sections">Skipping sections</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_assignments">Type checking assignments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_and_map_constructors">List and map constructors</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_resolution">Method resolution</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#type-inference">Type inference</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_principles">Principles</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variables_vs_fields_in_type_inference">Variables vs fields in type inference</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_collection_literal_type_inference">Collection literal type inference</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">Least upper bound</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instanceof_inference">instanceof inference</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-flow-typing">Flow typing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_type_inference">Advanced type inference</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures_and_type_inference">Closures and type inference</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_return_type_inference">Return type inference</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameter_type_inference">Parameter type inference</a>
<ul class="sectlevel7">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_explicit_closure_parameters">Explicit closure parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters_inferred_from_single_abstract_method_types">Parameters inferred from single-abstract method types</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_code_closureparams_code_annotation">The <code>@ClosureParams</code> annotation</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_delegatesto_code"><code>@DelegatesTo</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_compilation">Static compilation</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_vs_static">Dynamic vs static</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilestatic-annotation">The <code>@CompileStatic</code> annotation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_key_benefits">Key benefits</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_extensions">1.6.7. Type checking extensions</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_writing_a_type_checking_extension">Writing a type checking extension</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_towards_a_smarter_type_checker">Towards a smarter type checker</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Howdoesitwork">The extensions attribute</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_dsl_for_type_checking">A DSL for type checking</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-TheAPI">Type checking extensions API</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-AST">AST</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Events">Events</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Workingwithextensions">Working with extensions</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Supportclasses">Support classes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Classnodes">Class nodes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Helpingthetypechecker">Helping the type checker</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Throwinganerror">Throwing an error</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-isXXXExpression">isXXXExpression</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Virtualmethods">Virtual methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Scoping">Scoping</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Otherusefulmethods">Other useful methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_type_checking_extensions">Advanced type checking extensions</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_precompiled_type_checking_extensions">Precompiled type checking extensions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_grab_in_a_type_checking_extension">Using @Grab in a type checking extension</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sharing_or_packaging_type_checking_extensions">Sharing or packaging type checking extensions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_global_type_checking_extensions">Global type checking extensions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_extensions_and_compilestatic">Type checking extensions and @CompileStatic</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#mixed-mode">Mixed mode compilation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ast-xform-as-extension">Transforming the AST in an extension</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tools">2. Tools</a>
<ul class="sectlevel2">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_running_groovy_from_the_commandline">2.1. Running Groovy from the commandline</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovy-commandline">2.1.1. groovy, the Groovy command</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compiling_groovy">2.2. Compiling Groovy</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyc-compiler">2.2.1. groovyc, the Groovy compiler</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ant_task">2.2.2. Ant task</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovyc"><code>&lt;groovyc&gt;</code></a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-Description">Description</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-Requiredtaskdef">Required taskdef</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovycAttributes">&lt;groovyc&gt; Attributes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovycNestedElements">&lt;groovyc&gt; Nested Elements</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-JointCompilation">Joint Compilation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gant">2.2.3. Gant</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gradle">2.2.4. Gradle</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maven_integration">2.2.5. Maven integration</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gmaven_and_gmavenplus">GMaven and GMavenPlus</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven">GMaven</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmavenplus">GMavenPlus</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven2">GMaven 2</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyeclipse">The Groovy Eclipse Maven plugin</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-jointcompilation">2.2.6. Joint compilation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-android">2.2.7. Android support</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovysh_the_groovy_shell">2.3. Groovysh, the Groovy shell</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_groovy_shell">2.3.1. Groovy : Groovy Shell</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Features">Features</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Command-lineOptionsandArguments">Command-line Options and Arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-EvaluatingExpressions">Evaluating Expressions</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-SimpleExpressions">Simple Expressions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-EvaluationResult">Evaluation Result</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Multi-lineExpressions">Multi-line Expressions</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-DefineaClass">Define a Class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-UsetheClass">Use the Class</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Variables">Variables</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Functions">Functions</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Commands">Commands</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-RecognizedCommands">Recognized Commands</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-help"><code>help</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-exit"><code>exit</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-import"><code>import</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-grab"><code>grab</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-display"><code>display</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-clear"><code>clear</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-show"><code>show</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-inspect"><code>inspect</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-purge"><code>purge</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-edit"><code>edit</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-load"><code>load</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-save"><code>save</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-record"><code>record</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-history"><code>history</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-alias"><code>alias</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-doc"><code>doc</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-set"><code>set</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Preferences">Preferences</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-RecognizedPreferences">Recognized Preferences</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-InterpreterMode"><code>interpreterMode</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-verbosity"><code>verbosity</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_colors_code"><code>colors</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-show-last-result"><code>show-last-result</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-sanitize-stack-trace"><code>sanitize-stack-trace</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-editor"><code>editor</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-SettingaPreference">Setting a Preference</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ListingPreferences">Listing Preferences</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ClearingPreferencesieResettingtoDefaults">Clearing Preferences (i.e. Resetting to Defaults)</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-UserProfileScriptsandState">User Profile Scripts and State</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProfileScripts">Profile Scripts</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshprofile"><code>$HOME/.groovy/groovysh.profile</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshrc"><code>$HOME/.groovy/groovysh.rc</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-State">State</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshhistory"><code>$HOME/.groovy/groovysh.history</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-register">Custom commands</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Troubleshooting">Troubleshooting</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-PlatformProblems">Platform Problems</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProblemsloadingtheJLineDLL">Problems loading the JLine DLL</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProblemswithCygwinonWindows">Problems with Cygwin on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-GMavenPlus">2.3.2. GMavenPlus Maven Plugin</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-GradleGroovyshPlugin">2.3.3. Gradle Groovysh Plugin</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyconsole_the_groovy_swing_console">2.4. groovyConsole, the Groovy swing console</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#title-heading">2.4.1. Groovy : Groovy Console</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Basics">2.4.2. Basics</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Features">2.4.3. Features</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Command-lineOptionsandArguments">Command-line Options and Arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-RunningScripts">Running Scripts</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-EditingFiles">Editing Files</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Historyandresults">History and results</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Interrupt">Interrupting a script</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Andmore">And more</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-EmbeddingtheConsole">2.4.4. Embedding the Console</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Visualizingscriptoutputresults">2.4.5. Visualizing script output results</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-ASTbrowser">2.4.6. AST browser</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovydoc_the_groovy_java_documentation_generator">2.5. groovydoc, the Groovy &amp; Java documentation generator</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-CommandLine">2.5.1. The groovydoc command line tool</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-Ant">2.5.2. The groovydoc Ant task</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Requiredtaskdef">Required taskdef</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-groovydocAttributes">&lt;groovydoc&gt; Attributes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-groovydocNestedElements">&lt;groovydoc&gt; Nested Elements</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-link">link</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Example1-groovydocAnttask">Example #1 - &lt;groovydoc&gt; Ant task</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Example2-ExecutinggroovydocfromGroovy">Example #2 - Executing &lt;groovydoc&gt; from Groovy</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_templates">Custom templates</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_groovydoc_class">Custom Groovydoc class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_the_custom_groovydoc_task">Using the custom groovydoc task</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-GMavenPlus">2.5.3. GMavenPlus Maven Plugin</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ide_integration">2.6. IDE integration</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_user_guides">3. User Guides</a>
<ul class="sectlevel2">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_getting_started">3.1. Getting started</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_download">3.1.1. Download</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stable">Stable</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_snapshots">Snapshots</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_prerequisites">Prerequisites</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maven_repository">3.1.2. Maven Repository</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stable_release">Stable Release</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#SDKMAN">3.1.3. SDKMAN! (The Software Development Kit Manager)</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_ways_to_get_groovy">3.1.4. Other ways to get Groovy</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_installation_on_mac_os_x">Installation on Mac OS X</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macports">MacPorts</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_homebrew">Homebrew</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_installation_on_windows">Installation on Windows</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_distributions">Other Distributions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_code">Source Code</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ide_plugin">IDE plugin</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_install_binary">3.1.5. Install Binary</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_java">3.2. Differences with Java</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_imports_2">3.2.1. Default imports</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multi_methods">3.2.2. Multi-methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_array_initializers">3.2.3. Array initializers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_package_scope_visibility">3.2.4. Package scope visibility</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arm_blocks">3.2.5. ARM blocks</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inner_classes">3.2.6. Inner classes</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_inner_classes">Static inner classes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_anonymous_inner_classes">Anonymous Inner Classes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_instances_of_non_static_inner_classes">Creating Instances of Non-Static Inner Classes</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_lambda_expressions_and_the_method_reference_operator">3.2.7. Lambda expressions and the method reference operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstrings">3.2.8. GStrings</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_and_character_literals">3.2.9. String and Character literals</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_primitives_and_wrappers">3.2.10. Primitives and wrappers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_behaviour_of_code_code">3.2.11. Behaviour of <code>==</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conversions">3.2.12. Conversions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extra_keywords">3.2.13. Extra keywords</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_development_kit">3.3. Groovy Development Kit</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_io">3.3.1. Working with IO</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_reading_files">Reading files</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_writing_files">Writing files</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traversing_file_trees">Traversing file trees</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_data_and_objects">Data and objects</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#process-management">Executing External Processes</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_collections">3.3.2. Working with collections</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Lists">Lists</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_literals">List literals</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_as_a_boolean_expression">List as a boolean expression</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterating_on_a_list">Iterating on a list</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_lists">Manipulating lists</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#List-Filtering">Filtering and searching</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_or_removing_elements">Adding or removing elements</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_set_operations">Set operations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sorting">Sorting</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_duplicating_elements">Duplicating elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Maps">Maps</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_literals">Map literals</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_property_notation">Map property notation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterating_on_maps">Iterating on maps</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_maps">Manipulating maps</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_or_removing_elements_2">Adding or removing elements</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#JN1035-Maps-Collectionviewsofamap">Keys, values and entries</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_filtering_and_searching">Filtering and searching</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Maps-Grouping">Grouping</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Ranges">Ranges</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax_enhancements_for_collections">Syntax enhancements for collections</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath_support">GPath support</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_operator_2">Spread operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Gettingefficientwiththestar-dotoperator">The star-dot `*.' operator</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Slicingwiththesubscriptoperator">Slicing with the subscript operator</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-EnhancedCollectionMethods">Enhanced Collection Methods</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_legacy_date_calendar_types">3.3.3. Working with legacy Date/Calendar types</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_date_time_types">3.3.4. Working with Date/Time types</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_formatting_and_parsing">Formatting and parsing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_date_time">Manipulating date/time</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_addition_and_subtraction">Addition and subtraction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiplication_and_division">Multiplication and division</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_incrementing_and_decrementing">Incrementing and decrementing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_negation">Negation</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interacting_with_date_time_values">Interacting with date/time values</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_property_notation">Property notation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ranges_code_upto_code_and_code_downto_code">Ranges, <code>upto</code>, and <code>downto</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_combining_date_time_values">Combining date/time values</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_periods_and_durations">Creating periods and durations</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_converting_between_legacy_and_jsr_310_types">Converting between legacy and JSR 310 types</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handy_utilities">3.3.5. Handy utilities</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_configslurper">ConfigSlurper</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expando">Expando</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_observable_list_map_and_set">Observable list, map and set</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_metaprogramming">3.4. Metaprogramming</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_metaprogramming">3.4.1. Runtime metaprogramming</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyobject_interface">GroovyObject interface</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_invokemethod">invokeMethod</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setproperty">get/setProperty</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setmetaclass">get/setMetaClass</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setattribute">get/setAttribute</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methodmissing">methodMissing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_propertymissing">propertyMissing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methodmissing">static methodMissing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_propertymissing">static propertyMissing</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyinterceptable">GroovyInterceptable</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#categories">Categories</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_metaclasses">Metaclasses</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_default_metaclass_code_metaclassimpl_code">The default metaclass <code>MetaClassImpl</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_metaclasses">Custom metaclasses</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_metaclass">Delegating metaclass</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_magic_package">Magic package</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_per_instance_metaclass">Per instance metaclass</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#metaprogramming_emc">ExpandoMetaClass</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_4">Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_properties_2">Properties</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_constructors_2">Constructors</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods">Static Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_borrowing_methods">Borrowing Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_method_names">Dynamic Method Names</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_discovery">Runtime Discovery</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyobject_methods">GroovyObject Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overriding_static_invokemethod">Overriding Static invokeMethod</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_interfaces">Extending Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extension_modules">Extension modules</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_existing_classes">Extending existing classes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instance_methods">Instance methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods_2">Static methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#module-descriptor">Module descriptor</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extension_modules_and_classpath">Extension modules and classpath</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compatibility_with_type_checking">Compatibility with type checking</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compile_time_metaprogramming">3.4.2. Compile-time metaprogramming</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_available_ast_transformations">Available AST transformations</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_generation_transformations">Code generation transformations</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ToString"><code>@groovy.transform.ToString</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-EqualsAndHashCode"><code>@groovy.transform.EqualsAndHashCode</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TupleConstructor"><code>@groovy.transform.TupleConstructor</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementation_details">Implementation Details</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_immutability_support">Immutability support</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customization_options">Customization options</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-MapConstructor"><code>@groovy.transform.MapConstructor</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Canonical"><code>@groovy.transform.Canonical</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-InheritConstructors"><code>@groovy.transform.InheritConstructors</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Category"><code>@groovy.lang.Category</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-IndexedProperty"><code>@groovy.transform.IndexedProperty</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Lazy"><code>@groovy.lang.Lazy</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Newify"><code>@groovy.lang.Newify</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Sortable"><code>@groovy.transform.Sortable</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Builder"><code>@groovy.transform.builder.Builder</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoImplement"><code>@groovy.transform.AutoImplement</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class_design_annotations">Class design annotations</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-BaseScript"><code>@groovy.transform.BaseScript</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Delegate"><code>@groovy.lang.Delegate</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Immutable"><code>@groovy.transform.Immutable</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImmutableBase"><code>@groovy.transform.ImmutableBase</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-PropertyOptions"><code>@groovy.transform.PropertyOptions</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-VisibilityOptions"><code>@groovy.transform.VisibilityOptions</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImumtableOptions"><code>@groovy.transform.ImmutableOptions</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-KnownImmutable"><code>@groovy.transform.KnownImmutable</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Memoized"><code>@groovy.transform.Memoized</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TailRecursive"><code>@groovy.transform.TailRecursive</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Singleton"><code>@groovy.lang.Singleton</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Mixin"><code>@groovy.lang.Mixin</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_logging_improvements">Logging improvements</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log"><code>@groovy.util.logging.Log</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Commons"><code>@groovy.util.logging.Commons</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log4j"><code>@groovy.util.logging.Log4j</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log4j2"><code>@groovy.util.logging.Log4j2</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Slf4j"><code>@groovy.util.logging.Slf4j</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declarative_concurrency">Declarative concurrency</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Synchronized"><code>@groovy.transform.Synchronized</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-WithReadLock"><code>@groovy.transform.WithReadLock</code> and <code>@groovy.transform.WithWriteLock</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_easier_cloning_and_externalizing">Easier cloning and externalizing</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoClone"><code>@groovy.transform.AutoClone</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoExternalize"><code>@groovy.transform.AutoExternalize</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_safer_scripting">Safer scripting</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ThreadInterrupt"><code>@groovy.transform.ThreadInterrupt</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TimedInterrupt"><code>@groovy.transform.TimedInterrupt</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ConditionalInterrupt"><code>@groovy.transform.ConditionalInterrupt</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compiler_directives">Compiler directives</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Field"><code>@groovy.transform.Field</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-PackageScope"><code>@groovy.transform.PackageScope</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoFinal"><code>@groovy.transform.AutoFinal</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AnnotationCollector"><code>@groovy.transform.AnnotationCollector</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TypeChecked"><code>@groovy.transform.TypeChecked</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-CompileStatic"><code>@groovy.transform.CompileStatic</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-CompileDynamic"><code>@groovy.transform.CompileDynamic</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-DelegatesTo"><code>@groovy.lang.DelegatesTo</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-SelfType"><code>@groovy.transform.SelfType</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_swing_patterns">Swing patterns</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Bindable"><code>@groovy.beans.Bindable</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ListenerList"><code>@groovy.beans.ListenerList</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Vetoable"><code>@groovy.beans.Vetoable</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_test_assistance">Test assistance</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-NotYetImplemented"><code>@groovy.transform.NotYetImplemented</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ASTTest"><code>@groovy.transform.ASTTest</code></a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_grape_handling">Grape handling</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Grab"><code>@groovy.lang.Grab</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabConfig"><code>@groovy.lang.GrabConfig</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabExclude"><code>@groovy.lang.GrabExclude</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabResolver"><code>@groovy.lang.GrabResolver</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Grapes"><code>@groovy.lang.Grapes</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#developing-ast-xforms">Developing AST transformations</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compilation_phases_guide">Compilation phases guide</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-local">Local transformations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-global">Global transformations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_api_guide">AST API guide</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstractasttransformation">AbstractASTTransformation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classcodeexpressiontransformer">ClassCodeExpressionTransformer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_nodes">AST Nodes</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macros">Macros</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_2">Introduction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_statements_and_expressions">Statements and expressions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_substitution">Variable substitution</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macroclass">MacroClass</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macro_methods">@Macro methods</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_ast_transformations">Testing AST transformations</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_separating_source_trees">Separating source trees</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_debugging_ast_transformations">Debugging AST transformations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_astmatcher">ASTMatcher</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_asttest">ASTTest</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_external_references">External references</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-grape">3.5. Dependency management with Grape</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_quick_start">3.5.1. Quick start</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_add_a_dependency">Add a Dependency</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-SpecifyAdditionalRepositories">Specify Additional Repositories</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MavenClassifiers">Maven Classifiers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-ExcludingTransitiveDependencies">Excluding Transitive Dependencies</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-JDBCDrivers">JDBC Drivers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-UsingGrapeFromtheGroovyShell">Using Grape From the Groovy Shell</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Proxysettings">Proxy settings</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Logging">Logging</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Detail">3.5.2. Detail</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Usage">3.5.3. Usage</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Annotation">Annotation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MultipleGrapeAnnotations">Multiple Grape Annotations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Methodcall">Method call</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-grabHashMapParameters">grab(HashMap) Parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-ArgumentsMaparguments">Arguments Map arguments</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-CommandLineTool">Command Line Tool</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Advancedconfiguration">Advanced configuration</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-RepositoryDirectory">Repository Directory</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-CustomizeIvysettings">Customize Ivy settings</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MoreExamples">More Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_guide">3.6. Testing Guide</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_3">3.6.1. Introduction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_language_features">3.6.2. Language Features</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_power_assertions">Power Assertions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mocking_and_stubbing">Mocking and Stubbing</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_coercion">Map Coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_coercion_2">Closure Coercion</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mockfor_and_stubfor">MockFor and StubFor</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#testing_guide_emc">Expando Meta-Class (EMC)</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gdk_methods">GDK Methods</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterable_combinations">Iterable#combinations</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterable_eachcombination">Iterable#eachCombination</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tool_support">Tool Support</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_test_code_coverage">Test Code Coverage</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_with_junit">3.6.3. Testing with JUnit</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_3">JUnit 3</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assertion_methods">Assertion Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_shouldfail_methods">shouldFail Methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_notyetimplemented_method">notYetImplemented Method</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_4">JUnit 4</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_5">JUnit 5</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_with_spock">3.6.4. Testing with Spock</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_specifications">Specifications</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_spock">More Spock</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_functional_tests_with_geb">3.6.5. Functional Tests with Geb</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_geb_script">A Geb Script</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_geb">More Geb</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_processing_json">3.7. Processing JSON</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#json_jsonslurper">3.7.1. JsonSlurper</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parser_variants">Parser Variants</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jsonoutput">3.7.2. JsonOutput</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizing_output">Customizing Output</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_formatted_output">Formatted Output</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_builders">Builders</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interacting_with_a_sql_database">3.8. Interacting with a SQL database</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_to_the_database">3.8.1. Connecting to the database</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_with_a_datasource">Connecting with a DataSource</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_using_grab">Connecting using @Grab</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_executing_sql">3.8.2. Executing SQL</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_tables">Creating tables</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_basic_crud_operations">3.8.3. Basic CRUD operations</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_inserting_data">Creating/Inserting data</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_reading_rows">Reading rows</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_updating_rows">Updating rows</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_deleting_rows">Deleting rows</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_sql_operations">3.8.4. Advanced SQL operations</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_transactions">Working with transactions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_batches">Using batches</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_performing_pagination">Performing pagination</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fetching_metadata">Fetching metadata</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_and_named_ordinal_parameters">Named and named-ordinal parameters</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stored_procedures">Stored procedures</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_datasets">3.8.5. Using DataSets</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_processing_xml">3.9. Processing XML</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parsing_xml">3.9.1. Parsing XML</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmlparser_and_xmlslurper">XmlParser and XmlSlurper</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domcategory">DOMCategory</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath">3.9.2. GPath</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simply_traversing_the_tree">Simply traversing the tree</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_flexible_navigation_with_children_depthfirst_and_breadthfirst">Flexible navigation with children (*), depthFirst (**) and breadthFirst</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_xml">3.9.3. Creating XML</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder">MarkupBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingmarkupbuilder">StreamingMarkupBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilderhelper">MarkupBuilderHelper</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domtogroovy">DOMToGroovy</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_xml">3.9.4. Manipulating XML</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_nodes">Adding nodes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_modifying_removing_nodes">Modifying / Removing nodes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_printing_xml">Printing XML</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmlutil">XmlUtil</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_scripting_ant_tasks">3.10. Scripting Ant tasks</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_groovy_ant_task">3.11. The &lt;groovy&gt; Ant Task</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_required_taskdef">3.11.1. Required taskdef</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_attributes">3.11.2. &lt;groovy&gt; attributes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters_specified_as_nested_elements">3.11.3. Parameters specified as nested elements</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classpath">&lt;classpath&gt;</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arg">&lt;arg&gt;</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_available_bindings">3.11.4. Available bindings</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_examples_2">3.11.5. Examples</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_engines">3.12. Template engines</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_4">3.12.1. Introduction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_framework">3.12.2. Template framework</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simpletemplateengine">3.12.3. SimpleTemplateEngine</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_usage_note">Advanced Usage Note</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingtemplateengine">3.12.4. StreamingTemplateEngine</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstringtemplateengine">3.12.5. GStringTemplateEngine</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmltemplateengine">3.12.6. XmlTemplateEngine</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_markuptemplateengine">3.12.7. The MarkupTemplateEngine</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_template_format">The template format</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_basics">Basics</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_support_methods">Support methods</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_includes">Includes</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fragments">Fragments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_layouts">Layouts</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_rendering_contents">Rendering contents</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creation_of_a_template_engine">Creation of a template engine</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-config">Configuration options</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoformat">Automatic formatting</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoescape">Automatic escaping</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-gotchas">Common gotchas</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strings_containing_markup">Strings containing markup</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-i18n">Internationalization</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-basetemplate">Custom template classes</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checked_templates">Type checked templates</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_type_checking">Optional type checking</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternative_declaration_of_types">Alternative declaration of types</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_performance_of_type_checked_templates">Performance of type checked templates</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_solutions">3.12.8. Other solutions</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_servlet_support">3.13. Servlet support</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_variables">3.13.1. Implicit variables</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_setting_up_groovylets">3.13.2. Setting up groovylets</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integrating_groovy_in_a_java_application">3.14. Integrating Groovy in a Java application</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_integration_mechanisms">3.14.1. Groovy integration mechanisms</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#integ-eval">Eval</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#integ-groovyshell">GroovyShell</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_sources">Multiple sources</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sharing_data_between_a_script_and_the_application">Sharing data between a script and the application</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_script_class">Custom script class</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovyclassloader">GroovyClassLoader</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyscriptengine">GroovyScriptEngine</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compilationunit">CompilationUnit</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_scripting_framework">3.14.2. Bean Scripting Framework</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_getting_started_2">Getting started</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_passing_in_variables">Passing in variables</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_calling_options">Other calling options</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_access_to_the_scripting_engine">Access to the scripting engine</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#jsr223">3.14.3. JSR 223 javax.script API</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domain_specific_languages">3.15. Domain-Specific Languages</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_command_chains">3.15.1. Command chains</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operator_overloading">3.15.2. Operator overloading</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_script_base_classes">3.15.3. Script base classes</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_script_class">The Script class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#dsl-basescript">The @BaseScript annotation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternate_abstract_method">Alternate abstract method</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_properties_to_numbers">3.15.4. Adding properties to numbers</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-delegatesto">3.15.5. @DelegatesTo</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DSLsmadeeasy">Explaining delegation strategy at compile time</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DelegatesTo">@DelegatesTo</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DelegatesTomodes">DelegatesTo modes</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Simpledelegation">Simple delegation</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Delegationstrategy">Delegation strategy</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Delegatetoparameter">Delegate to parameter</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Multipleclosures">Multiple closures</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_to_a_generic_type">Delegating to a generic type</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_to_an_arbitrary_type">Delegating to an arbitrary type</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilation-customizers">3.15.6. Compilation customizers</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_5">Introduction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_customizer">Import customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformation_customizer">AST transformation customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_secure_ast_customizer">Secure AST customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_aware_customizer">Source aware customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizer_builder">Customizer builder</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_customizer_2">Import customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformation_customizer_2">AST transformation customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_secure_ast_customizer_2">Secure AST customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_aware_customizer_2">Source aware customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inlining_a_customizer">Inlining a customizer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_customizers">Multiple customizers</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_config_script_flag">Config script flag</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_compilation_by_default">Static compilation by default</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformations">AST transformations</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_type_checking_extensions">3.15.7. Custom type checking extensions</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_builders_2">3.15.8. Builders</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_a_builder">Creating a builder</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_buildersupport">BuilderSupport</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_factorybuildersupport">FactoryBuilderSupport</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_existing_builders">Existing builders</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder_2">MarkupBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingmarkupbuilder_2">StreamingMarkupBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_saxbuilder">SaxBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_staxbuilder">StaxBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dombuilder">DOMBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_nodebuilder">NodeBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jsonbuilder">JsonBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingjsonbuilder">StreamingJsonBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#swingbuilder">SwingBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_antbuilder">AntBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_clibuilder">CliBuilder</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_an_interface">Using Annotations and an interface</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_an_instance">Using Annotations and an instance</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_a_script">Using Annotations and a script</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_options_with_arguments">Options with arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_specifying_a_type">Specifying a type</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_parsing_of_the_argument_string">Custom parsing of the argument String</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_options_with_multiple_arguments">Options with multiple arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_types_and_multiple_arguments">Types and multiple arguments</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_setting_a_default_value">Setting a default value</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_use_with_code_typechecked_code">Use with <code>TypeChecked</code></a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_cli_usage">Advanced CLI Usage</a>
<ul class="sectlevel7">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_apache_commons_cli">Apache Commons CLI</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_picocli">Picocli</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_objectgraphbuilder">ObjectGraphBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder">JmxBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_filetreebuilder">FileTreeBuilder</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_jmx">3.16. Working with JMX</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_6">3.16.1. Introduction</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_monitoring_the_jvm">3.16.2. Monitoring the JVM</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_monitoring_tomcat">3.16.3. Monitoring Tomcat</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_oc4j_example">3.16.4. OC4J Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_weblogic_example">3.16.5. WebLogic Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spring_example">3.16.6. Spring Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_troubleshooting">3.16.7. Troubleshooting</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_java_lang_securityexception">java.lang.SecurityException</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#jmx_jmxbuilder">3.16.8. JmxBuilder</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instantiating_jmxbuilder">Instantiating JmxBuilder</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmx_connectors">JMX Connectors</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connector_server">Connector Server</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connector_client">Connector Client</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_mbean_export">JmxBuilder MBean Export</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_vs_explicit_descriptors">Implicit vs Explicit Descriptors</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_jmxbuilder_export_node">The JmxBuilder.export() Node</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_export_syntax">JmxBuilder.export() Syntax</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integration_with_groovymbean_class">Integration with GroovyMBean Class</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mbean_registration_with_jmxbuilder_bean">MBean Registration with JmxBuilder.bean()</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_export">Implicit Export</a>
<ul class="sectlevel7">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jconsole_view_of_exported_bean">JConsole view of Exported Bean</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_bean_syntax">JmxBuilder.bean() Syntax</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_specifying_mbean_objectname">Bean() Node - Specifying MBean ObjectName</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_attribute_export">Bean() Node - Attribute Export</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_attributes_with_wildcard">Export All Attributes with Wildcard "*"</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_attribute_list">Export Attribute List</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_attribute_with_explicit_descriptors">Export Attribute with Explicit Descriptors</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_constructor_export">Bean() Node - Constructor Export</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_constructors_with">Export all Constructors with "*"</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_constructors_using_parameter_descriptor">Export Constructors using Parameter Descriptor</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_constructor_with_explicit_descriptors">Export Constructor with Explicit Descriptors</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_operation_export">Bean() Node - Operation Export</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_operations_with">Export All Operations with "*"</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operation_list">Export Operation List</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operations_by_signature">Export Operations by Signature</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operations_with_explicit_descriptors">Export Operations with Explicit Descriptors</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_embedding_descriptor">Embedding Descriptor</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_export">Timer Export</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_node_syntax">Timer Node Syntax</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exporting_a_timer">Exporting a Timer</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_period">Timer Period</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_and_events">JmxBuilder and Events</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_event_handling_closures">Event Handling Closures</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameterless">Parameterless</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_with_event_parameter">With Event Parameter</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handling_attribute_onchange_event">Handling Attribute onChange Event</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_attribute_onchange_event_object">Attribute onChange Event Object</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handling_operation_oncall_event">Handling Operation onCall Event</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operation_oncall_event_object">Operation onCall Event Object</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listener_mbean">Listener MBean</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listening_to_jmx_events">Listening to JMX Events</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listener_node_syntax">Listener Node Syntax</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_emitting_jmx_events">Emitting JMX Events</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_emitter_syntax">Emitter Syntax</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declare_the_emitter">Declare the Emitter</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_broadcast_event">Broadcast Event</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sending_event_objects">Sending Event Objects</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_jmx_information">3.16.9. Further JMX Information</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_swing_uis">3.17. Creating Swing UIs</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_security">3.18. Security</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_design_patterns_in_groovy">3.19. Design patterns in Groovy</a>
<ul class="sectlevel3">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_patterns">3.19.1. Patterns</a>
<ul class="sectlevel4">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_factory_pattern">Abstract Factory Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapter_pattern">Adapter Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_example">Delegation Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance_example">Inheritance Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapting_using_closures">Adapting using Closures</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapting_using_the_expandometaclass">Adapting using the ExpandoMetaClass</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bouncer_pattern">Bouncer Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_null_checking_example">Null Checking Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_validation_example">Validation Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_chain_of_responsibility_pattern">Chain of Responsibility Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_2">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composite_pattern">Composite Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_3">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorator_pattern">Decorator Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traditional_example">Traditional Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_touch_of_dynamic_behaviour">A touch of dynamic behaviour</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_behaviour_embellishment">Runtime behaviour embellishment</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_dynamic_decorating">More dynamic decorating</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_an_interceptor">Decorating with an Interceptor</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_java_lang_reflect_proxy">Decorating with java.lang.reflect.Proxy</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_spring">Decorating with Spring</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_asynchronous_decorators_using_gpars">Asynchronous Decorators using GPars</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_pattern">Delegation Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implement_delegation_pattern_using_expandometaclass">Implement Delegation Pattern using ExpandoMetaClass</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implement_delegation_pattern_using_delegate_annotation">Implement Delegation Pattern using @Delegate annotation</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_flyweight_pattern">Flyweight Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_4">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterator_pattern">Iterator Pattern</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_loan_my_resource_pattern">Loan my Resource Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_5">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_null_object_pattern">Null Object Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_example">Simple Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tree_example">Tree Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_pimp_my_library_pattern">Pimp my Library Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_6">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_proxy_pattern">Proxy Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_7">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_singleton_pattern">Singleton Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_the_classic_java_singleton">Example: The Classic Java Singleton</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_singleton_via_metaprogramming">Example: Singleton via MetaProgramming</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_guice_example">Guice Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spring_example_2">Spring Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_information">Further information</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_state_pattern">State Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_8">Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_1_leveraging_interface_oriented_design">Variation 1: Leveraging Interface-Oriented Design</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_2_extract_state_pattern_logic">Variation 2: Extract State Pattern Logic</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_3_bring_on_the_dsl">Variation 3: Bring on the DSL</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strategy_pattern">Strategy Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_9">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_method_pattern">Template Method Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_10">Example</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_visitor_pattern">Visitor Pattern</a>
<ul class="sectlevel5">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_example_2">Simple Example</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_example">Advanced Example</a>
<ul class="sectlevel6">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_why_to_use_this">Why to use this</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_what_happens_if_we_add_a_new_type">What happens if we add a new type?</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_what_if_we_want_to_have_different_iteration_patterns">What if we want to have different iteration patterns?</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_make_it_groovy">Make it Groovy</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_summary">Summary</a></li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_information_2">Further Information</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_references">3.19.2. References</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_acknowledgements">4. Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_contributors">4.1. Contributors</a></li>
<li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_license">4.2. License</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<h1 id="_introduction" class="sect0"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction"></a>Introduction</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Groovy…​</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is an agile and dynamic language for the Java Virtual Machine</p>
</li>
<li>
<p>builds upon the strengths of Java but has additional power features inspired by languages like Python, Ruby and Smalltalk</p>
</li>
<li>
<p>makes modern programming features available to Java developers with almost-zero learning curve</p>
</li>
<li>
<p>provides the ability to statically type check and statically compile your code for robustness and performance</p>
</li>
<li>
<p>supports Domain-Specific Languages and other compact syntax so your code becomes easy to read and maintain</p>
</li>
<li>
<p>makes writing shell and build scripts easy with its powerful processing primitives, OO abilities and an Ant DSL</p>
</li>
<li>
<p>increases developer productivity by reducing scaffolding code when developing web, GUI, database or console applications</p>
</li>
<li>
<p>simplifies testing by supporting unit testing and mocking out-of-the-box</p>
</li>
<li>
<p>seamlessly integrates with all existing Java classes and libraries</p>
</li>
<li>
<p>compiles straight to Java bytecode so you can use it anywhere you can use Java</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_groovy_language_specification"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_language_specification"></a>1. Groovy Language Specification</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax"></a>1.1. Syntax</h3>
<div class="paragraph">
<p>This chapter covers the syntax of the Groovy programming language.
The grammar of the language derives from the Java grammar,
but enhances it with specific constructs for Groovy, and allows certain simplifications.</p>
</div>
<div class="sect3">
<h4 id="_comments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_comments"></a>1.1.1. Comments</h4>
<div class="sect4">
<h5 id="_single_line_comment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_single_line_comment"></a>Single-line comment</h5>
<div class="paragraph">
<p>Single-line comments start with <code>//</code> and can be found at any position in the line.
The characters following <code>//</code>, until the end of the line, are considered part of the comment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// a standalone single line comment</span><span class="pln">
println </span><span class="str">"hello"</span><span class="pln"> </span><span class="com">// a comment till the end of the line</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_multiline_comment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiline_comment"></a>Multiline comment</h5>
<div class="paragraph">
<p>A multiline comment starts with <code>/*</code> and can be found at any position in the line.
The characters following <code>/*</code> will be considered part of the comment, including new line characters,
up to the first <code>*/</code> closing the comment.
Multiline comments can thus be put at the end of a statement, or even inside a statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">/* a standalone multiline comment
   spanning two lines */</span><span class="pln">
println </span><span class="str">"hello"</span><span class="pln"> </span><span class="com">/* a multiline comment starting
                   at the end of a statement */</span><span class="pln">
println </span><span class="lit">1</span><span class="pln"> </span><span class="com">/* one */</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="com">/* two */</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovydoc_comment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovydoc_comment"></a>Groovydoc comment</h5>
<div class="paragraph">
<p>Similarly to multiline comments, Groovydoc comments are multiline, but start with <code>/**</code> and end with <code>*/</code>.
Lines following the first Groovydoc comment line can optionally start with a star <code>*</code>.
Those comments are associated with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type definitions (classes, interfaces, enums, annotations),</p>
</li>
<li>
<p>fields and properties definitions</p>
</li>
<li>
<p>methods definitions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although the compiler will not complain about Groovydoc comments not being associated with the above language elements,
you should prepend those constructs with the comment right before it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">/**
 * A Class description
 */</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/** the name of the person */</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name

    </span><span class="com">/**
     * Creates a greeting method for a certain person.
     *
     * @param otherPerson the person to greet
     * @return a greeting message
     */</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> otherPerson</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="str">"Hello ${otherPerson}"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovydoc follows the same conventions as Java’s own Javadoc.
So you’ll be able to use the same tags as with Javadoc.</p>
</div>
</div>
<div class="sect4">
<h5 id="_shebang_line"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_shebang_line"></a>Shebang line</h5>
<div class="paragraph">
<p>Beside the single-line comment, there is a special line comment, often called the <em>shebang</em> line understood by UNIX systems
which allows scripts to be run directly from the command-line, provided you have installed the Groovy distribution
and the <code>groovy</code> command is available on the <code>PATH</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">#!/usr/bin/env groovy</span><span class="pln">
println </span><span class="str">"Hello from the shebang line"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>#</code> character must be the first character of the file. Any indentation would yield a compilation error.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_keywords"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_keywords"></a>1.1.2. Keywords</h4>
<div class="paragraph">
<p>The following list represents all the keywords of the Groovy language:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Keywords</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">break</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">continue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">def</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">else</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">finally</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">for</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">goto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">import</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">instanceof</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interface</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">super</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">switch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">this</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">throw</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trait</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">try</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">while</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_identifiers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_identifiers"></a>1.1.3. Identifiers</h4>
<div class="sect4">
<h5 id="_normal_identifiers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_identifiers"></a>Normal identifiers</h5>
<div class="paragraph">
<p>Identifiers start with a letter, a dollar or an underscore.
They cannot start with a number.</p>
</div>
<div class="paragraph">
<p>A letter can be in the following ranges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'a' to 'z' (lowercase ascii letter)</p>
</li>
<li>
<p>'A' to 'Z' (uppercase ascii letter)</p>
</li>
<li>
<p>'\u00C0' to '\u00D6'</p>
</li>
<li>
<p>'\u00D8' to '\u00F6'</p>
</li>
<li>
<p>'\u00F8' to '\u00FF'</p>
</li>
<li>
<p>'\u0100' to '\uFFFE'</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then following characters can contain letters and numbers.</p>
</div>
<div class="paragraph">
<p>Here are a few examples of valid identifiers (here, variable names):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> name
</span><span class="kwd">def</span><span class="pln"> item3
</span><span class="kwd">def</span><span class="pln"> with_underscore
</span><span class="kwd">def</span><span class="pln"> $dollarStart</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But the following ones are invalid identifiers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="lit">3tier</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b
</span><span class="kwd">def</span><span class="pln"> a</span><span class="com">#b</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>All keywords are also valid identifiers when following a dot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">foo</span><span class="pun">.</span><span class="kwd">as</span><span class="pln">
foo</span><span class="pun">.</span><span class="kwd">assert</span><span class="pln">
foo</span><span class="pun">.</span><span class="kwd">break</span><span class="pln">
foo</span><span class="pun">.</span><span class="kwd">case</span><span class="pln">
foo</span><span class="pun">.</span><span class="kwd">catch</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_quoted_identifiers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_quoted_identifiers"></a>Quoted identifiers</h5>
<div class="paragraph">
<p>Quoted identifiers appear after the dot of a dotted expression.
For instance, the <code>name</code> part of the <code>person.name</code> expression can be quoted with <code>person."name"</code> or <code>person.'name'</code>.
This is particularly interesting when certain identifiers contain illegal characters that are forbidden by the Java Language Specification,
but which are allowed by Groovy when quoted. For example, characters like a dash, a space, an exclamation mark, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">

map</span><span class="pun">.</span><span class="str">"an identifier with a space and double quotes"</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ALLOWED"</span><span class="pln">
map</span><span class="pun">.</span><span class="str">'with-dash-signs-and-single-quotes'</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ALLOWED"</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="str">"an identifier with a space and double quotes"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"ALLOWED"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="str">'with-dash-signs-and-single-quotes'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"ALLOWED"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As we shall see in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#all-strings">following section on strings</a>, Groovy provides different string literals.
All kind of strings are actually allowed after the dot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">map</span><span class="pun">.</span><span class="str">'single quote'</span><span class="pln">
map</span><span class="pun">.</span><span class="str">"double quote"</span><span class="pln">
map</span><span class="pun">.</span><span class="str">'''triple single quote'''</span><span class="pln">
map</span><span class="pun">.</span><span class="str">"""triple double quote"""</span><span class="pln">
map</span><span class="pun">./</span><span class="pln">slashy </span><span class="kwd">string</span><span class="pun">/</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">$</span><span class="pun">/</span><span class="pln">dollar slashy </span><span class="kwd">string</span><span class="pun">/</span><span class="pln">$</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There’s a difference between plain character strings and Groovy’s GStrings (interpolated strings),
as in that the latter case, the interpolated values are inserted in the final string for evaluating the whole identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> firstname </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Homer"</span><span class="pln">
map</span><span class="pun">.</span><span class="str">"Simpson-${firstname}"</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Homer Simpson"</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="str">'Simpson-Homer'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Homer Simpson"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="all-strings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#all-strings"></a>1.1.4. Strings</h4>
<div class="paragraph">
<p>Text literals are represented in the form of chain of characters called strings.
Groovy lets you instantiate <code>java.lang.String</code> objects, as well as GStrings (<code>groovy.lang.GString</code>)
which are also called <em>interpolated strings</em> in other programming languages.</p>
</div>
<div class="sect4">
<h5 id="_single_quoted_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_single_quoted_string"></a>Single-quoted string</h5>
<div class="paragraph">
<p>Single-quoted strings are a series of characters surrounded by single quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">'a single-quoted string'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Single-quoted strings are plain <code>java.lang.String</code> and don’t support interpolation.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_string_concatenation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_concatenation"></a>String concatenation</h5>
<div class="paragraph">
<p>All the Groovy strings can be concatenated with the <code>+</code> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'ab'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'b'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_triple_single_quoted_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_triple_single_quoted_string"></a>Triple-single-quoted string</h5>
<div class="paragraph">
<p>Triple-single-quoted strings are a series of characters surrounded by triplets of single quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">'''a triple-single-quoted string'''</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Triple-single-quoted strings are plain <code>java.lang.String</code> and don’t support interpolation.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Triple-single-quoted strings may span multiple lines.
The content of the string can cross line boundaries without the need to split the string in several pieces
and without concatenation or newline escape characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> aMultilineString </span><span class="pun">=</span><span class="pln"> </span><span class="str">'''line one
line two
line three'''</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If your code is indented, for example in the body of the method of a class, your string will contain the whitespace of the indentation.
The Groovy Development Kit contains methods for stripping out the indentation with the <code>String#stripIndent()</code> method,
and with the <code>String#stripMargin()</code> method that takes a delimiter character to identify the text to remove from the beginning of a string.</p>
</div>
<div class="paragraph">
<p>When creating a string as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> startingAndEndingWithANewline </span><span class="pun">=</span><span class="pln"> </span><span class="str">'''
line one
line two
line three
'''</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will notice that the resulting string contains a newline character as first character.
It is possible to strip that character by escaping the newline with a backslash:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> strippedFirstNewline </span><span class="pun">=</span><span class="pln"> </span><span class="str">'''\
line one
line two
line three
'''</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">strippedFirstNewline</span><span class="pun">.</span><span class="pln">startsWith</span><span class="pun">(</span><span class="str">'\n'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_escaping_special_characters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_escaping_special_characters"></a>Escaping special characters</h6>
<div class="paragraph">
<p>You can escape single quotes with the backslash character to avoid terminating the string literal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">'an escaped single quote: \' needs a backslash'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can escape the escape character itself with a double backslash:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">'an escaped escape character: \\ needs a double backslash'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Some special characters also use the backslash as escape character:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escape sequence</th>
<th class="tableblock halign-left valign-top">Character</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tabulation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">backspace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">newline</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">carriage return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">formfeed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">backslash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">single quote within a single-quoted string (and optional for triple-single-quoted and double-quoted strings)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double quote within a double-quoted string (and optional for triple-double-quoted and single-quoted strings)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We’ll see some more escaping details when it comes to other types of strings discussed later.</p>
</div>
</div>
<div class="sect5">
<h6 id="_unicode_escape_sequence"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_unicode_escape_sequence"></a>Unicode escape sequence</h6>
<div class="paragraph">
<p>For characters that are not present on your keyboard, you can use unicode escape sequences:
a backslash, followed by 'u', then 4 hexadecimal digits.</p>
</div>
<div class="paragraph">
<p>For example, the Euro currency symbol can be represented with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">'The Euro currency symbol: \u20AC'</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_double_quoted_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_double_quoted_string"></a>Double-quoted string</h5>
<div class="paragraph">
<p>Double-quoted strings are a series of characters surrounded by double quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="str">"a double-quoted string"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Double-quoted strings are plain <code>java.lang.String</code> if there’s no interpolated expression,
but are <code>groovy.lang.GString</code> instances if interpolation is present.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To escape a double quote, you can use the backslash character: "A double quote: \"".
</td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="_string_interpolation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_interpolation"></a>String interpolation</h6>
<div class="paragraph">
<p>Any Groovy expression can be interpolated in all string literals, apart from single and triple-single-quoted strings.
Interpolation is the act of replacing a placeholder in the string with its value upon evaluation of the string.
The placeholder expressions are surrounded by <code>${}</code>. The curly braces may be omitted for unambiguous dotted expressions,
i.e. we can use just a $ prefix in those cases.
If the GString is ever passed to a method taking a String, the expression value inside the placeholder
is evaluated to its string representation (by calling <code>toString()</code> on that expression) and the resulting
String is passed to the method.</p>
</div>
<div class="paragraph">
<p>Here, we have a string with a placeholder referencing a local variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Guillaume'</span><span class="pln"> </span><span class="com">// a plain string</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> greeting </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Hello ${name}"</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> greeting</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello Guillaume'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Any Groovy expression is valid, as we can see in this example with an arithmetic expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The sum of 2 and 3 equals ${2 + 3}"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'The sum of 2 and 3 equals 5'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Not only are expressions allowed in between the <code>${}</code> placeholder, but so are statements. However, a statement’s value is just <code>null</code>.
So if several statements are inserted in that placeholder, the last one should somehow return a meaningful value to be inserted.
For instance, "The sum of 1 and 2 is equal to ${def a = 1; def b = 2; a + b}" is supported and works as expected but a good practice is usually to stick to simple expressions inside GString placeholders.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In addition to <code>${}</code> placeholders, we can also use a lone <code>$</code> sign prefixing a dotted expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Guillaume'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">36</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">"$person.name is $person.age years old"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Guillaume is 36 years old'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But only dotted expressions of the form <code>a.b</code>, <code>a.b.c</code>, etc, are valid. Expressions containing parentheses like method calls,
curly braces for closures, dots which aren’t part of a property expression or arithmetic operators would be invalid.
Given the following variable definition of a number:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> number </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.14</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following statement will throw a <code>groovy.lang.MissingPropertyException</code> because Groovy believes you’re trying to access the <code>toString</code> property of that number, which doesn’t exist:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">shouldFail</span><span class="pun">(</span><span class="typ">MissingPropertyException</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println </span><span class="str">"$number.toString()"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can think of <code>"$number.toString()"</code> as being interpreted by the parser as <code>"${number.toString}()"</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Similarly, if the expression is ambiguous, you need to keep the curly braces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> thing </span><span class="pun">=</span><span class="pln"> </span><span class="str">'treasure'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">'The x-coordinate of the treasure is represented by treasure.x'</span><span class="pln"> </span><span class="pun">==</span><span class="pln">
    </span><span class="str">"The x-coordinate of the $thing is represented by $thing.x"</span><span class="pln">   </span><span class="com">// &lt;= Not allowed: ambiguous!!</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">'The x-coordinate of the treasure is represented by treasure.x'</span><span class="pln"> </span><span class="pun">==</span><span class="pln">
        </span><span class="str">"The x-coordinate of the $thing is represented by ${thing}.x"</span><span class="pln">  </span><span class="com">// &lt;= Curly braces required</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to escape the <code>$</code> or <code>${}</code> placeholders in a GString so they appear as is without interpolation,
you just need to use a <code>\</code> backslash character to escape the dollar sign:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'$5'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"\$5"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">'${name}'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"\${name}"</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_special_case_of_interpolating_closure_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_special_case_of_interpolating_closure_expressions"></a>Special case of interpolating closure expressions</h6>
<div class="paragraph">
<p>So far, we’ve seen we could interpolate arbitrary expressions inside the <code>${}</code> placeholder, but there is a special case and notation for closure expressions. When the placeholder contains an arrow, <code>${→}</code>, the expression is actually a closure expression — you can think of it as a closure with a dollar prepended in front of it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> sParameterLessClosure </span><span class="pun">=</span><span class="pln"> </span><span class="str">"1 + 2 == ${-&gt; 3}"</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sParameterLessClosure </span><span class="pun">==</span><span class="pln"> </span><span class="str">'1 + 2 == 3'</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> sOneParamClosure </span><span class="pun">=</span><span class="pln"> </span><span class="str">"1 + 2 == ${ w -&gt; w &lt;&lt; 3}"</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sOneParamClosure </span><span class="pun">==</span><span class="pln"> </span><span class="str">'1 + 2 == 3'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The closure is a parameterless closure which doesn’t take arguments.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here, the closure takes a single <code>java.io.StringWriter</code> argument, to which you can append content  with the <code>&lt;&lt;</code> leftShift operator.
In either case, both placeholders are embedded closures.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In appearance, it looks like a more verbose way of defining expressions to be interpolated,
but closures have an interesting advantage over mere expressions: lazy evaluation.</p>
</div>
<div class="paragraph">
<p>Let’s consider the following sample:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> number </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> eagerGString </span><span class="pun">=</span><span class="pln"> </span><span class="str">"value == ${number}"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> lazyGString </span><span class="pun">=</span><span class="pln"> </span><span class="str">"value == ${ -&gt; number }"</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> eagerGString </span><span class="pun">==</span><span class="pln"> </span><span class="str">"value == 1"</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> lazyGString </span><span class="pun">==</span><span class="pln">  </span><span class="str">"value == 1"</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

number </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> eagerGString </span><span class="pun">==</span><span class="pln"> </span><span class="str">"value == 1"</span><span class="pln"> </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> lazyGString </span><span class="pun">==</span><span class="pln">  </span><span class="str">"value == 2"</span><span class="pln"> </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define a <code>number</code> variable containing <code>1</code> that we then interpolate within two GStrings,
as an expression in <code>eagerGString</code> and as a closure in <code>lazyGString</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We expect the resulting string to contain the same string value of 1 for <code>eagerGString</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Similarly for <code>lazyGString</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Then we change the value of the variable to a new number</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>With a plain interpolated expression, the value was actually bound at the time of creation of the GString.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>But with a closure expression, the closure is called upon each coercion of the GString into String,
resulting in an updated string containing the new number value.</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An embedded closure expression taking more than one parameter will generate an exception at runtime.
Only closures with zero or one parameters are allowed.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_interoperability_with_java"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interoperability_with_java"></a>Interoperability with Java</h6>
<div class="paragraph">
<p>When a method (whether implemented in Java or Groovy) expects a <code>java.lang.String</code>,
but we pass a <code>groovy.lang.GString</code> instance,
the <code>toString()</code> method of the GString is automatically and transparently called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> takeString</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">         </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> message </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">String</span><span class="pln">        </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> message
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The message is ${'hello'}"</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> message </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">GString</span><span class="pln">           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> takeString</span><span class="pun">(</span><span class="pln">message</span><span class="pun">)</span><span class="pln">            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> result </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">String</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> result </span><span class="pun">==</span><span class="pln"> </span><span class="str">'The message is hello'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We create a GString variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We double check it’s an instance of the GString</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We then pass that GString to a method taking a String as parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The signature of the <code>takeString()</code> method explicitly says its sole parameter is a String</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We also verify that the parameter is indeed a String and not a GString.</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_gstring_and_string_hashcodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstring_and_string_hashcodes"></a>GString and String hashCodes</h6>
<div class="paragraph">
<p>Although interpolated strings can be used in lieu of plain Java strings,
they differ with strings in a particular way: their hashCodes are different.
Plain Java strings are immutable, whereas the resulting String representation of a GString can vary,
depending on its interpolated values.
Even for the same resulting string, GStrings and Strings don’t have the same hashCode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">"one: ${1}"</span><span class="pun">.</span><span class="pln">hashCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="str">"one: 1"</span><span class="pun">.</span><span class="pln">hashCode</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GString and Strings having different hashCode values, using GString as Map keys should be avoided,
especially if we try to retrieve an associated value with a String instead of a GString.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> </span><span class="str">"a"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"${key}"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"letter ${key}"</span><span class="pun">]</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> m</span><span class="pun">[</span><span class="str">"a"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The map is created with an initial pair whose key is a GString</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When we try to fetch the value with a String key, we will not find it, as Strings and GString have different hashCode values</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_triple_double_quoted_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_triple_double_quoted_string"></a>Triple-double-quoted string</h5>
<div class="paragraph">
<p>Triple-double-quoted strings behave like double-quoted strings, with the addition that they are multiline, like the triple-single-quoted strings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Groovy'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">template</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"""
    Dear Mr ${name},

    You're the winner of the lottery!

    Yours sincerly,

    Dave
"""</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">template</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">().</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'Groovy'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Neither double quotes nor single quotes need be escaped in triple-double-quoted strings.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_slashy_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_slashy_string"></a>Slashy string</h5>
<div class="paragraph">
<p>Beyond the usual quoted strings, Groovy offers slashy strings, which use <code>/</code> as the opening and closing delimiter.
Slashy strings are particularly useful for defining regular expressions and patterns,
as there is no need to escape backslashes.</p>
</div>
<div class="paragraph">
<p>Example of a slashy string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> fooPattern </span><span class="pun">=</span><span class="pln"> </span><span class="str">/.*foo.*/</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> fooPattern </span><span class="pun">==</span><span class="pln"> </span><span class="str">'.*foo.*'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Only forward slashes need to be escaped with a backslash:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> escapeSlash </span><span class="pun">=</span><span class="pln"> </span><span class="str">/The character \/ is a forward slash/</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> escapeSlash </span><span class="pun">==</span><span class="pln"> </span><span class="str">'The character / is a forward slash'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Slashy strings are multiline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> multilineSlashy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">/</span><span class="pln">one
    two
    three</span><span class="pun">/</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> multilineSlashy</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'\n'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Slashy strings can be thought of as just another way to define a GString but with different escaping rules. They hence support interpolation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> color </span><span class="pun">=</span><span class="pln"> </span><span class="str">'blue'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> interpolatedSlashy </span><span class="pun">=</span><span class="pln"> </span><span class="str">/a ${color} car/</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> interpolatedSlashy </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a blue car'</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_special_cases"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_special_cases"></a>Special cases</h6>
<div class="paragraph">
<p>An empty slashy string cannot be represented with a double forward slash, as it’s understood by the Groovy parser as a line comment.
That’s why the following assert would actually not compile as it would look like a non-terminated statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">''</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="com">//</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As slashy strings were mostly designed to make regexp easier so a few things that
are errors in GStrings like <code>$()</code> or <code>$5</code> will work with slashy strings.</p>
</div>
<div class="paragraph">
<p>Remember that escaping backslashes is not required. An alternative way of thinking of this is
that in fact escaping is not supported. The slashy string <code>/\t/</code> won’t contain a tab but instead
a backslash followed by the character 't'. Escaping is only allowed for the slash character, i.e. <code>/\/folder/</code>
will be a slashy string containing <code>'/folder'</code>. A consequence of slash escaping is that a slashy string
can’t end with a backslash. Otherwise that will escape the slashy string terminator.
You can instead use a special trick, <code>/ends with slash ${'\'}/</code>. But best just avoid using a slashy string in such a case.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_dollar_slashy_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dollar_slashy_string"></a>Dollar slashy string</h5>
<div class="paragraph">
<p>Dollar slashy strings are multiline GStrings delimited with an opening <code>$/</code> and and a closing <code>/$</code>.
The escaping character is the dollar sign, and it can escape another dollar, or a forward slash.
But both dollar and forward slashes don’t need to be escaped, except to escape the dollar of a string
subsequence that would start like a GString placeholder sequence, or if you need to escape a sequence
that would start like a closing dollar slashy string delimiter.</p>
</div>
<div class="paragraph">
<p>Here’s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Guillaume"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> date </span><span class="pun">=</span><span class="pln"> </span><span class="str">"April, 1st"</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> dollarSlashy </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">/</span><span class="pln">
    </span><span class="typ">Hello</span><span class="pln"> $name</span><span class="pun">,</span><span class="pln">
    today we</span><span class="str">'re ${date}.

    $ dollar sign
    $$ escaped dollar sign
    \ backslash
    / forward slash
    $/ escaped forward slash
    $$$/ escaped opening dollar slashy
    $/$$ escaped closing dollar slashy
/$

assert [
    '</span><span class="typ">Guillaume</span><span class="str">',
    '</span><span class="typ">April</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1st</span><span class="str">',
    '</span><span class="pln">$ dollar sign</span><span class="str">',
    '</span><span class="pln">$ escaped dollar sign</span><span class="str">',
    '</span><span class="pln">\\ backslash</span><span class="str">',
    '</span><span class="pun">/</span><span class="pln"> forward slash</span><span class="str">',
    '</span><span class="pun">/</span><span class="pln"> escaped forward slash</span><span class="str">',
    '</span><span class="pln">$</span><span class="pun">/</span><span class="pln"> escaped opening dollar slashy</span><span class="str">',
    '</span><span class="pun">/</span><span class="pln">$ escaped closing dollar slashy</span><span class="str">'
].every { dollarSlashy.contains(it) }</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It was created to overcome some of the limitations of the slashy string escaping rules.
Use it when its escaping rules suit your string contents (typically if it has some slashes you don’t want to escape).</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_summary_table"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_summary_table"></a>String summary table</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String syntax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpolated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escape character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-quoted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'…​'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triple-single-quoted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'''…​'''</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double-quoted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"…​"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triple-double-quoted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"""…​"""</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slashy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/…​/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dollar slashy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$/…​/$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_characters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_characters"></a>Characters</h5>
<div class="paragraph">
<p>Unlike Java, Groovy doesn’t have an explicit character literal.
However, you can be explicit about making a Groovy string an actual character, by three different means:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">char</span><span class="pln"> c1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'A'</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c1 </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Character</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> c2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'B'</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c2 </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Character</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> c3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">)</span><span class="str">'C'</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c3 </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Character</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>by being explicit when declaring a variable holding the character by specifying the <code>char</code> type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>by using type coercion with the <code>as</code> operator</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>by using a cast to char operation</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The first option <em class="conum">1</em> is interesting when the character is held in a variable,
while the other two (<em class="conum">2</em> and <em class="conum">3</em>) are more interesting when a char value must be passed as argument of a method call.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_numbers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_numbers"></a>1.1.5. Numbers</h4>
<div class="paragraph">
<p>Groovy supports different kinds of integral literals and decimal literals, backed by the usual <code>Number</code> types of Java.</p>
</div>
<div class="sect4">
<h5 id="_integral_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integral_literals"></a>Integral literals</h5>
<div class="paragraph">
<p>The integral literal types are the same as in Java:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byte</code></p>
</li>
<li>
<p><code>char</code></p>
</li>
<li>
<p><code>short</code></p>
</li>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>long</code></p>
</li>
<li>
<p><code>java.lang.BigInteger</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create integral numbers of those types with the following declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// primitive types</span><span class="pln">
</span><span class="kwd">byte</span><span class="pln">  b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">char</span><span class="pln">  c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">short</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">int</span><span class="pln">   i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">long</span><span class="pln">  l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="com">// infinite precision</span><span class="pln">
</span><span class="typ">BigInteger</span><span class="pln"> bi </span><span class="pun">=</span><span class="pln">  </span><span class="lit">6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use optional typing by using the <code>def</code> keyword, the type of the integral number will vary:
it’ll adapt to the capacity of the type that can hold that number.</p>
</div>
<div class="paragraph">
<p>For positive numbers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">

</span><span class="com">// Integer.MAX_VALUE</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2147483647</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> b </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">

</span><span class="com">// Integer.MAX_VALUE + 1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2147483648</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Long</span><span class="pln">

</span><span class="com">// Long.MAX_VALUE</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9223372036854775807</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Long</span><span class="pln">

</span><span class="com">// Long.MAX_VALUE + 1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9223372036854775808</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> e </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BigInteger</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as for negative numbers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> na </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> na </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">

</span><span class="com">// Integer.MIN_VALUE</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> nb </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2147483648</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> nb </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">

</span><span class="com">// Integer.MIN_VALUE - 1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> nc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2147483649</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> nc </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Long</span><span class="pln">

</span><span class="com">// Long.MIN_VALUE</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> nd </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9223372036854775808</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> nd </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Long</span><span class="pln">

</span><span class="com">// Long.MIN_VALUE - 1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> ne </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9223372036854775809</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> ne </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BigInteger</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_alternative_non_base_10_representations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternative_non_base_10_representations"></a>Alternative non-base 10 representations</h6>
<div class="paragraph">
<p>Numbers can also be represented in binary, octal, hexadecimal and decimal bases.</p>
</div>
<div class="sect6">
<h7 id="_binary_literal"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_binary_literal"></a>Binary literal</h7>
<div class="paragraph">
<p>Binary numbers start with a <code>0b</code> prefix:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> xInt </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b10101111</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xInt </span><span class="pun">==</span><span class="pln"> </span><span class="lit">175</span><span class="pln">

</span><span class="kwd">short</span><span class="pln"> xShort </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b11001001</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xShort </span><span class="pun">==</span><span class="pln"> </span><span class="lit">201</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">short</span><span class="pln">

</span><span class="kwd">byte</span><span class="pln"> xByte </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b11</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xByte </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln">

</span><span class="kwd">long</span><span class="pln"> xLong </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b101101101101</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xLong </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2925l</span><span class="pln">

</span><span class="typ">BigInteger</span><span class="pln"> xBigInteger </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b111100100001</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xBigInteger </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3873g</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> xNegativeInt </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">0b10101111</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xNegativeInt </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">175</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_octal_literal"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_octal_literal"></a>Octal literal</h7>
<div class="paragraph">
<p>Octal numbers are specified in the typical format of <code>0</code> followed by octal digits.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> xInt </span><span class="pun">=</span><span class="pln"> </span><span class="lit">077</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xInt </span><span class="pun">==</span><span class="pln"> </span><span class="lit">63</span><span class="pln">

</span><span class="kwd">short</span><span class="pln"> xShort </span><span class="pun">=</span><span class="pln"> </span><span class="lit">011</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xShort </span><span class="pun">==</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">short</span><span class="pln">

</span><span class="kwd">byte</span><span class="pln"> xByte </span><span class="pun">=</span><span class="pln"> </span><span class="lit">032</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xByte </span><span class="pun">==</span><span class="pln"> </span><span class="lit">26</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln">

</span><span class="kwd">long</span><span class="pln"> xLong </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0246</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xLong </span><span class="pun">==</span><span class="pln"> </span><span class="lit">166l</span><span class="pln">

</span><span class="typ">BigInteger</span><span class="pln"> xBigInteger </span><span class="pun">=</span><span class="pln"> </span><span class="lit">01111</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xBigInteger </span><span class="pun">==</span><span class="pln"> </span><span class="lit">585g</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> xNegativeInt </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">077</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xNegativeInt </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">63</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_hexadecimal_literal"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_hexadecimal_literal"></a>Hexadecimal literal</h7>
<div class="paragraph">
<p>Hexadecimal numbers are specified in the typical format of <code>0x</code> followed by hex digits.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> xInt </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x77</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xInt </span><span class="pun">==</span><span class="pln"> </span><span class="lit">119</span><span class="pln">

</span><span class="kwd">short</span><span class="pln"> xShort </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xaa</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xShort </span><span class="pun">==</span><span class="pln"> </span><span class="lit">170</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">short</span><span class="pln">

</span><span class="kwd">byte</span><span class="pln"> xByte </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x3a</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xByte </span><span class="pun">==</span><span class="pln"> </span><span class="lit">58</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln">

</span><span class="kwd">long</span><span class="pln"> xLong </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xffff</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xLong </span><span class="pun">==</span><span class="pln"> </span><span class="lit">65535l</span><span class="pln">

</span><span class="typ">BigInteger</span><span class="pln"> xBigInteger </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xaaaa</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xBigInteger </span><span class="pun">==</span><span class="pln"> </span><span class="lit">43690g</span><span class="pln">

</span><span class="typ">Double</span><span class="pln"> xDouble </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">(</span><span class="str">'0x1.0p0'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xDouble </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1.0d</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> xNegativeInt </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">0x77</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> xNegativeInt </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">119</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_decimal_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decimal_literals"></a>Decimal literals</h5>
<div class="paragraph">
<p>The decimal literal types are the same as in Java:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>java.lang.BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create decimal numbers of those types with the following declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// primitive types</span><span class="pln">
</span><span class="kwd">float</span><span class="pln">  f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.234</span><span class="pln">
</span><span class="kwd">double</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.345</span><span class="pln">

</span><span class="com">// infinite precision</span><span class="pln">
</span><span class="typ">BigDecimal</span><span class="pln"> bd </span><span class="pun">=</span><span class="pln">  </span><span class="lit">3.456</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Decimals can use exponents, with the <code>e</code> or <code>E</code> exponent letter, followed by an optional sign,
and a integral number representing the exponent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1e3</span><span class="pln">  </span><span class="pun">==</span><span class="pln">  </span><span class="lit">1_000.0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">2E4</span><span class="pln">  </span><span class="pun">==</span><span class="pln"> </span><span class="lit">20</span><span class="pln">_000</span><span class="pun">.</span><span class="lit">0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">3e+1</span><span class="pln"> </span><span class="pun">==</span><span class="pln">     </span><span class="lit">30.0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">4E-2</span><span class="pln"> </span><span class="pun">==</span><span class="pln">      </span><span class="lit">0.04</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">5e-1</span><span class="pln"> </span><span class="pun">==</span><span class="pln">      </span><span class="lit">0.5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Conveniently for exact decimal number calculations, Groovy choses <code>java.lang.BigDecimal</code> as its decimal number type.
In addition, both <code>float</code> and <code>double</code> are supported, but require an explicit type declaration, type coercion or suffix.
Even if <code>BigDecimal</code> is the default for decimal numbers, such literals are accepted in methods or closures taking <code>float</code> or <code>double</code> as parameter types.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Decimal numbers can’t be represented using a binary, octal or hexadecimal representation.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_underscore_in_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_underscore_in_literals"></a>Underscore in literals</h5>
<div class="paragraph">
<p>When writing long literal numbers, it’s harder on the eye to figure out how some numbers are grouped together, for example with groups of thousands, of words, etc. By allowing you to place underscore in number literals, it’s easier to spot those groups:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">long</span><span class="pln"> creditCardNumber </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1234</span><span class="pln">_5678_9012_3456L
</span><span class="kwd">long</span><span class="pln"> socialSecurityNumbers </span><span class="pun">=</span><span class="pln"> </span><span class="lit">999</span><span class="pln">_99_9999L
</span><span class="kwd">double</span><span class="pln"> monetaryAmount </span><span class="pun">=</span><span class="pln"> </span><span class="lit">12</span><span class="pln">_345_132</span><span class="pun">.</span><span class="lit">12</span><span class="pln">
</span><span class="kwd">long</span><span class="pln"> hexBytes </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xFF</span><span class="pln">_EC_DE_5E
</span><span class="kwd">long</span><span class="pln"> hexWords </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xFFEC</span><span class="pln">_DE5E
</span><span class="kwd">long</span><span class="pln"> maxLong </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x7fff</span><span class="pln">_ffff_ffff_ffffL
</span><span class="kwd">long</span><span class="pln"> alsoMaxLong </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9_223_372_036_854_775_807L</span><span class="pln">
</span><span class="kwd">long</span><span class="pln"> bytes </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b11010010</span><span class="pln">_01101001_10010100_10010010</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_number_type_suffixes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_number_type_suffixes"></a>Number type suffixes</h5>
<div class="paragraph">
<p>We can force a number (including binary, octals and hexadecimals) to have a specific type by giving a suffix (see table below), either uppercase or lowercase.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Suffix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code> or <code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L</code> or <code>l</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>I</code> or <code>i</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code> or <code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D</code> or <code>d</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>F</code> or <code>f</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="lit">42I</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="str">'42'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">42i</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="str">'42'</span><span class="pun">)</span><span class="pln"> </span><span class="com">// lowercase i more readable</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">123L</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Long</span><span class="pun">(</span><span class="str">"123"</span><span class="pun">)</span><span class="pln"> </span><span class="com">// uppercase L more readable</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">2147483648</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Long</span><span class="pun">(</span><span class="str">'2147483648'</span><span class="pun">)</span><span class="pln"> </span><span class="com">// Long type used, value too large for an Integer</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">456G</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pun">(</span><span class="str">'456'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">456g</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pun">(</span><span class="str">'456'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">123.45</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BigDecimal</span><span class="pun">(</span><span class="str">'123.45'</span><span class="pun">)</span><span class="pln"> </span><span class="com">// default BigDecimal type used</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1.200065D</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">(</span><span class="str">'1.200065'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1.234F</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Float</span><span class="pun">(</span><span class="str">'1.234'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1.23E23D</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">(</span><span class="str">'1.23E23'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">0b1111L</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Long</span><span class="pln"> </span><span class="com">// binary</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">0xFFi</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> </span><span class="com">// hexadecimal</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">034G</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pln"> </span><span class="com">// octal</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_math_operations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_math_operations"></a>Math operations</h5>
<div class="paragraph">
<p>Although <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operators">operators</a> are covered later on, it’s important to discuss the behavior of math operations
and what their resulting types are.</p>
</div>
<div class="paragraph">
<p>Division and power binary operations aside (covered below),</p>
</div>
<div class="ulist">
<ul>
<li>
<p>binary operations between <code>byte</code>, <code>char</code>, <code>short</code> and <code>int</code> result in <code>int</code></p>
</li>
<li>
<p>binary operations involving <code>long</code> with <code>byte</code>, <code>char</code>, <code>short</code> and <code>int</code> result in <code>long</code></p>
</li>
<li>
<p>binary operations involving <code>BigInteger</code> and any other integral type result in <code>BigInteger</code></p>
</li>
<li>
<p>binary operations involving <code>BigDecimal</code> with <code>byte</code>, <code>char</code>, <code>short</code>, <code>int</code> and <code>BigInteger</code> result in <code>BigDecimal</code></p>
</li>
<li>
<p>binary operations between <code>float</code>, <code>double</code> and <code>BigDecimal</code> result in <code>double</code></p>
</li>
<li>
<p>binary operations between two <code>BigDecimal</code> result in <code>BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table summarizes those rules:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">byte</th>
<th class="tableblock halign-left valign-top">char</th>
<th class="tableblock halign-left valign-top">short</th>
<th class="tableblock halign-left valign-top">int</th>
<th class="tableblock halign-left valign-top">long</th>
<th class="tableblock halign-left valign-top">BigInteger</th>
<th class="tableblock halign-left valign-top">float</th>
<th class="tableblock halign-left valign-top">double</th>
<th class="tableblock halign-left valign-top">BigDecimal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>byte</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>char</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>short</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>int</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>long</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BigInteger</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>float</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>double</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BigDecimal</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Thanks to Groovy’s operator overloading, the usual arithmetic operators work as well with <code>BigInteger</code> and <code>BigDecimal</code>,
unlike in Java where you have to use explicit methods for operating on those numbers.
</td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="integer_division"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#integer_division"></a>The case of the division operator</h6>
<div class="paragraph">
<p>The division operators <code>/</code> (and <code>/=</code> for division and assignment) produce a <code>double</code> result
if either operand is a <code>float</code> or <code>double</code>, and a <code>BigDecimal</code> result otherwise
(when both operands are any combination of an integral type <code>short</code>, <code>char</code>, <code>byte</code>, <code>int</code>, <code>long</code>,
<code>BigInteger</code> or <code>BigDecimal</code>).</p>
</div>
<div class="paragraph">
<p><code>BigDecimal</code> division is performed with the <code>divide()</code> method if the division is exact
(i.e. yielding a result that can be represented within the bounds of the same precision and scale),
or using a <code>MathContext</code> with a <a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#precision()">precision</a>
of the maximum of the two operands' precision plus an extra precision of 10,
and a <a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#scale()">scale</a>
of the maximum of 10 and the maximum of the operands' scale.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For integer division like in Java, you should use the <code>intdiv()</code> method,
as Groovy doesn’t provide a dedicated integer division operator symbol.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="power_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#power_operator"></a>The case of the power operator</h6>
<div class="paragraph">
<p>The power operation is represented by the <code>**</code> operator, with two parameters: the base and the exponent.
The result of the power operation depends on its operands, and the result of the operation
(in particular if the result can be represented as an integral value).</p>
</div>
<div class="paragraph">
<p>The following rules are used by Groovy’s power operation to determine the resulting type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the exponent is a decimal value</p>
<div class="ulist">
<ul>
<li>
<p>if the result can be represented as an <code>Integer</code>, then return an <code>Integer</code></p>
</li>
<li>
<p>else if the result can be represented as a <code>Long</code>, then return a <code>Long</code></p>
</li>
<li>
<p>otherwise return a <code>Double</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If the exponent is an integral value</p>
<div class="ulist">
<ul>
<li>
<p>if the exponent is strictly negative, then return an <code>Integer</code>, <code>Long</code> or <code>Double</code> if the result value fits in that type</p>
</li>
<li>
<p>if the exponent is positive or zero</p>
<div class="ulist">
<ul>
<li>
<p>if the base is a <code>BigDecimal</code>, then return a <code>BigDecimal</code> result value</p>
</li>
<li>
<p>if the base is a <code>BigInteger</code>, then return a <code>BigInteger</code> result value</p>
</li>
<li>
<p>if the base is an <code>Integer</code>, then return an <code>Integer</code> if the result value fits in it, otherwise a <code>BigInteger</code></p>
</li>
<li>
<p>if the base is a <code>Long</code>, then return a <code>Long</code> if the result value fits in it, otherwise a <code>BigInteger</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can illustrate those rules with a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// base and exponent are ints and the result can be represented by an Integer</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">2</span><span class="pln">    </span><span class="pun">**</span><span class="pln">   </span><span class="lit">3</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">    </span><span class="com">//  8</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">   </span><span class="lit">10</span><span class="pln">    </span><span class="pun">**</span><span class="pln">   </span><span class="lit">9</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">    </span><span class="com">//  1_000_000_000</span><span class="pln">

</span><span class="com">// the base is a long, so fit the result in a Long</span><span class="pln">
</span><span class="com">// (although it could have fit in an Integer)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">5L</span><span class="pln">   </span><span class="pun">**</span><span class="pln">   </span><span class="lit">2</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Long</span><span class="pln">       </span><span class="com">//  25</span><span class="pln">

</span><span class="com">// the result can't be represented as an Integer or Long, so return a BigInteger</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">  </span><span class="lit">100</span><span class="pln">    </span><span class="pun">**</span><span class="pln">  </span><span class="lit">10</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pln"> </span><span class="com">//  10e20</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1234</span><span class="pln">    </span><span class="pun">**</span><span class="pln"> </span><span class="lit">123</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pln"> </span><span class="com">//  170515806212727042875...</span><span class="pln">

</span><span class="com">// the base is a BigDecimal and the exponent a negative int</span><span class="pln">
</span><span class="com">// but the result can be represented as an Integer</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">0.5</span><span class="pln">  </span><span class="pun">**</span><span class="pln">  </span><span class="pun">-</span><span class="lit">2</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">    </span><span class="com">//  4</span><span class="pln">

</span><span class="com">// the base is an int, and the exponent a negative float</span><span class="pln">
</span><span class="com">// but again, the result can be represented as an Integer</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">1</span><span class="pln">    </span><span class="pun">**</span><span class="pln">  </span><span class="pun">-</span><span class="lit">0.3f</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln">    </span><span class="com">//  1</span><span class="pln">

</span><span class="com">// the base is an int, and the exponent a negative int</span><span class="pln">
</span><span class="com">// but the result will be calculated as a Double</span><span class="pln">
</span><span class="com">// (both base and exponent are actually converted to doubles)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">   </span><span class="lit">10</span><span class="pln">    </span><span class="pun">**</span><span class="pln">  </span><span class="pun">-</span><span class="lit">1</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Double</span><span class="pln">     </span><span class="com">//  0.1</span><span class="pln">

</span><span class="com">// the base is a BigDecimal, and the exponent is an int, so return a BigDecimal</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">1.2</span><span class="pln">  </span><span class="pun">**</span><span class="pln">  </span><span class="lit">10</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BigDecimal</span><span class="pln"> </span><span class="com">//  6.1917364224</span><span class="pln">

</span><span class="com">// the base is a float or double, and the exponent is an int</span><span class="pln">
</span><span class="com">// but the result can only be represented as a Double value</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">3.4f</span><span class="pln"> </span><span class="pun">**</span><span class="pln">   </span><span class="lit">5</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Double</span><span class="pln">     </span><span class="com">//  454.35430372146965</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">5.6d</span><span class="pln"> </span><span class="pun">**</span><span class="pln">   </span><span class="lit">2</span><span class="pln">    </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Double</span><span class="pln">     </span><span class="com">//  31.359999999999996</span><span class="pln">

</span><span class="com">// the exponent is a decimal value</span><span class="pln">
</span><span class="com">// and the result can only be represented as a Double value</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">7.8</span><span class="pln">  </span><span class="pun">**</span><span class="pln">   </span><span class="lit">1.9</span><span class="pln">  </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Double</span><span class="pln">     </span><span class="com">//  49.542708423868476</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">    </span><span class="lit">2</span><span class="pln">    </span><span class="pun">**</span><span class="pln">   </span><span class="lit">0.1f</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Double</span><span class="pln">     </span><span class="com">//  1.0717734636432956</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_booleans"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_booleans"></a>1.1.6. Booleans</h4>
<div class="paragraph">
<p>Boolean is a special data type that is used to represent truth values: <code>true</code> and <code>false</code>.
Use this data type for simple flags that track true/false <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conditional_operators">conditions</a>.</p>
</div>
<div class="paragraph">
<p>Boolean values can be stored in variables, assigned into fields, just like any other data type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> myBooleanVariable </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="kwd">boolean</span><span class="pln"> untypedBooleanVar </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
booleanField </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>true</code> and <code>false</code> are the only two primitive boolean values.
But more complex boolean expressions can be represented using <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bitwise_and_logical_operators">logical operators</a>.</p>
</div>
<div class="paragraph">
<p>In addition, Groovy has <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">special rules</a> (often referred to as <em>Groovy Truth</em>)
for coercing non-boolean objects to a boolean value.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lists"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_lists"></a>1.1.7. Lists</h4>
<div class="paragraph">
<p>Groovy uses a comma-separated list of values, surrounded by square brackets, to denote lists.
Groovy lists are plain JDK <code>java.util.List</code>, as Groovy doesn’t define its own collection classes.
The concrete list implementation used when defining list literals are <code>java.util.ArrayList</code> by default,
unless you decide to specify otherwise, as we shall see later on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> numbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> numbers </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">List</span><span class="pln">  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> numbers</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define a list numbers delimited by commas and surrounded by square brackets, and we assign that list into a variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The list is an instance of Java’s <code>java.util.List</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The size of the list can be queried with the <code>size()</code> method, and shows our list contains 3 elements</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the above example, we used a homogeneous list, but you can also create lists containing values of heterogeneous types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> heterogeneous </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">"a"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">]</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Our list here contains a number, a string and a boolean value</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>We mentioned that by default, list literals are actually instances of <code>java.util.ArrayList</code>,
but it is possible to use a different backing type for our lists,
thanks to using type coercion with the <code>as</code> operator, or with explicit type declaration for your variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> arrayList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> arrayList </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">ArrayList</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> linkedList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> linkedList </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">LinkedList</span><span class="pln">

</span><span class="typ">LinkedList</span><span class="pln"> otherLinked </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> otherLinked </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">LinkedList</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We use coercion with the <code>as</code> operator to explicitly request a <code>java.util.LinkedList</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We can say that the variable holding the list literal is of type <code>java.util.LinkedList</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can access elements of the list with the <code>[]</code> subscript operator (both for reading and setting values)
with positive indices or negative indices to access elements from the end of the list, as well as with ranges,
and use the <code>&lt;&lt;</code> leftShift operator to append elements to a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> letters </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'b'</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'d'</span><span class="pln">    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[-</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">

letters</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'C'</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'C'</span><span class="pln">

letters </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'e'</span><span class="pln">               </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'e'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'e'</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">]</span><span class="pln">         </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> letters</span><span class="pun">[</span><span class="lit">2.</span><span class="pun">.</span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'C'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">]</span><span class="pln">    </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Access the first element of the list (zero-based counting)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Access the last element of the list with a negative index: -1 is the first element from the end of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use an assignment to set a new value for the third element of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Use the <code>&lt;&lt;</code> leftShift operator to append an element at the end of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Access two elements at once, returning a new list containing those two elements</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use a range to access a range of values from the list, from a start to an end element position</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As lists can be heterogeneous in nature, lists can also contain other lists to create multi-dimensional lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> multi </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]]</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> multi</span><span class="pun">[</span><span class="lit">1</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a list of list of numbers</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Access the second element of the top-most list, and the first element of the inner list</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_arrays"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arrays"></a>1.1.8. Arrays</h4>
<div class="paragraph">
<p>Groovy reuses the list notation for arrays, but to make such literals arrays,
you need to explicitely define the type of the array through coercion or type declaration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pun">[]</span><span class="pln"> arrStr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Ananas'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Banana'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Kiwi'</span><span class="pun">]</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> arrStr </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]</span><span class="pln">    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!(</span><span class="pln">arrStr </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">List</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> numArr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> numArr </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln">       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> numArr</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define an array of strings using explicit variable type declaration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assert that we created an array of strings</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create an array of ints with the <code>as</code> operator</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Assert that we created an array of primitive ints</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can also create multi-dimensional arrays:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> matrix3 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">[</span><span class="lit">3</span><span class="pun">][</span><span class="lit">3</span><span class="pun">]</span><span class="pln">         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> matrix3</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="typ">Integer</span><span class="pun">[][]</span><span class="pln"> matrix2                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
matrix2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> matrix2 </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">[][]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can define the bounds of a new array</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Or declare an array without specifying its bounds</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Access to elements of an array follows the same notation as for lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pun">[]</span><span class="pln"> names </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Cédric'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Guillaume'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Jochen'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Paul'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> names</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Cédric'</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

names</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Blackdrag'</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> names</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Blackdrag'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Retrieve the first element of the array</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the value of the third element of the array to a new value</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Java’s array initializer notation is not supported by Groovy,
as the curly braces can be misinterpreted with the notation of Groovy closures.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_maps"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maps"></a>1.1.9. Maps</h4>
<div class="paragraph">
<p>Sometimes called dictionaries or associative arrays in other languages, Groovy features maps.
Maps associate keys to values, separating keys and values with colons, and each key/value pairs with commas,
and the whole keys and values surrounded by square brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> colors </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">red</span><span class="pun">:</span><span class="pln"> </span><span class="str">'#FF0000'</span><span class="pun">,</span><span class="pln"> green</span><span class="pun">:</span><span class="pln"> </span><span class="str">'#00FF00'</span><span class="pun">,</span><span class="pln"> blue</span><span class="pun">:</span><span class="pln"> </span><span class="str">'#0000FF'</span><span class="pun">]</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> colors</span><span class="pun">[</span><span class="str">'red'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'#FF0000'</span><span class="pln">    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> colors</span><span class="pun">.</span><span class="pln">green  </span><span class="pun">==</span><span class="pln"> </span><span class="str">'#00FF00'</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

colors</span><span class="pun">[</span><span class="str">'pink'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'#FF00FF'</span><span class="pln">           </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
colors</span><span class="pun">.</span><span class="pln">yellow  </span><span class="pun">=</span><span class="pln"> </span><span class="str">'#FFFF00'</span><span class="pln">           </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> colors</span><span class="pun">.</span><span class="pln">pink </span><span class="pun">==</span><span class="pln"> </span><span class="str">'#FF00FF'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> colors</span><span class="pun">[</span><span class="str">'yellow'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'#FFFF00'</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> colors </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">LinkedHashMap</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define a map of string color names, associated with their hexadecimal-coded html colors</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We use the subscript notation to check the content associated with the <code>red</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We can also use the property notation to assert the color green’s hexadecimal representation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Similarly, we can use the subscript notation to add a new key/value pair</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Or the property notation, to add the <code>yellow</code> color</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using names for the keys, we actually define string keys in the map.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Groovy creates maps that are actually instances of <code>java.util.LinkedHashMap</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you try to access a key which is not present in the map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> colors</span><span class="pun">.</span><span class="pln">unknown </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will retrieve a <code>null</code> result.</p>
</div>
<div class="paragraph">
<p>In the examples above, we used string keys, but you can also use values of other types as keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> numbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="str">'one'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'two'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> numbers</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'one'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we used numbers as keys, as numbers can unambiguously be recognized as numbers,
so Groovy will not create a string key like in our previous examples.
But consider the case you want to pass a variable in lieu of the key, to have the value of that variable become the key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> </span><span class="str">'name'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">key</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Guillaume'</span><span class="pun">]</span><span class="pln">      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">person</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span><span class="pln">   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> person</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="str">'key'</span><span class="pun">)</span><span class="pln">     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>key</code> associated with the <code>'Guillaume'</code> name will actually be the <code>"key"</code> string, not the value associated with the <code>key</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The map doesn’t contain the <code>'name'</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Instead, the map contains a <code>'key'</code> key</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also pass quoted strings as well as keys: ["name": "Guillaume"].
This is mandatory if your key string isn’t a valid identifier,
for example if you wanted to create a string key containing a hash like in: ["street-name": "Main street"].
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When you need to pass variable values as keys in your map definitions, you must surround the variable or expression with parentheses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">person </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">key</span><span class="pun">):</span><span class="pln"> </span><span class="str">'Guillaume'</span><span class="pun">]</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> person</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span><span class="pln">    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">person</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="str">'key'</span><span class="pun">)</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This time, we surround the <code>key</code> variable with parentheses, to instruct the parser we are passing a variable rather than defining a string key</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The map does contain the <code>name</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>But the map doesn’t contain the <code>key</code> key as before</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="groovy-operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovy-operators"></a>1.2. Operators</h3>
<div class="paragraph">
<p>This chapter covers the operators of the Groovy programming language.</p>
</div>
<div class="sect3">
<h4 id="_arithmetic_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arithmetic_operators"></a>1.2.1. Arithmetic operators</h4>
<div class="paragraph">
<p>Groovy supports the usual familiar arithmetic operators you find in mathematics and in other programming languages like Java.
All the Java arithmetic operators are supported. Let’s go through them in the following examples.</p>
</div>
<div class="sect4">
<h5 id="_normal_arithmetic_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_arithmetic_operators"></a>Normal arithmetic operators</h5>
<div class="paragraph">
<p>The following binary arithmetic operators are available in Groovy:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subtraction</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">division</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>intdiv()</code> for integer division, and see the section about <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#integer_division">integer division</a> for more information on the return type of the division.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remainder</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">power</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the section about <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#power_operator">the power operation</a> for more information on the return type of the operation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here are a few examples of usage of those operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln">  </span><span class="lit">1</span><span class="pln">  </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">  </span><span class="lit">4</span><span class="pln">  </span><span class="pun">-</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">  </span><span class="lit">3</span><span class="pln">  </span><span class="pun">*</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">  </span><span class="lit">3</span><span class="pln">  </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1.5</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">10</span><span class="pln">  </span><span class="pun">%</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln">  </span><span class="lit">2</span><span class="pln"> </span><span class="pun">**</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">8</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_unary_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_unary_operators"></a>Unary operators</h5>
<div class="paragraph">
<p>The <code>+</code> and <code>-</code> operators are also available as unary operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">+</span><span class="lit">3</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">-</span><span class="lit">4</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">4</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">-(-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note the usage of parentheses to surround an expression to apply the unary minus to that surrounded expression.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In terms of unary arithmetics operators, the <code>++</code> (increment) and <code>--</code> (decrement) operators are available,
both in prefix and postfix notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">++</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln">             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">--</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pln">             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> d </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">++</span><span class="pln">e </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> e </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> f </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> g </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> </span><span class="pun">--</span><span class="pln">g </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln">             </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> g </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> h </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The postfix increment will increment <code>a</code> after the expression has been evaluated and assigned into <code>b</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The postfix decrement will decrement <code>c</code> after the expression has been evaluated and assigned into <code>d</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The prefix increment will increment <code>e</code> before the expression is evaluated and assigned into <code>f</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The prefix decrement will decrement <code>g</code> before the expression is evaluated and assigned into <code>h</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_assignment_arithmetic_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assignment_arithmetic_operators"></a>Assignment arithmetic operators</h5>
<div class="paragraph">
<p>The binary arithmetic operators we have seen above are also available in an assignment form:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>+=</code></p>
</li>
<li>
<p><code>-=</code></p>
</li>
<li>
<p><code>*=</code></p>
</li>
<li>
<p><code>/=</code></p>
</li>
<li>
<p><code>%=</code></p>
</li>
<li>
<p><code>**=</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s see them in action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
a </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
b </span><span class="pun">-=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
c </span><span class="pun">*=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
d </span><span class="pun">/=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> d </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
e </span><span class="pun">%=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> e </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
f </span><span class="pun">**=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> f </span><span class="pun">==</span><span class="pln"> </span><span class="lit">9</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_relational_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_relational_operators"></a>1.2.2. Relational operators</h4>
<div class="paragraph">
<p>Relational operators allow comparisons between objects, to know if two objects are the same or different,
or if one is greater than, less than, or equal to the other.</p>
</div>
<div class="paragraph">
<p>The following operators are available:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">different</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than or equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater than</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater than or equal</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here are some examples of simple number comparisons using these operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_logical_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_logical_operators"></a>1.2.3. Logical operators</h4>
<div class="paragraph">
<p>Groovy offers three logical operators for boolean expressions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&amp;&amp;</code>: logical "and"</p>
</li>
<li>
<p><code>||</code>: logical "or"</p>
</li>
<li>
<p><code>!</code>: logical "not"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s illustrate them with the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">false</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>"not" false is true</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>true "and" true is true</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>true "or" false is true</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_precedence"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_precedence"></a>Precedence</h5>
<div class="paragraph">
<p>The logical "not" has a higher priority than the logical "and".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">false</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here, the assertion is true (as the expression in parentheses is false), because "not" has a higher precedence than "and", so it only applies to the first "false" term; otherwise, it would have applied to the result of the "and", turned it into true, and the assertion would have failed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The logical "and" has a higher priority than the logical "or".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here, the assertion is true, because "and" has a higher precedence than "or", therefore the "or" is executed last and returns true, having one true argument; otherwise, the "and" would have executed last and returned false, having one false argument, and the assertion would have failed</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_short_circuiting"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_short_circuiting"></a>Short-circuiting</h5>
<div class="paragraph">
<p>The logical <code>||</code> operator supports short-circuiting: if the left operand is true, it knows that the result will be true in any case, so it won’t evaluate the right operand.
The right operand will be evaluated only if the left operand is false.</p>
</div>
<div class="paragraph">
<p>Likewise for the logical <code>&amp;&amp;</code> operator: if the left operand is false, it knows that the result will be false in any case, so it won’t evaluate the right operand.
The right operand will be evaluated only if the left operand is true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">boolean</span><span class="pln"> checkIfCalled</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="kwd">true</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> checkIfCalled</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">called              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="kwd">false</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> checkIfCalled</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> called               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="kwd">false</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> checkIfCalled</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">called              </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="kwd">true</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> checkIfCalled</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> called               </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We create a function that sets the <code>called</code> flag to true whenever it’s called</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In the first case, after resetting the called flag, we confirm that if the left operand to <code>||</code> is true, the function is not called, as <code>||</code> short-circuits the evaluation of the right operand</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In the second case, the left operand is false and so the function is called, as indicated by the fact our flag is now true</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Likewise for <code>&amp;&amp;</code>, we confirm that the function is not called with a false left operand</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>But the function is called with a true left operand</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bitwise_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bitwise_operators"></a>1.2.4. Bitwise operators</h4>
<div class="paragraph">
<p>Groovy offers 4 bitwise operators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&amp;</code>: bitwise "and"</p>
</li>
<li>
<p><code>|</code>: bitwise "or"</p>
</li>
<li>
<p><code>^</code>: bitwise "xor" (exclusive "or")</p>
</li>
<li>
<p><code>~</code>: bitwise negation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bitwise operators can be applied on a <code>byte</code> or an <code>int</code> and return an <code>int</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b00101010</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b00001000</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">8</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">&amp;</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> a                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">&amp;</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> b                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">|</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> a                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">|</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> a                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">int</span><span class="pln"> mask </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0b11111111</span><span class="pln">                   </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">((</span><span class="pln">a </span><span class="pun">^</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> mask</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0b00000000</span><span class="pln">   </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">((</span><span class="pln">a </span><span class="pun">^</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> mask</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0b00100010</span><span class="pln">   </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">((~</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> mask</span><span class="pun">)</span><span class="pln">    </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0b11010101</span><span class="pln">   </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>bitwise and</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>bitwise and returns common bits</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>bitwise or</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>bitwise or returns all '1' bits</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>setting a mask to check only the last 8 bits</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>bitwise exclusive or on self returns 0</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>bitwise exclusive or</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>bitwise negation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It’s worth noting that the internal representation of primitive types follow the <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html">Java Language Specification</a>. In particular,
primitive types are signed, meaning that for a bitwise negation, it is always good to use a mask to retrieve only the necessary bits.</p>
</div>
<div class="paragraph">
<p>In Groovy, bitwise operators have the particularity of being <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Operator-Overloading">overloadable</a>, meaning that you can define the behavior of those operators for any kind of object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conditional_operators"></a>1.2.5. Conditional operators</h4>
<div class="sect4">
<h5 id="_not_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_not_operator"></a>Not operator</h5>
<div class="paragraph">
<p>The "not" operator is represented with an exclamation mark (<code>!</code>) and inverts the result of the underlying boolean expression. In
particular, it is possible to combine the <code>not</code> operator with the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">Groovy truth</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">true</span><span class="pun">)</span><span class="pln">    </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(!</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln">   </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(!</span><span class="str">''</span><span class="pun">)</span><span class="pln">      </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the negation of <code>true</code> is <code>false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>'foo' is a non empty string, evaluating to <code>true</code>, so negation returns <code>false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>'' is an empty string, evaluating to <code>false</code>, so negation returns <code>true</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_ternary_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ternary_operator"></a>Ternary operator</h5>
<div class="paragraph">
<p>The ternary operator is a shortcut expression that is equivalent to an if/else branch assigning some value to a variable.</p>
</div>
<div class="paragraph">
<p>Instead of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">string</span><span class="pun">!=</span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()&gt;</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    result </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Found'</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    result </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Not found'</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">result </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">string</span><span class="pun">!=</span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()&gt;</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">'Found'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'Not found'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ternary operator is also compatible with the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">Groovy truth</a>, so you can make it even simpler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">'Found'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'Not found'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_elvis_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_elvis_operator"></a>Elvis operator</h5>
<div class="paragraph">
<p>The "Elvis operator" is a shortening of the ternary operator. One instance of where this is handy is for returning
a 'sensible default' value if an expression resolves to <code>false</code>-ish (as in
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">Groovy truth</a>). A simple example might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">displayName </span><span class="pun">=</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">?</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">:</span><span class="pln"> </span><span class="str">'Anonymous'</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
displayName </span><span class="pun">=</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">?:</span><span class="pln"> </span><span class="str">'Anonymous'</span><span class="pln">              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>with the ternary operator, you have to repeat the value you want to assign</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>with the Elvis operator, the value, which is tested, is used if it is not <code>false</code>-ish</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Usage of the Elvis operator reduces the verbosity of your code and reduces the risks of errors in case of refactorings,
by removing the need to duplicate the expression which is tested in both the condition and the positive return value.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_object_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_operators"></a>1.2.6. Object operators</h4>
<div class="sect4">
<h5 id="_safe_navigation_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_safe_navigation_operator"></a>Safe navigation operator</h5>
<div class="paragraph">
<p>The Safe Navigation operator is used to avoid a <code>NullPointerException</code>. Typically when you have a reference to an object
you might need to verify that it is not <code>null</code> before accessing methods or properties of the object. To avoid this, the safe
navigation operator will simply return <code>null</code> instead of throwing an exception, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">.</span><span class="pln">find </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> person</span><span class="pun">?.</span><span class="pln">name                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> name </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">                          </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>find</code> will return a <code>null</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>use of the null-safe operator prevents from a <code>NullPointerException</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result is <code>null</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_direct_field_access_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_direct_field_access_operator"></a>Direct field access operator</h5>
<div class="paragraph">
<p>Normally in Groovy, when you write code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">User</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Name: $name"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="str">'Bob'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Bob'</span><span class="pln">              </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>public field <code>name</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a getter for <code>name</code> that returns a custom string</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>calls the getter</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>user.name</code> call triggers a call to the property of the same name, that is to say, here, to the getter for <code>name</code>. If
you want to retrieve the field instead of calling the getter, you can use the direct field access operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> user</span><span class="pun">.</span><span class="lit">@name</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>use of <code>.@</code> forces usage of the field instead of the getter</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="method-pointer-operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#method-pointer-operator"></a>Method pointer operator</h5>
<div class="paragraph">
<p>The method pointer operator (<code>.&amp;</code>) can be used to store a reference to a method in a variable,
in order to call it later:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">'example of method reference'</span><span class="pln">            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> fun </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.&amp;</span><span class="pln">toUpperCase                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> upper </span><span class="pun">=</span><span class="pln"> fun</span><span class="pun">()</span><span class="pln">                                  </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> upper </span><span class="pun">==</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                  </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>str</code> variable contains a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we store a reference to the <code>toUpperCase</code> method on the <code>str</code> instance inside a variable named <code>fun</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>fun</code> can be called like a regular method</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>we can check that the result is the same as if we had called it directly on <code>str</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>There are multiple advantages in using method pointers. First of all, the type of such a method pointer is
a <code>groovy.lang.Closure</code>, so it can be used in any place a closure would be used. In particular, it is suitable to
convert an existing method for the needs of the strategy pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> transform</span><span class="pun">(</span><span class="typ">List</span><span class="pln"> elements</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> action</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
    elements</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln">
        result </span><span class="pun">&lt;&lt;</span><span class="pln"> action</span><span class="pun">(</span><span class="pln">it</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    result
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> describe</span><span class="pun">(</span><span class="typ">Person</span><span class="pln"> p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="str">"$p.name is $p.age"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> action </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.&amp;</span><span class="pln">describe                                       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pun">,</span><span class="pln">   age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span><span class="pun">),</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Julia'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">35</span><span class="pun">)]</span><span class="pln">                           </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> transform</span><span class="pun">(</span><span class="pln">list</span><span class="pun">,</span><span class="pln"> action</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Bob is 42'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Julia is 35'</span><span class="pun">]</span><span class="pln">    </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>transform</code> method takes each element of the list and calls the <code>action</code> closure on them, returning a new list</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we define a function that takes a <code>Person</code> and returns a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we create a method pointer on that function</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>we create the list of elements we want to collect the descriptors</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the method pointer can be used where a <code>Closure</code> was expected</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Method pointers are bound by the receiver and a method name. Arguments are resolved at runtime, meaning that if you have
multiple methods with the same name, the syntax is not different, only resolution of the appropriate method to be called
will be done at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">x </span><span class="pun">}</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> reference </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.&amp;</span><span class="pln">doSomething                    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> reference</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'FOO'</span><span class="pln">                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> reference</span><span class="pun">(</span><span class="lit">123</span><span class="pun">)</span><span class="pln">   </span><span class="pun">==</span><span class="pln"> </span><span class="lit">246</span><span class="pln">                       </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define an overloaded <code>doSomething</code> method accepting a <code>String</code> as an argument</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>define an overloaded <code>doSomething</code> method accepting an <code>Integer</code> as an argument</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>create a single method pointer on <code>doSomething</code>, without specifying argument types</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>using the method pointer with a <code>String</code> calls the <code>String</code> version of <code>doSomething</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>using the method pointer with an <code>Integer</code> calls the <code>Integer</code> version of <code>doSomething</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>To align with Java 8 method reference expectations, in Groovy 3 and above, you can use <code>new</code> as the
method name to obtain a method pointer to the constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo  </span><span class="pun">=</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pun">.&amp;</span><span class="kwd">new</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> fortyTwo </span><span class="pun">=</span><span class="pln"> foo</span><span class="pun">(</span><span class="str">'42'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> fortyTwo </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42G</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Also in Groovy 3 and above, you can obtain a method pointer to an instance method of a class.
This method pointer takes an additional parameter being the receiver instance to
invoke the method on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> instanceMethod </span><span class="pun">=</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.&amp;</span><span class="pln">toUpperCase
</span><span class="kwd">assert</span><span class="pln"> instanceMethod</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'FOO'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For backwards compatibility, any static methods that happen to have the correct
parameters for the call will be given precedence over instance methods for this case.</p>
</div>
</div>
<div class="sect4">
<h5 id="method-reference-operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#method-reference-operator"></a>Method reference operator</h5>
<div class="paragraph">
<p>The Parrot parser in Groovy 3+ supports the Java 8+ method reference operator.
The method reference operator (<code>::</code>) can be used to reference a method or constructor
in contexts expecting a functional interface. This overlaps somewhat with the functionality
provided by Groovy’s method pointer operator. Indeed, for dynamic Groovy, the method
reference operator is just an alias for the method pointer operator.
For static Groovy, the operator results in bytecode similar to the bytecode
that Java would produce for the same context.</p>
</div>
<div class="paragraph">
<p>Some examples highlighting various supported method reference cases are shown in the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">CompileStatic</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">.</span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toList

</span><span class="lit">@CompileStatic</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> methodRefs</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">6G</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3G</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">reduce</span><span class="pun">(</span><span class="lit">0G</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BigInteger</span><span class="pun">::</span><span class="pln">add</span><span class="pun">)</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6G</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3G</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">map</span><span class="pun">(</span><span class="lit">3G</span><span class="pun">::</span><span class="pln">add</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">toList</span><span class="pun">())</span><span class="pln">              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3G</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1L</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2L</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3L</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">map</span><span class="pun">(</span><span class="typ">BigInteger</span><span class="pun">::</span><span class="pln">valueOf</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">toList</span><span class="pun">())</span><span class="pln">  </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2G</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3G</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1L</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2L</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3L</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">map</span><span class="pun">(</span><span class="lit">3G</span><span class="pun">::</span><span class="pln">valueOf</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">toList</span><span class="pun">())</span><span class="pln">          </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

methodRefs</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class instance method reference: add(BigInteger val) is an instance method in BigInteger</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>object instance method reference: add(BigInteger val) is an instance method for object 3G</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>class static method reference: valueOf(long val) is a static method for class BigInteger</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>object static method reference: valueOf(long val) is a static method for object 3G (some consider this bad style in normal circumstances)</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Some examples highlighting various supported constructor reference cases are shown in the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@CompileStatic</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> constructorRefs</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'1'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'3'</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">map</span><span class="pun">(</span><span class="typ">Integer</span><span class="pun">::</span><span class="kwd">new</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">toList</span><span class="pun">())</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">toArray</span><span class="pun">(</span><span class="typ">Integer</span><span class="pun">[]::</span><span class="kwd">new</span><span class="pun">)</span><span class="pln">                           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> result </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">[]</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> result</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'[1, 2, 3]'</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

constructorRefs</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class constructor reference</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>array constructor reference</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_regular_expression_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_regular_expression_operators"></a>1.2.7. Regular expression operators</h4>
<div class="sect4">
<h5 id="_pattern_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_pattern_operator"></a>Pattern operator</h5>
<div class="paragraph">
<p>The pattern operator (<code>~</code>) provides a simple way to create a <code>java.util.regex.Pattern</code> instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="str">/foo/</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Pattern</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>while in general, you find the pattern operator with an expression in a slashy-string, it can be used with any kind of
<code>String</code> in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="str">'foo'</span><span class="pln">                                                        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="str">"foo"</span><span class="pln">                                                        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="pln">$</span><span class="pun">/</span><span class="pln">dollar</span><span class="pun">/</span><span class="pln">slashy $ </span><span class="kwd">string</span><span class="pun">/</span><span class="pln">$                                   </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
p </span><span class="pun">=</span><span class="pln"> </span><span class="pun">~</span><span class="str">"${pattern}"</span><span class="pln">                                                 </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>using single quote strings</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>using double quotes strings</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the dollar-slashy string lets you use slashes and the dollar sign without having to escape them</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>you can also use a GString!</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_find_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_find_operator"></a>Find operator</h5>
<div class="paragraph">
<p>Alternatively to building a pattern, you can directly use the find operator <code>=~</code> to build a <code>java.util.regex.Matcher</code>
instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> </span><span class="str">"some text to match"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> text </span><span class="pun">=~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">match</span><span class="pun">/</span><span class="pln">                                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> m </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Matcher</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">m</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RuntimeException</span><span class="pun">(</span><span class="str">"Oops, text not found!"</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>=~</code> creates a matcher against the <code>text</code> variable, using the pattern on the right hand side</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the return type of <code>=~</code> is a <code>Matcher</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>equivalent to calling <code>if (!m.find())</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Since a <code>Matcher</code> coerces to a <code>boolean</code> by calling its <code>find</code> method, the <code>=~</code> operator is consistent with the simple
use of Perl’s <code>=~</code> operator, when it appears as a predicate (in <code>if</code>, <code>while</code>, etc.).</p>
</div>
</div>
<div class="sect4">
<h5 id="_match_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_match_operator"></a>Match operator</h5>
<div class="paragraph">
<p>The match operator (<code>==~</code>) is a slight variation of the find operator, that does not return a <code>Matcher</code> but a boolean
and requires a strict match of the input string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">m </span><span class="pun">=</span><span class="pln"> text </span><span class="pun">==~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">match</span><span class="pun">/</span><span class="pln">                                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> m </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Boolean</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                          </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RuntimeException</span><span class="pun">(</span><span class="str">"Should not reach that point!"</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>==~</code> matches the subject with the regular expression, but match must be strict</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the return type of <code>==~</code> is therefore a <code>boolean</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>equivalent to calling <code>if (text ==~ /match/)</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_operators"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_operators"></a>1.2.8. Other operators</h4>
<div class="sect4">
<h5 id="_spread_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_operator"></a>Spread operator</h5>
<div class="paragraph">
<p>The Spread-dot Operator (<code>*.</code>), often abbreviated to just Spread Operator, is used to invoke an action on all items
of an aggregate object. It is equivalent to calling the action on each item and collecting the result into a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> make
    </span><span class="typ">String</span><span class="pln"> model
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> cars </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">),</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Clio'</span><span class="pun">)]</span><span class="pln">       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> makes </span><span class="pun">=</span><span class="pln"> cars</span><span class="pun">*.</span><span class="pln">make                                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> makes </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">]</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>build a list of <code>Car</code> items. The list is an aggregate of objects.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>call the spread operator on the list, accessing the <code>make</code> property of each item</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>returns a list of strings corresponding to the collection of <code>make</code> items</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The expression <code>cars*.make</code> is equivalent to <code>cars.collect{ it.make }</code>.
Groovy’s GPath notation allows a short-cut when the referenced property
isn’t a property of the containing list, in that case it is automatically
spread. In the previously mentioned case, the expression <code>cars.make</code> can
be used, though retaining the explicit spread-dot operator is often recommended.</p>
</div>
<div class="paragraph">
<p>The spread operator is null-safe, meaning that if an element of the collection is null,
it will return null instead of throwing a <code>NullPointerException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">cars </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
   </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">),</span><span class="pln">
   </span><span class="kwd">null</span><span class="pun">,</span><span class="pln">                                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
   </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Clio'</span><span class="pun">)]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> cars</span><span class="pun">*.</span><span class="pln">make </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">]</span><span class="pln">     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">*.</span><span class="pln">make </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">                             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>build a list for which of of the elements is <code>null</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>using the spread operator will <strong>not</strong> throw a <code>NullPointerException</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the receiver might also be null, in which case the return value is <code>null</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The spread operator can be used on any class which implements the <code>Iterable</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Component</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Long</span><span class="pln"> id
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CompositeObject</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">Component</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> components </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Component</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Foo'</span><span class="pun">),</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Component</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Bar'</span><span class="pun">)]</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="typ">Iterator</span><span class="pun">&lt;</span><span class="typ">Component</span><span class="pun">&gt;</span><span class="pln"> iterator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        components</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> composite </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompositeObject</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> composite</span><span class="pun">*.</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> composite</span><span class="pun">*.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Foo'</span><span class="pun">,</span><span class="str">'Bar'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use multiple invocations of the spread-dot operator (here <code>cars*.models*.name</code>) when
working with aggregates of data structures which themselves contain aggregates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Make</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Model</span><span class="pun">&gt;</span><span class="pln"> models
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Canonical</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Model</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> cars </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Make</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln">
             models</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Model</span><span class="pun">(</span><span class="str">'408'</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Model</span><span class="pun">(</span><span class="str">'508'</span><span class="pun">)]),</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Make</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">,</span><span class="pln">
             models</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Model</span><span class="pun">(</span><span class="str">'Clio'</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Model</span><span class="pun">(</span><span class="str">'Captur'</span><span class="pun">)])</span><span class="pln">
</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> makes </span><span class="pun">=</span><span class="pln"> cars</span><span class="pun">*.</span><span class="pln">name
</span><span class="kwd">assert</span><span class="pln"> makes </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> models </span><span class="pun">=</span><span class="pln"> cars</span><span class="pun">*.</span><span class="pln">models</span><span class="pun">*.</span><span class="pln">name
</span><span class="kwd">assert</span><span class="pln"> models </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'408'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Clio'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Captur'</span><span class="pun">]]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> models</span><span class="pun">.</span><span class="pln">sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'408'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Clio'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Captur'</span><span class="pun">]</span><span class="pln"> </span><span class="com">// flatten one level</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> models</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'408'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Clio'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Captur'</span><span class="pun">]</span><span class="pln"> </span><span class="com">// flatten all levels (one in this case)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider using the <code>collectNested</code> DGM method instead of the spread-dot operator for collections of collections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> make
    </span><span class="typ">String</span><span class="pln"> model
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> cars </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
   </span><span class="pun">[</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'408'</span><span class="pun">),</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Peugeot'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">)</span><span class="pln">
   </span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Clio'</span><span class="pun">),</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">make</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Renault'</span><span class="pun">,</span><span class="pln"> model</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Captur'</span><span class="pun">)</span><span class="pln">
   </span><span class="pun">]</span><span class="pln">
</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> models </span><span class="pun">=</span><span class="pln"> cars</span><span class="pun">.</span><span class="pln">collectNested</span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">model </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> models </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'408'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'508'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Clio'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Captur'</span><span class="pun">]]</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_spreading_method_arguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spreading_method_arguments"></a>Spreading method arguments</h6>
<div class="paragraph">
<p>There may be situations when the arguments of a method call can be found in a list that you need to adapt to the method
arguments. In such situations, you can use the spread operator to call the method. For example, imagine you have the
following method signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x</span><span class="pun">*</span><span class="pln">y</span><span class="pun">+</span><span class="pln">z
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>then if you have the following list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> args </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>you can call the method without having to define intermediate variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(*</span><span class="pln">args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">26</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is even possible to mix normal arguments with spread ones:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">args </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(*</span><span class="pln">args</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">26</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_spread_list_elements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_list_elements"></a>Spread list elements</h6>
<div class="paragraph">
<p>When used inside a list literal, the spread operator acts as if the spread element contents were inlined into the list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> items </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,*</span><span class="pln">items</span><span class="pun">,</span><span class="lit">6</span><span class="pun">]</span><span class="pln">            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">]</span><span class="pln">           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>items</code> is a list</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we want to insert the contents of the <code>items</code> list directly into <code>list</code> without having to call <code>addAll</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the contents of <code>items</code> has been inlined into <code>list</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_spread_map_elements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_map_elements"></a>Spread map elements</h6>
<div class="paragraph">
<p>The spread map operator works in a similar manner as the spread list operator, but for maps. It allows you to inline
the contents of a map into another map literal, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> m1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">c</span><span class="pun">:</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">:</span><span class="lit">4</span><span class="pun">]</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*:</span><span class="pln">m1</span><span class="pun">]</span><span class="pln">            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">:</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">:</span><span class="lit">4</span><span class="pun">]</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>m1</code> is the map that we want to inline</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we use the <code>*:m1</code> notation to spread the contents of <code>m1</code> into <code>map</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>map</code> contains all the elements of <code>m1</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The position of the spread map operator is relevant, like illustrated in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> m1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">c</span><span class="pun">:</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">:</span><span class="lit">4</span><span class="pun">]</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*:</span><span class="pln">m1</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">:</span><span class="pln"> </span><span class="lit">8</span><span class="pun">]</span><span class="pln">      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">:</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">:</span><span class="lit">8</span><span class="pun">]</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>m1</code> is the map that we want to inline</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we use the <code>*:m1</code> notation to spread the contents of <code>m1</code> into <code>map</code>, but redefine the key <code>d</code> <strong>after</strong> spreading</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>map</code> contains all the expected keys, but <code>d</code> was redefined</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_range_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_range_operator"></a>Range operator</h5>
<div class="paragraph">
<p>Groovy supports the concept of ranges and provides a notation (<code>..</code>) to create ranges of objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> range </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">                                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.&lt;</span><span class="lit">5</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln">         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">List</span><span class="pln">                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span><span class="pln">                           </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a simple range of integers, stored into a local variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>an <code>IntRange</code>, with inclusive bounds</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>an <code>IntRange</code>, with exclusive upper bound</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>a <code>groovy.lang.Range</code> implements the <code>List</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>meaning that you can call the <code>size</code> method on it</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Ranges implementation is lightweight, meaning that only the lower and upper bounds are stored. You can create a range
from any <code>Comparable</code> object that has <code>next()</code> and <code>previous()</code> methods to determine the next / previous item in the range.
For example, you can create a range of characters this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">'a'</span><span class="pun">..</span><span class="str">'d'</span><span class="pun">).</span><span class="pln">collect</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spaceship_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spaceship_operator"></a>Spaceship operator</h5>
<div class="paragraph">
<p>The spaceship operator (<code>&lt;=&gt;</code>) delegates to the <code>compareTo</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;=&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;=&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">&lt;=&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">'a'</span><span class="pln"> </span><span class="pun">&lt;=&gt;</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="subscript-operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#subscript-operator"></a>Subscript operator</h5>
<div class="paragraph">
<p>The subscript operator is a short hand notation for <code>getAt</code> or <code>putAt</code>, depending on whether you find it on
the left hand side or the right hand side of an assignment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
list</span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">6</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">6</span><span class="pun">]</span><span class="pln">                        </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">6</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]</span><span class="pln">                  </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>[2]</code> can be used instead of <code>getAt(2)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>if on left hand side of an assignment, will call <code>putAt</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>getAt</code> also supports ranges</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>so does <code>putAt</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the list is mutated</td>
</tr>
</tbody></table>
</div>
<div id="custom-subscript-operator" class="paragraph">
<p>The subscript operator, in combination with a custom implementation of <code>getAt</code>/<code>putAt</code> is a convenient way for destructuring
objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Long</span><span class="pln"> id
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">def</span><span class="pln"> getAt</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> id
            </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> name
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="str">"No such element $i"</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> putAt</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> value</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> value</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="str">"No such element $i"</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Alex'</span><span class="pun">)</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> user</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">                                                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> user</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Alex'</span><span class="pln">                                           </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
user</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                                                    </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                                          </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>User</code> class defines a custom <code>getAt</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>User</code> class defines a custom <code>putAt</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>create a sample user</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>using the subscript operator with index 0 allows retrieving the user id</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>using the subscript operator with index 1 allows retrieving the user name</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>we can use the subscript operator to write to a property thanks to the delegation to <code>putAt</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>and check that it’s really the property <code>name</code> which was changed</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_membership_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_membership_operator"></a>Membership operator</h5>
<div class="paragraph">
<p>The membership operator (<code>in</code>) is equivalent to calling the <code>isCase</code> method. In the context of a <code>List</code>, it is equivalent
to calling <code>contains</code>, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Grace'</span><span class="pun">,</span><span class="str">'Rob'</span><span class="pun">,</span><span class="str">'Emmy'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">'Emmy'</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> list</span><span class="pun">)</span><span class="pln">                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>equivalent to calling <code>list.contains('Emmy')</code> or <code>list.isCase('Emmy')</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_identity_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_identity_operator"></a>Identity operator</h5>
<div class="paragraph">
<p>In Groovy, using <code>==</code> to test equality is different from using the same operator in Java. In Groovy, it is calling <code>equals</code>.
If you want to compare reference equality, you should use <code>is</code> like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Groovy 1.8'</span><span class="pun">,</span><span class="str">'Groovy 2.0'</span><span class="pun">,</span><span class="str">'Groovy 2.3'</span><span class="pun">]</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Groovy 1.8'</span><span class="pun">,</span><span class="str">'Groovy 2.0'</span><span class="pun">,</span><span class="str">'Groovy 2.3'</span><span class="pun">]</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list1 </span><span class="pun">==</span><span class="pln"> list2                                       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">list1</span><span class="pun">.</span><span class="kwd">is</span><span class="pun">(</span><span class="pln">list2</span><span class="pun">)</span><span class="pln">                                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a list of strings</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create another list of strings containing the same elements</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>using <code>==</code>, we test object equality</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>but using <code>is</code>, we can check that references are distinct</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_coercion_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_coercion_operator"></a>Coercion operator</h5>
<div class="paragraph">
<p>The coercion operator (<code>as</code>) is a variant of casting. Coercion converts object from one type to another <strong>without</strong> them
being compatible for assignment. Let’s take an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Integer</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">123</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">String</span><span class="pun">)</span><span class="pln"> x                                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Integer</code> is not assignable to a <code>String</code>, so it will produce a <code>ClassCastException</code> at runtime</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This can be fixed by using <em>coercion</em> instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Integer</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">123</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> x </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">String</span><span class="pln">                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Integer</code> is not assignable to a <code>String</code>, but use of <code>as</code> will <em>coerce</em> it to a <code>String</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When an object is coerced into another, unless the target type is the same as the source type, coercion will return a
<strong>new</strong> object. The rules of coercion differ depending on the source and target types, and coercion may fail if no conversion
rules are found. Custom conversion rules may be implemented thanks to the <code>asType</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Identifiable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Long</span><span class="pln"> id
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">def</span><span class="pln"> asType</span><span class="pun">(</span><span class="typ">Class</span><span class="pln"> target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">target </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Identifiable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Identifiable</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ClassCastException</span><span class="pun">(</span><span class="str">"User cannot be coerced into $target"</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> u </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Xavier'</span><span class="pun">)</span><span class="pln">                                            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> u </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Identifiable</span><span class="pln">                                                   </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Identifiable</span><span class="pln">                                            </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!(</span><span class="pln">p </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">User</span><span class="pun">)</span><span class="pln">                                                 </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>User</code> class defines a custom conversion rule from <code>User</code> to <code>Identifiable</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we create an instance of <code>User</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we coerce the <code>User</code> instance into an <code>Identifiable</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the target is an instance of <code>Identifiable</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the target is not an instance of <code>User</code> anymore</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_diamond_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_diamond_operator"></a>Diamond operator</h5>
<div class="paragraph">
<p>The diamond operator (<code>&lt;&gt;</code>) is a syntactic sugar only operator added to support compatibility with the operator of the
same name in Java 7. It is used to indicate that generic types should be inferred from the declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> strings </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pun">&lt;&gt;()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dynamic Groovy, this is totally unused. In statically type checked Groovy, it is also optional since the Groovy
type checker performs type inference whether this operator is present or not.</p>
</div>
</div>
<div class="sect4">
<h5 id="_call_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_call_operator"></a>Call operator</h5>
<div class="paragraph">
<p>The call operator <code>()</code> is used to call a method named <code>call</code> implicitly. For any object which defines a <code>call</code> method,
 you can omit the <code>.call</code> part and use the call operator instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyCallable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> call</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="lit">2</span><span class="pun">*</span><span class="pln">x
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> mc </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyCallable</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> mc</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> mc</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>MyCallable</code> defines a method named <code>call</code>. Note that it doesn’t need to implement <code>java.util.concurrent.Callable</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can call the method using the classic method call syntax</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>or we can omit <code>.call</code> thanks to the call operator</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_operator_precedence"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operator_precedence"></a>1.2.9. Operator precedence</h4>
<div class="paragraph">
<p>The table below lists all groovy operators in order of precedence.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level</th>
<th class="tableblock halign-left valign-top">Operator(s)</th>
<th class="tableblock halign-left valign-top">Name(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>new</code> &nbsp; <code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object creation, explicit parentheses</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code> &nbsp; <code>{}</code> &nbsp; <code>[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">method call, closure, literal list/map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code> &nbsp; <code>.&amp;</code> &nbsp; <code>.@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">member access, method closure, field/attribute access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?.</code> &nbsp; <code>*</code> &nbsp; <code>*.</code> &nbsp; <code>*:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">safe dereferencing, spread, spread-dot, spread-map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~</code> &nbsp; <code>!</code> &nbsp; <code>(type)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise negate/pattern, not, typecast</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[]</code> &nbsp; <code>++</code> &nbsp; <code>--</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list/map/array index, post inc/decrement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">power</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>++</code> &nbsp; <code>--</code> &nbsp; <code>+</code> &nbsp; <code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pre inc/decrement, unary plus, unary minus</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code> &nbsp; <code>/</code> &nbsp; <code>%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiply, div, remainder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code> &nbsp; <code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition, subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code> &nbsp; <code>&gt;&gt;</code> &nbsp; <code>&gt;&gt;&gt;</code> &nbsp; <code>..</code> &nbsp; <code>..&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left/right (unsigned) shift, inclusive/exclusive range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code> &nbsp; <code>&lt;=</code> &nbsp; <code>&gt;</code> &nbsp; <code>&gt;=</code> &nbsp; <code>in</code> &nbsp; <code>instanceof</code> &nbsp; <code>as</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less/greater than/or equal, in, instanceof, type coercion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code> &nbsp; <code>!=</code> &nbsp; <code>&lt;=&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equals, not equals, compare to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=~</code> &nbsp; <code>==~</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regex find, regex match</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">binary/bitwise and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">binary/bitwise xor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">binary/bitwise or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>||</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>? :</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ternary conditional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elvis operator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code> &nbsp; <code>**=</code> &nbsp; <code>*=</code> &nbsp; <code>/=</code> &nbsp; <code>%=</code> &nbsp; <code>+=</code> &nbsp; <code>-=</code> &nbsp;<br>
<code>&lt;&lt;=</code> &nbsp; <code>&gt;&gt;=</code> &nbsp; <code>&gt;&gt;&gt;=</code> &nbsp; <code>&amp;=</code> &nbsp; <code>^=</code> &nbsp; <code>|=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">various assignments</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="Operator-Overloading"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Operator-Overloading"></a>1.2.10. Operator overloading</h4>
<div class="paragraph">
<p>Groovy allows you to overload the various operators so that they can be used with your own classes. Consider this simple
class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bucket</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> size

    </span><span class="typ">Bucket</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">size </span><span class="pun">=</span><span class="pln"> size </span><span class="pun">}</span><span class="pln">

    </span><span class="typ">Bucket</span><span class="pln"> plus</span><span class="pun">(</span><span class="typ">Bucket</span><span class="pln"> other</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bucket</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">size </span><span class="pun">+</span><span class="pln"> other</span><span class="pun">.</span><span class="pln">size</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Bucket</code> implements a special method called <code>plus()</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Just by implementing the <code>plus()</code> method, the <code>Bucket</code> class can now be used with the <code>+</code> operator like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> b1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bucket</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> b2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bucket</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b1 </span><span class="pun">+</span><span class="pln"> b2</span><span class="pun">).</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The two <code>Bucket</code> objects can be added together with the <code>+</code> operator</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>All (non-comparator) Groovy operators have a corresponding method that you can implement in your own classes. The only
requirements are that your method is public, has the correct name, and has the correct number of arguments. The argument
types depend on what types you want to support on the right hand side of the operator. For example, you could support
the statement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b1 </span><span class="pun">+</span><span class="pln"> </span><span class="lit">11</span><span class="pun">).</span><span class="pln">size </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>by implementing the <code>plus()</code> method with this signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Bucket</span><span class="pln"> plus</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> capacity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bucket</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">size </span><span class="pun">+</span><span class="pln"> capacity</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a complete list of the operators and their corresponding methods:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.plus(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a[b]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.getAt(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.minus(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a[b] = c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.putAt(b, c)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.multiply(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a in b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b.isCase(a)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.div(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.leftShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.mod(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.power(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShiftUnsigned(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.or(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>++</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.next()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.and(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.previous()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.xor(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.positive()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>as</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.asType(b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.negative()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.call()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.bitwiseNegate()</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_program_structure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_program_structure"></a>1.3. Program structure</h3>
<div class="paragraph">
<p>This chapter covers the program structure of the Groovy programming language.</p>
</div>
<div class="sect3">
<h4 id="_package_names"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_package_names"></a>1.3.1. Package names</h4>
<div class="paragraph">
<p>Package names play exactly the same role as in Java. They allows us to separate the code base without any conflicts. Groovy classes must specify their package before the class definition, else the default package is assumed.</p>
</div>
<div class="paragraph">
<p>Defining a package is very similar to Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// defining a package named com.yoursite</span><span class="pln">
</span><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">yoursite</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To refer to some class <code>Foo</code> in the <code>com.yoursite.com</code> package you will need to use the fully qualified name <code>com.yoursite.com.Foo</code>, or else you can use an <code>import</code> statement as we’ll see below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_imports"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_imports"></a>1.3.2. Imports</h4>
<div class="paragraph">
<p>In order to refer to any class you need a qualified reference to its package. Groovy follows Java’s notion of allowing <code>import</code> statement to resolve class references.</p>
</div>
<div class="paragraph">
<p>For example, Groovy provides several builder classes, such as <code>MarkupBuilder</code>. <code>MarkupBuilder</code> is inside the package <code>groovy.xml</code> so in order to use this class, you need to <code>import</code> it as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// importing the class MarkupBuilder</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="typ">MarkupBuilder</span><span class="pln">

</span><span class="com">// using the imported class to create an object</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> xml </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MarkupBuilder</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> xml </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_default_imports"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_imports"></a>Default imports</h5>
<div class="paragraph">
<p>Default imports are the imports that Groovy language provides by default. For example look at the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The same code in Java needs an import statement to <code>Date</code> class like this: import java.util.Date. Groovy by default imports these classes for you.</p>
</div>
<div class="paragraph">
<p>The below imports are added by groovy for you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.*</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">math</span><span class="pun">.</span><span class="typ">BigInteger</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">math</span><span class="pun">.</span><span class="typ">BigDecimal</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is done because the classes from these packages are most commonly used. By importing these boilerplate code is reduced.</p>
</div>
</div>
<div class="sect4">
<h5 id="_simple_import"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_import"></a>Simple import</h5>
<div class="paragraph">
<p>A simple import is an import statement where you fully define the class name along with the package. For example the import statement import groovy.xml.MarkupBuilder in the code below is a simple import which directly refers to a class inside a package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// importing the class MarkupBuilder</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="typ">MarkupBuilder</span><span class="pln">

</span><span class="com">// using the imported class to create an object</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> xml </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MarkupBuilder</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> xml </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_star_import"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_star_import"></a>Star import</h5>
<div class="paragraph">
<p>Groovy, like Java, provides a special way to import all classes from a package using <code>*</code>, the so called star import. <code>MarkupBuilder</code> is a class which is in package <code>groovy.xml</code>, alongside another class called <code>StreamingMarkupBuilder</code>. In case you need to use both classes, you can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="typ">MarkupBuilder</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="typ">StreamingMarkupBuilder</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> markupBuilder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MarkupBuilder</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> markupBuilder </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StreamingMarkupBuilder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That’s perfectly valid code. But with a <code>*</code> import, we can achieve the same effect with just one line. The star imports all the classes under package <code>groovy.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.*</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> markupBuilder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MarkupBuilder</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> markupBuilder </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StreamingMarkupBuilder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>One problem with <code>*</code> imports is that they can clutter your local namespace. But with the kinds of aliasing provided by Groovy, this can be solved easily.</p>
</div>
</div>
<div class="sect4">
<h5 id="_static_import"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_import"></a>Static import</h5>
<div class="paragraph">
<p>Groovy’s static import capability allows you to reference imported classes as if they were static methods in your own class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Boolean</span><span class="pun">.</span><span class="pln">FALSE

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">FALSE </span><span class="com">//use directly, without Boolean prefix!</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is similar to Java’s static import capability but is a more dynamic than Java in that it allows you to define methods with the same name as an imported method as long as you have different types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="typ">String</span><span class="pun">.</span><span class="pln">format </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        i</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> format</span><span class="pun">(</span><span class="str">'String'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'String'</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SomeClass</span><span class="pun">().</span><span class="pln">format</span><span class="pun">(</span><span class="typ">Integer</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'1'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>static import of method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declaration of method with same name as method statically imported above, but with a different parameter type</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>compile error in java, but is valid groovy code</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you have the same types, the imported class takes precedence.</p>
</div>
</div>
<div class="sect4">
<h5 id="_static_import_aliasing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_import_aliasing"></a>Static import aliasing</h5>
<div class="paragraph">
<p>Static imports with the <code>as</code> keyword provide an elegant solution to namespace problems. Suppose you want to get a <code>Calendar</code> instance, using its <code>getInstance()</code> method. It’s a static method, so we can use a static import. But instead of calling <code>getInstance()</code> every time, which can be misleading when separated from its class name, we can import it with an alias, to increase code readability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">getInstance </span><span class="kwd">as</span><span class="pln"> now

</span><span class="kwd">assert</span><span class="pln"> now</span><span class="pun">().</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">().</span><span class="kwd">class</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, that’s clean!</p>
</div>
</div>
<div class="sect4">
<h5 id="_static_star_import"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_star_import"></a>Static star import</h5>
<div class="paragraph">
<p>A static star import is very similar to the regular star import. It will import all the static methods from the given class.</p>
</div>
<div class="paragraph">
<p>For example, lets say we need to calculate sines and cosines for our application.
The class <code>java.lang.Math</code> has static methods named <code>sin</code> and <code>cos</code> which fit our need. With the help of a static star import, we can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="typ">Math</span><span class="pun">.*</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> sin</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0.0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> cos</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, we were able to access the methods <code>sin</code> and <code>cos</code> directly, without the <code>Math.</code> prefix.</p>
</div>
</div>
<div class="sect4">
<h5 id="_import_aliasing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_aliasing"></a>Import aliasing</h5>
<div class="paragraph">
<p>With type aliasing, we can refer to a fully qualified class name using a name of our choice. This can be done with the <code>as</code> keyword, as before.</p>
</div>
<div class="paragraph">
<p>For example we can import <code>java.sql.Date</code> as <code>SQLDate</code> and use it in the same file as <code>java.util.Date</code> without having to use the fully qualified name of either class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Date</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">sql</span><span class="pun">.</span><span class="typ">Date</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">SQLDate</span><span class="pln">

</span><span class="typ">Date</span><span class="pln"> utilDate </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">(</span><span class="lit">1000L</span><span class="pun">)</span><span class="pln">
</span><span class="typ">SQLDate</span><span class="pln"> sqlDate </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SQLDate</span><span class="pun">(</span><span class="lit">1000L</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> utilDate </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Date</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sqlDate </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">sql</span><span class="pun">.</span><span class="typ">Date</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scripts_versus_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_scripts_versus_classes"></a>1.3.3. Scripts versus classes</h4>
<div class="sect4">
<h5 id="_public_static_void_main_vs_script"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_static_void_main_vs_script"></a>public static void main vs script</h5>
<div class="paragraph">
<p>Groovy supports both scripts and classes. Take the following code for example:</p>
</div>
<div class="listingblock">
<div class="title">Main.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Main</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">'Groovy world!'</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a <code>Main</code> class, the name is arbitrary</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>public static void main(String[])</code> method is usable as the main method of the class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the main body of the method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This is typical code that you would find coming from Java, where code <strong>has</strong> to be embedded into a class to be executable.
Groovy makes it easier, the following code is equivalent:</p>
</div>
<div class="listingblock">
<div class="title">Main.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">println </span><span class="str">'Groovy world!'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A script can be considered as a class without needing to declare it, with some differences.</p>
</div>
</div>
<div class="sect4">
<h5 id="_script_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_script_class"></a>Script class</h5>
<div class="paragraph">
<p>A <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/Script.html">script</a> is always compiled into a class. The Groovy compiler will compile the class for you,
with the body of the script copied into a <code>run</code> method. The previous example is therefore compiled as if it was the
following:</p>
</div>
<div class="listingblock">
<div class="title">Main.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">runtime</span><span class="pun">.</span><span class="typ">InvokerHelper</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Main</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Script</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">'Groovy world!'</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">InvokerHelper</span><span class="pun">.</span><span class="pln">runScript</span><span class="pun">(</span><span class="typ">Main</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">     </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>Main</code> class extends the <code>groovy.lang.Script</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>groovy.lang.Script</code> requires a <code>run</code> method returning a value</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the script body goes into the <code>run</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the <code>main</code> method is automatically generated</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>and delegates the execution of the script on the <code>run</code> method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If the script is in a file, then the base name of the file is used to determine the name of the generated script class.
In this example, if the name of the file is <code>Main.groovy</code>, then the script class is going to be <code>Main</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods"></a>Methods</h5>
<div class="paragraph">
<p>It is possible to define methods into a script, as illustrated here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> fib</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    n </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> fib</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)==</span><span class="lit">89</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also mix methods and code. The generated script class will carry all methods into the script class, and
assemble all script bodies into the <code>run</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">println </span><span class="str">'Hello'</span><span class="pln">                                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">int</span><span class="pln"> power</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">**</span><span class="pln">n </span><span class="pun">}</span><span class="pln">                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

println </span><span class="str">"2^6==${power(6)}"</span><span class="pln">                      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>script begins</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a method is defined within the script body</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and script continues</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This code is internally converted into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">runtime</span><span class="pun">.</span><span class="typ">InvokerHelper</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Main</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Script</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> power</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">**</span><span class="pln"> n</span><span class="pun">}</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">'Hello'</span><span class="pln">                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">"2^6==${power(6)}"</span><span class="pln">              </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">InvokerHelper</span><span class="pun">.</span><span class="pln">runScript</span><span class="pun">(</span><span class="typ">Main</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>power</code> method is copied as is into the generated script class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>first statement is copied into the <code>run</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>second statement is copied into the <code>run</code> method</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Even if Groovy creates a class from your script, it is totally transparent for the user. In particular, scripts
are compiled to bytecode, and line numbers are preserved. This implies that if an exception is thrown in a script,
the stack trace will show line numbers corresponding to the original script, not the generated code that we have shown.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_variables"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variables"></a>Variables</h5>
<div class="paragraph">
<p>Variables in a script do not require a type definition. This means that this script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will behave the same as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However there is a semantic difference between the two:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the variable is declared as in the first example, it is a <em>local variable</em>. It will be declared in the <code>run</code>
method that the compiler will generate and will <strong>not</strong> be visible outside of the script main body. In particular, such
a variable will <strong>not</strong> be visible in other methods of the script</p>
</li>
<li>
<p>if the variable is undeclared, it goes into the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/Script.html#getBinding()">script binding</a>. The binding is
visible from the methods, and is especially important if you use a script to interact with an application and need to
share data between the script and the application. Readers might refer to the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integrating_groovy_in_a_java_application">integration guide</a> for more information.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want a variable to become a field of the class without going into the <code>Binding</code>, you can use the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Field">@Field annotation</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_object_orientation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_orientation"></a>1.4. Object orientation</h3>
<div class="paragraph">
<p>This chapter covers the object orientation of the Groovy programming language.</p>
</div>
<div class="sect3">
<h4 id="_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_types"></a>1.4.1. Types</h4>
<div class="sect4">
<h5 id="_primitive_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_primitive_types"></a>Primitive types</h5>
<div class="paragraph">
<p>Groovy supports the same primitive types as those defined by the <a href="http://docs.oracle.com/javase/specs/jls/se8/html/">Java Language Specification</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>integral types: <code>byte</code> (8 bit), <code>short</code> (16 bit), <code>int</code> (32 bit) and <code>long</code> (64 bit)</p>
</li>
<li>
<p>floating-point types: <code>float</code> (32 bit) and <code>double</code> (64 bit)</p>
</li>
<li>
<p><code>boolean</code> type (exactly <code>true</code> or <code>false</code>)</p>
</li>
<li>
<p><code>char</code> type (16 bit, usable as a numeric type, representing an UTF-16 code)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While Groovy declares and stores primitive fields and variables as primitives, because it uses Objects for
everything, it autowraps references to primitives. Just like Java, the wrappers it uses are</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. primitive wrappers</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Primitive type</th>
<th class="tableblock halign-left valign-top">Wrapper class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here’s an example using <code>int</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> i
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getDeclaredField</span><span class="pun">(</span><span class="str">'i'</span><span class="pun">).</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">i</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">i</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">.</span><span class="kwd">class</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you may be concerned that this means every time you use a mathematical operator on a reference to a primitive
that you’ll incur the cost of unboxing and reboxing the primitive. But this is not the case, as Groovy will compile
your operators into their <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-operators.html#_operator-overloading">method equivalents</a> and uses those instead.
Additionally, Groovy will automatically unbox to a primitive when calling a Java method that takes a primitive
parameter and automatically box primitive method return values from Java. However, be aware there are some
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-differences-java.html#_primitives_and_wrappers">differences</a> from Java’s method resolution.</p>
</div>
</div>
<div class="sect4">
<h5 id="_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class"></a>Class</h5>
<div class="paragraph">
<p>Groovy classes are very similar to Java classes, and are compatible with Java ones at JVM level.
They may have methods, fields and properties (think JavaBean properties but with less boilerplate).
Classes and class members can have the same modifiers (public, protected, private, static, etc) as in Java
with some minor differences at the source level which are explained shortly.</p>
</div>
<div class="paragraph">
<p>The key differences between Groovy classes and their Java counterparts are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Classes or methods with no visibility modifier are automatically public (a special annotation can be used to achieve package private visibility).</p>
</li>
<li>
<p>Fields with no visibility modifier are turned into properties automatically, which results in less verbose code,
since explicit getter and setter methods aren’t needed. More on this aspect will be covered in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#fields">fields and properties section</a>.</p>
</li>
<li>
<p>Classes do not need to have the same base name as their source file definitions but it is highly recommended in most scenarios (see also the next point about scripts).</p>
</li>
<li>
<p>One source file may contain one or more classes (but if a file contains any code not in a class, it is considered a script). Scripts are just classes with some
special conventions and will have the same name as their source file (so don’t include a class definition within a script having the same name as the script source file).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following code presents an example class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

    </span><span class="typ">String</span><span class="pln"> name                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">Integer</span><span class="pln"> age

    </span><span class="kwd">def</span><span class="pln"> increaseAge</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> years</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">+=</span><span class="pln"> years
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class beginning, with the name <code>Person</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>string field and property named <code>name</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method definition</td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="_normal_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_class"></a>Normal class</h6>
<div class="paragraph">
<p>Normal classes refer to classes which are top level and concrete. This means they can be instantiated without restrictions from any other classes or scripts. This way, they can only be public (even though the <code>public</code> keyword may be suppressed). Classes are instantiated by calling their constructors, using the <code>new</code> keyword, as in the following snippet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_inner_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inner_class"></a>Inner class</h6>
<div class="paragraph">
<p>Inner classes are defined within another classes. The enclosing class can use the inner class as usual. On the other side, a inner class can access members of its enclosing class, even if they are private. Classes other than the enclosing class are not allowed to access inner classes. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Outer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> privateStr

    </span><span class="kwd">def</span><span class="pln"> callInnerMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Inner</span><span class="pun">().</span><span class="pln">methodA</span><span class="pun">()</span><span class="pln">       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Inner</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> methodA</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            println </span><span class="str">"${privateStr}."</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the inner class is instantiated and its method gets called</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>inner class definition, inside its enclosing class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>even being private, a field of the enclosing class is accessed by the inner class</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>There are some reasons for using inner classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They increase encapsulation by hiding the inner class from other classes, which do not need to know about it. This also leads to cleaner packages and workspaces.</p>
</li>
<li>
<p>They provide a good organization, by grouping classes that are used by only one class.</p>
</li>
<li>
<p>They lead to more maintainable codes, since inner classes are near the classes that use them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In several cases, inner classes are implementation of interfaces whose methods are needed by the outer class. The code below illustrates this with the usage of threads, which are very common.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Outer2</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> privateStr </span><span class="pun">=</span><span class="pln"> </span><span class="str">'some string'</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> startThread</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Inner2</span><span class="pun">()).</span><span class="pln">start</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Inner2</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Runnable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            println </span><span class="str">"${privateStr}."</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the class <code>Inner2</code> is defined only to provide an implementation of the method <code>run</code> to class <code>Outer2</code>. Anonymous inner classes help to eliminate verbosity in this case.</p>
</div>
<div class="sect6">
<h7 id="_anonymous_inner_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_anonymous_inner_class"></a>Anonymous inner class</h7>
<div class="paragraph">
<p>The last example of inner class can be simplified with an anonymous inner class. The same functionality can be achieved with the following code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Outer3</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> privateStr </span><span class="pun">=</span><span class="pln"> </span><span class="str">'some string'</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> startThread</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Runnable</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
            </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                println </span><span class="str">"${privateStr}."</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}).</span><span class="pln">start</span><span class="pun">()</span><span class="pln">                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>comparing with the last example of previous section, the <code>new Inner2()</code> was replaced by <code>new Runnable()</code> along with all its implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the method <code>start</code> is invoked normally</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Thus, there was no need to define a new class to be used just once.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_abstract_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_class"></a>Abstract class</h6>
<div class="paragraph">
<p>Abstract classes represent generic concepts, thus, they cannot be instantiated, being created to be subclassed. Their members include fields/properties and abstract or concrete methods. Abstract methods do not have implementation, and must be implemented by concrete subclasses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Abstract</span><span class="pln"> </span><span class="pun">{</span><span class="pln">         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name

    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> abstractMethod</span><span class="pun">()</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> concreteMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">'concrete'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>abstract classes must be declared with <code>abstract</code> keyword</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>abstract methods must also be declared with <code>abstract</code> keyword</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Abstract classes are commonly compared to interfaces. But there are at least two important differences of choosing one or another. First, while abstract classes may contain fields/properties and concrete methods, interfaces may contain only abstract methods (method signatures). Moreover, one class can implement several interfaces, whereas it can extend just one class, abstract or not.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_interface"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interface"></a>Interface</h5>
<div class="paragraph">
<p>An interface defines a contract that a class needs to conform to. An interface only defines a list of methods that need
to be implemented, but does not define the methods implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>an interface needs to be declared using the <code>interface</code> keyword</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>an interface only defines method signatures</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Methods of an interface are always <strong>public</strong>. It is an error to use <code>protected</code> or <code>private</code> methods in interfaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using <code>protected</code> is a compile-time error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>A class <em>implements</em> an interface if it defines the interface in its <code>implements</code> list or if any of its superclasses
does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SystemGreeter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">"Hello $name"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SystemGreeter</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> greeter </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>SystemGreeter</code> declares the <code>Greeter</code> interface using the <code>implements</code> keyword</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Then implements the required <code>greet</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Any instance of <code>SystemGreeter</code> is also an instance of the <code>Greeter</code> interface</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>An interface can extend another interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">ExtendedGreeter</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> sayBye</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>ExtendedGreeter</code> interface extends the <code>Greeter</code> interface using the <code>extends</code> keyword</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is worth noting that for a class to be an instance of an interface, it has to be explicit. For example, the following
class defines the <code>greet</code> method as it is declared in the <code>Greeter</code> interface, but does not declare <code>Greeter</code> in its
interfaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">DefaultGreeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"Hello"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

greeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DefaultGreeter</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!(</span><span class="pln">greeter </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, Groovy does not define structural typing. It is however possible to make an instance of an object
implement an interface at runtime, using the <code>as</code> coercion operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">greeter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DefaultGreeter</span><span class="pun">()</span><span class="pln">                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
coerced </span><span class="pun">=</span><span class="pln"> greeter </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln">                                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> coerced </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create an instance of <code>DefaultGreeter</code> that does not implement the interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>coerce the instance into a <code>Greeter</code> at runtime</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the coerced instance implements the <code>Greeter</code> interface</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can see that there are two distinct objects: one is the source object, a <code>DefaultGreeter</code> instance, which does not
implement the interface. The other is an instance of <code>Greeter</code> that delegates to the coerced object.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Groovy interfaces do not support default implementation like Java 8 interfaces. If you are looking for something
similar (but not equal), <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traits">traits</a> are close to interfaces, but allow default implementation as well as other
important features described in this manual.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_constructors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_constructors"></a>Constructors</h5>
<div class="paragraph">
<p>Constructors are special methods used to initialize an object with a specific state. As with normal methods,
it is possible for a class to declare more than one constructor, so long as each constructor has a unique
type signature. If an object doesn’t require any parameters during construction, it may use a <em>no-arg</em> constructor.
If no constructors are supplied, an empty no-arg constructor will be provided by the Groovy compiler.</p>
</div>
<div class="paragraph">
<p>Groovy supports two invocation styles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>positional parameters</em> are used in a similar to how you would use Java constructors</p>
</li>
<li>
<p><em>named parameters</em> allow you to specify parameter names when invoking the constructor.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_positional_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_positional_parameters"></a>Positional parameters</h6>
<div class="paragraph">
<p>To create an object by using positional parameters, the respective class needs to declare one or more
constructors. In the case of multiple constructors, each must have a unique type signature. The constructors can also
added to the class using the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/TupleConstructor.html">groovy.transform.TupleConstructor</a> annotation.</p>
</div>
<div class="paragraph">
<p>Typically, once at least one constructor is declared, the class can only be instantiated by having one of its
constructors called. It is worth noting that, in this case, you can’t normally create the class with named parameters.
Groovy does support named parameters so long as the class contains a no-arg constructor or provides a constructor which
takes a <code>Map</code> argument as the first (and potentially only) argument - see the next section for details.</p>
</div>
<div class="paragraph">
<p>There are three forms of using a declared constructor. The first one is the normal Java way, with the <code>new</code> keyword.
The others rely on coercion of lists into the desired types. In this case, it is possible to coerce with the <code>as</code>
keyword and by statically typing the variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">PersonConstructor</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="typ">Integer</span><span class="pln"> age

    </span><span class="typ">PersonConstructor</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> person1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PersonConstructor</span><span class="pun">(</span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> person2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">PersonConstructor</span><span class="pln">  </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">PersonConstructor</span><span class="pln"> person3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">         </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Constructor declaration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Constructor invocation, classic Java way</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Constructor usage, using coercion with <code>as</code> keyword</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Constructor usage, using coercion in assignment</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_named_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_parameters"></a>Named parameters</h6>
<div class="paragraph">
<p>If no (or a no-arg) constructor is declared, it is possible to create objects by passing parameters in the form of a
map (property/value pairs). This can be in handy in cases where one wants to allow several combinations of parameters.
Otherwise, by using traditional positional parameters it would be necessary to declare all possible constructors.
Having a constructor where the first (and perhaps only) argument is a <code>Map</code> argument is also supported - such a
constructor may also be added using the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/MapConstructor.html">groovy.transform.MapConstructor</a> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">PersonWOConstructor</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="typ">Integer</span><span class="pln"> age
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> person4 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PersonWOConstructor</span><span class="pun">()</span><span class="pln">                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> person5 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PersonWOConstructor</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">)</span><span class="pln">         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> person6 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PersonWOConstructor</span><span class="pun">(</span><span class="pln">age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> person7 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PersonWOConstructor</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>No constructor declared</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>No parameters given in the instantiation</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>name</code> parameter given in the instantiation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>age</code> parameter given in the instantiation</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>name</code> and <code>age</code> parameters given in the instantiation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is important to highlight, however, that this approach gives more power to the constructor caller,
while imposing an increased responsibility on the caller to get the names and value types correct.
Thus, if greater control is desired, declaring constructors using positional parameters might be preferred.</p>
</div>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>While the example above supplied no constructor, you can also supply a no-arg constructor
or a constructor where the first argument is a <code>Map</code>, most typically it’s the only argument.</p>
</li>
<li>
<p>When no (or a no-arg) constructor is declared, Groovy replaces the named constructor call by a call
to the no-arg constructor followed by calls to the setter for each supplied named property.</p>
</li>
<li>
<p>When the first argument is a Map, Groovy combines all named parameters into a Map (regardless of ordering)
and supplies the map as the first parameter. This can be a good approach if your properties are declared as
<code>final</code> (since they will be set in the constructor rather than after the fact with setters).</p>
</li>
<li>
<p>You can support both named and positional construction
by supply both positional constructors as well as a no-arg or Map constructor.</p>
</li>
<li>
<p>You can support hybrid construction by having a constructor where the first argument
is a Map but there are also additional positional parameters. Use this style with caution.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_methods_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_2"></a>Methods</h5>
<div class="paragraph">
<p>Groovy methods are quite similar to other languages. Some peculiarities will be shown in the next subsections.</p>
</div>
<div class="sect5">
<h6 id="_method_definition"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_definition"></a>Method definition</h6>
<div class="paragraph">
<p>A method is defined with a return type or with the <code>def</code> keyword, to make the return type untyped. A method can also receive any number of arguments, which may not have their types explicitly declared. Java modifiers can be used normally, and if no visibility modifier is provided, the method is public.</p>
</div>
<div class="paragraph">
<p>Methods in Groovy always return some value. If no <code>return</code> statement is provided, the value evaluated in the last line executed will be returned. For instance, note that none of the following methods uses the <code>return</code> keyword.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'method called'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">String</span><span class="pln"> anotherMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'another method called'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> thirdMethod</span><span class="pun">(</span><span class="pln">param1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"$param1 passed"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                   </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">static</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> fourthMethod</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> param1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"$param1 passed"</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Method with no return type declared and no parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Method with explicit return type and no parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Method with a parameter with no type defined</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Static method with a String parameter</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_named_parameters_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_parameters_2"></a>Named parameters</h6>
<div class="paragraph">
<p>Like constructors, normal methods can also be called with named parameters.
To support this notation, a convention is used where the first argument to the method is a <code>Map</code>.
In the method body, the parameter values can be accessed as in normal maps (<code>map.key</code>).
If the method has just a single Map argument, all supplied parameters must be named.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Map</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"${args.name}: ${args.age}"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
foo</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="sect6">
<h7 id="_mixing_named_and_positional_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mixing_named_and_positional_parameters"></a>Mixing named and positional parameters</h7>
<div class="paragraph">
<p>Named parameters can be mixed with positional parameters.
The same convention applies, in this case, in addition to the <code>Map</code> argument as the first argument,
the method in question will have additional positional arguments as needed.
Supplied positional parameters when calling the method must be in order.
The named parameters can be in any position. They are grouped into the map and supplied as
the first parameter automatically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Map</span><span class="pln"> args</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> number</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"${args.name}: ${args.age}, and the number is ${number}"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
foo</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">23</span><span class="pun">)</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
foo</span><span class="pun">(</span><span class="lit">23</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Method call with additional <code>number</code> argument of <code>Integer</code> type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Method call with changed order of arguments</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If we don’t have the Map as the first argument, then a Map must be supplied for that argument instead of named parameters.
Failure to do so will lead to <code>groovy.lang.MissingMethodException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> number</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"${args.name}: ${args.age}, and the number is ${number}"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
foo</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">23</span><span class="pun">)</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Method call throws <code>groovy.lang.MissingMethodException: No signature of method: foo() is applicable for argument types: (LinkedHashMap, Integer) values: [[name:Marie, age:1], 23]</code>, because the named argument <code>Map</code> parameter is not defined as the first argument</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Above exception can be avoided if we replace named arguments with an explicit <code>Map</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> number</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"${args.name}: ${args.age}, and the number is ${number}"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
foo</span><span class="pun">(</span><span class="lit">23</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Marie'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">])</span><span class="pln">  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Explicit <code>Map</code> argument in place of named arguments makes invocation valid</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Although Groovy allows you to mix named and positional parameters, it can lead to unnecessary confusion.
Mix named and positional arguments with caution.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_default_arguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_arguments"></a>Default arguments</h6>
<div class="paragraph">
<p>Default arguments make parameters optional. If the argument is not supplied, the method assumes a default value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> par1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> par2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> par1</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> par2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="str">'Marie'</span><span class="pun">).</span><span class="pln">age </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that no mandatory parameter can be defined after a default parameter is present, only other default parameters.</p>
</div>
</div>
<div class="sect5">
<h6 id="_varargs"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_varargs"></a>Varargs</h6>
<div class="paragraph">
<p>Groovy supports methods with a variable number of arguments. They are defined like this: <code>def foo(p1, …​, pn, T…​ args)</code>.
Here <code>foo</code> supports <code>n</code> arguments by default, but also an unspecified number of further arguments exceeding <code>n</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> args</span><span class="pun">.</span><span class="pln">length </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This example defines a method <code>foo</code>, that can take any number of arguments, including no arguments at all.
<code>args.length</code> will return the number of arguments given. Groovy allows <code>T[]</code> as a alternative notation to <code>T…​</code>.
That means any method with an array as last parameter is seen by Groovy as a method that can take a variable number of arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> args</span><span class="pun">.</span><span class="pln">length </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If a method with varargs is called with <code>null</code> as the vararg parameter, then the argument will be <code>null</code> and not an array of length one with <code>null</code> as the only element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> args </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If a varargs method is called with an array as an argument, then the argument will be that array instead of an array of length one containing the given array as the only element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> args </span><span class="pun">}</span><span class="pln">
</span><span class="typ">Integer</span><span class="pun">[]</span><span class="pln"> ints </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="pln">ints</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Another important point are varargs in combination with method overloading. In case of method overloading Groovy will select the most specific method.
For example if a method <code>foo</code> takes a varargs argument of type <code>T</code> and another method <code>foo</code> also takes one argument of type <code>T</code>, the second method is preferred.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> foo</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_method_selection_algorithm"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_selection_algorithm"></a>Method selection algorithm</h6>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
<div class="sect5">
<h6 id="_exception_declaration"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exception_declaration"></a>Exception declaration</h6>
<div class="paragraph">
<p>Groovy automatically allows you to treat checked exceptions like unchecked exceptions.
This means that you don’t need to declare any checked exceptions that a method may throw
as shown in the following example which can throw a <code>FileNotFoundException</code> if the file isn’t found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> badRead</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">'doesNotExist.txt'</span><span class="pun">).</span><span class="pln">text
</span><span class="pun">}</span><span class="pln">

shouldFail</span><span class="pun">(</span><span class="typ">FileNotFoundException</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    badRead</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nor will you be required to surround the call to the <code>badRead</code> method in the previous example within a try/catch
block - though you are free to do so if you wish.</p>
</div>
<div class="paragraph">
<p>If you wish to declare any exceptions that your code might throw (checked or otherwise) you are free to do so.
Adding exceptions won’t change how the code is used from any other Groovy code but can be seen as documentation
for the human reader of your code. The exceptions will become part of the method declaration in the bytecode,
so if your code might be called from Java, it might be useful to include them.
Using an explicit checked exception declaration is illustrated in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> badRead</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">FileNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">'doesNotExist.txt'</span><span class="pun">).</span><span class="pln">text
</span><span class="pun">}</span><span class="pln">

shouldFail</span><span class="pun">(</span><span class="typ">FileNotFoundException</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    badRead</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fields_and_properties"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fields_and_properties"></a>Fields and properties</h5>
<div class="sect5">
<h6 id="fields"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#fields"></a>Fields</h6>
<div class="paragraph">
<p>A field is a member of a class or a trait which has:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a mandatory <em>access modifier</em> (<code>public</code>, <code>protected</code>, or <code>private</code>)</p>
</li>
<li>
<p>one or more optional <em>modifiers</em> (<code>static</code>, <code>final</code>, <code>synchronized</code>)</p>
</li>
<li>
<p>an optional <em>type</em></p>
</li>
<li>
<p>a mandatory <em>name</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Data</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> id                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> description                    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> DEBUG </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a <code>private</code> field named <code>id</code>, of type <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a <code>protected</code> field named <code>description</code>, of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>a <code>public static final</code> field named <em>DEBUG</em> of type <code>boolean</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>A field may be initialized directly at declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Data</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="typ">IDGenerator</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the private field <code>id</code> is initialized with <code>IDGenerator.next()</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is possible to omit the type declaration of a field. This is however considered a bad practice and in general it
is a good idea to use strong typing for fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">BadPractice</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> mapping                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GoodPractice</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> mapping      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the field <code>mapping</code> doesn’t declare a type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the field <code>mapping</code> has a strong type</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The difference between the two is important if you want to use optional type checking later. It is also important
for documentation. However in some cases like scripting or if you want to rely on duck typing it may be interesting
to omit the type.</p>
</div>
</div>
<div class="sect5">
<h6 id="properties"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#properties"></a>Properties</h6>
<div class="paragraph">
<p>A property is an externally visible feature of a class. Rather than just using a public field to represent
such features (which provides a more limited abstraction and would restrict refactoring possibilities),
the typical convention in Java is to follow JavaBean conventions, i.e. represent the property using a
combination of a private backing field and getters/setters. Groovy follows these same conventions
but provides a simpler approach to defining the property. You can define a property with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an <strong>absent</strong> access modifier (no <code>public</code>, <code>protected</code> or <code>private</code>)</p>
</li>
<li>
<p>one or more optional <em>modifiers</em> (<code>static</code>, <code>final</code>, <code>synchronized</code>)</p>
</li>
<li>
<p>an optional <em>type</em></p>
</li>
<li>
<p>a mandatory <em>name</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Groovy will then generate the getters/setters appropriately. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name                             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> age                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>creates a backing <code>private String name</code> field, a <code>getName</code> and a <code>setName</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>creates a backing <code>private int age</code> field, a <code>getAge</code> and a <code>setAge</code> method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If a property is declared <code>final</code>, no setter is generated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> age                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">Person</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age                  </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>defines a read-only property of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>defines a read-only property of type <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>assigns the <code>name</code> parameter to the <code>name</code> field</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>assigns the <code>age</code> parameter to the <code>age</code> field</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Properties are accessed by name and will call the getter or setter transparently, unless the code is in the class
which defines the property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">void</span><span class="pln"> name</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Wonder$name"</span><span class="pln">       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> wonder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln">
p</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Marge'</span><span class="pln">                        </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Marge'</span><span class="pln">                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
p</span><span class="pun">.</span><span class="pln">name</span><span class="pun">(</span><span class="str">'Marge'</span><span class="pun">)</span><span class="pln">                         </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">wonder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'WonderMarge'</span><span class="pln">      </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>this.name</code> will directly access the field because the property is accessed from within the class that defines it</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>similarily a read access is done directly on the <code>name</code> field</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>write access to the property is done outside of the <code>Person</code> class so it will implicitly call <code>setName</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>read access to the property is done outside of the <code>Person</code> class so it will implicitly call <code>getName</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>this will call the <code>name</code> method on <code>Person</code> which performs a direct access to the field</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>this will call the <code>wonder</code> method on <code>Person</code> which performs a direct read access to the field</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is worth noting that this behavior of accessing the backing field directly is done in order to prevent a stack
overflow when using the property access syntax within a class that defines the property.</p>
</div>
<div class="paragraph">
<p>It is possible to list the properties of a class thanks to the meta <code>properties</code> field of an instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">int</span><span class="pln"> age
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">properties</span><span class="pun">.</span><span class="pln">keySet</span><span class="pun">().</span><span class="pln">containsAll</span><span class="pun">([</span><span class="str">'name'</span><span class="pun">,</span><span class="str">'age'</span><span class="pun">])</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By convention, Groovy will recognize properties even if there is no backing field
provided there are getters or setters
that follow the Java Beans specification. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">PseudoProperties</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// a pseudo property "name"</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setName</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

    </span><span class="com">// a pseudo read-only property "age"</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> getAge</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">42</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// a pseudo write-only property "groovy"</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setGroovy</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> groovy</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PseudoProperties</span><span class="pun">()</span><span class="pln">
p</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Foo'</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">age </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
p</span><span class="pun">.</span><span class="pln">groovy </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>writing <code>p.name</code> is allowed because there is a pseudo-property <code>name</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>reading <code>p.age</code> is allowed because there is a pseudo-readonly property <code>age</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>writing <code>p.groovy</code> is allowed because there is a pseudo-writeonly property <code>groovy</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This syntactic sugar is at the core of many DSLs written in Groovy.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_annotation"></a>Annotation</h5>
<div class="sect5">
<h6 id="ann-definition"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ann-definition"></a>Annotation definition</h6>
<div class="paragraph">
<p>An annotation is a kind of special interface dedicated at annotating elements of the code. An annotation is a type which
superinterface is the <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/Annotation.html">Annotation</a> interface. Annotations are declared in a very
similar way to interfaces, using the <code>@interface</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An annotation may define members in the form of methods without bodies and an optional default value. The possible
member types are limited to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>primitive types</p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/String.html">Strings</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/Class.html">Classes</a></p>
</li>
<li>
<p>an <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/Enum.html">enumeration</a></p>
</li>
<li>
<p>another <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/Annotation.html">annotation type</a></p>
</li>
<li>
<p>or any array of the above</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">                          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> value</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">'something'</span><span class="pln">      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> step</span><span class="pun">()</span><span class="pln">                              </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Class</span><span class="pln"> appliesTo</span><span class="pun">()</span><span class="pln">                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotations</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">SomeAnnotation</span><span class="pun">[]</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">                </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">enum</span><span class="pln"> </span><span class="typ">DayOfWeek</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> mon</span><span class="pun">,</span><span class="pln"> tue</span><span class="pun">,</span><span class="pln"> wed</span><span class="pun">,</span><span class="pln"> thu</span><span class="pun">,</span><span class="pln"> fri</span><span class="pun">,</span><span class="pln"> sat</span><span class="pun">,</span><span class="pln"> sun </span><span class="pun">}</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Scheduled</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">DayOfWeek</span><span class="pln"> dayOfWeek</span><span class="pun">()</span><span class="pln">                   </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>an annotation defining a <code>value</code> member of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>an annotation defining a <code>value</code> member of type <code>String</code> with a default value of <code>something</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>an annotation defining a <code>step</code> member of type the primitive type <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>an annotation defining a <code>appliesTo</code> member of type <code>Class</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>an annotation defining a <code>value</code> member which type is an array of another annotation type</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>an annotation defining a <code>dayOfWeek</code> member which type is the enumeration type <code>DayOfWeek</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Unlike in the Java language, in Groovy, an annotation can be used to alter the semantics of the language. It is especially
true of AST transformations which will generate code based on annotations.</p>
</div>
</div>
<div class="sect5">
<h6 id="ann-placement"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ann-placement"></a>Annotation placement</h6>
<div class="paragraph">
<p>An annotation can be applied on various elements of the code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@SomeAnnotation</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@SomeAnnotation</span><span class="pln">                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeClass</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

</span><span class="lit">@SomeAnnotation</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">var</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@SomeAnnotation</code> applies to the <code>someMethod</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@SomeAnnotation</code> applies to the <code>SomeClass</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>@SomeAnnotation</code> applies to the <code>var</code> variable</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In order to limit the scope where an annotation can be applied, it is necessary to declare it on the annotation
definition, using the <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/Target.html">Target</a> annotation. For example, here is how you would
declare that an annotation can be applied to a class or a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Target</span><span class="pln">

</span><span class="lit">@Target</span><span class="pun">([</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">METHOD</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">TYPE</span><span class="pun">])</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>@Target</code> annotation is meant to annotate an annotation with a scope.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@SomeAnnotation</code> will therefore only be allowed on <code>TYPE</code> or <code>METHOD</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The list of possible targets is available in the <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/ElementType.html">ElementType enumeration</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Groovy does not support the <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/ElementType.html#TYPE_PARAMETER">TYPE_PARAMETER</a> and
<a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/ElementType.html#TYPE_PARAMETER">TYPE_USE</a> element types which were introduced in Java 8.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_annotation_member_values"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_annotation_member_values"></a>Annotation member values</h6>
<div class="paragraph">
<p>When an annotation is used, it is required to set at least all members that do not have a default value. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Page</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> statusCode</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Page</span><span class="pun">(</span><span class="pln">statusCode</span><span class="pun">=</span><span class="lit">404</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> notFound</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However it is possible to omit <code>value=</code> in the declaration of the value of an annotation if the member <code>value</code> is the
only one being set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Page</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> statusCode</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="lit">200</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Page</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="str">'/home'</span><span class="pun">)</span><span class="pln">                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> home</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Page</span><span class="pun">(</span><span class="str">'/users'</span><span class="pun">)</span><span class="pln">                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> userList</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Page</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="str">'error'</span><span class="pun">,</span><span class="pln">statusCode</span><span class="pun">=</span><span class="lit">404</span><span class="pun">)</span><span class="pln">     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> notFound</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we can omit the <code>statusCode</code> because it has a default value, but <code>value</code> needs to be set</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>since <code>value</code> is the only mandatory member without a default, we can omit <code>value=</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>if both <code>value</code> and <code>statusCode</code> need to be set, it is required to use <code>value=</code> for the default <code>value</code> member</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_retention_policy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_retention_policy"></a>Retention policy</h6>
<div class="paragraph">
<p>The visibility of an annotation depends on its retention policy. The retention policy of an annotation is set using
the <a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/Retention.html">Retention</a> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Retention</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">RetentionPolicy</span><span class="pln">

</span><span class="lit">@Retention</span><span class="pun">(</span><span class="typ">RetentionPolicy</span><span class="pun">.</span><span class="pln">SOURCE</span><span class="pun">)</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">SomeAnnotation</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>@Retention</code> annotation annotates the <code>@SomeAnnotation</code> annotation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>so <code>@SomeAnnotation</code> will have a <code>SOURCE</code> retention</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The list of possible retention targets and description is available in the
<a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/annotation/RetentionPolicy.html">RetentionPolicy</a> enumeration. The
choice usually depends on whether you want an annotation to be visible at
compile time or runtime.</p>
</div>
</div>
<div class="sect5">
<h6 id="_closure_annotation_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_annotation_parameters"></a>Closure annotation parameters</h6>
<div class="paragraph">
<p>An interesting feature of annotations in Groovy is that you can use a closure as an annotation value. Therefore
annotations may be used with a wide variety of expressions and still have IDE support. For example, imagine a
framework where you want to execute some methods based on environmental constraints like the JDK version or the OS.
One could write the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Tasks</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Set</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> alwaysExecuted</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        result </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="lit">@OnlyIf</span><span class="pun">({</span><span class="pln"> jdk</span><span class="pun">&gt;=</span><span class="lit">6</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> supportedOnlyInJDK6</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        result </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'JDK 6'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="lit">@OnlyIf</span><span class="pun">({</span><span class="pln"> jdk</span><span class="pun">&gt;=</span><span class="lit">7</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> windows </span><span class="pun">})</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> requiresJDK7AndWindows</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        result </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'JDK 7 Windows'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>@OnlyIf</code> annotation to accept a <code>Closure</code> as an argument, you only have to declare the <code>value</code> as a <code>Class</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Retention</span><span class="pun">(</span><span class="typ">RetentionPolicy</span><span class="pun">.</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">OnlyIf</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Class</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To complete the example, let’s write a sample runner that would use that information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Runner</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> T run</span><span class="pun">(</span><span class="typ">Class</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> taskClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> tasks </span><span class="pun">=</span><span class="pln"> taskClass</span><span class="pun">.</span><span class="pln">newInstance</span><span class="pun">()</span><span class="pln">                                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">params</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">jdk</span><span class="pun">:</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> windows</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">]</span><span class="pln">                                        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        tasks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">declaredMethods</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> m </span><span class="pun">-&gt;</span><span class="pln">                                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Modifier</span><span class="pun">.</span><span class="pln">isPublic</span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">modifiers</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> m</span><span class="pun">.</span><span class="pln">parameterTypes</span><span class="pun">.</span><span class="pln">length </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
                </span><span class="kwd">def</span><span class="pln"> onlyIf </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">(</span><span class="typ">OnlyIf</span><span class="pun">)</span><span class="pln">                                </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">onlyIf</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    </span><span class="typ">Closure</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> onlyIf</span><span class="pun">.</span><span class="pln">value</span><span class="pun">().</span><span class="pln">newInstance</span><span class="pun">(</span><span class="pln">tasks</span><span class="pun">,</span><span class="pln">tasks</span><span class="pun">)</span><span class="pln">            </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
                    cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">params</span><span class="pln">                                            </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cl</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                     </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
                        m</span><span class="pun">.</span><span class="pln">invoke</span><span class="pun">(</span><span class="pln">tasks</span><span class="pun">)</span><span class="pln">                                             </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b><span class="pln">
                    </span><span class="pun">}</span><span class="pln">
                </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    m</span><span class="pun">.</span><span class="pln">invoke</span><span class="pun">(</span><span class="pln">tasks</span><span class="pun">)</span><span class="pln">                                                 </span><i class="conum" data-value="10"></i><b><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></b><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        tasks                                                                       </span><i class="conum" data-value="11"></i><b><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a new instance of the class passed as an argument (the task class)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>emulate an environment which is JDK 6 and not Windows</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>iterate on all declared methods of the task class</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>if the method is public and takes no-argument</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>try to find the <code>@OnlyIf</code> annotation</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>if it is found get the <code>value</code> and create a new <code>Closure</code> out of it</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>set the <code>delegate</code> of the closure to our environment variable</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>call the closure, which is the annotation closure. It will return a <code>boolean</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>if it is <code>true</code>, call the method</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>if the method is not annotated with <code>@OnlyIf</code>, execute the method anyway</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>after that, return the task object</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then the runner can be used this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> tasks </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Runner</span><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="typ">Tasks</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> tasks</span><span class="pun">.</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'JDK 6'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Set</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_meta_annotations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_meta_annotations"></a>Meta-annotations</h6>
<div class="sect6">
<h7 id="_declaring_meta_annotations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declaring_meta_annotations"></a>Declaring meta-annotations</h7>
<div class="paragraph">
<p>Meta-annotations, also known as annotation aliases are annotations that
are replaced at compile time by other annotations (one meta-annotation
is an alias for one or more annotations). Meta-annotations can be used to
reduce the size of code involving multiple annotations.</p>
</div>
<div class="paragraph">
<p>Let’s start with a simple example. Imagine you have the&nbsp;<code>@Service</code>
and&nbsp;<code>@Transactional</code> annotations and that you want to annotate a class
with both:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Service</span><span class="pln">
</span><span class="lit">@Transactional</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyTransactionalService</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Given the multiplication of annotations that you could add to the same class, a meta-annotation
could help by reducing the two annotations with a single one having the very same semantics. For example,
we might want to write this instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@TransactionalService</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyTransactionalService</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@TransactionalService</code> is a meta-annotation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>A meta-annotation is declared as a regular annotation but annotated with <code>@AnnotationCollector</code> and the
list of annotations it is collecting. In our case, the <code>@TransactionalService</code> annotation can be written:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">AnnotationCollector</span><span class="pln">

</span><span class="lit">@Service</span><span class="pln">                                        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">@Transactional</span><span class="pln">                                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">@AnnotationCollector</span><span class="pln">                            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">TransactionalService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>annotate the meta-annotation with <code>@Service</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>annotate the meta-annotation with <code>@Transactional</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>annotate the meta-annotation with <code>@AnnotationCollector</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="meta-ann-behavior"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-behavior"></a>Behavior of meta-annotations</h7>
<div class="paragraph">
<p>Groovy supports both <em>precompiled</em> and <em>source form</em>
meta-annotations. This means that your meta-annotation&nbsp;<em>may</em> be
precompiled, or you can have it in the same source tree as the one you
are currently compiling.</p>
</div>
<div class="paragraph">
<p>INFO: Meta-annotations are a Groovy-only feature. There is
no chance for you to annotate a Java class with a meta-annotation and
hope it will do the same as in Groovy. Likewise, you cannot write a
meta-annotation in Java: both the meta-annotation definition&nbsp;<strong>and</strong> usage
have to be Groovy code. But you can happily collect Java annotations
and Groovy annotations within your meta-annotation.</p>
</div>
<div class="paragraph">
<p>When the Groovy compiler encounters a class annotated with a
meta-annotation, it&nbsp;<strong>replaces</strong> it with the collected annotations. So,
in our previous example, it will
replace&nbsp;<code>@TransactionalService</code> with&nbsp;<code>@Transactional</code> and&nbsp;<code>@Service</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> annotations </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyTransactionalService</span><span class="pun">.</span><span class="pln">annotations</span><span class="pun">*.</span><span class="pln">annotationType</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Service</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> annotations</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Transactional</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> annotations</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The conversion from a meta-annotation to the collected annotations is performed during the
<em>semantic analysis</em> compilation phase.&nbsp;</p>
</div>
<div class="paragraph">
<p>In addition to replacing the alias with the collected annotations, a meta-annotation is capable of
processing them, including arguments.</p>
</div>
</div>
<div class="sect6">
<h7 id="meta-ann-members"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-members"></a>Meta-annotation parameters</h7>
<div class="paragraph">
<p>Meta-annotations can collect annotations which have parameters. To illustrate this,
we will imagine two annotations, each of them accepting one argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Timeout</span><span class="pun">(</span><span class="pln">after</span><span class="pun">=</span><span class="lit">3600</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Dangerous</span><span class="pun">(</span><span class="pln">type</span><span class="pun">=</span><span class="str">'explosive'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And suppose that you want create a meta-annotation named&nbsp;<code>@Explosive</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Timeout</span><span class="pun">(</span><span class="pln">after</span><span class="pun">=</span><span class="lit">3600</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Dangerous</span><span class="pun">(</span><span class="pln">type</span><span class="pun">=</span><span class="str">'explosive'</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@AnnotationCollector</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Explosive</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, when the annotations are replaced, they will get the
annotation parameter values <strong>as they were defined in the alias</strong>. More interesting,
the meta-annotation supports overriding specific values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Explosive</span><span class="pun">(</span><span class="pln">after</span><span class="pun">=</span><span class="lit">0</span><span class="pun">)</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bomb</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>after</code> value provided as a parameter to&nbsp;<code>@Explosive</code> overrides the one defined in the <code>@Timeout</code> annotation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If two annotations define the same parameter name, the default processor
will copy the annotation value to all annotations that accept this parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Retention</span><span class="pun">(</span><span class="typ">RetentionPolicy</span><span class="pun">.</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="typ">String</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">                                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="typ">RetentionPolicy</span><span class="pun">.</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Bar</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">                                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Foo</span><span class="pln">
</span><span class="lit">@Bar</span><span class="pln">
</span><span class="lit">@AnnotationCollector</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">FooBar</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

</span><span class="lit">@Foo</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Bar</span><span class="pun">(</span><span class="str">'b'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bob</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                                        </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Bob</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">(</span><span class="typ">Foo</span><span class="pun">).</span><span class="pln">value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">        </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
println </span><span class="typ">Bob</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">(</span><span class="typ">Bar</span><span class="pun">).</span><span class="pln">value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'b'</span><span class="pln">       </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">

</span><span class="lit">@FooBar</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Joe</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                                        </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Joe</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">(</span><span class="typ">Foo</span><span class="pun">).</span><span class="pln">value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">        </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
println </span><span class="typ">Joe</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">(</span><span class="typ">Bar</span><span class="pun">).</span><span class="pln">value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">       </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>@Foo</code> annotation defines the <code>value</code> member of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>@Bar</code> annotation also defines the <code>value</code> member of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the <code>@FooBar</code> meta-annotation aggregates <code>@Foo</code> and <code>@Bar</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>class <code>Bob</code> is annotated with <code>@Foo</code> and <code>@Bar</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the value of the <code>@Foo</code> annotation on <code>Bob</code> is <code>a</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>while the value of the <code>@Bar</code> annotation on <code>Bob</code> is <code>b</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>class <code>Joe</code> is annotated with <code>@FooBar</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>then the value of the <code>@Foo</code> annotation on <code>Joe</code> is <code>a</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>and the value of the <code>@Bar</code> annotation on <code>Joe</code> is also <code>a</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the second case, the meta-annotation value was copied in
both <code>@Foo</code> and <code>@Bar</code> annotations.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It is a compile time error if the collected annotations define the same members
with incompatible types. For example if on the previous example <code>@Foo</code> defined a value of
type <code>String</code> but <code>@Bar</code> defined a value of type <code>int</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is however possible to customize the behavior of meta-annotations and describe how collected
annotations are expanded. We’ll look at how to do that shortly but first there is an advanced
processing option to cover.</p>
</div>
</div>
<div class="sect6">
<h7 id="handling_duplicate_annotations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#handling_duplicate_annotations"></a>Handling duplicate annotations</h7>
<div class="paragraph">
<p>The <code>@AnnotationCollector</code> annotation supports a <code>mode</code> parameter which can be used to
alter how the default processor handles annotation replacement in the presence of
duplicate annotations.</p>
</div>
<div class="paragraph">
<p>INFO: Custom processors (discussed next) may or may not support this parameter.</p>
</div>
<div class="paragraph">
<p>As an example, suppose you create a meta-annotation containing the <code>@ToString</code> annotation
and then place your meta-annotation on a class that already has an explicit <code>@ToString</code>
annotation. Should this be an error? Should both annotations be applied? Does one take
priority over the other? There is no correct answer. In some scenarios it might be
quite appropriate for any of these answers to be correct. So, rather than trying to
preempt one correct way to handle the duplicate annotation issue, Groovy let’s you
write your own custom meta-annotation processors (covered next) and let’s you write
whatever checking logic you like within AST transforms - which are a frequent target for
aggregating. Having said that, by simply setting the <code>mode</code>, a number of commonly
expected scenarios are handled automatically for you within any extra coding.
The behavior of the <code>mode</code> parameter is determined by the <code>AnnotationCollectorMode</code>
enum value chosen and is summarized in the following table.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DUPLICATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annotations from the annotation collection will always be inserted. After all transforms have been run, it will be an error if multiple annotations (excluding those with SOURCE retention) exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PREFER_COLLECTOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annotations from the collector will be added and any existing annotations with the same name will be removed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PREFER_COLLECTOR_MERGED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annotations from the collector will be added and any existing annotations with the same name will be removed but any new parameters found within existing annotations will be merged into the added annotation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PREFER_EXPLICIT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annotations from the collector will be ignored if any existing annotations with the same name are found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PREFER_EXPLICIT_MERGED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annotations from the collector will be ignored if any existing annotations with the same name are found but any new parameters on the collector annotation will be added to existing annotations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="meta-ann-processor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-ann-processor"></a>Custom annotation processors</h7>
<div class="paragraph">
<p>A custom annotation processor will let you choose how to expand a
meta-annotation into collected annotations. The behaviour of the meta-annotation is,
in this case, totally up to you. To do this, you must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a meta-annotation processor, extending <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/AnnotationCollectorTransform.html">AnnotationCollectorTransform</a></p>
</li>
<li>
<p>declare the processor to be used in the meta-annotation declaration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To illustrate this, we are going to explore how the meta-annotation <code>@CompileDynamic</code> is implemented.</p>
</div>
<div class="paragraph">
<p><code>@CompileDynamic</code> is a meta-annotation that expands itself
to&nbsp;<code>@CompileStatic(TypeCheckingMode.SKIP)</code>. The problem is that the
default meta annotation processor doesn’t support enums and the
annotation value <code>TypeCheckingMode.SKIP</code> is one.</p>
</div>
<div class="paragraph">
<p>The naive implementation here would not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@CompileStatic</span><span class="pun">(</span><span class="typ">TypeCheckingMode</span><span class="pun">.</span><span class="pln">SKIP</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@AnnotationCollector</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">CompileDynamic</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead, we will define it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@AnnotationCollector</span><span class="pun">(</span><span class="pln">processor </span><span class="pun">=</span><span class="pln"> </span><span class="str">"org.codehaus.groovy.transform.CompileDynamicProcessor"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">CompileDynamic</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first thing you may notice is that our interface is no longer
annotated with&nbsp;<code>@CompileStatic</code>. The reason for this is that we rely on
the <code>processor</code> parameter instead, that references a class which
will&nbsp;<strong>generate</strong> the annotation.</p>
</div>
<div class="paragraph">
<p>Here is how the custom processor is implemented:</p>
</div>
<div class="listingblock">
<div class="title">CompileDynamicProcessor.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@CompileStatic</span><span class="pln">                                                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CompileDynamicProcessor</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AnnotationCollectorTransform</span><span class="pln"> </span><span class="pun">{</span><span class="pln">            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ClassNode</span><span class="pln"> CS_NODE </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ClassHelper</span><span class="pun">.</span><span class="pln">make</span><span class="pun">(</span><span class="typ">CompileStatic</span><span class="pun">)</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ClassNode</span><span class="pln"> TC_NODE </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ClassHelper</span><span class="pun">.</span><span class="pln">make</span><span class="pun">(</span><span class="typ">TypeCheckingMode</span><span class="pun">)</span><span class="pln"> </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AnnotationNode</span><span class="pun">&gt;</span><span class="pln"> visit</span><span class="pun">(</span><span class="typ">AnnotationNode</span><span class="pln"> collector</span><span class="pun">,</span><span class="pln">                        </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
                               </span><span class="typ">AnnotationNode</span><span class="pln"> aliasAnnotationUsage</span><span class="pun">,</span><span class="pln">             </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
                               </span><span class="typ">AnnotatedNode</span><span class="pln"> aliasAnnotated</span><span class="pun">,</span><span class="pln">                    </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
                               </span><span class="typ">SourceUnit</span><span class="pln"> source</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                             </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AnnotationNode</span><span class="pun">(</span><span class="pln">CS_NODE</span><span class="pun">)</span><span class="pln">                                  </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> enumRef </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PropertyExpression</span><span class="pun">(</span><span class="pln">
            </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ClassExpression</span><span class="pun">(</span><span class="pln">TC_NODE</span><span class="pun">),</span><span class="pln"> </span><span class="str">"SKIP"</span><span class="pun">)</span><span class="pln">                               </span><i class="conum" data-value="10"></i><b><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></b><span class="pln">
        node</span><span class="pun">.</span><span class="pln">addMember</span><span class="pun">(</span><span class="str">"value"</span><span class="pun">,</span><span class="pln"> enumRef</span><span class="pun">)</span><span class="pln">                                        </span><i class="conum" data-value="11"></i><b><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singletonList</span><span class="pun">(</span><span class="pln">node</span><span class="pun">)</span><span class="pln">                                         </span><i class="conum" data-value="12"></i><b><span class="pun">(</span><span class="lit">12</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>our custom processor is written in Groovy, and for better compilation performance, we use static compilation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the custom processor has to extend <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/AnnotationCollectorTransform.html">AnnotationCollectorTransform</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>create a class node representing the <code>@CompileStatic</code> annotation type</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>create a class node representing the <code>TypeCheckingMode</code> enum type</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>collector</code> is the <code>@AnnotationCollector</code> node found in the meta-annotation. Usually unused.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>aliasAnnotationUsage</code> is the meta-annotation being expanded, here it is <code>@CompileDynamic</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>aliasAnnotated</code> is the node being annotated with the meta-annotation</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>sourceUnit</code> is the <code>SourceUnit</code> being compiled</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>we create a new annotation node for <code>@CompileStatic</code></td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>we create an expression equivalent to <code>TypeCheckingMode.SKIP</code></td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>we add that expression to the annotation node, which is now <code>@CompileStatic(TypeCheckingMode.SKIP)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>return the generated annotation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the example, the <code>visit</code> method is the only method which has to be overridden. It is meant to return a list of
annotation nodes that will be added to the node annotated with the meta-annotation. In this example, we return a
single one corresponding to <code>@CompileStatic(TypeCheckingMode.SKIP)</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_inheritance"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance"></a>Inheritance</h5>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
<div class="sect4">
<h5 id="generics"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#generics"></a>Generics</h5>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traits"></a>1.4.2. Traits</h4>
<div class="paragraph">
<p>Traits are a structural construct of the language which allows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>composition of behaviors</p>
</li>
<li>
<p>runtime implementation of interfaces</p>
</li>
<li>
<p>behavior overriding</p>
</li>
<li>
<p>compatibility with static type checking/compilation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They can be seen as <strong>interfaces</strong> carrying both <strong>default implementations</strong> and <strong>state</strong>. A trait is defined using the
<code>trait</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">FlyingAbility</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">String</span><span class="pln"> fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declaration of a trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declaration of a method inside a trait</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then it can be used like a normal interface using the <code>implements</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bird</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">FlyingAbility</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bird</span><span class="pun">()</span><span class="pln">                              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Adds the trait <code>FlyingAbility</code> to the <code>Bird</code> class capabilities</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>instantiate a new <code>Bird</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the <code>Bird</code> class automatically gets the behavior of the <code>FlyingAbility</code> trait</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Traits allow a wide range of capabilities, from simple composition to testing, which are described thoroughly in this section.</p>
</div>
<div class="sect4">
<h5 id="_methods_3"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_3"></a>Methods</h5>
<div class="sect5">
<h6 id="_public_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_methods"></a>Public methods</h6>
<div class="paragraph">
<p>Declaring a method in a trait can be done like any regular method in a class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">FlyingAbility</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">String</span><span class="pln"> fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declaration of a trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declaration of a method inside a trait</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_abstract_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_methods"></a>Abstract methods</h6>
<div class="paragraph">
<p>In addition, traits may declare <em>abstract</em> methods too, which therefore need to be implemented in the class implementing the trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Greetable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">()</span><span class="pln">                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Hello, ${name()}!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>implementing class will have to declare the <code>name</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>can be mixed with a concrete method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then the trait can be used like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greetable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello, Bob!'</span><span class="pln">                    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>implement the trait <code>Greetable</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>since <code>name</code> was abstract, it is required to implement it</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>then <code>greeting</code> can be called</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_private_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_private_methods"></a>Private methods</h6>
<div class="paragraph">
<p>Traits may also define private methods. Those methods will not appear in the trait contract interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> greetingMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="str">'Hello from a private method!'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> greetingMessage</span><span class="pun">()</span><span class="pln">                           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println m
        m
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GreetingMachine</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> g </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GreetingMachine</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Hello from a private method!"</span><span class="pln">          </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">greetingMessage</span><span class="pun">()</span><span class="pln">                              </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">MissingMethodException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println </span><span class="str">"greetingMessage is private in trait"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a private method <code>greetingMessage</code> in the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the public <code>greet</code> message calls <code>greetingMessage</code> by default</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>create a class implementing the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>greet</code> can be called</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>but not <code>greetingMessage</code></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Traits only support <code>public</code> and <code>private</code> methods. Neither <code>protected</code> nor <code>package private</code> scopes are
supported.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_final_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_final_methods"></a>Final methods</h6>
<div class="paragraph">
<p>If we have a class implementing a trait, conceptually implementations from the trait methods
are "inherited" into the class. But, in reality, there is no base class containing such
implementations. Rather, they are woven directly into the class. A final modifier on a method
just indicates what the modifier will be for the woven method. While it would likely be
considered bad style to inherit and override or multiply inherit methods with the same
signature but a mix of final and non-final variants, Groovy doesn’t prohibit this scenario.
Normal method selection applies and the modifier used will be determined from the resulting method.
You might consider creating a base class which implements the desired trait(s) if you
want trait implementation methods that can’t be overridden.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_the_meaning_of_this"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_meaning_of_this"></a>The meaning of this</h5>
<div class="paragraph">
<p><code>this</code> represents the implementing instance. Think of a trait as a superclass. This means that when you write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Introspector</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> whoAmI</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Introspector</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>then calling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">foo</span><span class="pun">.</span><span class="pln">whoAmI</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will return the same instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> foo</span><span class="pun">.</span><span class="pln">whoAmI</span><span class="pun">().</span><span class="kwd">is</span><span class="pun">(</span><span class="pln">foo</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_interfaces"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interfaces"></a>Interfaces</h5>
<div class="paragraph">
<p>Traits may implement interfaces, in which case the interfaces are declared using the <code>implements</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">Greetable</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Hello, ${name()}!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greetable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                             </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello, Bob!'</span><span class="pln">                    </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Named</span><span class="pln">                               </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greetable</span><span class="pln">                           </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declaration of a normal interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>add <code>Named</code> to the list of implemented interfaces</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>declare a class that implements the <code>Greetable</code> trait</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>implement the missing <code>name</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the <code>greeting</code> implementation comes from the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>make sure <code>Person</code> implements the <code>Named</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>make sure <code>Person</code> implements the <code>Greetable</code> trait</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_properties"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_properties"></a>Properties</h5>
<div class="paragraph">
<p>A trait may define properties, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name                             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pun">)</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                      </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                 </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declare a property <code>name</code> inside a trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declare a class which implements the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the property is automatically made visible</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>it can be accessed using the regular property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>or using the regular getter syntax</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_fields"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fields"></a>Fields</h5>
<div class="sect5">
<h6 id="_private_fields"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_private_fields"></a>Private fields</h6>
<div class="paragraph">
<p>Since traits allow the use of private methods, it can also be interesting to use private fields to store state. Traits
will let you do that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Counter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> count</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> count </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> count </span><span class="pun">}</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Counter</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">count</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">count</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declare a private field <code>count</code> inside a trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declare a public method <code>count</code> that increments the counter and returns it</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>declare a class that implements the <code>Counter</code> trait</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the <code>count</code> method can use the private field to keep state</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This is a major difference with <a href="http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html">Java 8 virtual extension methods</a>. While virtual extension methods
do not carry state, traits can. Moreover, traits in Groovy are supported starting with Java 6, because their implementation does not rely on virtual extension methods. This
means that even if a trait can be seen from a Java class as a regular interface, that interface will <strong>not</strong> have default methods, only abstract ones.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_public_fields"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_public_fields"></a>Public fields</h6>
<div class="paragraph">
<p>Public fields work the same way as private fields, but in order to avoid the <a href="http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">diamond problem</a>,
field names are remapped in the implementing class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln">                        </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
p</span><span class="pun">.</span><span class="typ">Named__name</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declare a public <strong>field</strong> inside the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declare a class implementing the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>create an instance of that class</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the public field is available, but renamed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The name of the field depends on the fully qualified name of the trait. All dots (<code>.</code>) in package are replaced with an underscore (<code>_</code>), and the final name includes a double underscore.
So if the type of the field is <code>String</code>, the name of the package is <code>my.package</code>, the name of the trait is <code>Foo</code> and the name of the field is <code>bar</code>,
in the implementing class, the public field will appear as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> my_package_Foo__bar</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
While traits support public fields, it is not recommended to use them and considered as a bad practice.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_composition_of_behaviors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composition_of_behaviors"></a>Composition of behaviors</h5>
<div class="paragraph">
<p>Traits can be used to implement multiple inheritance in a controlled way. For example, we can have the following traits:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">FlyingAbility</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">String</span><span class="pln"> fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">SpeakingAbility</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"I'm speaking!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And a class implementing both traits:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Duck</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">FlyingAbility</span><span class="pun">,</span><span class="pln"> </span><span class="typ">SpeakingAbility</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Duck</span><span class="pun">()</span><span class="pln">                                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln">                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"I'm speaking!"</span><span class="pln">                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Duck</code> class implements both <code>FlyingAbility</code> and <code>SpeakingAbility</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>creates a new instance of <code>Duck</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we can call the method <code>fly</code> from <code>FlyingAbility</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>but also the method <code>speak</code> from <code>SpeakingAbility</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Traits encourage the reuse of capabilities among objects, and the creation of new classes by the composition of existing behavior.</p>
</div>
</div>
<div class="sect4">
<h5 id="_overriding_default_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overriding_default_methods"></a>Overriding default methods</h5>
<div class="paragraph">
<p>Traits provide default implementations for methods, but it is possible to override them in the implementing class. For example, we
can slightly change the example above, by having a duck which quacks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Duck</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">FlyingAbility</span><span class="pun">,</span><span class="pln"> </span><span class="typ">SpeakingAbility</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Quack!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Duck</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">fly</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"I'm flying!"</span><span class="pln">                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Quack!"</span><span class="pln">                            </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Quack!"</span><span class="pln">                            </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a method specific to <code>Duck</code>, named <code>quack</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>override the default implementation of <code>speak</code> so that we use <code>quack</code> instead</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the duck is still flying, from the default implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>quack</code> comes from the <code>Duck</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>speak</code> no longer uses the default implementation from <code>SpeakingAbility</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_extending_traits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_traits"></a>Extending traits</h5>
<div class="sect5">
<h6 id="_simple_inheritance"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_inheritance"></a>Simple inheritance</h6>
<div class="paragraph">
<p>Traits may extend another trait, in which case you must use the <code>extends</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name                                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">Polite</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Named</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> introduce</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Hello, I am $name"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Polite</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Alice'</span><span class="pun">)</span><span class="pln">                   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">introduce</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello, I am Alice'</span><span class="pln">         </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Named</code> trait defines a single <code>name</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Polite</code> trait <strong>extends</strong> the <code>Named</code> trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>Polite</code> adds a new method which has access to the <code>name</code> property of the super-trait</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the <code>name</code> property is visible from the <code>Person</code> class implementing <code>Polite</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>as is the <code>introduce</code> method</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_multiple_inheritance"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_inheritance"></a>Multiple inheritance</h6>
<div class="paragraph">
<p>Alternatively, a trait may extend multiple traits. In that case, all super traits must be declared in the <code>implements</code>
clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">WithId</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">Long</span><span class="pln"> id
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">WithName</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">Identified</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">WithId</span><span class="pun">,</span><span class="pln"> </span><span class="typ">WithName</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>WithId</code> trait defines the <code>id</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>WithName</code> trait defines the <code>name</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>Identified</code> is a trait which inherits both <code>WithId</code> and <code>WithName</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_duck_typing_and_traits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_duck_typing_and_traits"></a>Duck typing and traits</h5>
<div class="sect5">
<h6 id="_dynamic_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_code"></a>Dynamic code</h6>
<div class="paragraph">
<p>Traits can call any dynamic code, like a normal Groovy class. This means that you can, in the body of a method, call
methods which are supposed to exist in an implementing class, without having to explicitly declare them in an interface.
This means that traits are fully compatible with duck typing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">SpeakingDuck</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Duck</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">SpeakingDuck</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> methodMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">"${name.capitalize()}!"</span><span class="pln">                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Duck</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">speak</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Quack!'</span><span class="pln">                        </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>SpeakingDuck</code> expects the <code>quack</code> method to be defined</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Duck</code> class does implement the method using <em>methodMissing</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>calling the <code>speak</code> method triggers a call to <code>quack</code> which is handled by <code>methodMissing</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_dynamic_methods_in_a_trait"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_methods_in_a_trait"></a>Dynamic methods in a trait</h6>
<div class="paragraph">
<p>It is also possible for a trait to implement MOP methods like <code>methodMissing</code> or <code>propertyMissing</code>, in which case implementing classes
will inherit the behavior from the trait, like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">DynamicObject</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> props </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> methodMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> propertyMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> prop</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        props</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setProperty</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> prop</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        props</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> value
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Dynamic</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DynamicObject</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> existingProperty </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ok'</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> existingMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'ok'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Dynamic</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">existingProperty </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ok'</span><span class="pln">                   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">                                </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
d</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">=</span><span class="pln"> </span><span class="str">'bar'</span><span class="pln">                                       </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">==</span><span class="pln"> </span><span class="str">'bar'</span><span class="pln">                               </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">existingMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ok'</span><span class="pln">                   </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> d</span><span class="pun">.</span><span class="pln">someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'SOMEMETHOD'</span><span class="pln">               </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a trait implementing several MOP methods</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Dynamic</code> class defines a property</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the <code>Dynamic</code> class defines a method</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>calling an existing property will call the method from <code>Dynamic</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>calling an non-existing property will call the method from the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>will call <code>setProperty</code> defined on the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>will call <code>getProperty</code> defined on the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>calling an existing method on <code>Dynamic</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>but calling a non existing method thanks to the trait <code>methodMissing</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_multiple_inheritance_conflicts"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_inheritance_conflicts"></a>Multiple inheritance conflicts</h5>
<div class="sect5">
<h6 id="_default_conflict_resolution"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_conflict_resolution"></a>Default conflict resolution</h6>
<div class="paragraph">
<p>It is possible for a class to implement multiple traits. If some trait defines a method with the same signature as a
method in another trait, we have a conflict:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait A </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'A'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
trait B </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'B'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> C </span><span class="kwd">implements</span><span class="pln"> A</span><span class="pun">,</span><span class="pln">B </span><span class="pun">{}</span><span class="pln">               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>trait <code>A</code> defines a method named <code>exec</code> returning a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>trait <code>B</code> defines the very same method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>class <code>C</code> implements both traits</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In this case, the default behavior is that the method from the <strong>last declared trait</strong> in the <code>implements</code> clause wins.
Here, <code>B</code> is declared after <code>A</code> so the method from <code>B</code> will be picked up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> C</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'B'</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_user_conflict_resolution"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_user_conflict_resolution"></a>User conflict resolution</h6>
<div class="paragraph">
<p>In case this behavior is not the one you want, you can explicitly choose which method to call using the <code>Trait.super.foo</code> syntax.
In the example above, we can ensure the method from trait A is invoked by writing this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> C </span><span class="kwd">implements</span><span class="pln"> A</span><span class="pun">,</span><span class="pln">B </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> A</span><span class="pun">.</span><span class="kwd">super</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> C</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c</span><span class="pun">.</span><span class="kwd">exec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'A'</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>explicit call of <code>exec</code> from the trait <code>A</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>calls the version from <code>A</code> instead of using the default resolution, which would be the one from <code>B</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_runtime_implementation_of_traits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_implementation_of_traits"></a>Runtime implementation of traits</h5>
<div class="sect5">
<h6 id="_implementing_a_trait_at_runtime"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementing_a_trait_at_runtime"></a>Implementing a trait at runtime</h6>
<div class="paragraph">
<p>Groovy also supports implementing traits dynamically at runtime. It allows you to "decorate" an existing object using a
trait. As an example, let’s start with this trait and the following class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Extra</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> extra</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"I'm an extra method"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Something</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> doSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Something'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Extra</code> trait defines an <code>extra</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Something</code> class does <strong>not</strong> implement the <code>Extra</code> trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>Something</code> only defines a method <code>doSomething</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then if we do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Something</span><span class="pun">()</span><span class="pln">
s</span><span class="pun">.</span><span class="pln">extra</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>the call to extra would fail because <code>Something</code> is not implementing <code>Extra</code>. It is possible to do it at runtime with
the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Something</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Extra</span><span class="pln">                        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
s</span><span class="pun">.</span><span class="pln">extra</span><span class="pun">()</span><span class="pln">                                               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
s</span><span class="pun">.</span><span class="pln">doSomething</span><span class="pun">()</span><span class="pln">                                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>use of the <strong>as</strong> keyword to coerce an object to a trait <strong>at runtime</strong></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>then <code>extra</code> can be called on the object</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and <code>doSomething</code> is still callable</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When coercing an object to a trait, the result of the operation is not the same instance. It is guaranteed
that the coerced object will implement both the trait <strong>and</strong> the interfaces that the original object implements, but
the result will <strong>not</strong> be an instance of the original class.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_implementing_multiple_traits_at_once"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementing_multiple_traits_at_once"></a>Implementing multiple traits at once</h6>
<div class="paragraph">
<p>Should you need to implement several traits at once, you can use the <code>withTraits</code> method instead of the <code>as</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait A </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> methodFromA</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
trait B </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> methodFromB</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> C </span><span class="pun">{}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> C</span><span class="pun">()</span><span class="pln">
c</span><span class="pun">.</span><span class="pln">methodFromA</span><span class="pun">()</span><span class="pln">                     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
c</span><span class="pun">.</span><span class="pln">methodFromB</span><span class="pun">()</span><span class="pln">                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">withTraits A</span><span class="pun">,</span><span class="pln"> B           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
d</span><span class="pun">.</span><span class="pln">methodFromA</span><span class="pun">()</span><span class="pln">                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
d</span><span class="pun">.</span><span class="pln">methodFromB</span><span class="pun">()</span><span class="pln">                     </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>call to <code>methodFromA</code> will fail because <code>C</code> doesn’t implement <code>A</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>call to <code>methodFromB</code> will fail because <code>C</code> doesn’t implement <code>B</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>withTrait</code> will wrap <code>c</code> into something which implements <code>A</code> and <code>B</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>methodFromA</code> will now pass because <code>d</code> implements <code>A</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>methodFromB</code> will now pass because <code>d</code> also implements <code>B</code></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When coercing an object to multiple traits, the result of the operation is not the same instance. It is guaranteed
that the coerced object will implement both the traits <strong>and</strong> the interfaces that the original object implements, but
the result will <strong>not</strong> be an instance of the original class.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_chaining_behavior"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_chaining_behavior"></a>Chaining behavior</h5>
<div class="paragraph">
<p>Groovy supports the concept of <em>stackable traits</em>. The idea is to delegate from one trait to the other if the current trait
is not capable of handling a message. To illustrate this, let’s imagine a message handler interface like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">MessageHandler</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> on</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can compose a message handler by applying small behaviors. For example, let’s define a default handler in the
form of a trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">DefaultHandler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MessageHandler</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> on</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"Received $message with payload $payload"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then any class can inherit the behavior of the default handler by implementing the trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SimpleHandler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultHandler</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now what if you want to log all messages, in addition to the default handler? One option is to write this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SimpleHandlerWithLogging</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultHandler</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> on</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">"Seeing $message with payload $payload"</span><span class="pln">                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="typ">DefaultHandler</span><span class="pun">.</span><span class="kwd">super</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="pln">message</span><span class="pun">,</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>explicitly implement the <code>on</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>perform logging</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>continue by delegating to the <code>DefaultHandler</code> trait</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This works but this approach has drawbacks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the logging logic is bound to a "concrete" handler</p>
</li>
<li>
<p>we have an explicit reference to <code>DefaultHandler</code> in the <code>on</code> method, meaning that if we happen to change the trait that our class implements, code will be broken</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As an alternative, we can write another trait which responsibility is limited to logging:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">LoggingHandler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MessageHandler</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> on</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"Seeing $message with payload $payload"</span><span class="pln">                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="pln">message</span><span class="pun">,</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln">                                          </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the logging handler is itself a handler</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>prints the message it receives</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>then <code>super</code> makes it delegate the call to the next trait in the chain</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then our class can be rewritten as this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">HandlerWithLogger</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultHandler</span><span class="pun">,</span><span class="pln"> </span><span class="typ">LoggingHandler</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> loggingHandler </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HandlerWithLogger</span><span class="pun">()</span><span class="pln">
loggingHandler</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'test logging'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[:])</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which will print:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Seeing test logging with payload [:]
Received test logging with payload [:]</pre>
</div>
</div>
<div class="paragraph">
<p>As the priority rules imply that <code>LoggerHandler</code> wins because it is declared last, then a call to <code>on</code> will use
the implementation from <code>LoggingHandler</code>. But the latter has a call to <code>super</code>, which means the next trait in the
chain. Here, the next trait is <code>DefaultHandler</code> so <strong>both</strong> will be called:</p>
</div>
<div class="paragraph">
<p>The interest of this approach becomes more evident if we add a third handler, which is responsible for handling messages
that start with <code>say</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">SayHandler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MessageHandler</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> on</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">message</span><span class="pun">.</span><span class="pln">startsWith</span><span class="pun">(</span><span class="str">"say"</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
            println </span><span class="str">"I say ${message - 'say'}!"</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="pln">message</span><span class="pun">,</span><span class="pln"> payload</span><span class="pun">)</span><span class="pln">                                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a handler specific precondition</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>if the precondition is not met, pass the message to the next handler in the chain</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then our final handler looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Handler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultHandler</span><span class="pun">,</span><span class="pln"> </span><span class="typ">SayHandler</span><span class="pun">,</span><span class="pln"> </span><span class="typ">LoggingHandler</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Handler</span><span class="pun">()</span><span class="pln">
h</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[:])</span><span class="pln">
h</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'sayHello'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[:])</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>messages will first go through the logging handler</p>
</li>
<li>
<p>the logging handler calls <code>super</code> which will delegate to the next handler, which is the <code>SayHandler</code></p>
</li>
<li>
<p>if the message starts with <code>say</code>, then the handler consumes the message</p>
</li>
<li>
<p>if not, the <code>say</code> handler delegates to the next handler in the chain</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach is very powerful because it allows you to write handlers that do not know each other and yet let you
combine them in the order you want. For example, if we execute the code, it will print:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Seeing foo with payload [:]
Received foo with payload [:]
Seeing sayHello with payload [:]
I say Hello!</pre>
</div>
</div>
<div class="paragraph">
<p>but if we move the logging handler to be the second one in the chain, the output is different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">AlternateHandler</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultHandler</span><span class="pun">,</span><span class="pln"> </span><span class="typ">LoggingHandler</span><span class="pun">,</span><span class="pln"> </span><span class="typ">SayHandler</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
h </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AlternateHandler</span><span class="pun">()</span><span class="pln">
h</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[:])</span><span class="pln">
h</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'sayHello'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[:])</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>prints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Seeing foo with payload [:]
Received foo with payload [:]
I say Hello!</pre>
</div>
</div>
<div class="paragraph">
<p>The reason is that now, since the <code>SayHandler</code> consumes the message without calling <code>super</code>, the logging handler is
not called anymore.</p>
</div>
<div class="sect5">
<h6 id="_semantics_of_super_inside_a_trait"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_semantics_of_super_inside_a_trait"></a>Semantics of super inside a trait</h6>
<div class="paragraph">
<p>If a class implements multiple traits and a call to an unqualified <code>super</code> is found, then:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if the class implements another trait, the call delegates to the next trait in the chain</p>
</li>
<li>
<p>if there isn’t any trait left in the chain, <code>super</code> refers to the super class of the implementing class (<em>this</em>)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, it is possible to decorate final classes thanks to this behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Filtering</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">StringBuilder</span><span class="pln"> append</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> subst </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'o'</span><span class="pun">,</span><span class="str">''</span><span class="pun">)</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">subst</span><span class="pun">)</span><span class="pln">                             </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">              </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> sb </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StringBuilder</span><span class="pun">().</span><span class="pln">withTraits </span><span class="typ">Filtering</span><span class="pln">       </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
sb</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="str">'Groovy'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sb</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Grvy'</span><span class="pln">                          </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a trait named <code>Filtering</code>, supposed to be applied on a <code>StringBuilder</code> at runtime</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>redefine the <code>append</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>remove all 'o’s from the string</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>then delegate to <code>super</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>in case <code>toString</code> is called, delegate to <code>super.toString</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>runtime implementation of the <code>Filtering</code> trait on a <code>StringBuilder</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>the string which has been appended no longer contains the letter <code>o</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In this example, when <code>super.append</code> is encountered, there is no other trait implemented by the target object, so the
method which is called is the original <code>append</code> method, that is to say the one from <code>StringBuilder</code>. The same trick
is used for <code>toString</code>, so that the string representation of the proxy object which is generated delegates to the
<code>toString</code> of the <code>StringBuilder</code> instance.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_advanced_features"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_features"></a>Advanced features</h5>
<div class="sect5">
<h6 id="_sam_type_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sam_type_coercion"></a>SAM type coercion</h6>
<div class="paragraph">
<p>If a trait defines a single abstract method, it is candidate for SAM (Single Abstract Method) type coercion. For example,
imagine the following trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Hello $name"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln">               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>greet</code> method is not abstract and calls the abstract method <code>getName</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>getName</code> is an abstract method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Since <code>getName</code> is the <em>single abstract method</em> in the <code>Greeter</code> trait, you can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Greeter</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Alice'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the closure "becomes" the implementation of the <code>getName</code> single abstract method</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>or even:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">(</span><span class="typ">Greeter</span><span class="pln"> g</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println g</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
greet </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Alice'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the greet method accepts the SAM type Greeter as parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can call it directly with a closure</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_differences_with_java_8_default_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_java_8_default_methods"></a>Differences with Java 8 default methods</h6>
<div class="paragraph">
<p>In Java 8, interfaces can have default implementations of methods. If a class implements an interface and does not provide
an implementation for a default method, then the implementation from the interface is chosen. Traits behave the same but
with a major difference: the implementation from the trait is <strong>always</strong> used if the class declares the trait in its interface
list <strong>and</strong> that it doesn’t provide an implementation <strong>even</strong> if a super class does.</p>
</div>
<div class="paragraph">
<p>This feature can be used to compose behaviors in an very precise way, in case you want to override the behavior of an
already implemented method.</p>
</div>
<div class="paragraph">
<p>To illustrate the concept, let’s start with this simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">CompileStatic</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">control</span><span class="pun">.</span><span class="typ">CompilerConfiguration</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">control</span><span class="pun">.</span><span class="pln">customizers</span><span class="pun">.</span><span class="typ">ASTTransformationCustomizer</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">control</span><span class="pun">.</span><span class="pln">customizers</span><span class="pun">.</span><span class="typ">ImportCustomizer</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">GroovyTestCase</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> config
    </span><span class="kwd">def</span><span class="pln"> shell

    </span><span class="kwd">void</span><span class="pln"> setup</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
        shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> testSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> shell</span><span class="pun">.</span><span class="pln">evaluate</span><span class="pun">(</span><span class="str">'1+1'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> otherTest</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* ... */</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we create a simple test case which uses two properties (<em>config</em> and <em>shell</em>) and uses those in
multiple test methods. Now imagine that you want to test the same, but with another distinct compiler configuration.
One option is to create a subclass of <code>SomeTest</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">AnotherTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">SomeTest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setup</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
        config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It works, but what if you have actually multiple test classes, and that you want to test the new configuration for all
those test classes? Then you would have to create a distinct subclass for each test class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">YetAnotherTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">SomeTest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setup</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
        config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then what you see is that the <code>setup</code> method of both tests is the same. The idea, then, is to create a trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">MyTestSupport</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> setup</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
        config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="typ">CompileStatic</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then use it in the subclasses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">AnotherTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">SomeTest</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MyTestSupport</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">YetAnotherTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">SomeTest2</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MyTestSupport</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It would allow us to dramatically reduce the boilerplate code, and reduces the risk of forgetting to change the setup
code in case we decide to change it. Even if <code>setup</code> is already implemented in the super class, since the test class declares
the trait in its interface list, the behavior will be borrowed from the trait implementation!</p>
</div>
<div class="paragraph">
<p>This feature is in particular useful when you don’t have access to the super class source code. It can be used to
mock methods or force a particular implementation of a method in a subclass. It lets you refactor your code to keep
the overridden logic in a single trait and inherit a new behavior just by implementing it. The alternative, of course,
is to override the method in <strong>every</strong> place you would have used the new code.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It’s worth noting that if you use runtime traits, the methods from the trait are <strong>always</strong> preferred to those of the proxied
object:
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name                                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
trait </span><span class="typ">Bob</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Alice'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Alice'</span><span class="pln">                                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p2 </span><span class="pun">=</span><span class="pln"> p </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Bob</span><span class="pln">                                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p2</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">                                 </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Person</code> class defines a <code>name</code> property which results in a <code>getName</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Bob</code> is a trait which defines <code>getName</code> as returning <code>Bob</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the default object will return <em>Alice</em></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>p2</code> coerces <code>p</code> into <code>Bob</code> at runtime</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>getName</code> returns <em>Bob</em> because <code>getName</code> is taken from the <strong>trait</strong></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Again, don’t forget that dynamic trait coercion returns a distinct object which only implements the original
interfaces, as well as the traits.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_differences_with_mixins"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_mixins"></a>Differences with mixins</h5>
<div class="paragraph">
<p>There are several conceptual differences with mixins, as they are available in Groovy. Note that we are talking about
runtime mixins, not the @Mixin annotation which is deprecated in favour of traits.</p>
</div>
<div class="paragraph">
<p>First of all, methods defined in a trait are visible in bytecode:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>internally, the trait is represented as an interface (without default or static methods) and several helper classes</p>
</li>
<li>
<p>this means that an object implementing a trait effectively implements an <em>interface</em></p>
</li>
<li>
<p>those methods are visible from Java</p>
</li>
<li>
<p>they are compatible with type checking and static compilation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Methods added through a mixin are, on the contrary, only visible at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> A </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> methodFromA</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'A'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> B </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> methodFromB</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'B'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
A</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">mixin B                             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> A</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> o</span><span class="pun">.</span><span class="pln">methodFromA</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'A'</span><span class="pln">                   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> o</span><span class="pun">.</span><span class="pln">methodFromB</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'B'</span><span class="pln">                   </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> o </span><span class="kwd">instanceof</span><span class="pln"> A                           </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!(</span><span class="pln">o </span><span class="kwd">instanceof</span><span class="pln"> B</span><span class="pun">)</span><span class="pln">                        </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class <code>A</code> defines <code>methodFromA</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>class <code>B</code> defines <code>methodFromB</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>mixin B into A</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>we can call <code>methodFromA</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>we can also call <code>methodFromB</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the object is an instance of <code>A</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>but it’s <strong>not</strong> an instanceof <code>B</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The last point is actually a very important and illustrates a place where mixins have an advantage over traits: the instances
are <strong>not</strong> modified, so if you mixin some class into another, there isn’t a third class generated, and methods which respond to
A will continue responding to A even if mixed in.</p>
</div>
</div>
<div class="sect4">
<h5 id="_static_methods_properties_and_fields"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods_properties_and_fields"></a>Static methods, properties and fields</h5>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The following instructions are subject to caution. Static member support is work in progress and still experimental. The
information below is valid for 3.0.0-SNAPSHOT only.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is possible to define static methods in a trait, but it comes with numerous limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Traits with static methods cannot be compiled statically or type checked. All static methods,
properties and field are accessed dynamically (it’s a limitation from the JVM).</p>
</li>
<li>
<p>Static methods do not appear within the generated interfaces for each trait.</p>
</li>
<li>
<p>The trait is interpreted as a <em>template</em> for the implementing class, which means that each
implementing class will get its own static methods, properties and fields. So a static member
declared on a trait doesn’t belong to the <code>Trait</code>, but to it’s implementing class.</p>
</li>
<li>
<p>You should typically not mix static and instance methods of the same signature. The normal
rules for applying traits apply (including multiple inheritance conflict resolution). If the
method chosen is static but some implemented trait has an instance variant, a compilation error
will occur. If the method chosen is the instance variant, the static variant will be ignored
(the behavior is similar to static methods in Java interfaces for this case).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s start with a simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">TestHelper</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> CALLED </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        CALLED </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">TestHelper</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">init</span><span class="pun">()</span><span class="pln">                                      </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="typ">TestHelper__CALLED</span><span class="pln">                   </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the static field is declared in the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a static method is also declared in the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the static field is updated <em>within</em> the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>a static method <em>init</em> is made available to the implementing class</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the static field is <em>remapped</em> to avoid the diamond issue</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As usual, it is not recommended to use public fields. Anyway, should you want this, you must understand that the following code would fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Foo</span><span class="pun">.</span><span class="pln">CALLED </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>because there is <em>no</em> static field <em>CALLED</em> defined on the trait itself. Likewise, if you have two distinct implementing classes, each one gets a distinct static field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bar</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">TestHelper</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Baz</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">TestHelper</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">Bar</span><span class="pun">.</span><span class="pln">init</span><span class="pun">()</span><span class="pln">                                      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Bar</span><span class="pun">.</span><span class="typ">TestHelper__CALLED</span><span class="pln">                   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="typ">Baz</span><span class="pun">.</span><span class="typ">TestHelper__CALLED</span><span class="pln">                  </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class <code>Bar</code> implements the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>class <code>Baz</code> also implements the trait</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>init</code> is only called on <code>Bar</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the static field <code>CALLED</code> on <code>Bar</code> is updated</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>but the static field <code>CALLED</code> on <code>Baz</code> is not, because it is <strong>distinct</strong></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_inheritance_of_state_gotchas"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance_of_state_gotchas"></a>Inheritance of state gotchas</h5>
<div class="paragraph">
<p>We have seen that traits are stateful. It is possible for a trait to define fields or properties, but when a class implements a trait, it gets those fields/properties on
a per-trait basis. So consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">IntCouple</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The trait defines two properties, <code>x</code> and <code>y</code>, as well as a <code>sum</code> method. Now let’s create a class which implements the trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">BaseElem</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">IntCouple</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">base</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BaseElem</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">base</span><span class="pun">.</span><span class="pln">f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of calling <code>f</code> is <code>3</code>, because <code>f</code> delegates to <code>sum</code> in the trait, which has state. But what if we write this instead?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Elem</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">IntCouple</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">                                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> elem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Elem</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Override property <code>x</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Override property <code>y</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call <code>sum</code> from trait</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you call <code>elem.f()</code>, what is the expected output? Actually it is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> elem</span><span class="pun">.</span><span class="pln">f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason is that the <code>sum</code> method accesses the <em>fields</em> of the trait. So it is using the <code>x</code> and <code>y</code> values defined
in the trait. If you want to use the values from the implementing class, then you need to dereference fields by using
getters and setters, like in this last example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">IntCouple</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> getX</span><span class="pun">()+</span><span class="pln">getY</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Elem</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">IntCouple</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> elem </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Elem</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> elem</span><span class="pun">.</span><span class="pln">f</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_self_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_self_types"></a>Self types</h5>
<div class="sect5">
<h6 id="_type_constraints_on_traits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_constraints_on_traits"></a>Type constraints on traits</h6>
<div class="paragraph">
<p>Sometimes you will want to write a trait that can only be applied to some type. For example, you may want to apply a
trait on a class that extends another class which is beyond your control, and still be able to call those methods.
To illustrate this, let’s start with this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">CommunicationService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> sendMessage</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> </span><span class="kwd">from</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> to</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">"$from sent [$message] to $to"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Device</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id </span><span class="pun">}</span><span class="pln">                                                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

trait </span><span class="typ">Communicating</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> sendMessage</span><span class="pun">(</span><span class="typ">Device</span><span class="pln"> to</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">CommunicationService</span><span class="pun">.</span><span class="pln">sendMessage</span><span class="pun">(</span><span class="pln">id</span><span class="pun">,</span><span class="pln"> to</span><span class="pun">.</span><span class="pln">id</span><span class="pun">,</span><span class="pln"> message</span><span class="pun">)</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyDevice</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Device</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Communicating</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">                   </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> bob </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyDevice</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="str">'Bob'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> alice </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyDevice</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="str">'Alice'</span><span class="pun">)</span><span class="pln">
bob</span><span class="pun">.</span><span class="pln">sendMessage</span><span class="pun">(</span><span class="pln">alice</span><span class="pun">,</span><span class="str">'secret'</span><span class="pun">)</span><span class="pln">                                             </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A <code>Service</code> class, beyond your control (in a library, …​) defines a <code>sendMessage</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A <code>Device</code> class, beyond your control (in a library, …​)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a communicating trait for devices that can call the service</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines <code>MyDevice</code> as a communicating device</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The method from the trait is called, and <code>id</code> is resolved</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is clear, here, that the <code>Communicating</code> trait can only apply to <code>Device</code>. However, there’s no explicit
contract to indicate that, because traits cannot extend classes. However, the code compiles and runs perfectly
fine, because <code>id</code> in the trait method will be resolved dynamically. The problem is that there is nothing that
prevents the trait from being applied to any class which is <strong>not</strong> a <code>Device</code>. Any class which has an <code>id</code> would
work, while any class that does not have an <code>id</code> property would cause a runtime error.</p>
</div>
<div class="paragraph">
<p>The problem is even more complex if you want to enable type checking or apply <code>@CompileStatic</code> on the trait: because
the trait knows nothing about itself being a <code>Device</code>, the type checker will complain saying that it does not find
the <code>id</code> property.</p>
</div>
<div class="paragraph">
<p>One possibility is to explicitly add a <code>getId</code> method in the trait, but it would not solve all issues. What if a method
requires <code>this</code> as a parameter, and actually requires it to be a <code>Device</code>?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SecurityService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> check</span><span class="pun">(</span><span class="typ">Device</span><span class="pln"> d</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">d</span><span class="pun">.</span><span class="pln">id</span><span class="pun">==</span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SecurityException</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to be able to call <code>this</code> in the trait, then you will explicitly need to cast <code>this</code> into a <code>Device</code>. This can
quickly become unreadable with explicit casts to <code>this</code> everywhere.</p>
</div>
</div>
<div class="sect5">
<h6 id="traits-selftype"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#traits-selftype"></a>The @SelfType annotation</h6>
<div class="paragraph">
<p>In order to make this contract explicit, and to make the type checker aware of the <em>type of itself</em>, Groovy provides
a <code>@SelfType</code> annotation that will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>let you declare the types that a class that implements this trait must inherit or implement</p>
</li>
<li>
<p>throw a compile time error if those type constraints are not satisfied</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So in our previous example, we can fix the trait using the <code>@groovy.transform.SelfType</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@SelfType</span><span class="pun">(</span><span class="typ">Device</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@CompileStatic</span><span class="pln">
trait </span><span class="typ">Communicating</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> sendMessage</span><span class="pun">(</span><span class="typ">Device</span><span class="pln"> to</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">SecurityService</span><span class="pun">.</span><span class="pln">check</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pln">
        </span><span class="typ">CommunicationService</span><span class="pun">.</span><span class="pln">sendMessage</span><span class="pun">(</span><span class="pln">id</span><span class="pun">,</span><span class="pln"> to</span><span class="pun">.</span><span class="pln">id</span><span class="pun">,</span><span class="pln"> message</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if you try to implement this trait on a class that is <strong>not</strong> a device, a compile-time error will occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyDevice</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Communicating</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="com">// forgot to extend Device</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The error will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class 'MyDevice' implements trait 'Communicating' but does not extend self type class 'Device'</pre>
</div>
</div>
<div class="paragraph">
<p>In conclusion, self types are a powerful way of declaring constraints on traits without having to declare the contract
directly in the trait or having to use casts everywhere, maintaining separation of concerns as tight as it should be.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_limitations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_limitations"></a>Limitations</h5>
<div class="sect5">
<h6 id="_compatibility_with_ast_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compatibility_with_ast_transformations"></a>Compatibility with AST transformations</h6>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Traits are not officially compatible with AST transformations. Some of them, like <code>@CompileStatic</code> will be applied
on the trait itself (not on implementing classes), while others will apply on both the implementing class and the trait.
There is absolutely no guarantee that an AST transformation will run on a trait as it does on a regular class, so use it
at your own risk!
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_prefix_and_postfix_operations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_prefix_and_postfix_operations"></a>Prefix and postfix operations</h6>
<div class="paragraph">
<p>Within traits, prefix and postfix operations are not allowed if they update a field of the trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">trait </span><span class="typ">Counting</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> x
    </span><span class="kwd">void</span><span class="pln"> inc</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        x</span><span class="pun">++</span><span class="pln">                             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> dec</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="pun">--</span><span class="pln">x                             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Counter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Counting</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Counter</span><span class="pun">()</span><span class="pln">
c</span><span class="pun">.</span><span class="pln">inc</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>x</code> is defined within the trait, postfix increment is not allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>x</code> is defined within the trait, prefix decrement is not allowed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>A workaround is to use the <code>+=</code> operator instead.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_closures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures"></a>1.5. Closures</h3>
<div class="paragraph">
<p>This chapter covers Groovy Closures. A closure in Groovy is an open, anonymous, block of code that can take arguments,
return a value and be assigned to a variable. A closure may reference variables declared in its surrounding scope. In
opposition to the formal definition of a closure, <code>Closure</code> in the Groovy language can also contain free variables which
are defined outside of its surrounding scope. While breaking the formal concept of a closure, it offers a variety of
advantages which are described in this chapter.</p>
</div>
<div class="sect3">
<h4 id="_syntax_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax_2"></a>1.5.1. Syntax</h4>
<div class="sect4">
<h5 id="_defining_a_closure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_defining_a_closure"></a>Defining a closure</h5>
<div class="paragraph">
<p>A closure definition follows this syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">{</span><span class="pln"> </span><span class="pun">[</span><span class="pln">closureParameters </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> statements </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>[closureParameters-&gt;]</code> is an optional comma-delimited list of
parameters, and statements are 0 or more Groovy statements. The parameters
look similar to a method parameter list, and these parameters may be
typed or untyped.</p>
</div>
<div class="paragraph">
<p>When a parameter list is specified, the <code>-&gt;</code> character
is required and serves to separate the arguments from the closure body.
The <em>statements</em> portion consists of 0, 1, or many Groovy statements.</p>
</div>
<div class="paragraph">
<p>Some examples of valid closure definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">{</span><span class="pln"> item</span><span class="pun">++</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                                          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="pun">{</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> item</span><span class="pun">++</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

</span><span class="pun">{</span><span class="pln"> println it </span><span class="pun">}</span><span class="pln">                                      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

</span><span class="pun">{</span><span class="pln"> it </span><span class="pun">-&gt;</span><span class="pln"> println it </span><span class="pun">}</span><span class="pln">                                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

</span><span class="pun">{</span><span class="pln"> name </span><span class="pun">-&gt;</span><span class="pln"> println name </span><span class="pun">}</span><span class="pln">                            </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">

</span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">-&gt;</span><span class="pln">                                </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
    println </span><span class="str">"hey ${x} the value is ${y}"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="pun">{</span><span class="pln"> reader </span><span class="pun">-&gt;</span><span class="pln">                                         </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> line </span><span class="pun">=</span><span class="pln"> reader</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">()</span><span class="pln">
    line</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A closure referencing a variable named <code>item</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It is possible to explicitly separate closure parameters from code by adding an arrow (<code>-&gt;</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A closure using an implicit parameter (<code>it</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>An alternative version where <code>it</code> is an explicit parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>In that case it is often better to use an explicit name for the parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>A closure accepting two typed parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>A closure can contain multiple statements</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="closure-as-object"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-as-object"></a>Closures as an object</h5>
<div class="paragraph">
<p>A closure is an instance of the <code>groovy.lang.Closure</code> class, making it assignable to a variable or a field as any
other variable, despite being a block of code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> listener </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> e </span><span class="pun">-&gt;</span><span class="pln"> println </span><span class="str">"Clicked on $e.source"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listener </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln">
</span><span class="typ">Closure</span><span class="pln"> callback </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'Done!'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">Closure</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> isTextFile </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">File</span><span class="pln"> it </span><span class="pun">-&gt;</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">endsWith</span><span class="pun">(</span><span class="str">'.txt'</span><span class="pun">)</span><span class="pln">                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can assign a closure to a variable, and it is an instance of <code>groovy.lang.Closure</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If not using <code>def</code>, you can assign a closure to a variable of type <code>groovy.lang.Closure</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Optionally, you can specify the return type of the closure by using the generic type of <code>groovy.lang.Closure</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_calling_a_closure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_calling_a_closure"></a>Calling a closure</h5>
<div class="paragraph">
<p>A closure, as an anonymous block of code, can be called like any other method. If you define a closure which takes
no argument like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> code </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the code inside the closure will only be executed when you <em>call</em> the closure, which can be done by using the
variable as if it was a regular method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> code</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can be explicit and use the <code>call</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> code</span><span class="pun">.</span><span class="pln">call</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The principle is the same if the closure accepts arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> isOdd </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">-&gt;</span><span class="pln"> i</span><span class="pun">%</span><span class="lit">2</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> isOdd</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> isOdd</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> isEven </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">%</span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                                  </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> isEven</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">                                   </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> isEven</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                               </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a closure which accepts an <code>int</code> as a parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>it can be called directly</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>or using the <code>call</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>same goes for a closure with an implicit argument (<code>it</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>which can be called directly using <code>(arg)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>or using <code>call</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Unlike a method, a closure <strong>always</strong> returns a value when called. The next section discusses how to declare closure arguments, when to use them and what is the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#implicit-it">implicit
"it" parameter</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters"></a>1.5.2. Parameters</h4>
<div class="sect4">
<h5 id="_normal_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_normal_parameters"></a>Normal parameters</h5>
<div class="paragraph">
<p>Parameters of closures follow the same principle as parameters of regular methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an optional type</p>
</li>
<li>
<p>a name</p>
</li>
<li>
<p>an optional default value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters are separated with commas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> closureWithOneArg </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithOneArg</span><span class="pun">(</span><span class="str">'groovy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'GROOVY'</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> closureWithOneArgAndExplicitType </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithOneArgAndExplicitType</span><span class="pun">(</span><span class="str">'groovy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'GROOVY'</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> closureWithTwoArgs </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln">b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithTwoArgs</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> closureWithTwoArgsAndExplicitTypes </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithTwoArgsAndExplicitTypes</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> closureWithTwoArgsAndOptionalTypes </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithTwoArgsAndOptionalTypes</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> closureWithTwoArgAndDefaultValue </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">=</span><span class="lit">2</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> closureWithTwoArgAndDefaultValue</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="implicit-it"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#implicit-it"></a>Implicit parameter</h5>
<div class="paragraph">
<p>When a closure does not explicitly define a parameter list (using <code>-&gt;</code>), a closure <strong>always</strong> defines an implicit
parameter, named <code>it</code>. This means that this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> greeting </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Hello, $it!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> greeting</span><span class="pun">(</span><span class="str">'Patrick'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello, Patrick!'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is stricly equivalent to this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> greeting </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="str">"Hello, $it!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> greeting</span><span class="pun">(</span><span class="str">'Patrick'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello, Patrick!'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to declare a closure which accepts no argument and must be restricted to calls without arguments,
then you <strong>must</strong> declare it with an explicit empty argument list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> magicNumber </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="lit">42</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="com">// this call will fail because the closure doesn't accept any argument</span><span class="pln">
magicNumber</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_varargs_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_varargs_2"></a>Varargs</h5>
<div class="paragraph">
<p>It is possible for a closure to declare variable arguments like any other method. <em>Vargs</em> methods are methods that
can accept a variable number of arguments if the last parameter is of variable length (or an array) like in the next
examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> concat1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args </span><span class="pun">-&gt;</span><span class="pln"> args</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">''</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat1</span><span class="pun">(</span><span class="str">'abc'</span><span class="pun">,</span><span class="str">'def'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'abcdef'</span><span class="pln">                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> concat2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args </span><span class="pun">-&gt;</span><span class="pln"> args</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">''</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat2</span><span class="pun">(</span><span class="str">'abc'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'def'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'abcdef'</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> multiConcat </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args </span><span class="pun">-&gt;</span><span class="pln">                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    args</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">''</span><span class="pun">)*</span><span class="pln">n
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> multiConcat</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'abc'</span><span class="pun">,</span><span class="str">'def'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'abcdefabcdef'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A closure accepting a variable number of strings as first parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It may be called using any number of arguments <strong>without</strong> having to explicitly wrap them into an array</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The same behavior is directly available if the <em>args</em> parameter is declared as an array</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>As long as the <strong>last</strong> parameter is an array or an explicit vargs type</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_delegation_strategy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_strategy"></a>1.5.3. Delegation strategy</h4>
<div class="sect4">
<h5 id="_groovy_closures_vs_lambda_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_closures_vs_lambda_expressions"></a>Groovy closures vs lambda expressions</h5>
<div class="paragraph">
<p>Groovy defines closures as <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-as-object">instances of the Closure class</a>. It makes it very different from
<a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">lambda expressions in Java 8</a>. Delegation is a
key concept in Groovy closures which has no equivalent in lambdas. The ability to <em>change the delegate</em> or <em>change the
delegation strategy</em> of closures make it possible to design beautiful domain specific languages (DSLs) in Groovy.</p>
</div>
</div>
<div class="sect4">
<h5 id="closure-owner"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-owner"></a>Owner, delegate and this</h5>
<div class="paragraph">
<p>To understand the concept of delegate, we must first explain the meaning of <code>this</code> inside a closure. A closure actually
defines 3 distinct things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>this</code> corresponds to the <em>enclosing class</em> where the closure is defined</p>
</li>
<li>
<p><code>owner</code> corresponds to the <em>enclosing object</em> where the closure is defined, which may be either a class or a closure</p>
</li>
<li>
<p><code>delegate</code> corresponds to a third party object where methods calls or properties are resolved whenever the receiver of
the message is not defined</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="closure-this"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-this"></a>The meaning of this</h6>
<div class="paragraph">
<p>In a closure, calling <code>getThisObject</code> will return the enclosing class where the closure is defined. It is equivalent to
using an explicit <code>this</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Enclosing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> whatIsThisObject </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> getThisObject</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> whatIsThisObject</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> whatIsThis </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> whatIsThis</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                         </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">EnclosedInInnerClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Inner</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Closure</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                               </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> inner </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Inner</span><span class="pun">()</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> inner</span><span class="pun">.</span><span class="pln">cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> inner                          </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">NestedClosures</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> nestedClosures </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                               </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
            cl</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> nestedClosures</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                     </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a closure is defined inside the <code>Enclosing</code> class, and returns <code>getThisObject</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>calling the closure will return the instance of <code>Enclosing</code> where the closure is defined</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>in general, you will just want to use the shortcut <code>this</code> notation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and it returns <strong>exactly</strong> the same object</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>if the closure is defined in a inner class</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>this</code> in the closure <strong>will</strong> return the inner class, not the top-level one</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>in case of nested closures, like here <code>cl</code> being defined inside the scope of <code>nestedClosures</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>then <code>this</code> corresponds to the closest outer class, not the enclosing closure!</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is of course possible to call methods from the enclosing class this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">int</span><span class="pln"> age
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"$name is $age years old"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">dump</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">String</span><span class="pln"> msg </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
            println msg
            msg
        </span><span class="pun">}</span><span class="pln">
        cl</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Janice'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="lit">74</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="kwd">dump</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Janice is 74 years old'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the closure calls <code>toString</code> on <code>this</code>, which will actually call the <code>toString</code> method on the enclosing object,
that is to say the <code>Person</code> instance</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_owner_of_a_closure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_owner_of_a_closure"></a>Owner of a closure</h6>
<div class="paragraph">
<p>The owner of a closure is very similar to the definition of <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-this">this in a closure</a> with a subtle difference:
it will return the direct enclosing object, be it a closure or a class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Enclosing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> whatIsOwnerMethod </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> getOwner</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> whatIsOwnerMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> whatIsOwner </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> owner </span><span class="pun">}</span><span class="pln">                          </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> whatIsOwner</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                         </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">EnclosedInInnerClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Inner</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Closure</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> owner </span><span class="pun">}</span><span class="pln">                               </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> inner </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Inner</span><span class="pun">()</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> inner</span><span class="pun">.</span><span class="pln">cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> inner                           </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">NestedClosures</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> nestedClosures </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> owner </span><span class="pun">}</span><span class="pln">                               </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
            cl</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> nestedClosures</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> nestedClosures            </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a closure is defined inside the <code>Enclosing</code> class, and returns <code>getOwner</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>calling the closure will return the instance of <code>Enclosing</code> where the closure is defined</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>in general, you will just want to use the shortcut <code>owner</code> notation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and it returns <strong>exactly</strong> the same object</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>if the closure is defined in a inner class</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>owner</code> in the closure <strong>will</strong> return the inner class, not the top-level one</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>but in case of nested closures, like here <code>cl</code> being defined inside the scope of <code>nestedClosures</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>then <code>owner</code> corresponds to the enclosing closure, hence a different object from <code>this</code>!</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_delegate_of_a_closure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegate_of_a_closure"></a>Delegate of a closure</h6>
<div class="paragraph">
<p>The delegate of a closure can be accessed by using the <code>delegate</code> property or calling the <code>getDelegate</code> method. It is a
powerful concept for building domain specific languages in Groovy. While <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#this">closure-this</a> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#owner">closure-owner</a>
refer to the lexical scope of a closure, the delegate is a user defined object that a closure will use. By default, the
delegate is set to <code>owner</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Enclosing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> getDelegate</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> cl2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> cl2</span><span class="pun">()</span><span class="pln">                                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">                                 </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> enclosed </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">}.</span><span class="pln">call</span><span class="pun">()</span><span class="pln">                          </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> enclosed</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> enclosed                       </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>you can get the delegate of a closure calling the <code>getDelegate</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>or using the <code>delegate</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>both return the same object</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>which is the enclosing class or closure</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>in particular in case of nested closures</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>delegate</code> will correspond to the <code>owner</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The delegate of a closure can be changed to <strong>any object</strong>. Let’s illustrate this by creating two classes which are not
subclasses of each other but both define a property called <code>name</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Thing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Norman'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thing</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Teapot'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then let’s define a closure which fetches the <code>name</code> property on the delegate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> upperCasedName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then by changing the delegate of the closure, you can see that the target object will change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">upperCasedName</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> p
</span><span class="kwd">assert</span><span class="pln"> upperCasedName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'NORMAN'</span><span class="pln">
upperCasedName</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t
</span><span class="kwd">assert</span><span class="pln"> upperCasedName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'TEAPOT'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the behavior is not different from having a <code>target</code> variable defined in the lexical scope of the closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> target </span><span class="pun">=</span><span class="pln"> p
</span><span class="kwd">def</span><span class="pln"> upperCasedNameUsingVar </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> target</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> upperCasedNameUsingVar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'NORMAN'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, there are major differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the last example, <em>target</em> is a local variable referenced from within the closure</p>
</li>
<li>
<p>the delegate can be used transparently, that is to say without prefixing method calls with <code>delegate.</code> as explained
in the next paragraph.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_delegation_strategy_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_strategy_2"></a>Delegation strategy</h6>
<div class="paragraph">
<p>Whenever, in a closure, a property is accessed without explicitly setting a receiver object, then a delegation strategy
is involved:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Igor'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> p                                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'IGOR'</span><span class="pln">                           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>name</code> is not referencing a variable in the lexical scope of the closure</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can change the delegate of the closure to be an instance of <code>Person</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and the method call will succeed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The reason this code works is that the <code>name</code> property will be resolved transparently on the <code>delegate</code> object! This is
a very powerful way to resolve properties or method calls inside closures. There’s no need to set an explicit <code>delegate.</code>
receiver: the call will be made because the default delegation strategy of the closure makes it so. A closure actually
defines multiple resolution strategies that you can choose:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Closure.OWNER_FIRST</code> is the <strong>default strategy</strong>. If a property/method exists on the <strong>owner</strong>, then it will be called on
the owner. If not, then the <strong>delegate</strong> is used.</p>
</li>
<li>
<p><code>Closure.DELEGATE_FIRST</code> reverses the logic: the <strong>delegate</strong> is used first, then the <strong>owner</strong></p>
</li>
<li>
<p><code>Closure.OWNER_ONLY</code> will only resolve the property/method lookup on the owner: the delegate will be ignored.</p>
</li>
<li>
<p><code>Closure.DELEGATE_ONLY</code> will only resolve the property/method lookup on the delegate: the owner will be ignored.</p>
</li>
<li>
<p><code>Closure.TO_SELF</code> can be used by developers who need advanced meta-programming techniques and wish to implement a
custom resolution strategy: the resolution will not be made on the owner or the delegate but only on the closure class
itself. It makes only sense to use this if you implement your own subclass of <code>Closure</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s illustrate the default "owner first" strategy with this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">def</span><span class="pln"> pretty </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"My name is $name"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        pretty</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Thing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name                                     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Sarah'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thing</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Teapot'</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'My name is Sarah'</span><span class="pln">           </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
p</span><span class="pun">.</span><span class="pln">pretty</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t                               </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'My name is Sarah'</span><span class="pln">           </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>for the illustration, we define a closure member which references "name"</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>both the <code>Person</code> and the <code>Thing</code> class define a <code>name</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Using the default strategy, the <code>name</code> property is resolved on the owner first</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>so if we change the <code>delegate</code> to <code>t</code> which is an instance of <code>Thing</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>there is no change in the result: <code>name</code> is first resolved on the <code>owner</code> of the closure</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>However, it is possible to change the resolution strategy of the closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">p</span><span class="pun">.</span><span class="pln">pretty</span><span class="pun">.</span><span class="pln">resolveStrategy </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Closure</span><span class="pun">.</span><span class="pln">DELEGATE_FIRST
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'My name is Teapot'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By changing the <code>resolveStrategy</code>, we are modifying the way Groovy will resolve the "implicit this" references: in this
case, <code>name</code> will first be looked in the delegate, then if not found, on the owner. Since <code>name</code> is defined in the
delegate, an instance of <code>Thing</code>, then this value is used.</p>
</div>
<div class="paragraph">
<p>The difference between "delegate first" and "delegate only" or "owner first" and "owner only" can be illustrated if one
of the delegate (resp. owner) does <strong>not</strong> have such a method or property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">int</span><span class="pln"> age
    </span><span class="kwd">def</span><span class="pln"> fetchAge </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> age </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Thing</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Jessica'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="lit">42</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thing</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Printer'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">fetchAge
cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> p
</span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">
cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t
</span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">
cl</span><span class="pun">.</span><span class="pln">resolveStrategy </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Closure</span><span class="pun">.</span><span class="pln">DELEGATE_ONLY
cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> p
</span><span class="kwd">assert</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">
cl</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    cl</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">MissingPropertyException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// "age" is not defined on the delegate</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we define two classes which both have a <code>name</code> property but only the <code>Person</code> class declares an <code>age</code>.
The <code>Person</code> class also declares a closure which references <code>age</code>. We can change the default resolution strategy from
"owner first" to "delegate only". Since the owner of the closure is the <code>Person</code> class, then we can check that if the
delegate is an instance of <code>Person</code>, calling the closure is successful, but if we call it with a delegate being an
instance of <code>Thing</code>, it fails with a <code>groovy.lang.MissingPropertyException</code>. Despite the closure being defined inside
the <code>Person</code> class, the owner is not used.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A comprehensive explanation about how to use this feature to develop DSLs can be found in a
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-domain-specific-languages.html">dedicated section of the manual</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_closures_in_gstrings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures_in_gstrings"></a>1.5.4. Closures in GStrings</h4>
<div class="paragraph">
<p>Take the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> gs </span><span class="pun">=</span><span class="pln"> </span><span class="str">"x = ${x}"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'x = 1'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The code behaves as you would expect, but what happens if you add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'x = 2'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see that the assert fails! There are two reasons for this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a GString only evaluates lazily the <code>toString</code> representation of values</p>
</li>
<li>
<p>the syntax <code>${x}</code> in a GString does <strong>not</strong> represent a closure but an <strong>expression</strong> to <code>$x</code>, evaluated when the GString
is created.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In our example, the <code>GString</code> is created with an expression referencing <code>x</code>. When the <code>GString</code> is created, the <strong>value</strong>
of <code>x</code> is 1, so the <code>GString</code> is created with a value of 1. When the assert is triggered, the <code>GString</code> is evaluated
and 1 is converted to a <code>String</code> using <code>toString</code>. When we change <code>x</code> to 2, we did change the value of <code>x</code>, but it is
a different object, and the <code>GString</code> still references the old one.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A <code>GString</code> will only change its <code>toString</code> representation if the values it references are mutating. If the references
change, nothing will happen.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you need a real closure in a GString and for example enforce lazy evaluation of variables, you need to use the
alternate syntax <code>${→ x}</code> like in the fixed example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> gs </span><span class="pun">=</span><span class="pln"> </span><span class="str">"x = ${-&gt; x}"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'x = 1'</span><span class="pln">

x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'x = 2'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And let’s illustrate how it differs from mutation with this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name </span><span class="pun">}</span><span class="pln">          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> sam </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Sam'</span><span class="pun">)</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> lucy </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Lucy'</span><span class="pun">)</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> sam                             </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> gs </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Name: ${p}"</span><span class="pln">                   </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Sam'</span><span class="pln">                </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
p </span><span class="pun">=</span><span class="pln"> lucy                                </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Sam'</span><span class="pln">                </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
sam</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Lucy'</span><span class="pln">                       </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Lucy'</span><span class="pln">               </span><i class="conum" data-value="10"></i><b><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Person</code> class has a <code>toString</code> method returning the <code>name</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we create a first <code>Person</code> named <em>Sam</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we create another <code>Person</code> named <em>Lucy</em></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the <code>p</code> variable is set to <code>Sam</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>and a closure is created, referencing the value of <code>p</code>, that is to say <em>Sam</em></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>so when we evaluate the string, it returns <em>Sam</em></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>if we change <code>p</code> to <em>Lucy</em></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>the string still evaluates to <em>Sam</em> because it was the <strong>value</strong> of <code>p</code> when the <code>GString</code> was created</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>so if we mutate <em>Sam</em> to change his name to <em>Lucy</em></td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>this time the <code>GString</code> is correctly mutated</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>So if you don’t want to rely on mutating objects or wrapping objects, you <strong>must</strong> use closures in <code>GString</code> by explicitly
declaring an empty argument list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> sam </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Sam'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> lucy </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Lucy'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> sam
</span><span class="com">// Create a GString with lazy evaluation of "p"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> gs </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Name: ${-&gt; p}"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Sam'</span><span class="pln">
p </span><span class="pun">=</span><span class="pln"> lucy
</span><span class="kwd">assert</span><span class="pln"> gs </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Name: Lucy'</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_closure_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_coercion"></a>1.5.5. Closure coercion</h4>
<div class="paragraph">
<p>Closures can be converted into interfaces or single-abstract method types. Please refer to
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-semantics.html#closure-coercion">this section of the manual</a> for a complete description.</p>
</div>
</div>
<div class="sect3">
<h4 id="_functional_programming"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_functional_programming"></a>1.5.6. Functional programming</h4>
<div class="paragraph">
<p>Closures, like <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">lambda expressions in Java 8</a> are at the core of the functional programming paradigm in Groovy. Some functional programming
operations on functions are available directly on the <code>Closure</code> class, like illustrated in this section.</p>
</div>
<div class="sect4">
<h5 id="_currying"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_currying"></a>Currying</h5>
<div class="paragraph">
<p>In Groovy, currying refers to the concept of partial application. It does <strong>not</strong> correspond to the real concept of currying
in functional programming because of the different scoping rules that Groovy applies on closures. Currying in Groovy will
let you set the value of one parameter of a closure, and it will return a new closure accepting one less argument.</p>
</div>
<div class="sect5">
<h6 id="_left_currying"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_left_currying"></a>Left currying</h6>
<div class="paragraph">
<p>Left currying is the fact of setting the left-most parameter of a closure, like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> nCopies </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> str</span><span class="pun">*</span><span class="pln">n </span><span class="pun">}</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> twice </span><span class="pun">=</span><span class="pln"> nCopies</span><span class="pun">.</span><span class="pln">curry</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">                    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> twice</span><span class="pun">(</span><span class="str">'bla'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'blabla'</span><span class="pln">                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> twice</span><span class="pun">(</span><span class="str">'bla'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> nCopies</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'bla'</span><span class="pun">)</span><span class="pln">        </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>nCopies</code> closure defines two parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>curry</code> will set the first parameter to <code>2</code>, creating a new closure (function) which accepts a single <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>so the new function call be called with only a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and it is equivalent to calling <code>nCopies</code> with two parameters</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_right_currying"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_right_currying"></a>Right currying</h6>
<div class="paragraph">
<p>Similarily to left currying, it is possible to set the right-most parameter of a closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> nCopies </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> str</span><span class="pun">*</span><span class="pln">n </span><span class="pun">}</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> blah </span><span class="pun">=</span><span class="pln"> nCopies</span><span class="pun">.</span><span class="pln">rcurry</span><span class="pun">(</span><span class="str">'bla'</span><span class="pun">)</span><span class="pln">                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> blah</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'blabla'</span><span class="pln">                      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> blah</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> nCopies</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'bla'</span><span class="pun">)</span><span class="pln">             </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>nCopies</code> closure defines two parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>rcurry</code> will set the last parameter to <code>bla</code>, creating a new closure (function) which accepts a single <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>so the new function call be called with only an <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and it is equivalent to calling <code>nCopies</code> with two parameters</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_index_based_currying"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_index_based_currying"></a>Index based currying</h6>
<div class="paragraph">
<p>In case a closure accepts more than 2 parameters, it is possible to set an arbitrary parameter using <code>ncurry</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> volume </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> h </span><span class="pun">-&gt;</span><span class="pln"> l</span><span class="pun">*</span><span class="pln">w</span><span class="pun">*</span><span class="pln">h </span><span class="pun">}</span><span class="pln">      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> fixedWidthVolume </span><span class="pun">=</span><span class="pln"> volume</span><span class="pun">.</span><span class="pln">ncurry</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2d</span><span class="pun">)</span><span class="pln">                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> volume</span><span class="pun">(</span><span class="lit">3d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4d</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> fixedWidthVolume</span><span class="pun">(</span><span class="lit">3d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4d</span><span class="pun">)</span><span class="pln">       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> fixedWidthAndHeight </span><span class="pun">=</span><span class="pln"> volume</span><span class="pun">.</span><span class="pln">ncurry</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4d</span><span class="pun">)</span><span class="pln">          </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> volume</span><span class="pun">(</span><span class="lit">3d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2d</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4d</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> fixedWidthAndHeight</span><span class="pun">(</span><span class="lit">3d</span><span class="pun">)</span><span class="pln">        </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>volume</code> function defines 3 parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>ncurry</code> will set the second parameter (index = 1) to <code>2d</code>, creating a new volume function which accepts length and height</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>that function is equivalent to calling <code>volume</code> omitting the width</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>it is also possible to set multiple parameters, starting from the specified index</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the resulting function accepts as many parameters as the initial one minus the number of parameters set by <code>ncurry</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_memoization"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_memoization"></a>Memoization</h5>
<div class="paragraph">
<p>Memoization allows the result of the call of a closure to be cached. It is interesting if the computation done by a
function (closure) is slow, but you know that this function is going to be called often with the same arguments. A
typical example is the Fibonacci suite. A naive implementation may look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> fib
fib </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">-&gt;</span><span class="pln"> n</span><span class="pun">&lt;</span><span class="lit">2</span><span class="pun">?</span><span class="pln">n</span><span class="pun">:</span><span class="pln">fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)+</span><span class="pln">fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> fib</span><span class="pun">(</span><span class="lit">15</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">610</span><span class="pln"> </span><span class="com">// slow!</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is a naive implementation because 'fib' is often called recursively with the same arguments, leading to an exponential
algorithm:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>computing <code>fib(15)</code> requires the result of <code>fib(14)</code> and <code>fib(13)</code></p>
</li>
<li>
<p>computing <code>fib(14)</code> requires the result of <code>fib(13)</code> and <code>fib(12)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since calls are recursive, you can already see that we will compute the same values again and again, although they could
be cached. This naive implementation can be "fixed" by caching the result of calls using <code>memoize</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">fib </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> n </span><span class="pun">-&gt;</span><span class="pln"> n</span><span class="pun">&lt;</span><span class="lit">2</span><span class="pun">?</span><span class="pln">n</span><span class="pun">:</span><span class="pln">fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)+</span><span class="pln">fib</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}.</span><span class="pln">memoize</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> fib</span><span class="pun">(</span><span class="lit">25</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">75025</span><span class="pln"> </span><span class="com">// fast!</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The cache works <strong>using the actual values of the arguments</strong>. This means that you should be very careful if you use
memoization with something else than primitive or boxed primitive types.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The behavior of the cache can be tweaked using alternate methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>memoizeAtMost</code> will generate a new closure which caches <strong>at most</strong> <em>n</em> values</p>
</li>
<li>
<p><code>memoizeAtLeast</code> will generate a new closure which caches <strong>at least</strong> <em>n</em> values</p>
</li>
<li>
<p><code>memoizeBetween</code> will generate a new closure which caches <strong>at least</strong> <em>n</em> values and <strong>at most</strong> <em>n</em> values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The cache used in all memoize variants is a LRU cache.</p>
</div>
</div>
<div class="sect4">
<h5 id="_composition"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composition"></a>Composition</h5>
<div class="paragraph">
<p>Closure composition corresponds to the concept of function composition, that is to say creating a new function by
composing two or more functions (chaining calls), as illustrated in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> plus2  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> times3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> times3plus2 </span><span class="pun">=</span><span class="pln"> plus2 </span><span class="pun">&lt;&lt;</span><span class="pln"> times3
</span><span class="kwd">assert</span><span class="pln"> times3plus2</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">11</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> times3plus2</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> plus2</span><span class="pun">(</span><span class="pln">times3</span><span class="pun">(</span><span class="lit">4</span><span class="pun">))</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> plus2times3 </span><span class="pun">=</span><span class="pln"> times3 </span><span class="pun">&lt;&lt;</span><span class="pln"> plus2
</span><span class="kwd">assert</span><span class="pln"> plus2times3</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> plus2times3</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> times3</span><span class="pun">(</span><span class="pln">plus2</span><span class="pun">(</span><span class="lit">5</span><span class="pun">))</span><span class="pln">

</span><span class="com">// reverse composition</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> times3plus2</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">(</span><span class="pln">times3 </span><span class="pun">&gt;&gt;</span><span class="pln"> plus2</span><span class="pun">)(</span><span class="lit">3</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_trampoline"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_trampoline"></a>Trampoline</h5>
<div class="paragraph">
<p>Recursive algorithms are often restricted by a physical limit: the maximum stack height. For example, if you call a method
that recursively calls itself too deep, you will eventually receive a <code>StackOverflowException</code>.</p>
</div>
<div class="paragraph">
<p>An approach that helps in those situations is by using <code>Closure</code> and its trampoline capability.</p>
</div>
<div class="paragraph">
<p>Closures are wrapped in a <code>TrampolineClosure</code>. Upon calling, a trampolined <code>Closure</code> will call the original <code>Closure</code> waiting
for its result. If the outcome of the call is another instance of a <code>TrampolineClosure</code>, created perhaps as a result
to a call to the <code>trampoline()</code> method, the <code>Closure</code> will again be invoked. This repetitive invocation of returned
trampolined Closures instances will continue until a value other than a trampolined <code>Closure</code> is returned. That value
will become the final result of the trampoline. That way, calls are made serially, rather than filling the stack.</p>
</div>
<div class="paragraph">
<p>Here’s an example of the use of <code>trampoline()</code> to implement the factorial function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> factorial
factorial </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> accu </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1G</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">n </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> accu
    factorial</span><span class="pun">.</span><span class="pln">trampoline</span><span class="pun">(</span><span class="pln">n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> n </span><span class="pun">*</span><span class="pln"> accu</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
factorial </span><span class="pun">=</span><span class="pln"> factorial</span><span class="pun">.</span><span class="pln">trampoline</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> factorial</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">    </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> factorial</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">    </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> factorial</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="com">// == 402387260.. plus another 2560 digits</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_method_pointers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_pointers"></a>Method pointers</h5>
<div class="paragraph">
<p>It is often practical to be able to use a regular method as a closure. For example, you might want to use the currying
abilities of a closure, but those are not available to normal methods. In Groovy, you can obtain a closure from any
method with the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-operators.html#method-pointer-operator">method pointer operator</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_semantics"></a>1.6. Semantics</h3>
<div class="paragraph">
<p>This chapter covers the semantics of the Groovy programming language.</p>
</div>
<div class="sect3">
<h4 id="_statements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_statements"></a>1.6.1. Statements</h4>
<div class="sect4">
<h5 id="_variable_definition"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_definition"></a>Variable definition</h5>
<div class="paragraph">
<p>Variables can be defined using either their type (like <code>String</code>) or by using the keyword <code>def</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> x
</span><span class="kwd">def</span><span class="pln"> o</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>def</code> is a replacement for a type name. In variable definitions it is used to indicate that you don’t care about the type. In variable definitions it is mandatory to either provide a type name explicitly or to use "def" in replacement. This is needed to make variable definitions detectable for the Groovy parser.</p>
</div>
<div class="paragraph">
<p>You can think of <code>def</code> as an alias of <code>Object</code> and you will understand it in an instant.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Variable definition types can be refined by using generics, like in <code>List&lt;String&gt; names</code>.
To learn more about the generics support, please read the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#generics">generics section</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_variable_assignment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_assignment"></a>Variable assignment</h5>
<div class="paragraph">
<p>You can assign values to variables for later use. Try the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
println x

x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Date</span><span class="pun">()</span><span class="pln">
println x

x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3.1499392</span><span class="pln">
println x

x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
println x

x </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Hi"</span><span class="pln">
println x</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_multiple_assignment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_assignment"></a>Multiple assignment</h6>
<div class="paragraph">
<p>Groovy supports multiple assignment, i.e. where multiple variables can be assigned at once, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="str">'foo'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'foo'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can provide types as part of the declaration if you wish:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="str">'foo'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> i </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> j </span><span class="pun">==</span><span class="pln"> </span><span class="str">'foo'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as used when declaring variables it also applies to existing variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> nums </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c
</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> nums
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The syntax works for arrays as well as lists, as well as methods that return either of these:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="pln">_</span><span class="pun">,</span><span class="pln"> month</span><span class="pun">,</span><span class="pln"> year</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"18th June 2009"</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">"In $month of $year"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'In June of 2009'</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_overflow_and_underflow"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overflow_and_underflow"></a>Overflow and Underflow</h6>
<div class="paragraph">
<p>If the left hand side has too many variables, excess ones are filled with null’s:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> c </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the right hand side has too many variables, the extra ones are ignored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_object_destructuring_with_multiple_assignment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_destructuring_with_multiple_assignment"></a>Object destructuring with multiple assignment</h6>
<div class="paragraph">
<p>In the section describing the various <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovy-operators">Groovy operators</a>,
the case of the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#subscript-operator">subscript operator</a> has been covered,
explaining how you can override the <code>getAt()</code>/<code>putAt()</code> method.</p>
</div>
<div class="paragraph">
<p>With this technique, we can combine multiple assignments and the subscript operator methods to implement <em>object destructuring</em>.</p>
</div>
<div class="paragraph">
<p>Consider the following immutable <code>Coordinates</code> class, containing a pair of longitude and latitude doubles,
and notice our implementation of the <code>getAt()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@Immutable</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Coordinates</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> latitude
    </span><span class="kwd">double</span><span class="pln"> longitude

    </span><span class="kwd">double</span><span class="pln"> getAt</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> idx</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> latitude
        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">idx </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> longitude
        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Exception</span><span class="pun">(</span><span class="str">"Wrong coordinate index, use 0 or 1"</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let’s instantiate this class and destructure its longitude and latitude:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> coordinates </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Coordinates</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">:</span><span class="pln"> </span><span class="lit">43.23</span><span class="pun">,</span><span class="pln"> longitude</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3.67</span><span class="pun">)</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> </span><span class="pun">(</span><span class="pln">la</span><span class="pun">,</span><span class="pln"> lo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> coordinates                                          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> la </span><span class="pun">==</span><span class="pln"> </span><span class="lit">43.23</span><span class="pln">                                                  </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> lo </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3.67</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we create an instance of the <code>Coordinates</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>then, we use a multiple assignment to get the individual longitude and latitude values</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and we can finally assert their values.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_control_structures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_control_structures"></a>Control structures</h5>
<div class="sect5">
<h6 id="_conditional_structures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conditional_structures"></a>Conditional structures</h6>
<div class="sect6">
<h7 id="_if_else"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_if_else"></a>if / else</h7>
<div class="paragraph">
<p>Groovy supports the usual if - else syntax from Java</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">

</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="pln">x </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">

</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> x </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    y </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> y</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy also supports the normal Java "nested" if then else if syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(...)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_switch_case"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_switch_case"></a>switch / case</h7>
<div class="paragraph">
<p>The switch statement in Groovy is backwards compatible with Java code; so you can fall through cases sharing the same code for multiple matches.</p>
</div>
<div class="paragraph">
<p>One difference though is that the Groovy switch statement can handle any kind of switch value and different kinds of matching can be performed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.23</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pln">

</span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> x </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">case</span><span class="pln"> </span><span class="str">"foo"</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"found foo"</span><span class="pln">
        </span><span class="com">// lets fall through</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="str">"bar"</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">+=</span><span class="pln"> </span><span class="str">"bar"</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="str">'inList'</span><span class="pun">]:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"list"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">12.</span><span class="pun">.</span><span class="lit">30</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"range"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"integer"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="typ">Number</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"number"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="pun">~</span><span class="str">/fo*/</span><span class="pun">:</span><span class="pln"> </span><span class="com">// toString() representation of x matches the pattern?</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"foo regex"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">case</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}:</span><span class="pln"> </span><span class="com">// or { x &lt; 0 }</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"negative"</span><span class="pln">
        </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">default</span><span class="pun">:</span><span class="pln">
        result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"default"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> result </span><span class="pun">==</span><span class="pln"> </span><span class="str">"number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Switch supports the following kinds of comparisons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Class case values match if the switch value is an instance of the class</p>
</li>
<li>
<p>Regular expression case values match if the <code>toString()</code> representation of the switch value matches the regex</p>
</li>
<li>
<p>Collection case values match if the switch value is contained in the collection. This also includes ranges (since they are Lists)</p>
</li>
<li>
<p>Closure case values match if the calling the closure returns a result which is true according to the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">Groovy truth</a></p>
</li>
<li>
<p>If none of the above are used then the case value matches if the case value equals the switch value</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using a closure case value, the default <code>it</code> parameter is actually the switch value (in our example, variable <code>x</code>).
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_looping_structures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_looping_structures"></a>Looping structures</h6>
<div class="sect6">
<h7 id="_classic_for_loop"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classic_for_loop"></a>Classic for loop</h7>
<div class="paragraph">
<p>Groovy supports the standard Java / C for loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    message </span><span class="pun">+=</span><span class="pln"> </span><span class="str">'Hi '</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> message </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hi Hi Hi Hi Hi '</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_for_in_loop"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_for_in_loop"></a>for in loop</h7>
<div class="paragraph">
<p>The for loop in Groovy is much simpler and works with any kind of array, collection, Map, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// iterate over a range</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">9</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">+=</span><span class="pln"> i
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">45</span><span class="pln">

</span><span class="com">// iterate over a list</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">+=</span><span class="pln"> i
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">

</span><span class="com">// iterate over an array</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">4</span><span class="pun">).</span><span class="pln">toArray</span><span class="pun">()</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> array </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">+=</span><span class="pln"> i
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">

</span><span class="com">// iterate over a map</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'def'</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'xyz'</span><span class="pun">:</span><span class="lit">3</span><span class="pun">]</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> e </span><span class="kwd">in</span><span class="pln"> map </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">+=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">value
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span><span class="pln">

</span><span class="com">// iterate over values in a map</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">values</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x </span><span class="pun">+=</span><span class="pln"> v
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span><span class="pln">

</span><span class="com">// iterate over the characters in a string</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> </span><span class="str">"abc"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="kwd">in</span><span class="pln"> text</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">"a"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"b"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"c"</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Groovy also supports the Java colon variation with colons: <code>for (char c : text) {}</code>,
where the type of the variable is mandatory.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_while_loop"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_while_loop"></a>while loop</h7>
<div class="paragraph">
<p>Groovy supports the usual while {…​} loops like Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> y</span><span class="pun">--</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x</span><span class="pun">++</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_exception_handling"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exception_handling"></a>Exception handling</h6>
<div class="paragraph">
<p>Exception handling is the same as Java.</p>
</div>
</div>
<div class="sect5">
<h6 id="_try_catch_finally"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_try_catch_finally"></a>try / catch / finally</h6>
<div class="paragraph">
<p>You can specify a complete <code>try-catch-finally</code>, a <code>try-catch</code>, or a <code>try-finally</code> set of blocks.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Braces are required around each block’s body.
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">'moo'</span><span class="pun">.</span><span class="pln">toLong</span><span class="pun">()</span><span class="pln">   </span><span class="com">// this will generate an exception</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">     </span><span class="com">// asserting that this point should never be reached</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> e </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> e </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">NumberFormatException</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can put code within a 'finally' clause following a matching 'try' clause, so that regardless of whether the code in the 'try' clause throws an exception, the code in the finally clause will always execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> z
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">/</span><span class="pln"> j
        </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">        </span><span class="com">//never reached due to Exception in previous line</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">finally</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        z </span><span class="pun">=</span><span class="pln"> </span><span class="str">'reached here'</span><span class="pln">  </span><span class="com">//always executed even if Exception thrown</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> e </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> e </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">ArithmeticException</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> z </span><span class="pun">==</span><span class="pln"> </span><span class="str">'reached here'</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_multi_catch"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multi_catch"></a>Multi-catch</h6>
<div class="paragraph">
<p>With the multi catch block (since Groovy 2.0), we’re able to define several exceptions to be catch and treated by the same catch block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/* ... */</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">NullPointerException</span><span class="pln"> e </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/* one block to handle 2 exceptions */</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_power_assertion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_power_assertion"></a>Power assertion</h5>
<div class="paragraph">
<p>Unlike Java with which Groovy shares the <code>assert</code> keyword, the latter in Groovy behaves very differently. First of all,
an assertion in Groovy is always executed, independently of the <code>-ea</code> flag of the JVM. It makes this a first class choice
for unit tests. The notion of "power asserts" is directly related to how the Groovy <code>assert</code> behaves.</p>
</div>
<div class="paragraph">
<p>A power assertion is decomposed into 3 parts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>assert [left expression] == [right expression] : (optional message)</pre>
</div>
</div>
<div class="paragraph">
<p>The result of the assertion is very different from what you would get in Java. If the assertion is true, then nothing
happens. If the assertion is false, then it provides a visual representation of the value of each sub-expressions of the
expression being asserted. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Will yield:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Caught: Assertion failed:

assert 1+1 == 3
        |  |
        2  false</pre>
</div>
</div>
<div class="paragraph">
<p>Power asserts become very interesting when the expressions are more complex, like in the next example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> calc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln">b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">*</span><span class="pln">b</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> calc</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="pln">x</span><span class="pun">,</span><span class="pln">z</span><span class="pun">].</span><span class="pln">sum</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will print the value for each sub-expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> calc</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="pln">x</span><span class="pun">,</span><span class="pln">z</span><span class="pun">].</span><span class="pln">sum</span><span class="pun">()</span><span class="pln">
       </span><span class="pun">|</span><span class="pln">    </span><span class="pun">|</span><span class="pln"> </span><span class="pun">|</span><span class="pln">  </span><span class="pun">|</span><span class="pln">   </span><span class="pun">|</span><span class="pln"> </span><span class="pun">|</span><span class="pln">  </span><span class="pun">|</span><span class="pln">
       </span><span class="lit">15</span><span class="pln">   </span><span class="lit">2</span><span class="pln"> </span><span class="lit">7</span><span class="pln">  </span><span class="pun">|</span><span class="pln">   </span><span class="lit">2</span><span class="pln"> </span><span class="lit">5</span><span class="pln">  </span><span class="lit">7</span><span class="pln">
                 </span><span class="kwd">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In case you don’t want a pretty printed error message like above, you can fallback to a custom error message by
changing the optional message part of the assertion, like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> calc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln">b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">*</span><span class="pln">b</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> calc</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> z</span><span class="pun">*</span><span class="pln">z </span><span class="pun">:</span><span class="pln"> </span><span class="str">'Incorrect computation result'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will print the following error message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Incorrect</span><span class="pln"> computation result</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Expression</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">calc</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">(</span><span class="pln">z </span><span class="pun">*</span><span class="pln"> z</span><span class="pun">)).</span><span class="pln"> </span><span class="typ">Values</span><span class="pun">:</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_labeled_statements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_labeled_statements"></a>Labeled statements</h5>
<div class="paragraph">
<p>Any statement can be associated with a label. Labels do not impact the semantics of the code and can be used to make
the code easier to read like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">given</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">when</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> z </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y
</span><span class="kwd">then</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> z </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Despite not changing the semantics of the labelled statement, it is possible to use labels in the <code>break</code> instruction
as a target for jump, as in the next example. However, even if this is allowed, this coding style is in general considered
a bad practice:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="lit">10</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;</span><span class="pln">i</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"j=$j"</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">break</span><span class="pln"> </span><span class="kwd">exit</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">exit</span><span class="pun">:</span><span class="pln"> println </span><span class="str">"i=$i"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is important to understand that by default labels have no impact on the semantics of the code, however they belong to the abstract
syntax tree (AST) so it is possible for an AST transformation to use that information to perform transformations over
the code, hence leading to different semantics. This is in particular what the <a href="http://spockframework.github.io/spock/docs/current/index.html">Spock Framework</a>
does to make testing easier.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expressions"></a>1.6.2. Expressions</h4>
<div class="paragraph">
<p>(TBD)</p>
</div>
<div class="sect4">
<h5 id="gpath_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#gpath_expressions"></a>GPath expressions</h5>
<div class="paragraph">
<p><code>GPath</code> is a path expression language integrated into Groovy which allows parts of nested structured data to be identified. In this
sense, it has similar aims and scope as XPath does for XML.  GPath is often used in the context of processing XML, but it really applies
to any object graph.  Where XPath uses a filesystem-like path notation, a tree hierarchy with parts separated by a slash <code>/</code>, GPath <strong>use a
dot-object notation</strong> to perform object navigation.</p>
</div>
<div class="paragraph">
<p>As an example, you can specify a path to an object or element of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a.b.c</code> → for XML, yields all the <code>c</code> elements inside <code>b</code> inside <code>a</code></p>
</li>
<li>
<p><code>a.b.c</code> → for POJOs, yields the <code>c</code> properties for all the <code>b</code> properties of <code>a</code> (sort of like <code>a.getB().getC()</code> in JavaBeans)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In both cases, the GPath expression can be viewed as a query on an object graph.  For POJOs, the object graph is most often built by the
program being written through object instantiation and composition; for XML processing, the object graph is the result of <code>parsing</code>
the XML text, most often with classes like XmlParser or XmlSlurper. See <a href="https://docs.groovy-lang.org/docs/subprojects/groovy-xml/src/spec/doc/xml-userguide.html#Processing%20XML">Processing XML</a>
for more in-depth details on consuming XML in Groovy.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When querying the object graph generated from XmlParser or XmlSlurper, a GPath expression can refer to attributes defined on elements with
the <code>@</code> notation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a["@href"]</code> → map-like notation : the href attribute of all the a elements</p>
</li>
<li>
<p><code>a.'@href'</code>  → property notation : an alternative way of expressing this</p>
</li>
<li>
<p><code>a.@href</code>    → direct notation : yet another alternative way of expressing this</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="_object_navigation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_navigation"></a>Object navigation</h6>
<div class="paragraph">
<p>Let’s see an example of a GPath expression on a simple <em>object graph</em>, the one obtained using java reflection.  Suppose you are in a non-static method of a
class having another method named <code>aMethodFoo</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">void</span><span class="pln"> aMethodFoo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"This is aMethodFoo."</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="0"></i><b><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="paragraph">
<p>the following GPath expression will get the name of that method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'aMethodFoo'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">methods</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">grep</span><span class="pun">(~</span><span class="str">/.*Foo/</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><em>More precisely</em>, the above GPath expression produces a list of String, each being the name of an existing method on <code>this</code> where that name ends with <code>Foo</code>.</p>
</div>
<div class="paragraph">
<p>Now, given the following methods also defined in that class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">void</span><span class="pln"> aMethodBar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"This is aMethodBar."</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> anotherFooMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"This is anotherFooMethod."</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">void</span><span class="pln"> aSecondMethodBar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"This is aSecondMethodBar."</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="paragraph">
<p>then the following GPath expression will get the names of <strong>(1)</strong> and <strong>(3)</strong>, but not <strong>(2)</strong> or <strong>(0)</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'aMethodBar'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'aSecondMethodBar'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Set</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">methods</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">grep</span><span class="pun">(~</span><span class="str">/.*Bar/</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Set</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_expression_deconstruction"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expression_deconstruction"></a>Expression Deconstruction</h6>
<div class="paragraph">
<p>We can decompose the expression <code>this.class.methods.name.grep(~/.*Bar/)</code> to get an idea of how a GPath is evaluated:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>this.class</code></dt>
<dd>
<p>property accessor, equivalent to <code>this.getClass()</code> in Java, yields a <code>Class</code> object.</p>
</dd>
<dt class="hdlist1"><code>this.class.methods</code></dt>
<dd>
<p>property accessor, equivalent to <code>this.getClass().getMethods()</code>, yields an array of <code>Method</code> objects.</p>
</dd>
<dt class="hdlist1"><code>this.class.methods.name</code></dt>
<dd>
<p>apply a property accessor on each element of an array and produce a list of the results.</p>
</dd>
<dt class="hdlist1"><code>this.class.methods.name.grep(…​)</code></dt>
<dd>
<p>call method <code>grep</code> on each element of the list yielded by <code>this.class.methods.name</code> and produce a list of the results.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
A sub-expression like <code>this.class.methods</code> yields an array because this is what calling <code>this.getClass().getMethods()</code> in Java
would produce. <code>GPath</code> expressions do not have a convention where a <code>s</code> means a list or anything like that.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>One powerful feature of GPath expression is that property access on a collection is converted to a <em>property access on each element of the collection</em> with
the results collected into a collection. Therefore, the expression <code>this.class.methods.name</code> could be expressed as follows in Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> methodNames </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;();</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Method</span><span class="pln"> method </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">().</span><span class="pln">getMethods</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   methodNames</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">method</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> methodNames</span><span class="pun">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Array access notation can also be used in a GPath expression where a collection is present :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'aSecondMethodBar'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">methods</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">grep</span><span class="pun">(~</span><span class="str">/.*Bar/</span><span class="pun">).</span><span class="pln">sort</span><span class="pun">()[</span><span class="lit">1</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
array access are zero-based in GPath expressions
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_gpath_for_xml_navigation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath_for_xml_navigation"></a>GPath for XML navigation</h6>
<div class="paragraph">
<p>Here is an example with a XML document and various form of GPath expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> xmlText </span><span class="pun">=</span><span class="pln"> </span><span class="str">"""
              | &lt;root&gt;
              |   &lt;level&gt;
              |      &lt;sublevel id='1'&gt;
              |        &lt;keyVal&gt;
              |          &lt;key&gt;mykey&lt;/key&gt;
              |          &lt;value&gt;value 123&lt;/value&gt;
              |        &lt;/keyVal&gt;
              |      &lt;/sublevel&gt;
              |      &lt;sublevel id='2'&gt;
              |        &lt;keyVal&gt;
              |          &lt;key&gt;anotherKey&lt;/key&gt;
              |          &lt;value&gt;42&lt;/value&gt;
              |        &lt;/keyVal&gt;
              |        &lt;keyVal&gt;
              |          &lt;key&gt;mykey&lt;/key&gt;
              |          &lt;value&gt;fizzbuzz&lt;/value&gt;
              |        &lt;/keyVal&gt;
              |      &lt;/sublevel&gt;
              |   &lt;/level&gt;
              | &lt;/root&gt;
              """</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">XmlSlurper</span><span class="pun">().</span><span class="pln">parseText</span><span class="pun">(</span><span class="pln">xmlText</span><span class="pun">.</span><span class="pln">stripMargin</span><span class="pun">())</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> root</span><span class="pun">.</span><span class="pln">level</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> root</span><span class="pun">.</span><span class="pln">level</span><span class="pun">.</span><span class="pln">sublevel</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> root</span><span class="pun">.</span><span class="pln">level</span><span class="pun">.</span><span class="pln">sublevel</span><span class="pun">.</span><span class="pln">findAll </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="lit">@id</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> root</span><span class="pun">.</span><span class="pln">level</span><span class="pun">.</span><span class="pln">sublevel</span><span class="pun">[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">keyVal</span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">key</span><span class="pun">.</span><span class="pln">text</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'anotherKey'</span><span class="pln"> </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>There is one <code>level</code> node under <code>root</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>There are two <code>sublevel</code> nodes under <code>root/level</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>There is one element <code>sublevel</code> having an attribute <code>id</code> with value <code>1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Text value of <code>key</code> element of first <code>keyVal</code> element of second <code>sublevel</code> element under <code>root/level</code> is 'anotherKey'</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_promotion_and_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_promotion_and_coercion"></a>1.6.3. Promotion and coercion</h4>
<div class="sect4">
<h5 id="_number_promotion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_number_promotion"></a>Number promotion</h5>
<div class="paragraph">
<p>The rules of number promotion are specified in the section on <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_math_operations">math operations</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="closure-coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#closure-coercion"></a>Closure to type coercion</h5>
<div class="sect5">
<h6 id="_assigning_a_closure_to_a_sam_type"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assigning_a_closure_to_a_sam_type"></a>Assigning a closure to a SAM type</h6>
<div class="paragraph">
<p>A SAM type is a type which defines a single abstract method. This includes:</p>
</div>
<div class="listingblock">
<div class="title">Functional interfaces</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">boolean</span><span class="pln"> accept</span><span class="pun">(</span><span class="pln">T obj</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Abstract classes with single abstract method</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"Hello, $name"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Any closure can be converted into a SAM type using the <code>as</code> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Predicate</span><span class="pln"> filter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">contains </span><span class="str">'G'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> filter</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">(</span><span class="str">'Groovy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">

</span><span class="typ">Greeter</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Groovy'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln">
greeter</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, the <code>as Type</code> expression is optional since Groovy 2.2.0. You can omit it and simply write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Predicate</span><span class="pln"> filter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">contains </span><span class="str">'G'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> filter</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">(</span><span class="str">'Groovy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">

</span><span class="typ">Greeter</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Groovy'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
greeter</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which means you are also allowed to use method pointers, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">boolean</span><span class="pln"> doFilter</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> s</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'G'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="typ">Predicate</span><span class="pln"> filter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.&amp;</span><span class="pln">doFilter
</span><span class="kwd">assert</span><span class="pln"> filter</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">(</span><span class="str">'Groovy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">

</span><span class="typ">Greeter</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GroovySystem</span><span class="pun">.&amp;</span><span class="pln">getVersion
greeter</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_calling_a_method_accepting_a_sam_type_with_a_closure"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_calling_a_method_accepting_a_sam_type_with_a_closure"></a>Calling a method accepting a SAM type with a closure</h6>
<div class="paragraph">
<p>The second and probably more important use case for closure to SAM type coercion is calling a method which accepts
a SAM type. Imagine the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">public</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> filter</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> source</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> predicate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    source</span><span class="pun">.</span><span class="pln">findAll </span><span class="pun">{</span><span class="pln"> predicate</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">(</span><span class="pln">it</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can call it with a closure, without having to create an explicit implementation of the interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> filter</span><span class="pun">([</span><span class="str">'Java'</span><span class="pun">,</span><span class="str">'Groovy'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">contains </span><span class="str">'G'</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Groovy'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But since Groovy 2.2.0, you are also able to omit the explicit coercion and call the method as if it used a closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> filter</span><span class="pun">([</span><span class="str">'Java'</span><span class="pun">,</span><span class="str">'Groovy'</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">contains </span><span class="str">'G'</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Groovy'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, this has the advantage of letting you use the closure syntax for method calls, that is to say put the
closure outside of the parenthesis, improving the readability of your code.</p>
</div>
</div>
<div class="sect5">
<h6 id="_closure_to_arbitrary_type_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_to_arbitrary_type_coercion"></a>Closure to arbitrary type coercion</h6>
<div class="paragraph">
<p>In addition to SAM types, a closure can be coerced to any type and in particular interfaces. Let’s define the
following interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">FooBar</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> bar</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can coerce a closure into the interface using the <code>as</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> impl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'ok'</span><span class="pun">;</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">FooBar</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces a class for which all methods are implemented using the closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> impl</span><span class="pun">.</span><span class="pln">foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span><span class="pln">
impl</span><span class="pun">.</span><span class="pln">bar</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But it is also possible to coerce a closure to any class. For example, we can replace the <code>interface</code> that we defined
with <code>class</code> without changing the assertions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">FooBar</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> bar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'bar'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> impl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'ok'</span><span class="pun">;</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">FooBar</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> impl</span><span class="pun">.</span><span class="pln">foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span><span class="pln">
impl</span><span class="pun">.</span><span class="pln">bar</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_map_to_type_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_to_type_coercion"></a>Map to type coercion</h5>
<div class="paragraph">
<p>Usually using a single closure to implement an interface or a class with multiple methods is not the way to go. As an
alternative, Groovy allows you to coerce a map into an interface or a class. In that case, keys of the map are
interpreted as method names, while the values are the method implementation. The following example illustrates the
coercion of a map into an <code>Iterator</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map
map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
  i</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln">
  hasNext</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">i </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
  </span><span class="kwd">next</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">i</span><span class="pun">--</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> iter </span><span class="pun">=</span><span class="pln"> map </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Iterator</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course this is a rather contrived example, but illustrates the concept. You only need to implement those methods
that are actually called, but if a method is called that doesn’t exist in the map a <code>MissingMethodException</code> or an
<code>UnsupportedOperationException</code> is thrown, depending on the arguments passed to the call,
as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> X </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> f</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> g</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> h</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> s</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> f</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">println </span><span class="str">"f called"</span><span class="pun">}</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> X
x</span><span class="pun">.</span><span class="pln">f</span><span class="pun">()</span><span class="pln"> </span><span class="com">// method exists</span><span class="pln">
x</span><span class="pun">.</span><span class="pln">g</span><span class="pun">()</span><span class="pln"> </span><span class="com">// MissingMethodException here</span><span class="pln">
x</span><span class="pun">.</span><span class="pln">g</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="com">// UnsupportedOperationException here</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The type of the exception depends on the call itself:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MissingMethodException</code> if the arguments of the call do not match those from the interface/class</p>
</li>
<li>
<p><code>UnsupportedOperationException</code> if the arguments of the call match one of the overloaded methods of the interface/class</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_string_to_enum_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_to_enum_coercion"></a>String to enum coercion</h5>
<div class="paragraph">
<p>Groovy allows transparent <code>String</code> (or <code>GString</code>) to enum values coercion. Imagine you define the following enum:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">enum</span><span class="pln"> </span><span class="typ">State</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    up</span><span class="pun">,</span><span class="pln">
    down
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>then you can assign a string to the enum without having to use an explicit <code>as</code> coercion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">State</span><span class="pln"> st </span><span class="pun">=</span><span class="pln"> </span><span class="str">'up'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> st </span><span class="pun">==</span><span class="pln"> </span><span class="typ">State</span><span class="pun">.</span><span class="pln">up</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to use a <code>GString</code> as the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> </span><span class="str">"up"</span><span class="pln">
</span><span class="typ">State</span><span class="pln"> st </span><span class="pun">=</span><span class="pln"> </span><span class="str">"${val}"</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> st </span><span class="pun">==</span><span class="pln"> </span><span class="typ">State</span><span class="pun">.</span><span class="pln">up</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, this would throw a runtime error (<code>IllegalArgumentException</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">State</span><span class="pln"> st </span><span class="pun">=</span><span class="pln"> </span><span class="str">'not an enum value'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that it is also possible to use implicit coercion in switch statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">State</span><span class="pln"> switchState</span><span class="pun">(</span><span class="typ">State</span><span class="pln"> st</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">st</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'up'</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">State</span><span class="pun">.</span><span class="pln">down </span><span class="com">// explicit constant</span><span class="pln">
        </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'down'</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'up'</span><span class="pln"> </span><span class="com">// implicit coercion for return types</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>in particular, see how the <code>case</code> use string constants. But if you call a method that uses an enum with a <code>String</code>
argument, you still have to use an explicit <code>as</code> coercion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> switchState</span><span class="pun">(</span><span class="str">'up'</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">State</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">State</span><span class="pun">.</span><span class="pln">down
</span><span class="kwd">assert</span><span class="pln"> switchState</span><span class="pun">(</span><span class="typ">State</span><span class="pun">.</span><span class="pln">down</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">State</span><span class="pun">.</span><span class="pln">up</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_custom_type_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_type_coercion"></a>Custom type coercion</h5>
<div class="paragraph">
<p>It is possible for a class to define custom coercion strategies by implementing the <code>asType</code> method. Custom coercion
is invoked using the <code>as</code> operator and is never implicit. As an example,
imagine you defined two classes, <code>Polar</code> and <code>Cartesian</code>, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Polar</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> r
    </span><span class="kwd">double</span><span class="pln"> phi
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Cartesian</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">double</span><span class="pln"> x
   </span><span class="kwd">double</span><span class="pln"> y
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And that you want to convert from polar coordinates to cartesian coordinates. One way of doing this is to define
the <code>asType</code> method in the <code>Polar</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> asType</span><span class="pun">(</span><span class="typ">Class</span><span class="pln"> target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Cartesian</span><span class="pun">==</span><span class="pln">target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cartesian</span><span class="pun">(</span><span class="pln">x</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">),</span><span class="pln"> y</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">))</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which allows you to use the <code>as</code> coercion operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> sigma </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1E-16</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> polar </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Polar</span><span class="pun">(</span><span class="pln">r</span><span class="pun">:</span><span class="lit">1.0</span><span class="pun">,</span><span class="pln">phi</span><span class="pun">:</span><span class="pln">PI</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> cartesian </span><span class="pun">=</span><span class="pln"> polar </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Cartesian</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> abs</span><span class="pun">(</span><span class="pln">cartesian</span><span class="pun">.</span><span class="pln">x</span><span class="pun">-</span><span class="pln">sigma</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> sigma</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Putting it all together, the <code>Polar</code> class looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Polar</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> r
    </span><span class="kwd">double</span><span class="pln"> phi
    </span><span class="kwd">def</span><span class="pln"> asType</span><span class="pun">(</span><span class="typ">Class</span><span class="pln"> target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Cartesian</span><span class="pun">==</span><span class="pln">target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cartesian</span><span class="pun">(</span><span class="pln">x</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">),</span><span class="pln"> y</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">))</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>but it is also possible to define <code>asType</code> outside of the <code>Polar</code> class, which can be practical if you want to define
custom coercion strategies for "closed" classes or classes for which you don’t own the source code, for example using
a metaclass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Polar</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">asType </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Class</span><span class="pln"> target </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Cartesian</span><span class="pun">==</span><span class="pln">target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Cartesian</span><span class="pun">(</span><span class="pln">x</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">),</span><span class="pln"> y</span><span class="pun">:</span><span class="pln"> r</span><span class="pun">*</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">phi</span><span class="pun">))</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_class_literals_vs_variables_and_the_as_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class_literals_vs_variables_and_the_as_operator"></a>Class literals vs variables and the as operator</h5>
<div class="paragraph">
<p>Using the <code>as</code> keyword is only possible if you have a static reference to a class, like in the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'Hello, Groovy!'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="com">// Greeter is known statically</span><span class="pln">
greeter</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But what if you get the class by reflection, for example by calling <code>Class.forName</code>?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Class</span><span class="pln"> clazz </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Class</span><span class="pun">.</span><span class="pln">forName</span><span class="pun">(</span><span class="str">'Greeter'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Trying to use the reference to the class with the <code>as</code> keyword would fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'Hello, Groovy!'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> clazz
</span><span class="com">// throws:</span><span class="pln">
</span><span class="com">// unable to resolve class clazz</span><span class="pln">
</span><span class="com">// @ line 9, column 40.</span><span class="pln">
</span><span class="com">//   greeter = { println 'Hello, Groovy!' } as clazz</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is failing because the <code>as</code> keyword only works with class literals. Instead, you need to call the <code>asType</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">greeter </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'Hello, Groovy!'</span><span class="pln"> </span><span class="pun">}.</span><span class="pln">asType</span><span class="pun">(</span><span class="pln">clazz</span><span class="pun">)</span><span class="pln">
greeter</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optionality"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optionality"></a>1.6.4. Optionality</h4>
<div class="sect4">
<h5 id="_optional_parentheses"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_parentheses"></a>Optional parentheses</h5>
<div class="paragraph">
<p>Method calls can omit the parentheses if there is at least one parameter and there is no ambiguity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">println </span><span class="str">'Hello World'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> maximum </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">max </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Parentheses are required for method calls without parameters or ambiguous method calls:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">println</span><span class="pun">()</span><span class="pln">
println</span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">))</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_optional_semicolons"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_semicolons"></a>Optional semicolons</h5>
<div class="paragraph">
<p>In Groovy semicolons at the end of the line can be omitted, if the line contains only a single statement.</p>
</div>
<div class="paragraph">
<p>This means that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be more idiomatically written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple statements in a line require semicolons to separate them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">boolean</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">assert</span><span class="pln"> a</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_optional_return_keyword"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_return_keyword"></a>Optional return keyword</h5>
<div class="paragraph">
<p>In Groovy, the last expression evaluated in the body of a method or a closure is returned. This means that the <code>return</code> keyword is optional.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> add</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Can be shortened to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> add</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    a</span><span class="pun">+</span><span class="pln">b
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_optional_public_keyword"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_public_keyword"></a>Optional public keyword</h5>
<div class="paragraph">
<p>By default, Groovy classes and methods are <code>public</code>. Therefore this class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Server</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"a server"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is identical to this class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Server</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"a server"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Groovy-Truth"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth"></a>1.6.5. The Groovy Truth</h4>
<div class="paragraph">
<p>Groovy decides whether a expression is true or false by applying the rules given below.</p>
</div>
<div class="sect4">
<h5 id="_boolean_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_boolean_expressions"></a>Boolean expressions</h5>
<div class="paragraph">
<p>True if the corresponding Boolean value is <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">false</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_collections_and_arrays"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_collections_and_arrays"></a>Collections and Arrays</h5>
<div class="paragraph">
<p>Non-empty Collections and arrays are true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![]</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_matchers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_matchers"></a>Matchers</h5>
<div class="paragraph">
<p>True if the Matcher has at least one match.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">'a'</span><span class="pln"> </span><span class="pun">=~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">a</span><span class="pun">/)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!(</span><span class="str">'a'</span><span class="pln"> </span><span class="pun">=~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">b</span><span class="pun">/)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_iterators_and_enumerations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterators_and_enumerations"></a>Iterators and Enumerations</h5>
<div class="paragraph">
<p>Iterators and Enumerations with further elements are coerced to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![].</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
</span><span class="typ">Vector</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Vector</span><span class="pln">
</span><span class="typ">Enumeration</span><span class="pln"> enumeration </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">.</span><span class="pln">elements</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> enumeration
enumeration</span><span class="pun">.</span><span class="pln">nextElement</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">enumeration</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_maps_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maps_2"></a>Maps</h5>
<div class="paragraph">
<p>Non-empty Maps are evaluated to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'one'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![:]</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_strings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strings"></a>Strings</h5>
<div class="paragraph">
<p>Non-empty Strings, GStrings and CharSequences are coerced to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="str">''</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> nonEmpty </span><span class="pun">=</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">"$nonEmpty"</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> empty </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="str">"$empty"</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_numbers_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_numbers_2"></a>Numbers</h5>
<div class="paragraph">
<p>Non-zero numbers are true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">3.5</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="lit">0</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_object_references"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_object_references"></a>Object References</h5>
<div class="paragraph">
<p>Non-null object references are coerced to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">null</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_customizing_the_truth_with_asboolean_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizing_the_truth_with_asboolean_methods"></a>Customizing the truth with asBoolean() methods</h5>
<div class="paragraph">
<p>In order to customize whether groovy evaluates your object to <code>true</code> or <code>false</code> implement the <code>asBoolean()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Color</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name

    </span><span class="kwd">boolean</span><span class="pln"> asBoolean</span><span class="pun">(){</span><span class="pln">
        name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'green'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy will call this method to coerce your object to a boolean value, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Color</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'green'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Color</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'red'</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_typing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_typing"></a>1.6.6. Typing</h4>
<div class="sect4">
<h5 id="_optional_typing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_typing"></a>Optional typing</h5>
<div class="paragraph">
<p>Optional typing is the idea that a program can work even if you don’t put an explicit type on a variable. Being a dynamic
language, Groovy naturally implements that feature, for example when you declare a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> aString </span><span class="pun">=</span><span class="pln"> </span><span class="str">'foo'</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> aString</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>foo</code> is declared using an explicit type, <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can call the <code>toUpperCase</code> method on a <code>String</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Groovy will let you write this instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> aString </span><span class="pun">=</span><span class="pln"> </span><span class="str">'foo'</span><span class="pln">                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> aString</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>foo</code> is declared using <code>def</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can still call the <code>toUpperCase</code> method, because the type of <code>aString</code> is resolved at runtime</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>So it doesn’t matter that you use an explicit type here. It is in particular interesting when you combine this feature
with <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#static-type-checking">static type checking</a>, because the type checker performs type inference.</p>
</div>
<div class="paragraph">
<p>Likewise, Groovy doesn’t make it mandatory to declare the types of a parameter in a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> concat</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    a</span><span class="pun">+</span><span class="pln">b
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="str">'bar'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'foobar'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be rewritten using <code>def</code> as both return type and parameter types, in order to take advantage of duck typing, as
illustrated in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> concat</span><span class="pun">(</span><span class="kwd">def</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    a</span><span class="pun">+</span><span class="pln">b
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="str">'bar'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'foobar'</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">                                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>both the return type and the parameter types use <code>def</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>it makes it possible to use the method with <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>but also with <code>int</code> since the <code>plus</code> method is defined</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Using the <code>def</code> keyword here is recommended to describe the intent of a method which is supposed to work on any
type, but technically, we could use <code>Object</code> instead and the result would be the same: <code>def</code> is, in Groovy, strictly
equivalent to using <code>Object</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Eventually, the type can be removed altogether from both the return type and the descriptor. But if you want to remove
it from the return type, you then need to add an explicit modifier for the method, so that the compiler can make a difference
between a method declaration and a method call, like illustrated in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">private</span><span class="pln"> concat</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    a</span><span class="pun">+</span><span class="pln">b
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="str">'bar'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'foobar'</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> concat</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">                                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if we want to omit the return type, an explicit modifier has to be set.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>it is still possible to use the method with <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and also with <code>int</code></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Omitting types is in general considered a bad practice in method parameters or method return types for public APIs.
While using <code>def</code> in a local variable is not really a problem because the visibility of the variable is limited to the
method itself, while set on a method parameter, <code>def</code> will be converted to <code>Object</code> in the method signature, making it
difficult for users to know which is the expected type of the arguments. This means that you should limit this to cases
where you are explicitly relying on duck typing.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="static-type-checking"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#static-type-checking"></a>Static type checking</h5>
<div class="paragraph">
<p>By default, Groovy performs minimal type checking at compile time. Since it is primarily a dynamic language,
most checks that a static compiler would normally do aren’t possible at compile time. A method added via runtime
metaprogramming might alter a class or object’s runtime behavior. Let’s illustrate why in the
following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> firstName
    </span><span class="typ">String</span><span class="pln"> lastName
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">firstName</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Raymond'</span><span class="pun">,</span><span class="pln"> lastName</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Devos'</span><span class="pun">)</span><span class="pln">             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">formattedName </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Raymond Devos'</span><span class="pln">                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Person</code> class only defines two properties, <code>firstName</code> and <code>lastName</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we can create an instance of Person</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and call a method named <code>formattedName</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is quite common in dynamic languages for code such as the above example not to throw any error. How can this be?
In Java, this would typically fail at compile time. However, in Groovy, it will not fail at compile time, and if coded
correctly, will also not fail at runtime. In fact, to make this work at runtime, <strong>one</strong> possibility is to rely on
runtime metaprogramming. So just adding this line after the declaration of the <code>Person</code> class is enough:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Person</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">getFormattedName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"$delegate.firstName $delegate.lastName"</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This means that in general, in Groovy, you can’t make any assumption about the type of an object beyond its declaration
type, and even if you know it, you can’t determine at compile time what method will be called, or which property will
be retrieved. It has a lot of interest, going from writing DSLs to testing, which is discussed in other sections of this
manual.</p>
</div>
<div class="paragraph">
<p>However, if your program doesn’t rely on dynamic features and that you come from the static world (in particular, from
a Java mindset), not catching such "errors" at compile time can be surprising. As we have seen in the previous example,
the compiler cannot be sure this is an error. To make it aware that it is, you have to explicitly instruct the compiler
that you are switching to a type checked mode. This can be done by annotating a class or a method with <code>@groovy.lang.TypeChecked</code>.</p>
</div>
<div class="paragraph">
<p>When type checking is activated, the compiler performs much more work:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type inference is activated, meaning that even if you use <code>def</code> on a local variable for example, the type checker will be
able to infer the type of the variable from the assignments</p>
</li>
<li>
<p>method calls are resolved at compile time, meaning that if a method is not declared on a class, the compiler will throw an error</p>
</li>
<li>
<p>in general, all the compile time errors that you are used to find in a static language will appear: method not found, property not found,
incompatible types for method calls, number precision errors, …​</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this section, we will describe the behavior of the type checker in various situations and explain the limits of using
<code>@TypeChecked</code> on your code.</p>
</div>
<div class="sect5">
<h6 id="_the_code_typechecked_code_annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_code_typechecked_code_annotation"></a>The <code>@TypeChecked</code> annotation</h6>
<div class="sect6">
<h7 id="_activating_type_checking_at_compile_time"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_activating_type_checking_at_compile_time"></a>Activating type checking at compile time</h7>
<div class="paragraph">
<p>The <code>groovy.lang.TypeChecked</code> annotation enabled type checking. It can be placed on a class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Calculator</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or on a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Calculator</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the first case, all methods, properties, fields, inner classes, …​ of the annotated class will be type checked, whereas
in the second case, only the method and potential closures or anonymous inner classes that it contains will be type checked.</p>
</div>
</div>
<div class="sect6">
<h7 id="_skipping_sections"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_skipping_sections"></a>Skipping sections</h7>
<div class="paragraph">
<p>The scope of type checking can be restricted. For example, if a class is type checked, you can instruct the type checker
to skip a method by annotating it with <code>@TypeChecked(TypeCheckingMode.SKIP)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeCheckingMode</span><span class="pln">

</span><span class="lit">@TypeChecked</span><span class="pln">                                        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GreetingService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                             </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        doGreet</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@TypeChecked</span><span class="pun">(</span><span class="typ">TypeCheckingMode</span><span class="pun">.</span><span class="pln">SKIP</span><span class="pun">)</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> doGreet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SentenceBuilder</span><span class="pun">()</span><span class="pln">
        b</span><span class="pun">.</span><span class="typ">Hello</span><span class="pun">.</span><span class="kwd">my</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="kwd">is</span><span class="pun">.</span><span class="typ">John</span><span class="pln">                     </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
        b
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GreetingService</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Hello my name is John'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>GreetingService</code> class is marked as type checked</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>so the <code>greeting</code> method is automatically type checked</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>but <code>doGreet</code> is marked with <code>SKIP</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the type checker doesn’t complain about missing properties here</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the previous example, <code>SentenceBuilder</code> relies on dynamic code. There’s no real <code>Hello</code> method or property, so the
type checker would normally complain and compilation would fail. Since the method that uses the builder is marked with
<code>TypeCheckingMode.SKIP</code>, type checking is <em>skipped</em> for this method, so the code will compile, even if the rest of the
class is type checked.</p>
</div>
<div class="paragraph">
<p>The following sections describe the semantics of type checking in Groovy.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_type_checking_assignments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_assignments"></a>Type checking assignments</h6>
<div class="paragraph">
<p>An object <code>o</code> of type <code>A</code> can be assigned to a variable of type <code>T</code> if and only if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T</code> equals <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Date</span><span class="pln"> now </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is one of <code>String</code>, <code>boolean</code>, <code>Boolean</code> or <code>Class</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span><span class="pln"> </span><span class="com">// implicit call to toString</span><span class="pln">
</span><span class="typ">Boolean</span><span class="pln"> boxed </span><span class="pun">=</span><span class="pln"> </span><span class="str">'some string'</span><span class="pln">       </span><span class="com">// Groovy truth</span><span class="pln">
</span><span class="kwd">boolean</span><span class="pln"> prim </span><span class="pun">=</span><span class="pln"> </span><span class="str">'some string'</span><span class="pln">        </span><span class="com">// Groovy truth</span><span class="pln">
</span><span class="typ">Class</span><span class="pln"> clazz </span><span class="pun">=</span><span class="pln"> </span><span class="str">'java.lang.String'</span><span class="pln">    </span><span class="com">// class coercion</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>o</code> is null and <code>T</code> is not a primitive type</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">         </span><span class="com">// passes</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">            </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is an array and <code>A</code> is an array and the component type of <code>A</code> is assignable to the component type of <code>T</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">        </span><span class="com">// passes</span><span class="pln">
</span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]</span><span class="pln">     </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is an array and <code>A</code> is a list and the component type of <code>A</code> is assignable to the component type of <code>T</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span><span class="pln">               </span><span class="com">// passes</span><span class="pln">
</span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()]</span><span class="pln">     </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is a superclass of <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">AbstractList</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">()</span><span class="pln">     </span><span class="com">// passes</span><span class="pln">
</span><span class="typ">LinkedList</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">()</span><span class="pln">       </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is an interface implemented by <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">List</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">()</span><span class="pln">             </span><span class="com">// passes</span><span class="pln">
</span><span class="typ">RandomAccess</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pun">()</span><span class="pln">    </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> or <code>A</code> are a primitive type and their boxed types are assignable</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Integer</span><span class="pln"> bi </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">123</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">double</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Float</span><span class="pun">(</span><span class="lit">5f</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> extends <code>groovy.lang.Closure</code> and <code>A</code> is a SAM-type (single abstract method type)</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Runnable</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'Hello'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">SAMType</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> doSomething</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">SAMType</span><span class="pln"> sam </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sam</span><span class="pun">.</span><span class="pln">doSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">123</span><span class="pln">
</span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AbstractSAM</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> calc</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln"> value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">AbstractSAM</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> c</span><span class="pun">.</span><span class="pln">calc</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">246</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> and <code>A</code> derive from <code>java.lang.Number</code> and conform to the following table</p>
</li>
</ul>
</div>
<table id="number-assignment" class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Number types (java.lang.XXX)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">T</th>
<th class="tableblock halign-left valign-top">A</th>
<th class="tableblock halign-left valign-top">Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any but BigDecimal or BigInteger</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Double</span><span class="pln"> d1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4d</span><span class="pln">
</span><span class="typ">Double</span><span class="pln"> d2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4f</span><span class="pln">
</span><span class="typ">Double</span><span class="pln"> d3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4l</span><span class="pln">
</span><span class="typ">Double</span><span class="pln"> d4 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4i</span><span class="pln">
</span><span class="typ">Double</span><span class="pln"> d5 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">short</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Double</span><span class="pln"> d6 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any type but BigDecimal, BigInteger or Double</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Float</span><span class="pln"> f1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4f</span><span class="pln">
</span><span class="typ">Float</span><span class="pln"> f2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4l</span><span class="pln">
</span><span class="typ">Float</span><span class="pln"> f3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4i</span><span class="pln">
</span><span class="typ">Float</span><span class="pln"> f4 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">short</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Float</span><span class="pln"> f5 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any type but BigDecimal, BigInteger, Double or Float</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Long</span><span class="pln"> l1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4l</span><span class="pln">
</span><span class="typ">Long</span><span class="pln"> l2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4i</span><span class="pln">
</span><span class="typ">Long</span><span class="pln"> l3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">short</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Long</span><span class="pln"> l4 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any type but BigDecimal, BigInteger, Double, Float or Long</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Integer</span><span class="pln"> i1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4i</span><span class="pln">
</span><span class="typ">Integer</span><span class="pln"> i2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">short</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Integer</span><span class="pln"> i3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any type but BigDecimal, BigInteger, Double, Float, Long or Integer</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Short</span><span class="pln"> s1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">short</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Short</span><span class="pln"> s2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Byte</span><span class="pln"> b1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln"> </span><span class="lit">4</span></code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_list_and_map_constructors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_and_map_constructors"></a>List and map constructors</h6>
<div class="paragraph">
<p>In addition to the assignment rules above, if an assignment is deemed invalid, in type checked mode, a <em>list</em> literal or a <em>map</em> literal <code>A</code> can be assigned
to a variable of type <code>T</code> if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the assignment is a variable declaration and <code>A</code> is a list literal and <code>T</code> has a constructor whose parameters match the types of the elements in the list literal</p>
</li>
<li>
<p>the assignment is a variable declaration and <code>A</code> is a map literal and <code>T</code> has a no-arg constructor and a property for each of the map keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, instead of writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TupleConstructor</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> firstName
    </span><span class="typ">String</span><span class="pln"> lastName
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">Person</span><span class="pln"> classic </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="str">'Ada'</span><span class="pun">,</span><span class="str">'Lovelace'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use a "list constructor":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Person</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Ada'</span><span class="pun">,</span><span class="str">'Lovelace'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or a "map constructor":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Person</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">firstName</span><span class="pun">:</span><span class="str">'Ada'</span><span class="pun">,</span><span class="pln"> lastName</span><span class="pun">:</span><span class="str">'Lovelace'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use a map constructor, additional checks are done on the keys of the map to check if a property of the same name
is defined. For example, the following will fail at compile time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TupleConstructor</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> firstName
    </span><span class="typ">String</span><span class="pln"> lastName
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">Person</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">firstName</span><span class="pun">:</span><span class="str">'Ada'</span><span class="pun">,</span><span class="pln"> lastName</span><span class="pun">:</span><span class="str">'Lovelace'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">24</span><span class="pun">]</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The type checker will throw an error <code>No such property: age for class: Person</code> at compile time</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_method_resolution"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_method_resolution"></a>Method resolution</h6>
<div class="paragraph">
<p>In type checked mode, methods are resolved at compile time. Resolution works by name and arguments. The return type is
irrelevant to method selection. Types of arguments are matched against the types of the parameters following those rules:</p>
</div>
<div class="paragraph">
<p>An argument <code>o</code> of type <code>A</code> can be used for a parameter of type <code>T</code> if and only if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T</code> equals <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x</span><span class="pun">+</span><span class="pln">y
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is a <code>String</code> and <code>A</code> is a <code>GString</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"Result: $str"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> format</span><span class="pun">(</span><span class="str">"${3+4}"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Result: 7"</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>o</code> is null and <code>T</code> is not a primitive type</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"Result: $value"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> format</span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Result: 7"</span><span class="pln">
format</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">)</span><span class="pln">           </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is an array and <code>A</code> is an array and the component type of <code>A</code> is assignable to the component type of <code>T</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> values</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"Result: ${values.join(' ')}"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> format</span><span class="pun">([</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[])</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"Result: a b"</span><span class="pln">
format</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[])</span><span class="pln">              </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is a superclass of <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">AbstractList</span><span class="pln"> list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    list</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">','</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
format</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">())</span><span class="pln">              </span><span class="com">// passes</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">LinkedList</span><span class="pln"> list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    list</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">','</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
format</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">())</span><span class="pln">              </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> is an interface implemented by <code>A</code></p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">List</span><span class="pln"> list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    list</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">','</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
format</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">())</span><span class="pln">                  </span><span class="com">// passes</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">RandomAccess</span><span class="pln"> list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">'foo'</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
format</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pun">())</span><span class="pln">                 </span><span class="com">// fails</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> or <code>A</code> are a primitive type and their boxed types are assignable</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    x</span><span class="pun">+</span><span class="pln">y
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">4</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">4</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> extends <code>groovy.lang.Closure</code> and <code>A</code> is a SAM-type (single abstract method type)</p>
<div class="exampleblock result">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">SAMType</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> doSomething</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> twice</span><span class="pun">(</span><span class="typ">SAMType</span><span class="pln"> sam</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">sam</span><span class="pun">.</span><span class="pln">doSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> twice </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">246</span><span class="pln">
</span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AbstractSAM</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> calc</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln"> value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> eightTimes</span><span class="pun">(</span><span class="typ">AbstractSAM</span><span class="pln"> sam</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">4</span><span class="pun">*</span><span class="pln">sam</span><span class="pun">.</span><span class="pln">calc</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> eightTimes </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">984</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><em>or</em> <code>T</code> and <code>A</code> derive from <code>java.lang.Number</code> and conform to the same rules as <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#number-assignment">assignment of numbers</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a method with the appropriate name and arguments is not found at compile time, an error is thrown. The difference with "normal" Groovy is
illustrated in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        printLine </span><span class="str">'Do something'</span><span class="pln">            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>printLine</code> is an error, but since we’re in a dynamic mode, the error is not caught at compile time</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The example above shows a class that Groovy will be able to compile. However, if you try to create an instance of <code>MyService</code> and call the
<code>doSomething</code> method, then it will fail <strong>at runtime</strong>, because <code>printLine</code> doesn’t exist. Of course, we already showed how Groovy could make
this a perfectly valid call, for example by catching <code>MethodMissingException</code> or implementing a custom meta-class, but if you know you’re
not in such a case, <code>@TypeChecked</code> comes handy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        printLine </span><span class="str">'Do something'</span><span class="pln">            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>printLine</code> is this time a compile-time error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Just adding <code>@TypeChecked</code> will trigger compile time method resolution. The type checker will try to find a method <code>printLine</code> accepting
a <code>String</code> on the <code>MyService</code> class, but cannot find one. It will fail compilation with the following message:</p>
</div>
<div class="paragraph">
<p><code>Cannot find matching method MyService#printLine(java.lang.String)</code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is important to understand the logic behind the type checker: it is a compile-time check, so by definition, the type checker
is not aware of any kind of <strong>runtime</strong> metaprogramming that you do. This means that code which is perfectly valid without <code>@TypeChecked</code> will
<strong>not</strong> compile anymore if you activate type checking. This is in particular true if you think of duck typing:<br>
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Duck</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">'Quack!'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">QuackingBird</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> quack</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        println </span><span class="str">'Quack!'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> accept</span><span class="pun">(</span><span class="pln">quacker</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    quacker</span><span class="pun">.</span><span class="pln">quack</span><span class="pun">()</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
accept</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Duck</span><span class="pun">())</span><span class="pln">              </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we define a <code>Duck</code> class which defines a <code>quack</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we define another <code>QuackingBird</code> class which also defines a <code>quack</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>quacker</code> is loosely typed, so since the method is <code>@TypeChecked</code>, we will obtain a compile-time error</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>even if in non type-checked Groovy, this would have passed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>There are possible workarounds, like introducing an interface, but basically, by activating type checking, you gain type safety
but you loose some features of the language. Hopefully, Groovy introduces some features like flow typing to reduce the gap between
type-checked and non type-checked Groovy.</p>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="type-inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#type-inference"></a>Type inference</h6>
<div class="sect6">
<h7 id="_principles"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_principles"></a>Principles</h7>
<div class="paragraph">
<p>When code is annotated with <code>@TypeChecked</code>, the compiler performs type inference. It doesn’t simply rely on static types, but also uses various
techniques to infer the types of variables, return types, literals, …​ so that the code remains as clean as possible even if you activate the
type checker.</p>
</div>
<div class="paragraph">
<p>The simplest example is inferring the type of a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Welcome to Groovy!'</span><span class="pln">              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
println message</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                   </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
println message</span><span class="pun">.</span><span class="pln">upper</span><span class="pun">()</span><span class="pln"> </span><span class="com">// compile time error   </span><i class="conum" data-value="3"></i><b><span class="com">(3)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a variable is declared using the <code>def</code> keyword</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>calling <code>toUpperCase</code> is allowed by the type checker</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>calling <code>upper</code> will fail at compile time</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The reason the call to <code>toUpperCase</code> works is because the type of <code>message</code> was <em>inferred</em> as being a <code>String</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_variables_vs_fields_in_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variables_vs_fields_in_type_inference"></a>Variables vs fields in type inference</h7>
<div class="paragraph">
<p>It is worth noting that although the compiler performs type inference on local variables, it does <strong>not</strong> perform any kind
of type inference on fields, always falling back to the <strong>declared type</strong> of a field. To illustrate this, let’s take a
look at this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> someUntypedField                                                                </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="typ">String</span><span class="pln"> someTypedField                                                               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        someUntypedField </span><span class="pun">=</span><span class="pln"> </span><span class="str">'123'</span><span class="pln">                                                        </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        someUntypedField </span><span class="pun">=</span><span class="pln"> someUntypedField</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">  </span><span class="com">// compile-time error        </span><i class="conum" data-value="4"></i><b><span class="com">(4)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> someSafeMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        someTypedField </span><span class="pun">=</span><span class="pln"> </span><span class="str">'123'</span><span class="pln">                                                          </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
        someTypedField </span><span class="pun">=</span><span class="pln"> someTypedField</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                                   </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> someMethodUsingLocalVariable</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> localVariable </span><span class="pun">=</span><span class="pln"> </span><span class="str">'123'</span><span class="pln">                                                       </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
        someUntypedField </span><span class="pun">=</span><span class="pln"> localVariable</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                                  </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>someUntypedField</code> uses <code>def</code> as a declaration type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>someTypedField</code> uses <code>String</code> as a declaration type</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we can assign <strong>anything</strong> to <code>someUntypedField</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>yet calling <code>toUpperCase</code> fails at compile time because the field is not typed properly</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>we can assign a <code>String</code> to a field of type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>and this time <code>toUpperCase</code> is allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>if we assign a <code>String</code> to a local variable</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>then calling <code>toUpperCase</code> is allowed on the local variable</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Why such a difference? The reason is <em>thread safety</em>. At compile time, we can’t make <strong>any</strong> guarantee about the type of
a field. Any thread can access any field at any time and between the moment a field is assigned a variable of some
type in a method and the time is is used the line after, another thread may have changed the contents of the field. This
is not the case for local variables: we know if they "escape" or not, so we can make sure that the type of a variable is
constant (or not) over time. Note that even if a field is final, the JVM makes no guarantee about it, so the type checker
doesn’t behave differently if a field is final or not.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This is one of the reasons why we recommend to use <strong>typed</strong> fields. While using <code>def</code> for local variables is perfectly
fine thanks to type inference, this is not the case for fields, which also belong to the public API of a class, hence the
type is important.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_collection_literal_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_collection_literal_type_inference"></a>Collection literal type inference</h7>
<div class="paragraph">
<p>Groovy provides a syntax for various type literals. There are three native collection literals in Groovy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lists, using the <code>[]</code> literal</p>
</li>
<li>
<p>maps, using the <code>[:]</code> literal</p>
</li>
<li>
<p>ranges, using <code>from..to</code> (inclusive) and <code>from..&lt;to</code> (exclusive)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The inferred type of a literal depends on the elements of the literal, as illustrated in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Literal</th>
<th class="tableblock halign-left valign-top">Inferred type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.List</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'foo'</span><span class="pun">,</span><span class="str">'bar'</span><span class="pun">]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.List&lt;String&gt;</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"${foo}"</span><span class="pun">,</span><span class="str">"${bar}"</span><span class="pun">]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.List&lt;GString&gt;</code> be careful, a <code>GString</code> is <strong>not</strong> a <code>String</code>!</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.LinkedHashMap</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">someKey</span><span class="pun">:</span><span class="pln"> </span><span class="str">'someValue'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'someKey'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'someValue'</span><span class="pun">]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.LinkedHashMap&lt;String,String&gt;</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"${someKey}"</span><span class="pun">:</span><span class="pln"> </span><span class="str">'someValue'</span><span class="pun">]</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>java.util.LinkedHashMap&lt;GString,String&gt;</code> be careful, the key is a <code>GString</code>!</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> intRange </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">10</span><span class="pun">)</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>groovy.lang.IntRange</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> charRange </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="str">'a'</span><span class="pun">..</span><span class="str">'z'</span><span class="pun">)</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>groovy.lang.Range&lt;String&gt;</code> : uses the type of the bounds to infer the component type of the range</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As you can see, with the noticeable exception of the <code>IntRange</code>, the inferred type makes use of generics types to describe
the contents of a collection. In case the collection contains elements of different types, the type checker still performs
type inference of the components, but uses the notion of <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">least upper bound</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="section-lub"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub"></a>Least upper bound</h7>
<div class="paragraph">
<p>In Groovy, the <em>least upper bound</em> of two types <code>A</code> and <code>B</code> is defined as a type which:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>superclass corresponds to the common super class of <code>A</code> and <code>B</code></p>
</li>
<li>
<p>interfaces correspond to the interfaces implemented by both <code>A</code> and <code>B</code></p>
</li>
<li>
<p>if <code>A</code> or <code>B</code> is a primitive type and that <code>A</code> isn’t equal to <code>B</code>, the least upper bound of <code>A</code> and <code>B</code> is the least
upper bound of their wrapper types</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>A</code> and <code>B</code> only have one (1) interface in common and that their common superclass is <code>Object</code>, then the LUB of both
is the common interface.</p>
</div>
<div class="paragraph">
<p>The least upper bound represents the minimal type to which both <code>A</code> and <code>B</code> can be assigned. So for example, if <code>A</code> and <code>B</code>
are both <code>String</code>, then the LUB (least upper bound) of both is also <code>String</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bottom1</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bottom2</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">String</span><span class="pln">                    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">ArrayList</span><span class="pun">,</span><span class="pln"> </span><span class="typ">LinkedList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">AbstractList</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">ArrayList</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">List</span><span class="pln">                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">List</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">List</span><span class="pln">                          </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">Bottom1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Bottom2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Top</span><span class="pln">                     </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> leastUpperBound</span><span class="pun">(</span><span class="typ">List</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Serializable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Object</span><span class="pln">                </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the LUB of <code>String</code> and <code>String</code> is <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the LUB of <code>ArrayList</code> and <code>LinkedList</code> is their common super type, <code>AbstractList</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the LUB of <code>ArrayList</code> and <code>List</code> is their only common interface, <code>List</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the LUB of two identical interfaces is the interface itself</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the LUB of <code>Bottom1</code> and <code>Bottom2</code> is their superclass <code>Top</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the LUB of two types which have nothing in common is <code>Object</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In those examples, the LUB is always representable as a normal, JVM supported, type. But Groovy internally represents the LUB
as a type which can be more complex, and that you wouldn’t be able to use to define a variable for example. To illustrate this,
let’s continue with this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bottom</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Serializable</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SerializableFooImpl</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Serializable</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>What is the least upper bound of <code>Bottom</code> and <code>SerializableFooImpl</code>? They don’t have a common super class (apart from <code>Object</code>),
but they do share 2 interfaces (<code>Serializable</code> and <code>Foo</code>), so their least upper bound is a type which represents the union of
two interfaces (<code>Serializable</code> and <code>Foo</code>). This type cannot be defined in the source code, yet Groovy knows about it.</p>
</div>
<div class="paragraph">
<p>In the context of collection type inference (and generic type inference in general), this becomes handy, because the type of the
components is inferred as the least upper bound. We can illustrate why this is important in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Salute</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> salute</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">class</span><span class="pln"> A </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Salute</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"Hello, I'm A!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> salute</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"Bye from A!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> B </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Salute</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> greet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"Hello, I'm B!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> salute</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">"Bye from B!"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'No way!'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">new</span><span class="pln"> A</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> B</span><span class="pun">()]</span><span class="pln">                       </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
list</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">.</span><span class="pln">greet</span><span class="pun">()</span><span class="pln">                                      </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
    it</span><span class="pun">.</span><span class="pln">salute</span><span class="pun">()</span><span class="pln">                                     </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
    it</span><span class="pun">.</span><span class="kwd">exit</span><span class="pun">()</span><span class="pln">                                       </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>Greeter</code> interface defines a single method, <code>greet</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Salute</code>  interface defines a single method, <code>salute</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>class <code>A</code> implements both <code>Greeter</code> and <code>Salute</code> but there’s no explicit interface extending both</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>same for <code>B</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>but <code>B</code> defines an additional <code>exit</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the type of <code>list</code> is inferred as "list of the LUB of <code>A</code> and `B`"</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>so it is possible to call <code>greet</code> which is defined on both <code>A</code> and <code>B</code> through the <code>Greeter</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>and it is possible to call <code>salute</code> which is defined on both <code>A</code> and <code>B</code> through the <code>Salute</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>yet calling <code>exit</code> is a compile time error because it doesn’t belong to the LUB of <code>A</code> and <code>B</code> (only defined in <code>B</code>)</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The error message will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Static type checking] - Cannot find matching method Greeter or Salute#exit()</pre>
</div>
</div>
<div class="paragraph">
<p>which indicates that the <code>exit</code> method is neither defines on <code>Greeter</code> nor <code>Salute</code>, which are the two interfaces defined
in the least upper bound of <code>A</code> and <code>B</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_instanceof_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instanceof_inference"></a>instanceof inference</h7>
<div class="paragraph">
<p>In normal, non type checked, Groovy, you can write things like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> greeting</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'Hello'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="kwd">def</span><span class="pln"> o</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        println o</span><span class="pun">.</span><span class="pln">greeting</span><span class="pun">()</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

doSomething</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">())</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>guard the method call with an <code>instanceof</code> check</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>make the call</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The method call works because of dynamic dispatch (the method is selected at runtime). The equivalent code in Java would
require to cast <code>o</code> to a <code>Greeter</code> before calling the <code>greeting</code> method, because methods are selected at compile time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Greeter</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(((</span><span class="typ">Greeter</span><span class="pun">)</span><span class="pln">o</span><span class="pun">).</span><span class="pln">greeting</span><span class="pun">());</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, in Groovy, even if you add <code>@TypeChecked</code> (and thus activate type checking) on the <code>doSomething</code> method, the
cast is <strong>not</strong> necessary. The compiler embeds <em>instanceof</em> inference that makes the cast optional.</p>
</div>
</div>
<div class="sect6">
<h7 id="section-flow-typing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-flow-typing"></a>Flow typing</h7>
<div class="paragraph">
<p>Flow typing is an important concept of Groovy in type checked mode and an extension of type inference. The idea is that
the compiler is capable of inferring the type of variables in the flow of the code, not just at initialization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> flowTyping</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> </span><span class="str">'foo'</span><span class="pln">                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> o</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9d</span><span class="pln">                              </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">(</span><span class="pln">o</span><span class="pun">)</span><span class="pln">                    </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>first, <code>o</code> is declared using <code>def</code> and assigned a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the compiler inferred that <code>o</code> is a <code>String</code>, so calling <code>toUpperCase</code> is allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>o</code> is reassigned with a <code>double</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>calling <code>Math.sqrt</code> passes compilation because the compiler knows that at this point, <code>o</code> is a <code>double</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>So the type checker is <em>aware</em> of the fact that the concrete type of a variable is different over time. In particular,
if you replace the last assignment with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">o </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9d</span><span class="pln">
o </span><span class="pun">=</span><span class="pln"> o</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The type checker will now fail at compile time, because it knows that <code>o</code> is a <code>double</code> when <code>toUpperCase</code> is called,
so it’s a type error.</p>
</div>
<div class="paragraph">
<p>It is important to understand that it is not the fact of declaring a variable with <code>def</code> that triggers type inference.
Flow typing works for <strong>any</strong> variable of any type. Declaring a variable with an explicit type only constrains what you
can assign to the variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> flowTypingWithExplicitType</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">List</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    list </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">*.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    list </span><span class="pun">=</span><span class="pln"> </span><span class="str">'foo'</span><span class="pln">                        </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>list</code> is declared as an unchecked <code>List</code> and assigned a list literal of `String`s</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>this line passes compilation because of flow typing: the type checker knows that <code>list</code> is at this point a <code>List&lt;String&gt;</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>but you can’t assign a <code>String</code> to a <code>List</code> so this is a type checking error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can also note that even if the variable is declared <strong>without</strong> generics information, the type checker knows what is
the component type. Therefore, such code would fail compilation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> flowTypingWithExplicitType</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">List</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>list</code> is inferred as <code>List&lt;String&gt;</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>so adding an <code>int</code> to a <code>List&lt;String&gt;</code> is a compile-time error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Fixing this requires adding an explicit generic type to the declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> flowTypingWithExplicitType</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Serializable</span><span class="pun">&gt;</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    list</span><span class="pun">.</span><span class="pln">addAll</span><span class="pun">([</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">])</span><span class="pln">                                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">                                                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>list</code> declared as <code>List&lt;? extends Serializable&gt;</code> and initialized with an empty list</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>elements added to the list conform to the declaration type of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>so adding an <code>int</code> to a <code>List&lt;? extends Serializable&gt;</code> is allowed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Flow typing has been introduced to reduce the difference in semantics between classic and static Groovy. In particular,
consider the behavior of this code in Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> o</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"Nope"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="com">// ...</span><span class="pln">
</span><span class="typ">Object</span><span class="pln"> string </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Some string"</span><span class="pun">;</span><span class="pln">          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">Object</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> compute</span><span class="pun">(</span><span class="pln">string</span><span class="pun">);</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span><span class="pln">             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>o</code> is declared as an <code>Object</code> and assigned a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we call the <code>compute</code> method with <code>o</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and print the result</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In Java, this code will output <code>Nope</code>, because method selection is done at compile time and based on the <strong>declared</strong> types.
So even if <code>o</code> is a <code>String</code> at runtime, it is still the <code>Object</code> version which is called, because <code>o</code> has been declared
as an <code>Object</code>. To be short, in Java, declared types are most important, be it variable types, parameter types or return
types.</p>
</div>
<div class="paragraph">
<p>In Groovy, we could write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> o</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Nope"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="typ">Object</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> </span><span class="str">'string'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> compute</span><span class="pun">(</span><span class="pln">o</span><span class="pun">)</span><span class="pln">
println result</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But this time, it will return <code>6</code>, because the method which is chosen is chosen <strong>at runtime</strong>, based on the <em>actual</em>
argument types. So at runtime, <code>o</code> is a <code>String</code> so the <code>String</code> variant is used. Note that this behavior has nothing
to do with type checking, it’s the way Groovy works in general: dynamic dispatch.</p>
</div>
<div class="paragraph">
<p>In type checked Groovy, we want to make sure the type checker selects the same method <strong>at compile time</strong>, that the runtime
would choose. It is not possible in general, due to the semantics of the language, but we can make things better with flow
typing. With flow typing, <code>o</code> is <em>inferred</em> as a <code>String</code> when the <code>compute</code> method is called, so the version which takes
a <code>String</code> and returns an <code>int</code> is chosen. This means that we can infer the return type of the method to be an <code>int</code>, and
not a <code>String</code>. This is important for subsequent calls and type safety.</p>
</div>
<div class="paragraph">
<p>So in type checked Groovy, flow typing is a very important concept, which also implies that if <code>@TypeChecked</code> is applied,
methods are selected based on the <em>inferred types</em> of the arguments, not on the declared types. This doesn’t ensure 100%
type safety, because the type checker <em>may</em> select a wrong method, but it ensures the closest semantics to dynamic Groovy.</p>
</div>
</div>
<div class="sect6">
<h7 id="_advanced_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_type_inference"></a>Advanced type inference</h7>
<div class="paragraph">
<p>A combination of <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-flow-typing">flow typing</a> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">least upper bound inference</a> is used to perform
advanced type inference and ensure type safety in multiple situations. In particular, program control structures are
likely to alter the inferred type of a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">void</span><span class="pln"> methodFromTop</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bottom</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">void</span><span class="pln"> methodFromBottom</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> o
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">someCondition</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Top</span><span class="pun">()</span><span class="pln">                               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bottom</span><span class="pun">()</span><span class="pln">                            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
o</span><span class="pun">.</span><span class="pln">methodFromTop</span><span class="pun">()</span><span class="pln">                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
o</span><span class="pun">.</span><span class="pln">methodFromBottom</span><span class="pun">()</span><span class="pln">  </span><span class="com">// compilation error      </span><i class="conum" data-value="4"></i><b><span class="com">(4)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if <code>someCondition</code> is true, <code>o</code> is assigned a <code>Top</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>if <code>someCondition</code> is false, <code>o</code> is assigned a <code>Bottom</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>calling <code>methodFromTop</code> is safe</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>but calling <code>methodFromBottom</code> is not, so it’s a compile time error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When the type checker visits an <code>if/else</code> control structure, it checks all variables which are assigned in <code>if/else</code> branches
and computes the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">least upper bound</a> of all assignments. This type is the type of the inferred variable
after the <code>if/else</code> block, so in this example, <code>o</code> is assigned a <code>Top</code> in the <code>if</code> branch and a <code>Bottom</code> in the <code>else</code>
branch. The <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">LUB</a> of those is a <code>Top</code>, so after the conditional branches, the compiler infers <code>o</code> as being
a <code>Top</code>. Calling <code>methodFromTop</code> will therefore be allowed, but not <code>methodFromBottom</code>.</p>
</div>
<div class="paragraph">
<p>The same reasoning exists with closures and in particular closure shared variables. A closure shared variable is a variable
which is defined outside of a closure, but used inside a closure, as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Hello, world!'</span><span class="pln">                          </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> closure </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println text                                    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a variable named <code>text</code> is declared</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>text</code> is used from inside a closure. It is a <em>closure shared variable</em>.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Groovy allows developers to use those variables without requiring them to be final. This means that a closure shared
variable can be reassigned inside a closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">String</span><span class="pln"> result
doSomething </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> it </span><span class="pun">-&gt;</span><span class="pln">
    result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Result: $it"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
result </span><span class="pun">=</span><span class="pln"> result</span><span class="pun">?.</span><span class="pln">toUpperCase</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The problem is that a closure is an independent block of code that can be executed (or not) at <strong>any</strong> time. In particular,
<code>doSomething</code> may be asynchronous, for example. This means that the body of a closure doesn’t belong to the main control
flow. For that reason, the type checker also computes, for each closure shared variable, the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">LUB</a> of all
assignments of the variable, and will use that <code>LUB</code> as the inferred type outside of the scope of the closure, like in
this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">void</span><span class="pln"> methodFromTop</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Bottom</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Top</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">void</span><span class="pln"> methodFromBottom</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Top</span><span class="pun">()</span><span class="pln">                               </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="typ">Thread</span><span class="pun">.</span><span class="pln">start </span><span class="pun">{</span><span class="pln">
    o </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bottom</span><span class="pun">()</span><span class="pln">                            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span><span class="pln">
o</span><span class="pun">.</span><span class="pln">methodFromTop</span><span class="pun">()</span><span class="pln">                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
o</span><span class="pun">.</span><span class="pln">methodFromBottom</span><span class="pun">()</span><span class="pln">  </span><span class="com">// compilation error      </span><i class="conum" data-value="4"></i><b><span class="com">(4)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a closure-shared variable is first assigned a <code>Top</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>inside the closure, it is assigned a <code>Bottom</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>methodFromTop</code> is allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>methodFromBottom</code> is a compilation error</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Here, it is clear that when <code>methodFromBottom</code> is called, there’s no guarantee, at compile-time or runtime that the
type of <code>o</code> will <em>effectively</em> be a <code>Bottom</code>. There are chances that it will be, but we can’t make sure, because it’s
asynchronous. So the type checker will only allow calls on the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-lub">least upper bound</a>, which is here a <code>Top</code>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_closures_and_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closures_and_type_inference"></a>Closures and type inference</h6>
<div class="paragraph">
<p>The type checker performs special inference on closures, resulting on additional checks on one side and improved fluency
on the other side.</p>
</div>
<div class="sect6">
<h7 id="_return_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_return_type_inference"></a>Return type inference</h7>
<div class="paragraph">
<p>The first thing that the type checker is capable of doing is inferring the <em>return type</em> of a closure. This is simply
 illustrated in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> testClosureReturnTypeInference</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> cl </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Arg: $arg"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                                </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> cl</span><span class="pun">()</span><span class="pln">                                          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

    val</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln">                                            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a closure is defined, and it returns a string (more precisely a <code>GString</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we call the closure and assign the result to a variable</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the type checker inferred that the closure would return a string, so calling <code>length()</code> is allowed</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see, unlike a method which declares its return type explicitly, there’s no need to declare the return type
of a closure: its type is inferred from the body of the closure.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Closures vs methods</div>
<div class="paragraph">
<p>It’s worth noting that return type inference is only applicable to closures. While the type checker could do the
same on a method, it is in practice not desirable: <em>in general</em>, methods can be overridden and it is not statically
possible to make sure that the method which is called is not an overridden version. So flow typing would actually
think that a method returns something, while in reality, it could return something else, like illustrated in the
following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@TypeChecked</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> A </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> compute</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'some string'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> computeFully</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        compute</span><span class="pun">().</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="lit">@TypeChecked</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> B </span><span class="kwd">extends</span><span class="pln"> A </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> compute</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">123</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                       </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class <code>A</code> defines a method <code>compute</code> which effectively returns a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>this will fail compilation because the return type of <code>compute</code> is <code>def</code>(aka <code>Object</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>class <code>B</code> extends <code>A</code> and redefines <code>compute</code>, this type returning an <code>int</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see, if the type checker relied on the inferred return type of a method, with <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-flow-typing">flow typing</a>,
the type checker could determine that it is ok to call <code>toUpperCase</code>. It is in fact an <strong>error</strong>, because a subclass can
override <code>compute</code> and return a different object. Here, <code>B#compute</code> returns an <code>int</code>, so someone calling <code>computeFully</code>
on an instance of <code>B</code> would see a runtime error. The compiler prevents this from happening by using the declared return
type of methods instead of the inferred return type.</p>
</div>
<div class="paragraph">
<p>For consistency, this behavior is the same for <strong>every</strong> method, even if they are static or final.</p>
</div>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_parameter_type_inference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameter_type_inference"></a>Parameter type inference</h7>
<div class="paragraph">
<p>In addition to the return type, it is possible for a closure to infer its parameter types from the context. There are
two ways for the compiler to infer the parameter types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>through <em>implicit SAM type coercion</em></p>
</li>
<li>
<p>through API metadata</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To illustrate this, lets start with an example that will fail compilation due to the inability for the type checker
to infer the parameter types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">int</span><span class="pln"> age
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> inviteIf</span><span class="pun">(</span><span class="typ">Person</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Closure</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> predicate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">predicate</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">p</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// send invite</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> failCompilation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Person</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Gerard'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">55</span><span class="pun">)</span><span class="pln">
    inviteIf</span><span class="pun">(</span><span class="pln">p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        it</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="com">// No such property: age                   </span><i class="conum" data-value="3"></i><b><span class="com">(3)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>inviteIf</code> method accepts a <code>Person</code> and a <code>Closure</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>we call it with a <code>Person</code> and a <code>Closure</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>yet <code>it</code> is not statically known as being a <code>Person</code> and compilation fails</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In this example, the closure body contains <code>it.age</code>. With dynamic, not type checked code, this would work, because the
type of <code>it</code> would be a <code>Person</code> at runtime. Unfortunately, at compile-time, there’s no way to know what is the type
of <code>it</code>, just by reading the signature of <code>inviteIf</code>.</p>
</div>
<div class="sect7">
<h8 id="_explicit_closure_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_explicit_closure_parameters"></a>Explicit closure parameters</h8>
<div class="paragraph">
<p>To be short, the type checker doesn’t have enough contextual information on the <code>inviteIf</code> method to determine statically
the type of <code>it</code>. This means that the method call needs to be rewritten like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">inviteIf</span><span class="pun">(</span><span class="pln">p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> it </span><span class="pun">-&gt;</span><span class="pln">                                  </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    it</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">18</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the type of <code>it</code> needs to be declared explicitly</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>By explicitly declaring the type of the <code>it</code> variable, you can workaround the problem and make this code statically
checked.</p>
</div>
</div>
<div class="sect7">
<h8 id="_parameters_inferred_from_single_abstract_method_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters_inferred_from_single_abstract_method_types"></a>Parameters inferred from single-abstract method types</h8>
<div class="paragraph">
<p>For an API or framework designer, there are two ways to make this more elegant for users, so that they don’t have to
declare an explicit type for the closure parameters. The first one, and easiest, is to replace the closure with a
SAM type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pun">&lt;</span><span class="typ">On</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> apply</span><span class="pun">(</span><span class="typ">On</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">void</span><span class="pln"> inviteIf</span><span class="pun">(</span><span class="typ">Person</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Predicate</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> predicate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">predicate</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="pln">p</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// send invite</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> passesCompilation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Person</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Gerard'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">55</span><span class="pun">)</span><span class="pln">

    inviteIf</span><span class="pun">(</span><span class="pln">p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                               </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        it</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">18</span><span class="pln">                                            </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declare a <code>SAM</code> interface with an <code>apply</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>inviteIf</code> now uses a <code>Predicate&lt;Person&gt;</code> instead of a <code>Closure&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>there’s no need to declare the type of the <code>it</code> variable anymore</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>it.age</code> compiles properly, the type of <code>it</code> is inferred from the <code>Predicate#apply</code> method signature</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By using this technique, we leverage the <em>automatic coercion of closures to SAM types</em> feature of Groovy. The
question whether you should use a <em>SAM type</em> or a <em>Closure</em> really depends on what you need to do. In a lot of cases,
using a SAM interface is enough, especially if you consider functional interfaces as they are found in Java 8. However,
closures provide features that are not accessible to functional interfaces. In particular, closures can have a delegate,
and owner and can be manipulated as objects (for example, cloned, serialized, curried, …​) before being called. They can
also support multiple signatures (polymorphism). So if you need that kind of manipulation, it is preferable to switch to
the most advanced type inference annotations which are described below.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The original issue that needs to be solved when it comes to closure parameter type inference, that is to say, statically
determining the types of the arguments of a closure <em>without</em> having to have them explicitly declared, is that the Groovy
type system inherits the Java type system, which is insufficient to describe the types of the arguments.</p>
</div>
</div>
<div class="sect7">
<h8 id="_the_code_closureparams_code_annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_code_closureparams_code_annotation"></a>The <code>@ClosureParams</code> annotation</h8>
<div class="paragraph">
<p>Groovy provides an annotation, <code>@ClosureParams</code> which is aimed at completing type information. This annotation is primarily
aimed at framework and API developers who want to extend the capabilities of the type checker by providing type inference
metadata. This is important if your library makes use of closures and that you want the maximum level of tooling support
too.</p>
</div>
<div class="paragraph">
<p>Let’s illustrate this by fixing the original example, introducing the <code>@ClosureParams</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">ClosureParams</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FirstParam</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> inviteIf</span><span class="pun">(</span><span class="typ">Person</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">FirstParam</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> predicate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">predicate</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">p</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// send invite</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
inviteIf</span><span class="pun">(</span><span class="pln">p</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                                       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    it</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">18</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the closure parameter is annotated with <code>@ClosureParams</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>it’s not necessary to use an explicit type for <code>it</code>, which is inferred</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>@ClosureParams</code> annotation minimally accepts one argument, which is named a <em>type hint</em>. A type hint is a class which
is responsible for completing type information at compile time for the closure. In this example, the type hint being used
is <code>groovy.transform.stc.FirstParam</code> which indicated to the type checker that the closure will accept one parameter
whose type is the type of the first parameter of the method. In this case, the first parameter of the method is <code>Person</code>,
so it indicates to the type checker that the first parameter of the closure is in fact a <code>Person</code>.</p>
</div>
<div class="paragraph">
<p>A second optional argument is named <em>options</em>. It’s semantics depend on the <em>type hint</em> class. Groovy comes with
various bundled type hints, illustrated in the table below:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Predefined type hints</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type hint</th>
<th class="tableblock halign-left valign-top">Polymorphic?</th>
<th class="tableblock halign-left valign-top">Description and examples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>FirstParam</code><br>
<code>SecondParam</code><br>
<code>ThirdParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The first (resp. second, third) parameter type of the method<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FirstParam</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">FirstParam</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    c</span><span class="pun">(</span><span class="pln">str</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println it</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">SecondParam</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> withHash</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seed</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">SecondParam</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    c</span><span class="pun">(</span><span class="lit">31</span><span class="pun">*</span><span class="pln">str</span><span class="pun">.</span><span class="pln">hashCode</span><span class="pun">()+</span><span class="pln">seed</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
withHash</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> mod </span><span class="pun">=</span><span class="pln"> it</span><span class="pun">%</span><span class="lit">2</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">ThirdParam</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> format</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> prefix</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> postfix</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> o</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">ThirdParam</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"$prefix${c(o)}$postfix"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> format</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'bar'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'baz'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'fooBAZbar'</span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>FirstParam.FirstGenericType</code><br>
<code>SecondParam.FirstGenericType</code><br>
<code>ThirdParam.FirstGenericType</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The first generic type of the first (resp. second, third) parameter of the method<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FirstParam</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> strings</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">FirstParam</span><span class="pun">.</span><span class="typ">FirstGenericType</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    strings</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln">
        c</span><span class="pun">(</span><span class="pln">it</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">([</span><span class="str">'foo'</span><span class="pun">,</span><span class="str">'bar'</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println it</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println</span><span class="pun">(</span><span class="lit">2</span><span class="pun">*</span><span class="pln">it</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Variants for <code>SecondGenericType</code> and <code>ThirdGenericType</code> exist for all <code>FirstParam</code>, <code>SecondParam</code> and <code>ThirdParam</code>
type hints.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>SimpleType</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A type hint for which the type of closure parameters comes from the options string.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">SimpleType</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="typ">SimpleType</span><span class="pun">,</span><span class="pln">options</span><span class="pun">=[</span><span class="str">'java.lang.String'</span><span class="pun">,</span><span class="str">'int'</span><span class="pun">])</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    c</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> len </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> len
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This type hint supports a <strong>single</strong> signature and each of the parameter is specified as a value of the <em>options</em> array
using a fully-qualified type name or a primitive type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>MapEntryOrKeyValue</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A dedicated type hint for closures that either work on a <code>Map.Entry</code> single parameter, or two parameters corresponding
to the key and the value.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">MapEntryOrKeyValue</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">K</span><span class="pun">,</span><span class="pln">V</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="typ">Map</span><span class="pun">&lt;</span><span class="pln">K</span><span class="pun">,</span><span class="pln">V</span><span class="pun">&gt;</span><span class="pln"> map</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="typ">MapEntryOrKeyValue</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">([</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="str">'A'</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> k</span><span class="pun">,</span><span class="pln">v </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> k</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> v</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">([</span><span class="pln">abc</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> e </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">value
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This type hint <strong>requires</strong> that the first argument is a <code>Map</code> type, and infers the closure parameter types from the map
actual key/value types.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>FromAbstractTypeMethods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Infers closure parameter types from the abstract method of some type. A signature is inferred for <strong>each</strong> abstract method.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FromAbstractTypeMethods</span><span class="pln">
</span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> firstSignature</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> secondSignature</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="typ">FromAbstractTypeMethods</span><span class="pun">,</span><span class="pln"> options</span><span class="pun">=[</span><span class="str">"Foo"</span><span class="pun">])</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> cl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">+</span><span class="pln">b </span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> s </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If there are multiple signatures like in the example above, the type checker will <strong>only</strong> be able to infer the types of
the arguments if the arity of each method is different. In the example above, <code>firstSignature</code> takes 2 arguments and
<code>secondSignature</code> takes 1 argument, so the type checker can infer the argument types based on the number of arguments.
But see the optional resolver class attribute discussed next.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>FromString</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Infers the closure parameter types from the <code>options</code> argument. The <code>options</code> argument consists of an array of comma-separated
non-primitive types. Each element of the array corresponds to a single signature, and each comma in an element separate
parameters of the signature. In short, this is the most generic type hint, and each string of the <code>options</code> map is <strong>parsed</strong>
as if it was a signature literal. While being very powerful, this type hint must be avoided if you can because it increases
the compilation times due to the necessity of parsing the type signatures.</p>
</div>
<div class="paragraph">
<p>A single signature for a closure accepting a <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FromString</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="typ">FromString</span><span class="pun">,</span><span class="pln"> options</span><span class="pun">=[</span><span class="str">"String"</span><span class="pun">,</span><span class="str">"String,Integer"</span><span class="pun">])</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> cl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> s </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> s</span><span class="pun">,</span><span class="pln">i </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()*</span><span class="pln">i </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A polymorphic closure, accepting either a <code>String</code> or a <code>String, Integer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FromString</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="typ">FromString</span><span class="pun">,</span><span class="pln"> options</span><span class="pun">=[</span><span class="str">"String"</span><span class="pun">,</span><span class="str">"String,Integer"</span><span class="pun">])</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> cl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> s </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
doSomething </span><span class="pun">{</span><span class="pln"> s</span><span class="pun">,</span><span class="pln">i </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()*</span><span class="pln">i </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A polymorphic closure, accepting either a <code>T</code> or a pair <code>T,T</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">FromString</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doSomething</span><span class="pun">(</span><span class="pln">T e</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@ClosureParams</span><span class="pun">(</span><span class="pln">value</span><span class="pun">=</span><span class="typ">FromString</span><span class="pun">,</span><span class="pln"> options</span><span class="pun">=[</span><span class="str">"T"</span><span class="pun">,</span><span class="str">"T,T"</span><span class="pun">])</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> cl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> s </span><span class="pun">-&gt;</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
doSomething</span><span class="pun">(</span><span class="str">'foo'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> s1</span><span class="pun">,</span><span class="pln">s2 </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">assert</span><span class="pln"> s1</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> s2</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Even though you use <code>FirstParam</code>, <code>SecondParam</code> or <code>ThirdParam</code> as a type hint, it doesn’t strictly mean that the
argument which will be passed to the closure <strong>will</strong> be the first (resp. second, third) argument of the method call. It
only means that the <strong>type</strong> of the parameter of the closure will be the <strong>same</strong> as the type of the first (resp.  second,
 third) argument of the method call.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In short, the lack of the <code>@ClosureParams</code> annotation on a method accepting a <code>Closure</code> will <strong>not</strong> fail compilation. If
 present (and it can be present in Java sources as well as Groovy sources), then the type checker has <strong>more</strong> information
 and can perform additional type inference. This makes this feature particularly interesting for framework developers.</p>
</div>
<div class="paragraph">
<p>A third optional argument is named <em>conflictResolutionStrategy</em>. It can reference a class (extending from
<code>ClosureSignatureConflictResolver</code>) that can perform additional resolution of parameter types if more than
one are found after initial inference calculations are complete. Groovy comes with the a default type resolver
which does nothing, and another which selects the first signature if multiple are found. The resolver is
only invoked if more than one signature is found and is by design a post processor. Any statements which need
injected typing information must pass one of the parameter signatures determined through type hints. The
resolver then picks among the returned candidate signatures.</p>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_code_delegatesto_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_delegatesto_code"></a><code>@DelegatesTo</code></h7>
<div class="paragraph">
<p>The <code>@DelegatesTo</code> annotation is used by the type checker to infer the type of the delegate. It allows the API designer
to instruct the compiler what is the type of the delegate and the delegation strategy. The <code>@DelegatesTo</code> annotation is
discussed in a <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-domain-specific-languages.html#section-delegatesto">specific section</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_static_compilation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_compilation"></a>Static compilation</h5>
<div class="sect5">
<h6 id="_dynamic_vs_static"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_vs_static"></a>Dynamic vs static</h6>
<div class="paragraph">
<p>In the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#static-type-checking">type checking section</a>, we have seen that Groovy provides optional type checking thanks to the
<code>@TypeChecked</code> annotation. The type checker runs at compile time and performs a static analysis of dynamic code. The
program will behave exactly the same whether type checking has been enabled or not. This means that the <code>@TypeChecked</code>
annotation is neutral with regards to the semantics of a program. Even though it may be necessary to add type information
in the sources so that the program is considered type safe, in the end, the semantics of the program are the same.</p>
</div>
<div class="paragraph">
<p>While this may sound fine, there is actually one issue with this: type checking of dynamic code, done at compile time, is
by definition only correct if no runtime specific behavior occurs. For example, the following program passes type checking:</p>
</div>
<div id="typechecked-defeated" class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Computer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> compute</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">String</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">TypeChecked</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> computer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Computer</span><span class="pun">()</span><span class="pln">
    computer</span><span class="pun">.</span><span class="kwd">with</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> compute</span><span class="pun">(</span><span class="pln">compute</span><span class="pun">(</span><span class="str">'foobar'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="str">'6'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two <code>compute</code> methods. One accepts a <code>String</code> and returns an <code>int</code>, the other accepts an <code>int</code> and returns
a <code>String</code>. If you compile this, it is considered type safe: the inner <code>compute('foobar')</code> call will return an <code>int</code>,
and calling <code>compute</code> on this <code>int</code> will in turn return a <code>String</code>.</p>
</div>
<div class="paragraph">
<p>Now, before calling <code>test()</code>, consider adding the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Computer</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">compute </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using runtime metaprogramming, we’re actually modifying the behavior of the <code>compute(String)</code> method, so that instead of
returning the length of the provided argument, it will return a <code>Date</code>. If you execute the program, it will fail at
runtime. Since this line can be added from anywhere, in any thread, there’s absolutely no way for the type checker to
statically make sure that no such thing happens. In short, the type checker is vulnerable to monkey patching. This is
just one example, but this illustrates the concept that doing static analysis of a dynamic program is inherently wrong.</p>
</div>
<div class="paragraph">
<p>The Groovy language provides an alternative annotation to <code>@TypeChecked</code> which will actually make sure that the methods
which are inferred as being called <strong>will</strong> effectively be called at runtime. This annotation turns the Groovy compiler
into a <strong>static compiler</strong>, where all method calls are resolved at compile time <strong>and</strong> the generated bytecode makes sure
that this happens: the annotation is <code>@groovy.transform.CompileStatic</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="compilestatic-annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilestatic-annotation"></a>The <code>@CompileStatic</code> annotation</h6>
<div class="paragraph">
<p>The <code>@CompileStatic</code> annotation can be added anywhere the <code>@TypeChecked</code> annotation can be used, that is to say on
a class or a method. It is not necessary to add both <code>@TypeChecked</code> and <code>@CompileStatic</code>, as <code>@CompileStatic</code> performs
everything <code>@TypeChecked</code> does, but in addition triggers static compilation.</p>
</div>
<div class="paragraph">
<p>Let’s take the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#typechecked-defeated">example which failed</a>, but this time let’s replace the <code>@TypeChecked</code> annotation
with <code>@CompileStatic</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Computer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> compute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> compute</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">String</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="typ">CompileStatic</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> computer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Computer</span><span class="pun">()</span><span class="pln">
    computer</span><span class="pun">.</span><span class="kwd">with</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> compute</span><span class="pun">(</span><span class="pln">compute</span><span class="pun">(</span><span class="str">'foobar'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="str">'6'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">Computer</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">compute </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
test</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the <strong>only</strong> difference. If we execute this program, this time, there is no runtime error. The <code>test</code> method
became immune to monkey patching, because the <code>compute</code> methods which are called in its body are linked at compile
time, so even if the metaclass of <code>Computer</code> changes, the program still behaves <strong>as expected by the type checker</strong>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_key_benefits"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_key_benefits"></a>Key benefits</h6>
<div class="paragraph">
<p>There are several benefits of using <code>@CompileStatic</code> on your code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type safety</p>
</li>
<li>
<p>immunity to <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilestatic-annotation">monkey patching</a></p>
</li>
<li>
<p>performance improvements</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The performance improvements depend on the kind of program you are executing. If it is I/O bound, the difference between
statically compiled code and dynamic code is barely noticeable. On highly CPU intensive code, since the bytecode which
is generated is very close, if not equal, to the one that Java would produce for an equivalent program, the performance
is greatly improved.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Using the <em>invokedynamic</em> version of Groovy, which is accessible to people using JDK 7 and above, the performance
of the dynamic code should be very close to the performance of statically compiled code. Sometimes, it can even be faster!
There is only one way to determine which version you should choose: measuring. The reason is that depending on your program
<strong>and</strong> the JVM that you use, the performance can be significantly different. In particular, the <em>invokedynamic</em> version of
Groovy is very sensitive to the JVM version in use.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_extensions"></a>1.6.7. Type checking extensions</h4>
<div class="sect4">
<h5 id="_writing_a_type_checking_extension"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_writing_a_type_checking_extension"></a>Writing a type checking extension</h5>
<div class="sect5">
<h6 id="_towards_a_smarter_type_checker"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_towards_a_smarter_type_checker"></a>Towards a smarter type checker</h6>
<div class="paragraph">
<p>Despite being a dynamic language, Groovy can be used with a static type
checker at compile time, enabled using the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#static-type-checking">@TypeChecked</a>
annotation. In this mode, the compiler becomes
more verbose and throws errors for, example, typos, non-existent
methods,… This comes with a few limitations though, most of them coming
from the fact that Groovy remains inherently a dynamic language. For
example, you wouldn’t be able to use type checking on code that uses the markup builder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> builder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MarkupBuilder</span><span class="pun">(</span><span class="kwd">out</span><span class="pun">)</span><span class="pln">
builder</span><span class="pun">.</span><span class="pln">html </span><span class="pun">{</span><span class="pln">
    head </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    body </span><span class="pun">{</span><span class="pln">
        p </span><span class="str">'Hello, world!'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the previous example, none of the <code>html</code>, <code>head</code>, <code>body</code> or <code>p</code> methods
exist. However if you execute the code, it works because Groovy uses dynamic dispatch
and converts those method calls at runtime. In this builder, there’s no limitation about
the number of tags that you can use, nor the attributes, which means there is no chance
for a type checker to know about all the possible methods (tags) at compile time, unless
you create a builder dedicated to HTML for example.</p>
</div>
<div class="paragraph">
<p>Groovy is a platform of choice when it comes to implement internal DSLs. The flexible syntax,
combined with runtime and compile-time metaprogramming capabilities make Groovy an interesting
choice because it allows the programmer to focus on the DSL rather than
on tooling or implementation. Since Groovy DSLs are Groovy code, it’s
easy to have IDE support without having to write a dedicated plugin for
example.</p>
</div>
<div class="paragraph">
<p>In a lot of cases, DSL engines are written in Groovy (or Java) then user
code is executed as scripts, meaning that you have some kind of wrapper
on top of user logic. The wrapper may consist, for example, in a
<code>GroovyShell</code> or <code>GroovyScriptEngine</code> that performs some tasks transparently
before running the script (adding imports, applying AST transforms,
extending a base script,…). Often, user written scripts come to
production without testing because the DSL logic comes to a point
where&nbsp;<strong>any</strong> user may write code using the DSL syntax. In the end, a user
may just ignore that what he writes is actually&nbsp;<strong>code</strong>. This adds some
challenges for the DSL implementer, such as securing execution of user
code or, in this case, early reporting of errors.</p>
</div>
<div class="paragraph">
<p>For example, imagine a DSL which goal is to drive a rover on Mars
remotely. Sending a message to the rover takes around 15 minutes. If the
rover executes the script and fails with an error (say a typo), you have
two problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, feedback comes only after 30 minutes (the time needed for the
rover to get the script and the time needed to receive the error)</p>
</li>
<li>
<p>second, some portion of the script has been executed and you may have
to change the fixed script significantly (implying that you need to know
the current state of the rover…)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Type checking extensions is a mechanism that will
allow the developer of a DSL engine to make those scripts safer by
applying the same kind of checks that static type checking allows on
regular groovy classes.</p>
</div>
<div class="paragraph">
<p>The principle, here, is to fail early, that is
to say fail compilation of scripts as soon as possible, and if possible
provide feedback to the user (including nice error messages).</p>
</div>
<div class="paragraph">
<p>In short, the idea behind type checking extensions is to make the compiler
aware of all the runtime metaprogramming tricks that the DSL uses, so that
scripts can benefit the same level of compile-time checks as a verbose statically
compiled code would have. We will see that you can go even further by performing
checks that a normal type checker wouldn’t do, delivering powerful compile-time
checks for your users.</p>
</div>
</div>
<div class="sect5">
<h6 id="Typecheckingextensions-Howdoesitwork"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Howdoesitwork"></a>The extensions attribute</h6>
<div class="paragraph">
<p>The&nbsp;<code>@TypeChecked</code> annotation supports an attribute
named&nbsp;<code>extensions</code>. This parameter takes an array of strings
corresponding to a list of <em>type checking extensions scripts</em>. Those
scripts are found at&nbsp;<strong>compile time</strong> on classpath. For example, you would
write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="lit">@TypeChecked</span><span class="pun">(</span><span class="pln">extensions</span><span class="pun">=</span><span class="str">'/path/to/myextension.groovy'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">...}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In that case, the&nbsp;<em>foo</em> methods would be type checked with the rules of
the normal type checker completed by those found in
the&nbsp;<em>myextension.groovy</em> script. Note that while internally the type
checker supports multiple mechanisms to implement type checking
extensions (including plain old java code), the recommended way is to
use those type checking extension scripts.</p>
</div>
</div>
<div class="sect5">
<h6 id="_a_dsl_for_type_checking"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_dsl_for_type_checking"></a>A DSL for type checking</h6>
<div class="paragraph">
<p>The idea behind type checking extensions is to use a DSL to extend the
type checker capabilities. This DSL allows you to hook into the
compilation process, more specifically the type checking phase, using an
"event-driven" API. For example, when the type checker enters a method
body, it throws a&nbsp;<em>beforeVisitMethod</em> event that the extension can react to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">beforeVisitMethod </span><span class="pun">{</span><span class="pln"> methodNode </span><span class="pun">-&gt;</span><span class="pln">
 println </span><span class="str">"Entering ${methodNode.name}"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Imagine that you have this rover DSL at hand. A user would write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">robot</span><span class="pun">.</span><span class="pln">move </span><span class="lit">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have a class defined as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Robot</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Robot</span><span class="pln"> move</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> qt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The script can be type checked before being executed using the following
script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="typ">TypeChecked</span><span class="pun">)</span><span class="pln">            </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">                         </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> robot </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Robot</span><span class="pun">()</span><span class="pln">
shell</span><span class="pun">.</span><span class="pln">setVariable</span><span class="pun">(</span><span class="str">'robot'</span><span class="pun">,</span><span class="pln"> robot</span><span class="pun">)</span><span class="pln">
shell</span><span class="pun">.</span><span class="pln">evaluate</span><span class="pun">(</span><span class="pln">script</span><span class="pun">)</span><span class="pln">                                      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a compiler configuration adds the <code>@TypeChecked</code> annotation to all classes</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>use the configuration in a <code>GroovyShell</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>so that scripts compiled using the shell are compiled with <code>@TypeChecked</code> without the user having to add it explicitly</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Using the compiler configuration above, we can apply&nbsp;<em>@TypeChecked</em>
transparently to the script. In that case, it will fail at compile
time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Static type checking] - The variable [robot] is undeclared.</pre>
</div>
</div>
<div class="paragraph">
<p>Now, we will slightly update the configuration to include the
``extensions'' parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">TypeChecked</span><span class="pun">,</span><span class="pln">
        extensions</span><span class="pun">:[</span><span class="str">'robotextension.groovy'</span><span class="pun">])</span><span class="pln">
</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then add the following to your classpath:</p>
</div>
<div class="listingblock">
<div class="title">robotextension.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">unresolvedVariable </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="str">'robot'</span><span class="pun">==</span><span class="kwd">var</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        storeType</span><span class="pun">(</span><span class="kwd">var</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">Robot</span><span class="pun">))</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we’re telling the compiler that if an <em>unresolved variable</em> is found
and that the name of the variable is&nbsp;<em>robot</em>, then we can make sure that the type of this
variable is <code>Robot</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="Typecheckingextensions-TheAPI"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-TheAPI"></a>Type checking extensions API</h6>
<div class="sect6">
<h7 id="Typecheckingextensions-AST"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-AST"></a>AST</h7>
<div class="paragraph">
<p>The type checking API is a low level API, dealing with the Abstract
Syntax Tree. You will have to know your AST well to develop extensions,
even if the DSL makes it much easier than just dealing with AST code
from plain Java or Groovy.</p>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Events"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Events"></a>Events</h7>
<div class="paragraph">
<p>The type checker sends the following events, to which an extension
script can react:</p>
</div>
<table id="event-setup" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>setup</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called after the type checker finished initialization</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">setup </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// this is called before anything else</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Can be used to perform setup of your extension</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-finish" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>finish</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called after the type checker completed type checking</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">finish </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// this is after completion</span><span class="pln">
    </span><span class="com">// of all type checking</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Can be used to perform additional checks after the type checker has finished its job.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-unresolvedVariable" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>unresolvedVariable</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called when the type checker finds an
  unresolved variable</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>VariableExpression var</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">unresolvedVariable </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="str">'people'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        storeType</span><span class="pun">(</span><span class="kwd">var</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">List</span><span class="pun">))</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Allows the developer to help the type checker with user-injected variables.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-unresolvedProperty" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>unresolvedProperty</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called when the type checker cannot find
  a property on the receiver</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>PropertyExpression pexp</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">unresolvedProperty </span><span class="pun">{</span><span class="pln"> pexp </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="str">'longueur'</span><span class="pun">==</span><span class="pln">pexp</span><span class="pun">.</span><span class="pln">propertyAsString </span><span class="pun">&amp;&amp;</span><span class="pln">
        getType</span><span class="pun">(</span><span class="pln">pexp</span><span class="pun">.</span><span class="pln">objectExpression</span><span class="pun">)==</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        storeType</span><span class="pun">(</span><span class="pln">pexp</span><span class="pun">,</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">))</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Allows the developer to handle "dynamic" properties</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-unresolvedAttribute" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>unresolvedAttribute</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called when the type checker cannot
  find an attribute on the receiver</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>AttributeExpression aex</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">unresolvedAttribute </span><span class="pun">{</span><span class="pln"> aex </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">getType</span><span class="pun">(</span><span class="pln">aex</span><span class="pun">.</span><span class="pln">objectExpression</span><span class="pun">)==</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        storeType</span><span class="pun">(</span><span class="pln">aex</span><span class="pun">,</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">))</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Allows the developer to handle missing attributes</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-beforeMethodCall" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>beforeMethodCall</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called before the type checker starts type
  checking a method call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>MethodCall call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">beforeMethodCall </span><span class="pun">{</span><span class="pln"> call </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isMethodCallExpression</span><span class="pun">(</span><span class="pln">call</span><span class="pun">)</span><span class="pln">
            </span><span class="pun">&amp;&amp;</span><span class="pln"> call</span><span class="pun">.</span><span class="pln">methodAsString</span><span class="pun">==</span><span class="str">'toUpperCase'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        addStaticTypeError</span><span class="pun">(</span><span class="str">'Not allowed'</span><span class="pun">,</span><span class="pln">call</span><span class="pun">)</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Allows you to intercept method calls before the
type checker performs its own checks. This is useful if you want to
replace the default type checking with a custom one for a limited scope.
In that case, you must set the handled flag to true, so that the type
checker skips its own checks.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-afterMethodCall" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>afterMethodCall</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called once the type checker has finished
  type checking a method call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>MethodCall call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">afterMethodCall </span><span class="pun">{</span><span class="pln"> call </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">getTargetMethod</span><span class="pun">(</span><span class="pln">call</span><span class="pun">).</span><span class="pln">name</span><span class="pun">==</span><span class="str">'toUpperCase'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        addStaticTypeError</span><span class="pun">(</span><span class="str">'Not allowed'</span><span class="pun">,</span><span class="pln">call</span><span class="pun">)</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Allow you to perform additional checks after the type
checker has done its own checks. This is in particular useful if you
want to perform the standard type checking tests but also want to ensure
additional type safety, for example checking the arguments against each
other.Note that <code>afterMethodCall</code> is called even if you did
<code>beforeMethodCall</code> and set the handled flag to true.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-onMethodSelection" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>onMethodSelection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker when it finds
  a method appropriate for a method call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Expression expr, MethodNode node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">onMethodSelection </span><span class="pun">{</span><span class="pln"> expr</span><span class="pun">,</span><span class="pln"> node </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">declaringClass</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'java.lang.String'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// calling a method on 'String'</span><span class="pln">
        </span><span class="com">// let’s perform additional checks!</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">count</span><span class="pun">&gt;</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            addStaticTypeError</span><span class="pun">(</span><span class="str">"You can use only 2 calls on String in your source code"</span><span class="pun">,</span><span class="pln">expr</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The type checker works by inferring
argument types of a method call, then chooses a target method. If it
finds one that corresponds, then it triggers this event. It is for
example interesting if you want to react on a specific method call, such
as entering the scope of a method that takes a closure as argument (as
in builders).Please note that this event may be thrown for various types
of expressions, not only method calls (binary expressions for example).</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-methodNotFound" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>methodNotFound</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker when it fails to
  find an appropriate method for a method call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ClassNode receiver, String name, ArgumentListExpression argList, ClassNode[] argTypes,MethodCall call</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">methodNotFound </span><span class="pun">{</span><span class="pln"> receiver</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> argList</span><span class="pun">,</span><span class="pln"> argTypes</span><span class="pun">,</span><span class="pln"> call </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="com">// receiver is the inferred type of the receiver</span><span class="pln">
    </span><span class="com">// name is the name of the called method</span><span class="pln">
    </span><span class="com">// argList is the list of arguments the method was called with</span><span class="pln">
    </span><span class="com">// argTypes is the array of inferred types for each argument</span><span class="pln">
    </span><span class="com">// call is the method call for which we couldn’t find a target method</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">receiver</span><span class="pun">==</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">)</span><span class="pln">
            </span><span class="pun">&amp;&amp;</span><span class="pln"> name</span><span class="pun">==</span><span class="str">'longueur'</span><span class="pln">
            </span><span class="pun">&amp;&amp;</span><span class="pln"> argList</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()==</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> newMethod</span><span class="pun">(</span><span class="str">'longueur'</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">))</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike <code>onMethodSelection</code>, this event is
sent when the type checker cannot find a target method for a method call
(instance or static). It gives you the chance to intercept the error
before it is sent to the user, but also set the target method.For this,
you need to return a list of <code>MethodNode</code>. In most situations, you would
either return: an empty list, meaning that you didn’t find a
corresponding method, a list with exactly one element, saying that there’s
no doubt about the target methodIf you return more than one MethodNode,
then the compiler would throw an error to the user stating that the
method call is ambiguous, listing the possible methods.For convenience,
if you want to return only one method, you are allowed to return it
directly instead of wrapping it into a list.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-beforeVisitMethod" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>beforeVisitMethod</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker before type
  checking a method body</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>MethodNode node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">beforeVisitMethod </span><span class="pun">{</span><span class="pln"> methodNode </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="com">// tell the type checker we will handle the body by ourselves</span><span class="pln">
    handled </span><span class="pun">=</span><span class="pln"> methodNode</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">startsWith</span><span class="pun">(</span><span class="str">'skip'</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The type checker will call this method before
starting to type check a method body. If you want, for example, to
perform type checking by yourself instead of letting the type checker do
it, you have to set the handled flag to true.This event can also be used
to help defining the scope of your extension (for example, applying it
only if you are inside method foo).</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-afterVisitMethod" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>afterVisitMethod</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker after type
  checking a method body</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>MethodNode node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">afterVisitMethod </span><span class="pun">{</span><span class="pln"> methodNode </span><span class="pun">-&gt;</span><span class="pln">
    scopeExit </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">methods</span><span class="pun">&gt;</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            addStaticTypeError</span><span class="pun">(</span><span class="str">"Method ${methodNode.name} contains more than 2 method calls"</span><span class="pun">,</span><span class="pln"> methodNode</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Gives you the opportunity to perform additional
checks after a method body is visited by the type checker. This is
useful if you collect information, for example, and want to perform
additional checks once everything has been collected.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-beforeVisitClass" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>beforeVisitClass</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker before type checking a class</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ClassNode node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">beforeVisitClass </span><span class="pun">{</span><span class="pln"> </span><span class="typ">ClassNode</span><span class="pln"> classNode </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> classNode</span><span class="pun">.</span><span class="pln">nameWithoutPackage
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">name</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="str">'A'</span><span class="pun">..</span><span class="str">'Z'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        addStaticTypeError</span><span class="pun">(</span><span class="str">"Class '${name}' doesn't start with an uppercase letter"</span><span class="pun">,</span><span class="pln">classNode</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If a class is type checked, then
before visiting the class, this event will be sent. It is also the case
for inner classes defined inside a class annotated with <code>@TypeChecked</code>. It
can help you define the scope of your extension, or you can even totally
replace the visit of the type checker with a custom type checking
implementation. For that, you would have to set the <code>handled</code> flag to
<code>true</code>.&nbsp;</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-afterVisitClass" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>afterVisitClass</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called by the type checker after having finished the visit of a type checked class</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ClassNode node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">afterVisitClass </span><span class="pun">{</span><span class="pln"> </span><span class="typ">ClassNode</span><span class="pln"> classNode </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> classNode</span><span class="pun">.</span><span class="pln">nameWithoutPackage
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">name</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="str">'A'</span><span class="pun">..</span><span class="str">'Z'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        addStaticTypeError</span><span class="pun">(</span><span class="str">"Class '${name}' doesn't start with an uppercase letter"</span><span class="pun">,</span><span class="pln">classNode</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Called
for every class being type checked after the type checker finished its
work. This includes classes annotated with <code>@TypeChecked</code> and any
inner/anonymous class defined in the same class with is not skipped.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-incompatibleAssignment" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>incompatibleAssignment</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called when the type checker thinks
    that an assignment is incorrect, meaning that the right hand side of an
    assignment is incompatible with the left hand side</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ClassNode lhsType, ClassNode rhsType,&nbsp; Expression assignment</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">incompatibleAssignment </span><span class="pun">{</span><span class="pln"> lhsType</span><span class="pun">,</span><span class="pln"> rhsType</span><span class="pun">,</span><span class="pln"> expr </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isBinaryExpression</span><span class="pun">(</span><span class="pln">expr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> isAssignment</span><span class="pun">(</span><span class="pln">expr</span><span class="pun">.</span><span class="pln">operation</span><span class="pun">.</span><span class="pln">type</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lhsType</span><span class="pun">==</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> rhsType</span><span class="pun">==</span><span class="pln">classNodeFor</span><span class="pun">(</span><span class="typ">Closure</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Gives the
developer the ability to handle incorrect assignments. This is for
example useful if a class overrides <code>setProperty</code>, because in that case it
is possible that assigning a variable of one type to a property of
another type is handled through that runtime mechanism. In that case, you
can help the type checker just by telling it that the assignment is
valid (using <code>handled</code> set to <code>true</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="event-ambiguousMethods" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event name</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ambiguousMethods</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Called When</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Called when the type checker cannot choose between several candidate methods</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Arguments</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List&lt;MethodNode&gt; methods,&nbsp; Expression origin</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usage</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">ambiguousMethods </span><span class="pun">{</span><span class="pln"> methods</span><span class="pun">,</span><span class="pln"> origin </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="com">// choose the method which has an Integer as parameter type</span><span class="pln">
    methods</span><span class="pun">.</span><span class="pln">find </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">parameters</span><span class="pun">.</span><span class="pln">any </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">Integer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Gives the
developer the ability to handle incorrect assignments. This is for
example useful if a class overrides <code>setProperty</code>, because in that case it
is possible that assigning a variable of one type to a property of
another type is handled through that runtime mechanism. In that case, you
can help the type checker just by telling it that the assignment is
valid (using <code>handled</code> set to <code>true</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Of course, an extension script may consist of several blocks, and you
can have multiple blocks responding to the same event. This makes the
DSL look nicer and easier to write. However, reacting to events is far
from sufficient. If you know you can react to events, you also need to
deal with the errors, which implies several <em>helper</em> methods that will
make things easier.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="Typecheckingextensions-Workingwithextensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Workingwithextensions"></a>Working with extensions</h6>
<div class="sect6">
<h7 id="Typecheckingextensions-Supportclasses"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Supportclasses"></a>Support classes</h7>
<div class="paragraph">
<p>The DSL relies on a support class
called&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/GroovyTypeCheckingExtensionSupport.html">org.codehaus.groovy.transform.stc.GroovyTypeCheckingExtensionSupport</a> .
This class itself
extends&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/TypeCheckingExtension.html">org.codehaus.groovy.transform.stc.TypeCheckingExtension</a> . Those
two classes define a number of <em>helper</em> methods that will make working
with the AST easier, especially regarding type checking. One interesting
thing to know is that you&nbsp;<strong>have access to the type checker</strong>. This means
that you can programmatically call methods of the type checker,
including those that allow you to <strong>throw compilation errors</strong>.</p>
</div>
<div class="paragraph">
<p>The extension script delegates to
the&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/GroovyTypeCheckingExtensionSupport.html">org.codehaus.groovy.transform.stc.GroovyTypeCheckingExtensionSupport</a> class, meaning that you have
direct access to the following variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>context</em>: the type checker context, of type&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/TypeCheckingContext.html">org.codehaus.groovy.transform.stc.TypeCheckingContext</a></p>
</li>
<li>
<p><em>typeCheckingVisitor</em>: the type checker itself, a&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.html">org.codehaus.groovy.transform.stc.StaticTypeCheckingVisitor</a> instance</p>
</li>
<li>
<p><em>generatedMethods</em>: a list of "generated methods", which is in fact the list of "dummy" methods that you can create
inside a type checking extension using the&nbsp;<code>newMethod</code> calls</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type checking context contains a lot of information that is useful
in context for the type checker. For example, the current stack of
enclosing method calls, binary expressions, closures, … This information
is in particular important if you have to know <em>where</em> you are when an
error occurs and that you want to handle it.</p>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Classnodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Classnodes"></a>Class nodes</h7>
<div class="paragraph">
<p>Handling class nodes is something that needs particular attention when
you work with a type checking extension. Compilation works with an
abstract syntax tree (AST) and the tree may not be complete when you are
type checking a class. This also means that when you refer to types, you
must not use class literals such as&nbsp;<code>String</code> or&nbsp;<code>HashSet</code>, but to class
nodes representing those types. This requires a certain level of
abstraction and understanding how Groovy deals with class nodes. To make
things easier, Groovy supplies several helper methods to deal with class
nodes. For example, if you want to say "the type for&nbsp;String", you can
write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">String</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ClassNode</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You would also note that there is a variant of&nbsp;<em>classNodeFor</em> that takes
a&nbsp;<code>String</code> as an argument, instead of a&nbsp;<code>Class</code>. In general, you
should&nbsp;<strong>not</strong> use that one, because it would create a class node for
which the name is <code>String</code>, but without any method, any property, …
defined on it. The first version returns a class node that is&nbsp;<em>resolved</em>
but the second one returns one that is&nbsp;<em>not</em>. So the latter should be
reserved for very special cases.</p>
</div>
<div class="paragraph">
<p>The second problem that you might encounter is referencing a type which
is not yet compiled. This may happen more often than you think. For
example, when you compile a set of files together. In that case, if you
want to say "that variable is of type Foo" but <code>Foo</code> is not yet
compiled, you can still refer to the <code>Foo</code> class node
using&nbsp;<code>lookupClassNodeFor</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> lookupClassNodeFor</span><span class="pun">(</span><span class="str">'Foo'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ClassNode</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Helpingthetypechecker"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Helpingthetypechecker"></a>Helping the type checker</h7>
<div class="paragraph">
<p>Say that you know that variable&nbsp;<code>foo</code> is of type&nbsp;<code>Foo</code> and you want to
tell the type checker about it. Then you can use the&nbsp;<code>storeType</code> method,
which takes two arguments: the first one is the node for which you want
to store the type and the second one is the type of the node. If you
look at the implementation of&nbsp;<code>storeType</code>, you would see that it
delegates to the type checker equivalent method, which itself does a lot
of work to store node metadata. You would also see that storing the type
is not limited to variables: you can set the type of any expression.</p>
</div>
<div class="paragraph">
<p>Likewise, getting the type of an AST node is just a matter of
calling&nbsp;<code>getType</code> on that node. This would in general be what you want,
but there’s something that you must understand:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getType</code> returns the&nbsp;<strong>inferred type</strong> of an expression. This means
that it will not return, for a variable declared of type&nbsp;<code>Object</code> the
class node for&nbsp;<code>Object</code>, but the inferred type of this variable&nbsp;<strong>at this
point of the code</strong> (flow typing)</p>
</li>
<li>
<p>if you want to access the origin type of a variable (or
field/parameter), then you must call the appropriate method on the AST
node</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Throwinganerror"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Throwinganerror"></a>Throwing an error</h7>
<div class="paragraph">
<p>To throw a type checking error, you only have to call the
<code>addStaticTypeError</code> method which takes two arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a&nbsp;<em>message</em> which is a string that will be displayed to the end user</p>
</li>
<li>
<p>an <em>AST node</em> responsible for the error. It’s better to provide the best
suiting AST node because it will be used to retrieve the line and column
numbers</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-isXXXExpression"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-isXXXExpression"></a>isXXXExpression</h7>
<div class="paragraph">
<p>It is often required to know the type of an AST node. For readability,
the DSL provides a special isXXXExpression method that will delegate to
<code>x instance of XXXExpression</code>. For example, instead of writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">BinaryExpression</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which requires you to import the <code>BinaryExpression</code> class, you can just
write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isBinaryExpression</span><span class="pun">(</span><span class="pln">node</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Virtualmethods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Virtualmethods"></a>Virtual methods</h7>
<div class="paragraph">
<p>When you perform type checking of dynamic code, you may often face the
case when you know that a method call is valid but there is no "real"
method behind it. As an example, take the Grails dynamic finders. You
can have a method call consisting of a method named&nbsp;<em>findByName(…)</em>. As
there’s no&nbsp;<em>findByName</em> method defined in the bean, the type checker
would complain. Yet, you would know that this method wouldn’t fail at
runtime, and you can even tell what is the return type of this method.
For this case, the DSL supports two special constructs that consist of
<em>phantom methods</em>. This means that you will return a method node that
doesn’t really exist but is defined in the context of type checking.
Three methods exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>newMethod(String name, Class returnType)</code></p>
</li>
<li>
<p><code>newMethod(String name, ClassNode returnType)</code></p>
</li>
<li>
<p><code>newMethod(String name, Callable&lt;ClassNode&gt; return Type)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All three variants do the same: they create a new method node which name
is the supplied name and define the return type of this method.
Moreover, the type checker would add those methods in
the&nbsp;<code>generatedMethods</code> list (see&nbsp;<code>isGenerated</code> below). The reason why we
only set a name and a return type is that it is only what you need in
90% of the cases. For example, in the&nbsp;<code>findByName</code> example upper, the
only thing you need to know is that&nbsp;<code>findByName</code> wouldn’t fail at
runtime, and that it returns a domain class. The&nbsp;<code>Callable</code> version of
return type is interesting because it defers the computation of the
return type when the type checker actually needs it. This is interesting
because in some circumstances, you may not know the actual return type
when the type checker demands it, so you can use a closure that will be
called each time&nbsp;<code>getReturnType</code> is called by the type checker on this
method node. If you combine this with deferred checks, you can achieve
pretty complex type checking including handling of forward references.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">newMethod</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// each time getReturnType on this method node will be called, this closure will be called!</span><span class="pln">
    println </span><span class="str">'Type checker called me!'</span><span class="pln">
    lookupClassNodeFor</span><span class="pun">(</span><span class="typ">Foo</span><span class="pun">)</span><span class="pln"> </span><span class="com">// return type</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Should you need more than the name and return type, you can always
create a new&nbsp;<code>MethodNode</code> by yourself.</p>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Scoping"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Scoping"></a>Scoping</h7>
<div class="paragraph">
<p>Scoping is very important in DSL type checking and is one of the reasons
why we couldn’t use a&nbsp;<em>pointcut</em> based approach to DSL type checking.
Basically, you must be able to define very precisely when your extension
applies and when it does not. Moreover, you must be able to handle
situations that a regular type checker would not be able to handle, such
as forward references:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">point a</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
line a</span><span class="pun">,</span><span class="pln">b </span><span class="com">// b is referenced afterwards!</span><span class="pln">
point b</span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="lit">2</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Say for example that you want to handle a builder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">builder</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">{</span><span class="pln">
   bar
   baz</span><span class="pun">(</span><span class="pln">bar</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your extension, then, should only be active once you’ve entered
the&nbsp;<code>foo</code> method, and inactive outside of this scope. But you could have
complex situations like multiple builders in the same file or embedded
builders (builders in builders). While you should not try to fix all
this from start (you must accept limitations to type checking), the type
checker does offer a nice mechanism to handle this: a scoping stack,
using the&nbsp;<code>newScope</code> and&nbsp;<code>scopeExit</code> methods.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>newScope</code> creates a new scope and puts it on top of the stack</p>
</li>
<li>
<p><code>scopeExits</code> pops a scope from the stack</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A scope consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a parent scope</p>
</li>
<li>
<p>a map of custom data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to look at the implementation, it’s simply a <code>LinkedHashMap</code>
(<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/GroovyTypeCheckingExtensionSupport/TypeCheckingScope.html">org.codehaus.groovy.transform.stc.GroovyTypeCheckingExtensionSupport.TypeCheckingScope</a>),
but it’s quite powerful. For example, you can use such a scope to store
a list of closures to be executed when you exit the scope. This is how
you would handle forward references:&nbsp;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> scope </span><span class="pun">=</span><span class="pln"> newScope</span><span class="pun">()</span><span class="pln">
scope</span><span class="pun">.</span><span class="pln">secondPassChecks </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="com">//...</span><span class="pln">
scope</span><span class="pun">.</span><span class="pln">secondPassChecks </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'executed later'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="com">// ...</span><span class="pln">
scopeExit </span><span class="pun">{</span><span class="pln">
    secondPassChecks</span><span class="pun">*.</span><span class="pln">run</span><span class="pun">()</span><span class="pln"> </span><span class="com">// execute deferred checks</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is to say, that if at some point you are not able to determine the
type of an expression, or that you are not able to check at this point
that an assignment is valid or not, you can still make the check later…
This is a very powerful feature. Now,&nbsp;<code>newScope</code> and&nbsp;<code>scopeExit</code>
provide some interesting syntactic sugar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">newScope </span><span class="pun">{</span><span class="pln">
    secondPassChecks </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At anytime in the DSL, you can access the current scope
using&nbsp;<code>getCurrentScope()</code> or more simply&nbsp;<code>currentScope</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">//...</span><span class="pln">
currentScope</span><span class="pun">.</span><span class="pln">secondPassChecks </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'executed later'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="com">// ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The general schema would then be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>determine a <em>pointcut</em> where you push a new scope on stack and
initialize custom variables within this scope</p>
</li>
<li>
<p>using the various events, you can use the information stored in your
custom scope to perform checks, defer checks,…</p>
</li>
<li>
<p>determine a <em>pointcut</em> where you exit the scope, call&nbsp;<code>scopeExit</code>
and eventually perform additional checks</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="Typecheckingextensions-Otherusefulmethods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Typecheckingextensions-Otherusefulmethods"></a>Other useful methods</h7>
<div class="paragraph">
<p>For the complete list of helper methods, please refer to
the&nbsp;<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/GroovyTypeCheckingExtensionSupport.html">org.codehaus.groovy.transform.stc.GroovyTypeCheckingExtensionSupport</a> and&nbsp;
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/stc/TypeCheckingExtension.html">org.codehaus.groovy.transform.stc.TypeCheckingExtension</a> classes.&nbsp;However,
take special attention to those methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>isDynamic</code>: takes a VariableExpression as argument and returns true
if the variable is a DynamicExpression, which means, in a script, that
it wasn’t defined using a type or <code>def</code>.</p>
</li>
<li>
<p><code>isGenerated</code>: takes a MethodNode as an argument and tells if the
method is one that was generated by the type checker extension using
the&nbsp;<code>newMethod</code> method</p>
</li>
<li>
<p><code>isAnnotatedBy</code>: takes an AST node and a Class (or ClassNode), and
tells if the node is annotated with this class. For example:
<code>isAnnotatedBy(node, NotNull)</code></p>
</li>
<li>
<p><code>getTargetMethod</code>: takes a method call as argument and returns
the&nbsp;<code>MethodNode</code> that the type checker has determined for it</p>
</li>
<li>
<p><code>delegatesTo</code>: emulates the behaviour of the&nbsp;<code>@DelegatesTo</code>
annotation. It allows you to tell that the argument will delegate to a
specific type (you can also specify the delegation strategy)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_advanced_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_type_checking_extensions"></a>Advanced type checking extensions</h5>
<div class="sect5">
<h6 id="_precompiled_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_precompiled_type_checking_extensions"></a>Precompiled type checking extensions</h6>
<div class="paragraph">
<p>All the examples above use type checking scripts. They are found in source form in classpath, meaning that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a Groovy source file, corresponding to the type checking extension, is available on compilation classpath</p>
</li>
<li>
<p>this file is compiled by the Groovy compiler for each source unit being compiled (often, a source unit corresponds
to a single file)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is a very convenient way to develop type checking extensions, however it implies a slower compilation phase, because
of the compilation of the extension itself for each file being compiled. For those reasons, it can be practical to rely
on a precompiled extension. You have two options to do this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>write the extension in Groovy, compile it, then use a reference to the extension class instead of the source</p>
</li>
<li>
<p>write the extension in Java, compile it, then use a reference to the extension class</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Writing a type checking extension in Groovy is the easiest path. Basically, the idea is that the type checking extension
script becomes the body of the main method of a type checking extension class, as illustrated here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">GroovyTypeCheckingExtensionSupport</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">PrecompiledExtension</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">GroovyTypeCheckingExtensionSupport</span><span class="pun">.</span><span class="typ">TypeCheckingDSL</span><span class="pln"> </span><span class="pun">{</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="typ">Object</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                                                          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        unresolvedVariable </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="str">'robot'</span><span class="pun">==</span><span class="kwd">var</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                storeType</span><span class="pun">(</span><span class="kwd">var</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">Robot</span><span class="pun">))</span><span class="pln">                                         </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
                handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>extending the <code>TypeCheckingDSL</code> class is the easiest</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>then the extension code needs to go inside the <code>run</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and you can use the very same events as an extension written in source form</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Setting up the extension is very similar to using a source form extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">TypeChecked</span><span class="pun">,</span><span class="pln">
        extensions</span><span class="pun">:[</span><span class="str">'typing.PrecompiledExtension'</span><span class="pun">])</span><span class="pln">
</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference is that instead of using a path in classpath, you just specify the fully qualified class name of the
precompiled extension.</p>
</div>
<div class="paragraph">
<p>In case you really want to write an extension in Java, then you will not benefit from the type checking extension DSL.
The extension above can be rewritten in Java this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">ast</span><span class="pun">.</span><span class="typ">ClassHelper</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">ast</span><span class="pun">.</span><span class="pln">expr</span><span class="pun">.</span><span class="typ">VariableExpression</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">AbstractTypeCheckingExtension</span><span class="pun">;</span><span class="pln">


</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">transform</span><span class="pun">.</span><span class="pln">stc</span><span class="pun">.</span><span class="typ">StaticTypeCheckingVisitor</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">PrecompiledJavaExtension</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractTypeCheckingExtension</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">PrecompiledJavaExtension</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">StaticTypeCheckingVisitor</span><span class="pln"> typeCheckingVisitor</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">typeCheckingVisitor</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> handleUnresolvedVariableExpression</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">VariableExpression</span><span class="pln"> vexp</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">          </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="str">"robot"</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">vexp</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            storeType</span><span class="pun">(</span><span class="pln">vexp</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ClassHelper</span><span class="pun">.</span><span class="pln">make</span><span class="pun">(</span><span class="typ">Robot</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">));</span><span class="pln">
            setHandled</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>extend the <code>AbstractTypeCheckingExtension</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>then override the <code>handleXXX</code> methods as required</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_using_grab_in_a_type_checking_extension"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_grab_in_a_type_checking_extension"></a>Using @Grab in a type checking extension</h6>
<div class="paragraph">
<p>It is totally possible to use the <code>@Grab</code> annotation in a type checking extension.
This means you can include libraries that would only be
available at compile time. In that case, you must understand that you
would increase the time of compilation significantly (at least, the
first time it grabs the dependencies).</p>
</div>
</div>
<div class="sect5">
<h6 id="_sharing_or_packaging_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sharing_or_packaging_type_checking_extensions"></a>Sharing or packaging type checking extensions</h6>
<div class="paragraph">
<p>A type checking extension is just a script that need to be on classpath. As such,
you can share it as is, or bundle it in a jar file that would be added to classpath.</p>
</div>
</div>
<div class="sect5">
<h6 id="_global_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_global_type_checking_extensions"></a>Global type checking extensions</h6>
<div class="paragraph">
<p>While you can configure the compiler to transparently add type checking extensions to your
script, there is currently no way to apply an extension transparently just by having it on
classpath.</p>
</div>
</div>
<div class="sect5">
<h6 id="_type_checking_extensions_and_compilestatic"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checking_extensions_and_compilestatic"></a>Type checking extensions and @CompileStatic</h6>
<div class="paragraph">
<p>Type checking extensions are used with <code>@TypeChecked</code> but can also be used with <code>@CompileStatic</code>. However, you must
be aware that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a type checking extension used with <code>@CompileStatic</code> will in general not be sufficient to let the compiler know how
to generate statically compilable code from "unsafe" code</p>
</li>
<li>
<p>it is possible to use a type checking extension with <code>@CompileStatic</code> just to enhance type checking, that is to say
introduce <strong>more</strong> compilation errors, without actually dealing with dynamic code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s explain the first point, which is that even if you use an extension, the compiler will not know how to compile
your code statically: technically, even if you tell the type checker what is the type of a dynamic
variable, for example, it would not know how to compile it. Is it <code>getBinding('foo')</code>, <code>getProperty('foo')</code>,
<code>delegate.getFoo()</code>,…? There’s absolutely no direct way to tell the static compiler how to compile such
code even if you use a type checking extension (that would, again, only give hints about the type).</p>
</div>
<div class="paragraph">
<p>One possible solution for this particular example is to instruct the compiler to use <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#mixed-mode">mixed mode compilation</a>.
The more advanced one is to use <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#ast-xform-as-extension">AST transformations during type checking</a> but it is far more
complex.</p>
</div>
<div class="paragraph">
<p>Type checking extensions allow you to help the type checker where it
fails, but it also allow you to fail where it doesn’t. In that context,
it makes sense to support extensions for&nbsp;<code>@CompileStatic</code> too. Imagine
an extension that is capable of type checking SQL queries. In that case,
the extension would be valid in both dynamic and static context, because
without the extension, the code would still pass.</p>
</div>
</div>
<div class="sect5">
<h6 id="mixed-mode"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#mixed-mode"></a>Mixed mode compilation</h6>
<div class="paragraph">
<p>In the previous section, we highlighted the fact that you can activate type checking extensions with
<code>@CompileStatic</code>. In that context, the type checker would not complain anymore about some unresolved variables or
unknown method calls, but it would still wouldn’t know how to compile them statically.</p>
</div>
<div class="paragraph">
<p>Mixed mode compilation offers a third way, which is to instruct the compiler that whenever an unresolved variable
or method call is found, then it should fall back to a dynamic mode. This is possible thanks to type checking extensions
and a special <code>makeDynamic</code> call.</p>
</div>
<div class="paragraph">
<p>To illustrate this, let’s come back to the <code>Robot</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">robot</span><span class="pun">.</span><span class="pln">move </span><span class="lit">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And let’s try to activate our type checking extension using <code>@CompileStatic</code> instead of <code>@TypeChecked</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">CompileStatic</span><span class="pun">,</span><span class="pln">                                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        extensions</span><span class="pun">:[</span><span class="str">'robotextension.groovy'</span><span class="pun">])</span><span class="pln">               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> robot </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Robot</span><span class="pun">()</span><span class="pln">
shell</span><span class="pun">.</span><span class="pln">setVariable</span><span class="pun">(</span><span class="str">'robot'</span><span class="pun">,</span><span class="pln"> robot</span><span class="pun">)</span><span class="pln">
shell</span><span class="pun">.</span><span class="pln">evaluate</span><span class="pun">(</span><span class="pln">script</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply <code>@CompileStatic</code> transparently</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Activate the type checking extension</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The script will run fine because the static compiler is told about the type of the <code>robot</code> variable, so it is capable
of making a direct call to <code>move</code>. But before that, how did the compiler know how to get the <code>robot</code> variable? In fact
by default, in a type checking extension, setting <code>handled=true</code> on an unresolved variable will automatically trigger
a dynamic resolution, so in this case you don’t have anything special to make the compiler use a mixed mode. However,
let’s slightly update our example, starting from the robot script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">move </span><span class="lit">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here you can notice that there is no reference to <code>robot</code> anymore. Our extension will not help then because we will not
be able to instruct the compiler that <code>move</code> is done on a <code>Robot</code> instance. This example of code can be executed in a
totally dynamic way thanks to the help of a <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/util/DelegatingScript.html">groovy.util.DelegatingScript</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CompilerConfiguration</span><span class="pun">()</span><span class="pln">
config</span><span class="pun">.</span><span class="pln">scriptBaseClass </span><span class="pun">=</span><span class="pln"> </span><span class="str">'groovy.util.DelegatingScript'</span><span class="pln">     </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> shell </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GroovyShell</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> runner </span><span class="pun">=</span><span class="pln"> shell</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">script</span><span class="pun">)</span><span class="pln">                            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
runner</span><span class="pun">.</span><span class="pln">setDelegate</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Robot</span><span class="pun">())</span><span class="pln">                             </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
runner</span><span class="pun">.</span><span class="pln">run</span><span class="pun">()</span><span class="pln">                                                </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we configure the compiler to use a <code>DelegatingScript</code> as the base class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the script source needs to be parsed and will return an instance of <code>DelegatingScript</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we can then call <code>setDelegate</code> to use a <code>Robot</code> as the delegate of the script</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>then execute the script. <code>move</code> will be directly executed on the delegate</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If we want this to pass with <code>@CompileStatic</code>, we have to use a type checking extension, so let’s update our configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">config</span><span class="pun">.</span><span class="pln">addCompilationCustomizers</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ASTTransformationCustomizer</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">CompileStatic</span><span class="pun">,</span><span class="pln">                                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        extensions</span><span class="pun">:[</span><span class="str">'robotextension2.groovy'</span><span class="pun">])</span><span class="pln">              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>apply <code>@CompileStatic</code> transparently</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>use an alternate type checking extension meant to recognize the call to <code>move</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then in the previous section we have learnt how to deal with unrecognized method calls, so we are able to write this
extension:</p>
</div>
<div class="listingblock">
<div class="title">robotextension2.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">methodNotFound </span><span class="pun">{</span><span class="pln"> receiver</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> argList</span><span class="pun">,</span><span class="pln"> argTypes</span><span class="pun">,</span><span class="pln"> call </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isMethodCallExpression</span><span class="pun">(</span><span class="pln">call</span><span class="pun">)</span><span class="pln">                        </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> call</span><span class="pun">.</span><span class="pln">implicitThis                                </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="str">'move'</span><span class="pun">==</span><span class="pln">name                                     </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> argTypes</span><span class="pun">.</span><span class="pln">length</span><span class="pun">==</span><span class="lit">1</span><span class="pln">                               </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> argTypes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">                 </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        handled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">                                      </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">
        newMethod</span><span class="pun">(</span><span class="str">'move'</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">Robot</span><span class="pun">))</span><span class="pln">              </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if the call is a method call (not a static method call)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>that this call is made on "implicit this" (no explicit <code>this.</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>that the method being called is <code>move</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and that the call is done with a single argument</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>and that argument is of type <code>int</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>then tell the type checker that the call is valid</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>and that the return type of the call is <code>Robot</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you try to execute this code, then you could be surprised that it actually fails at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.lang.NoSuchMethodError: java.lang.Object.move()Ltyping/Robot;</pre>
</div>
</div>
<div class="paragraph">
<p>The reason is very simple: while the type checking extension is sufficient for <code>@TypeChecked</code>, which does not involve
static compilation, it is not enough for <code>@CompileStatic</code> which requires additional information. In this case, you told
the compiler that the method existed, but you didn’t explain to it <strong>what</strong> method it is in reality, and what is the
receiver of the message (the delegate).</p>
</div>
<div class="paragraph">
<p>Fixing this is very easy and just implies replacing the <code>newMethod</code> call with something else:</p>
</div>
<div class="listingblock">
<div class="title">robotextension3.groovy</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">methodNotFound </span><span class="pun">{</span><span class="pln"> receiver</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> argList</span><span class="pun">,</span><span class="pln"> argTypes</span><span class="pun">,</span><span class="pln"> call </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isMethodCallExpression</span><span class="pun">(</span><span class="pln">call</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> call</span><span class="pun">.</span><span class="pln">implicitThis
        </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="str">'move'</span><span class="pun">==</span><span class="pln">name
        </span><span class="pun">&amp;&amp;</span><span class="pln"> argTypes</span><span class="pun">.</span><span class="pln">length</span><span class="pun">==</span><span class="lit">1</span><span class="pln">
        </span><span class="pun">&amp;&amp;</span><span class="pln"> argTypes</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        makeDynamic</span><span class="pun">(</span><span class="pln">call</span><span class="pun">,</span><span class="pln"> classNodeFor</span><span class="pun">(</span><span class="typ">Robot</span><span class="pun">))</span><span class="pln">              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>tell the compiler that the call should be make dynamic</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>makeDynamic</code> call does 3 things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it returns a virtual method just like <code>newMethod</code></p>
</li>
<li>
<p>automatically sets the <code>handled</code> flag to <code>true</code> for you</p>
</li>
<li>
<p>but also marks the <code>call</code> to be done dynamically</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So when the compiler will have to generate bytecode for the call to <code>move</code>, since it is now marked as a dynamic call,
it will fallback to the dynamic compiler and let it handle the call. And since the extension tells us that the return
type of the dynamic call is a <code>Robot</code>, subsequent calls will be done statically!</p>
</div>
<div class="paragraph">
<p>Some would wonder why the static compiler doesn’t do this by default without an extension. It is a design decision:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the code is statically compiled, we normally want type safety and best performance</p>
</li>
<li>
<p>so if unrecognized variables/method calls are made dynamic, you loose type safety, but also all support for typos at
compile time!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In short, if you want to have mixed mode compilation, it <strong>has</strong> to be explicit, through a type checking extension, so
that the compiler, and the designer of the DSL, are totally aware of what they are doing.</p>
</div>
<div class="paragraph">
<p><code>makeDynamic</code> can be used on 3 kind of AST nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a method node (<code>MethodNode</code>)</p>
</li>
<li>
<p>a variable (<code>VariableExpression</code>)</p>
</li>
<li>
<p>a property expression (<code>PropertyExpression</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If that is not enough, then it means that static compilation cannot be done directly and that you have to rely on AST
transformations.</p>
</div>
</div>
<div class="sect5">
<h6 id="ast-xform-as-extension"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ast-xform-as-extension"></a>Transforming the AST in an extension</h6>
<div class="paragraph">
<p>Type checking extensions look very attractive from an AST transformation design point of view: extensions have access
to context like inferred types, which is often nice to have. And an extension has a direct access to the abstract
syntax tree. Since you have access to the AST, there is nothing in theory that prevents
you from modifying the AST. However, we do not recommend you to do so, unless you are an advanced AST transformation
designer and well aware of the compiler internals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First of all, you would explicitly break the contract of type checking, which is to annotate,
and only annotate the AST. Type checking should&nbsp;<strong>not</strong> modify the AST tree because you wouldn’t be able to
guarantee anymore that code without the&nbsp;<em>@TypeChecked</em> annotation
behaves the same without the annotation.</p>
</li>
<li>
<p>If your extension is meant to work with&nbsp;<em>@CompileStatic</em>, then you&nbsp;<strong>can</strong> modify the AST because
this is indeed what&nbsp;<em>@CompileStatic</em> will eventually do. Static compilation doesn’t guarantee the same semantics at
dynamic Groovy so there is effectively a difference between code compiled with&nbsp;<em>@CompileStatic</em> and code compiled
with&nbsp;<em>@TypeChecked</em>. It’s up to you to choose whatever strategy you want to update the AST, but probably
using an AST transformation that runs before type checking is easier.</p>
</li>
<li>
<p>if you cannot rely on a transformation that kicks in before the type checker, then you must be <strong>very</strong> careful</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The type checking phase is the last phase running in the compiler before bytecode generation. All other AST
transformations run before that and the compiler does a very good job at "fixing" incorrect AST generated before the
type checking phase. As soon as you perform a transformation during type checking, for example directly in a type
checking extension, then you have to do all this work of generating a 100% compiler compliant abstract syntax tree by
yourself, which can easily become complex. That’s why we do not recommend to go that way if you are beginning with
type checking extensions and AST transformations.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_examples"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_examples"></a>Examples</h6>
<div class="paragraph">
<p>Examples of real life type checking extensions are easy to find. You can download the source code for Groovy and
take a look at the
<a href="https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/TypeCheckingExtensionsTest.groovy">TypeCheckingExtensionsTest</a>
class which is linked to
<a href="https://github.com/apache/groovy/tree/master/src/test-resources/groovy/transform/stc">various extension scripts</a>.</p>
</div>
<div class="paragraph">
<p>An example of a complex type checking extension can be found in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/markup-template-engine.html">Markup Template Engine</a>
source code: this template engine relies on a type checking extension and AST transformations to transform templates into
fully statically compiled code. Sources for this can be found
<a href="https://github.com/apache/groovy/tree/master/subprojects/groovy-templates/src/main/groovy/groovy/text/markup">here</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tools"></a>2. Tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_running_groovy_from_the_commandline"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_running_groovy_from_the_commandline"></a>2.1. Running Groovy from the commandline</h3>
<div class="sect3">
<h4 id="section-groovy-commandline"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovy-commandline"></a>2.1.1. groovy, the Groovy command</h4>
<div class="paragraph">
<p><code>groovy</code> invokes the Groovy command line processor. It allows you to run inline Groovy expressions, and scripts, tests or application within groovy files.
It plays a similar role to <code>java</code> in the Java world but handles inline scripts and rather than invoking class files, it is normally called with scripts
and will automatically call the Groovy compiler as needed.</p>
</div>
<div class="paragraph">
<p>The easiest way to run a Groovy script, test or application is to run the following command at your shell prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; groovy MyScript.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>.groovy</code> part is optional. The <code>groovy</code> command supports a number of command line switches:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Short version</th>
<th class="tableblock halign-left valign-top">Long version</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-pr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--enable-preview</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable preview Java features (JEP 12) (jdk12+ only).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --enable-preview Person.groovy</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--autosplit &lt;splitPattern&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">split lines using splitPattern (default '\s') using implicit 'split' variable</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--basescript &lt;class&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base class name for scripts (must derive from Script)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--encoding &lt;charset&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specify the encoding of the files</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-cp &lt;path&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-classpath &lt;path&gt;<br>
--classpath &lt;path&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify the compilation classpath. Must be the first argument.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy -cp lib/dep.jar MyScript</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--configscript &lt;path&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced compiler configuration script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --configscript config/config.groovy src/Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--define &lt;name=value&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">define a system property</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">debug mode will print out full stack traces</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--disableopt &lt;optlist&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">disables one or all optimization elements.<br>
optlist can be a comma separated list with the elements:<br>
all (disables all optimizations),<br>
int (disable any int based optimizations)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-e &lt;script&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specify an inline command line script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy -e "println new Date()"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-h</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--help</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays usage information for the command line groovy command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --help</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-i &lt;extension&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">modify files in place; create backup if extension is given (e.g. '.bak')</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--indy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables invokedynamic support. Requires Java 7+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --indy Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-l &lt;port&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listen on a port and process inbound lines (default: 1960)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-n</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">process files line by line using implicit 'line' variable</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-p</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">process files line by line and print result (see also -n)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-v</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">display the Groovy and JVM versions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy -v</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-pa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates metadata for reflection on method parameter names on JDK 8 and above. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --parameters Person.groovy</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compiling_groovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compiling_groovy"></a>2.2. Compiling Groovy</h3>
<div class="sect3">
<h4 id="section-groovyc-compiler"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyc-compiler"></a>2.2.1. groovyc, the Groovy compiler</h4>
<div class="paragraph">
<p><code>groovyc</code> is the Groovy compiler command line tool. It allows you to compile Groovy sources into bytecode. It plays
the same role as <code>javac</code> in the Java world. The easiest way to compile a Groovy script or class is to run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovyc MyClass.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>This will produce a <code>MyClass.class</code> file (as well as other .class files depending on the contents of the source). <code>groovyc</code> supports
a number of command line switches:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Short version</th>
<th class="tableblock halign-left valign-top">Long version</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@argfile</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read options and source files from specified file.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc @conf/args</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-cp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-classpath, --classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify the compilation classpath. Must be the first argument.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -cp lib/dep.jar MyClass.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--sourcepath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory where to find source files. Not used anymore. Specifying this parameter will have no effect.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--temp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temporary directory for the compiler</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--encoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoding of the source files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --encoding utf-8 script.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--help</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays help for the command line groovyc tool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --help</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-d</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify where to place generated class files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -d target Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-v</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays the compiler version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -v</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--exception</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays the stack trace in case of compilation error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -e script.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-j</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--jointCompilation*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables joint compilation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--basescript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base class name for scripts (must derive from Script)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-indy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--indy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables invokedynamic support. Requires Java 7+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --indy Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--configscript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced compiler configuration script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --configscript config/config.groovy src/Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-Jproperty=value</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties to be passed to <code>javac</code> if joint compilation is enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j -Jtarget=1.6 -Jsource=1.6 A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-Fflag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flags to be passed to <code>javac</code> if joint compilation is enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j -Fnowarn A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-pa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates metadata for reflection on method parameter names. Requires Java 8+.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --parameters Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-pr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--enable-preview</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable preview Java features (JEP 12) (jdk12+ only).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy --enable-preview Person.groovy</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong>
* for a full description of joint compilation, see <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-jointcompilation">the joint compilation section</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ant_task"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ant_task"></a>2.2.2. Ant task</h4>
<div class="sect4">
<h5 id="ThegroovycAntTask-groovyc"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovyc"></a><code>&lt;groovyc&gt;</code></h5>
<div class="sect5">
<h6 id="ThegroovycAntTask-Description"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-Description"></a>Description</h6>
<div class="paragraph">
<p>Compiles Groovy source files and, if joint compilation option is used, Java source files.</p>
</div>
</div>
<div class="sect5">
<h6 id="ThegroovycAntTask-Requiredtaskdef"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-Requiredtaskdef"></a>Required taskdef</h6>
<div class="paragraph">
<p>Assuming all the groovy jars you need are in <em>my.classpath</em> (this will be <code>groovy-VERSION.jar</code>,
<code>groovy-ant-VERSION.jar</code> plus any modules and transitive dependencies you might be using)
you will need to declare this task at some point in the <code>build.xml</code> prior to the <code>groovyc</code> task being invoked.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"groovyc"</span><span class="pln">
         </span><span class="atn">classname</span><span class="pun">=</span><span class="atv">"org.codehaus.groovy.ant.Groovyc"</span><span class="pln">
         </span><span class="atn">classpathref</span><span class="pun">=</span><span class="atv">"my.classpath"</span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="ThegroovycAntTask-groovycAttributes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovycAttributes"></a>&lt;groovyc&gt; Attributes</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">errorProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The property to set on compilation failure. This property will be set if
the compilation fails.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">srcdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the Groovy (and possibly Java) source files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">destdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to store the class files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The classpath to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpathref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The classpath to use given as a path references.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourcepath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sourcepath to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourcepathref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sourcepath to use given as a path reference.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">encoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoding of source files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">verbose</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asks the compiler for verbose output; defaults to no.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeAntRuntime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to include the Ant run-time libraries in the
classpath; defaults to yes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeJavaRuntime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to include the default run-time libraries
from the executing VM in the classpath; defaults to no.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeDestClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property controls whether to include the destination
classes directory in the classpath given to the compiler. The default value is "true".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fork</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to execute groovyc using a spawned instance of the JVM;
defaults to no.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memoryInitialSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The initial size of the memory for the underlying
VM, if using fork mode; ignored otherwise. Defaults to the standard VM
memory setting. (Examples: 83886080, 81920k, or 80m)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memoryMaximumSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size of the memory for the underlying
VM, if using fork mode; ignored otherwise. Defaults to the standard VM
memory setting. (Examples: 83886080, 81920k, or 80m)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">failonerror</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether compilation errors will fail the build;
defaults to true.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">proceed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inverse alias for <em>failonerror</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listfiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the source files to be compiled will be
listed; defaults to no.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stacktrace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if true each compile error message will contain a
stacktrace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">indy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable compilation with the ``invoke dynamic'' support when using
Groovy 2.0 and beyond and running on JDK 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scriptBaseClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the base class for Groovy scripts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stubdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the stub directory into which the Java source stub files should be generated.
The directory need not exist and will not be deleted automatically - though its contents
will be cleared unless 'keepStubs' is true. Ignored when forked.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keepStubs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the keepStubs flag. Defaults to false. Set to true for debugging.
Ignored when forked.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forceLookupUnnamedFiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Groovyc Ant task is frequently used in the context of a build system
that knows the complete list of source files to be compiled. In such a
context, it is wasteful for the Groovy compiler to go searching the
classpath when looking for source files and hence by default the
Groovyc Ant task calls the compiler in a special mode with such searching
turned off. If you wish the compiler to search for source files then
you need to set this flag to true. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configscript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the configuration file used to customize the compilation configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates metadata for reflection on method parameter names on JDK 8 and above.
Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetBytecode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the bytecode compatibility level.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javahome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the <code>java.home</code> value to use, default is the current JDK’s home.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the name of the java executable to use when invoking the compiler in forked mode,
ignored otherwise.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scriptExtension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the extension to use when searching for Groovy source files.
Accepts extensions in the form *.groovy, .groovy or groovy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updatedProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The property to set on compilation success. This property will not be set if
the compilation fails, or if there are no files to compile.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;groovyc</span><span class="pln"> </span><span class="atn">srcdir</span><span class="pun">=</span><span class="atv">"src"</span><span class="pln"> </span><span class="atn">destdir</span><span class="pun">=</span><span class="atv">"target/classes"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;/groovyc&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="ThegroovycAntTask-groovycNestedElements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-groovycNestedElements"></a>&lt;groovyc&gt; Nested Elements</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">element</th>
<th class="tableblock halign-left valign-top">kind</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Replaces Attribute</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javac task</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jointCompilationOptions</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a path structure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes (unless srcdir is used)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srcdir</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a path structure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpath</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>For path structures see for example
<a href="http://ant.apache.org/manual/using.html#path" class="bare">http://ant.apache.org/manual/using.html#path</a></p>
</li>
<li>
<p>For usages of the javac task see
<a href="https://ant.apache.org/manual/Tasks/javac.html" class="bare">https://ant.apache.org/manual/Tasks/javac.html</a></p>
</li>
<li>
<p>The nested javac task behaves more or less as documented for the
top-level <code>javac</code> task. <code>srcdir</code>, <code>destdir</code>, <code>classpath</code>, <code>encoding</code> for the
nested <code>javac</code> task are taken from the enclosing <code>groovyc</code> task. If these
attributes are specified then they are added, they do not replace. In
fact, you should not attempt to overwrite the destination. Other
attributes and nested elements are unaffected, for example <code>fork</code>,
<code>memoryMaximumSize</code>, etc. may be used freely.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="ThegroovycAntTask-JointCompilation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovycAntTask-JointCompilation"></a>Joint Compilation</h6>
<div class="paragraph">
<p>Joint compilation is enabled by using an embedded <code>javac</code> element, as shown in
the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;groovyc</span><span class="pln"> </span><span class="atn">srcdir</span><span class="pun">=</span><span class="atv">"${testSourceDirectory}"</span><span class="pln"> </span><span class="atn">destdir</span><span class="pun">=</span><span class="atv">"${testClassesDirectory}"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;classpath&gt;</span><span class="pln">
    </span><span class="tag">&lt;pathelement</span><span class="pln"> </span><span class="atn">path</span><span class="pun">=</span><span class="atv">"${mainClassesDirectory}"</span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;pathelement</span><span class="pln"> </span><span class="atn">path</span><span class="pun">=</span><span class="atv">"${testClassesDirectory}"</span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;path</span><span class="pln"> </span><span class="atn">refid</span><span class="pun">=</span><span class="atv">"testPath"</span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;/classpath&gt;</span><span class="pln">
  </span><span class="tag">&lt;javac</span><span class="pln"> </span><span class="atn">source</span><span class="pun">=</span><span class="atv">"1.7"</span><span class="pln"> </span><span class="atn">target</span><span class="pun">=</span><span class="atv">"1.7"</span><span class="pln"> </span><span class="atn">debug</span><span class="pun">=</span><span class="atv">"on"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/groovyc&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is rare to specify <code>srcdir</code> and <code>destdir</code>, the nested <code>javac</code> task is provided with the <code>srcdir</code>
and <code>destdir</code> values from the enclosing <code>groovyc</code> task, and it is invariable
the right thing to do just to leave this as is.
To restate: the <code>javac</code> task gets the <code>srcdir</code>, <code>destdir</code> and <code>classpath</code> from
the enclosing <code>groovyc</code> task.</p>
</div>
<div class="paragraph">
<p>More details about joint compilation can be found in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-jointcompilation">joint compilation</a> section.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Gant"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gant"></a>2.2.3. Gant</h4>
<div class="paragraph">
<p><a href="https://github.com/Gant/Gant">Gant</a> is a tool for scripting Ant tasks using Groovy
instead of XML to specify the logic. As such, it has exactly the same features
as the Groovyc Ant task.</p>
</div>
</div>
<div class="sect3">
<h4 id="Gradle"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gradle"></a>2.2.4. Gradle</h4>
<div class="paragraph">
<p><a href="http://www.gradle.org/">Gradle</a> is a build tool that allows you to leverage the
flexibility of <a href="http://ant.apache.org/">Ant</a>, while keeping the simplicity of
convention over configuration that tools like <a href="http://maven.apache.org/">Maven</a>
offer. Builds are specified using a Groovy DSL, which offers great flexibility
and succinctness.</p>
</div>
</div>
<div class="sect3">
<h4 id="_maven_integration"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maven_integration"></a>2.2.5. Maven integration</h4>
<div class="paragraph">
<p>There are several approaches to compiling Groovy code in your Maven
projects. <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmavenplus">GMavenPlus</a> is the
most flexible and feature rich, but like most Groovy compiler tools, it can
have difficulties with joint Java-Groovy projects (for the same reason
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven">GMaven</a> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gradle">Gradle</a> can have issues).
The <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyeclipse">Groovy-Eclipse compiler plugin for Maven</a>
sidesteps the joint compilation issues. Read
<a href="https://github.com/groovy/groovy-eclipse/wiki/Groovy-Eclipse-Maven-plugin#why-another-groovy-compiler-for-maven-what-about-gmaven">this</a>
for a deeper discussion of the benefits and disadvantages of the two
approaches.</p>
</div>
<div class="paragraph">
<p>A third approach is to use Maven’s Ant plugin to compile a groovy
project. Note that the Ant plugin is bound to the compile and
test-compile phases of the build in the example below. It will be
invoked during these phases and the contained tasks will be carried out
which runs the Groovy compiler over the source and test directories. The
resulting Java classes will coexist with and be treated like any
standard Java classes compiled from Java source and will appear no
different to the JRE, or the JUnit runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;project</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0"</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
    </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;modelVersion&gt;</span><span class="pln">4.0.0</span><span class="tag">&lt;/modelVersion&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">com.mycomp.MyGroovy</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">MyGroovy</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;packaging&gt;</span><span class="pln">jar</span><span class="tag">&lt;/packaging&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">1.0-SNAPSHOT</span><span class="tag">&lt;/version&gt;</span><span class="pln">
    </span><span class="tag">&lt;name&gt;</span><span class="pln">Maven Example building a Groovy project</span><span class="tag">&lt;/name&gt;</span><span class="pln">
    </span><span class="tag">&lt;dependencies&gt;</span><span class="pln">
        </span><span class="tag">&lt;dependency&gt;</span><span class="pln">
            </span><span class="tag">&lt;groupId&gt;</span><span class="pln">junit</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
            </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">junit</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
            </span><span class="tag">&lt;version&gt;</span><span class="pln">3.8.1</span><span class="tag">&lt;/version&gt;</span><span class="pln">
            </span><span class="tag">&lt;scope&gt;</span><span class="pln">test</span><span class="tag">&lt;/scope&gt;</span><span class="pln">
        </span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
        </span><span class="tag">&lt;dependency&gt;</span><span class="pln">
            </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.codehaus.groovy</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
            </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">groovy-all</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
            </span><span class="tag">&lt;version&gt;</span><span class="pln">2.5.0</span><span class="tag">&lt;/version&gt;</span><span class="pln">
            </span><span class="tag">&lt;type&gt;</span><span class="pln">pom</span><span class="tag">&lt;/type&gt;</span><span class="pln"> </span><span class="com">&lt;!-- required JUST since Groovy 2.5.0 --&gt;</span><span class="pln">
        </span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;/dependencies&gt;</span><span class="pln">
    </span><span class="tag">&lt;build&gt;</span><span class="pln">
        </span><span class="tag">&lt;plugins&gt;</span><span class="pln">
            </span><span class="tag">&lt;plugin&gt;</span><span class="pln">
                </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">maven-antrun-plugin</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
                </span><span class="tag">&lt;executions&gt;</span><span class="pln">
                    </span><span class="tag">&lt;execution&gt;</span><span class="pln">
                        </span><span class="tag">&lt;id&gt;</span><span class="pln">compile</span><span class="tag">&lt;/id&gt;</span><span class="pln">
                        </span><span class="tag">&lt;phase&gt;</span><span class="pln">compile</span><span class="tag">&lt;/phase&gt;</span><span class="pln">
                        </span><span class="tag">&lt;configuration&gt;</span><span class="pln">
                            </span><span class="tag">&lt;tasks&gt;</span><span class="pln">
                                </span><span class="tag">&lt;mkdir</span><span class="pln"> </span><span class="atn">dir</span><span class="pun">=</span><span class="atv">"${basedir}/src/main/groovy"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"groovyc"</span><span class="pln">
                                    </span><span class="atn">classname</span><span class="pun">=</span><span class="atv">"org.codehaus.groovy.ant.Groovyc"</span><span class="tag">&gt;</span><span class="pln">
                                    </span><span class="tag">&lt;classpath</span><span class="pln"> </span><span class="atn">refid</span><span class="pun">=</span><span class="atv">"maven.compile.classpath"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;/taskdef&gt;</span><span class="pln">
                                </span><span class="tag">&lt;mkdir</span><span class="pln"> </span><span class="atn">dir</span><span class="pun">=</span><span class="atv">"${project.build.outputDirectory}"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;groovyc</span><span class="pln"> </span><span class="atn">destdir</span><span class="pun">=</span><span class="atv">"${project.build.outputDirectory}"</span><span class="pln">
                                    </span><span class="atn">srcdir</span><span class="pun">=</span><span class="atv">"${basedir}/src/main/groovy/"</span><span class="pln"> </span><span class="atn">listfiles</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
                                    </span><span class="tag">&lt;classpath</span><span class="pln"> </span><span class="atn">refid</span><span class="pun">=</span><span class="atv">"maven.compile.classpath"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;/groovyc&gt;</span><span class="pln">
                            </span><span class="tag">&lt;/tasks&gt;</span><span class="pln">
                        </span><span class="tag">&lt;/configuration&gt;</span><span class="pln">
                        </span><span class="tag">&lt;goals&gt;</span><span class="pln">
                            </span><span class="tag">&lt;goal&gt;</span><span class="pln">run</span><span class="tag">&lt;/goal&gt;</span><span class="pln">
                        </span><span class="tag">&lt;/goals&gt;</span><span class="pln">
                    </span><span class="tag">&lt;/execution&gt;</span><span class="pln">
                    </span><span class="tag">&lt;execution&gt;</span><span class="pln">
                        </span><span class="tag">&lt;id&gt;</span><span class="pln">test-compile</span><span class="tag">&lt;/id&gt;</span><span class="pln">
                        </span><span class="tag">&lt;phase&gt;</span><span class="pln">test-compile</span><span class="tag">&lt;/phase&gt;</span><span class="pln">
                        </span><span class="tag">&lt;configuration&gt;</span><span class="pln">
                            </span><span class="tag">&lt;tasks&gt;</span><span class="pln">
                                </span><span class="tag">&lt;mkdir</span><span class="pln"> </span><span class="atn">dir</span><span class="pun">=</span><span class="atv">"${basedir}/src/test/groovy"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"groovyc"</span><span class="pln">
                                    </span><span class="atn">classname</span><span class="pun">=</span><span class="atv">"org.codehaus.groovy.ant.Groovyc"</span><span class="tag">&gt;</span><span class="pln">
                                    </span><span class="tag">&lt;classpath</span><span class="pln"> </span><span class="atn">refid</span><span class="pun">=</span><span class="atv">"maven.test.classpath"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;/taskdef&gt;</span><span class="pln">
                                </span><span class="tag">&lt;mkdir</span><span class="pln"> </span><span class="atn">dir</span><span class="pun">=</span><span class="atv">"${project.build.testOutputDirectory}"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;groovyc</span><span class="pln"> </span><span class="atn">destdir</span><span class="pun">=</span><span class="atv">"${project.build.testOutputDirectory}"</span><span class="pln">
                                    </span><span class="atn">srcdir</span><span class="pun">=</span><span class="atv">"${basedir}/src/test/groovy/"</span><span class="pln"> </span><span class="atn">listfiles</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
                                    </span><span class="tag">&lt;classpath</span><span class="pln"> </span><span class="atn">refid</span><span class="pun">=</span><span class="atv">"maven.test.classpath"</span><span class="tag">/&gt;</span><span class="pln">
                                </span><span class="tag">&lt;/groovyc&gt;</span><span class="pln">
                            </span><span class="tag">&lt;/tasks&gt;</span><span class="pln">
                        </span><span class="tag">&lt;/configuration&gt;</span><span class="pln">
                        </span><span class="tag">&lt;goals&gt;</span><span class="pln">
                            </span><span class="tag">&lt;goal&gt;</span><span class="pln">run</span><span class="tag">&lt;/goal&gt;</span><span class="pln">
                        </span><span class="tag">&lt;/goals&gt;</span><span class="pln">
                    </span><span class="tag">&lt;/execution&gt;</span><span class="pln">
                </span><span class="tag">&lt;/executions&gt;</span><span class="pln">
            </span><span class="tag">&lt;/plugin&gt;</span><span class="pln">
        </span><span class="tag">&lt;/plugins&gt;</span><span class="pln">
    </span><span class="tag">&lt;/build&gt;</span><span class="pln">
</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This assumes you have a Maven project setup with <code>groovy</code> subfolders
as peers to the java src and test subfolders. You can use the <code>java</code>/<code>jar</code>
archetype to set this up then rename the java folders to groovy or keep
the java folders and just create groovy peer folders. There exists, also
a groovy plugin which has not been tested or used in production. After
defining the build section as in the above example, you can invoke the
typical Maven build phases normally. For example, <code>mvn test</code> will
execute the test phase, compiling Groovy source and Groovy test source
and finally executing the unit tests. If you run <code>mvn jar</code> it will
execute the jar phase bundling up all of your compiled production
classes into a jar after all of the unit tests pass. For more detail on
Maven build phases consult the Maven2 documentation.</p>
</div>
<div class="sect4">
<h5 id="_gmaven_and_gmavenplus"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gmaven_and_gmavenplus"></a>GMaven and GMavenPlus</h5>
<div class="sect5">
<h6 id="section-gmaven"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven"></a>GMaven</h6>
<div class="paragraph">
<p><a href="https://github.com/groovy/gmaven">GMaven</a> is the original Maven plugin
for Groovy, supporting both compiling and scripting Groovy.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong></p>
</div>
<div class="paragraph">
<p>You should be aware that GMaven is <strong>not supported anymore</strong> and can have
difficulties with <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-jointcompilation">joint compilation</a>.
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmavenplus">GMavenPlus</a> can be a good replacement, but if you
are having problems with joint compilation, you might consider the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyeclipse">Groovy Eclipse maven plugin</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="section-gmavenplus"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmavenplus"></a>GMavenPlus</h6>
<div class="paragraph">
<p><a href="https://github.com/groovy/GMavenPlus">GMavenPlus</a> is a rewrite of
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven">GMaven</a> and is in active development. It supports most of the
features of GMaven (a couple notable exceptions being
<a href="http://maven.apache.org/plugin-tools/maven-plugin-tools-java/index.html">mojo Javadoc tags</a>
and support for older Groovy versions). Its joint compilation uses stubs (which
means it has the same potential issues as <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven">GMaven</a> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Gradle">Gradle</a>). The main
advantages over its predecessor are that it supports recent Groovy versions,
InvokeDynamic, Groovy on Android, GroovyDoc, and configuration scripts.</p>
</div>
</div>
<div class="sect5">
<h6 id="section-gmaven2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven2"></a>GMaven 2</h6>
<div class="paragraph">
<p>Unlike the name might seem to suggest, <a href="http://groovy.github.io/gmaven/">GMaven 2</a>
is not aimed at replacing <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-gmaven">GMaven</a>. In fact, it removes the
non-scripting features of the GMaven plugin. It has not yet had any release and
appears to be inactive currently.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="section-groovyeclipse"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyeclipse"></a>The Groovy Eclipse Maven plugin</h5>
<div class="paragraph">
<p><a href="https://github.com/groovy/groovy-eclipse/wiki/Groovy-Eclipse-Maven-plugin">Groovy-Eclipse</a>
provides a compiler plugin for Maven. Using the compiler
plugin, it is possible to compile your maven projects using the
Groovy-Eclipse compiler. One feature unavailable elsewhere is
stubless joint compilation.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-jointcompilation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-jointcompilation"></a>2.2.6. Joint compilation</h4>
<div class="paragraph">
<p>Joint compilation means that the Groovy compiler will parse the
Groovy source files, create stubs for all of them, invoke the Java
compiler to compile the stubs along with Java sources, and then continue
compilation in the normal Groovy compiler way. This allows mixing of
Java and Groovy files without constraint.</p>
</div>
<div class="paragraph">
<p>Joint compilation can be enabled using the <code>-j</code> flag with the command-line compiler,
or using using a nested tag and all the attributes and further nested tags as required
for the Ant task.</p>
</div>
<div class="paragraph">
<p>It is important to know that if you don’t enable joint compilation and try to compile
Java source files with the Groovy compiler, the Java source files will be compiled as
if they were Groovy sources. In some situations, this might work since most of the Java
syntax is compatible with Groovy, but semantics would be different.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-android"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-android"></a>2.2.7. Android support</h4>
<div class="paragraph">
<p>It is possible to write an Android application in Groovy. However this requires a special
version of the compiler, meaning that you cannot use the regular
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-groovyc-compiler">groovyc tool</a> to target Android bytecode. In particular, Groovy
provides specific JAR files for Android, which have a classifier of <code>grooid</code>. In order to make
things easier, a <a href="https://github.com/groovy/groovy-android-gradle-plugin">Gradle plugin</a> adds
support for the Groovy language in the Android Gradle toolchain.</p>
</div>
<div class="paragraph">
<p>The plugin can be applied like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">buildscript </span><span class="pun">{</span><span class="pln">
    repositories </span><span class="pun">{</span><span class="pln">
        jcenter</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    dependencies </span><span class="pun">{</span><span class="pln">
        classpath </span><span class="str">'com.android.tools.build:gradle:2.1.2'</span><span class="pln">
        classpath </span><span class="str">'org.codehaus.groovy:groovy-android-gradle-plugin:1.0.0'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

apply plugin</span><span class="pun">:</span><span class="pln"> </span><span class="str">'groovyx.android'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you will need to add a dependency on the <code>grooid</code> version of the Groovy compiler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dependencies </span><span class="pun">{</span><span class="pln">
    compile </span><span class="str">'org.codehaus.groovy:groovy:2.4.7:grooid'</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if a Groovy jar does not provide a <code>grooid</code> classifier alternative, then it means
that the jar is directly compatible with Android. In that case, you can add the dependency directly
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dependencies </span><span class="pun">{</span><span class="pln">
    compile </span><span class="str">'org.codehaus.groovy:groovy:2.4.7:grooid'</span><span class="pln">       </span><span class="com">// requires the grooid classifier</span><span class="pln">
    compile </span><span class="pun">(</span><span class="str">'org.codehaus.groovy:groovy-json:2.4.7'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">     </span><span class="com">// no grooid version available</span><span class="pln">
        transitive </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">                                  </span><span class="com">// so do not depend on non-grooid version</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>transitive=false</code> parameter for <code>groovy-json</code> will let Gradle download the JSON support jar
without adding a dependency onto the normal jar of Groovy.</p>
</div>
<div class="paragraph">
<p>Please make sure to go to the <a href="https://github.com/groovy/groovy-android-gradle-plugin">plugin homepage</a> in order to
find the latest documentation and version.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovysh_the_groovy_shell"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovysh_the_groovy_shell"></a>2.3. Groovysh, the Groovy shell</h3>
<div class="sect3">
<h4 id="_groovy_groovy_shell"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_groovy_shell"></a>2.3.1. Groovy : Groovy Shell</h4>
<div class="paragraph">
<p>The Groovy Shell, aka. <code>groovysh</code> is a command-line application which
allows easy access to evaluate Groovy expressions, define classes and
run simple experiments.</p>
</div>
<div class="sect4">
<h5 id="GroovyShell-Features"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Features"></a>Features</h5>
<div class="ulist">
<ul>
<li>
<p>No need for <code>go</code> command to execute buffer.</p>
</li>
<li>
<p>Rich cross-platform edit-line editing, history and completion thanks
to <a href="https://github.com/jline/jline2">JLine2</a>.</p>
</li>
<li>
<p>ANSI colors (prompt, exception traces, etc).</p>
</li>
<li>
<p>Simple, yet robust, command system with online help, user alias
support and more.</p>
</li>
<li>
<p>User profile support</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-Command-lineOptionsandArguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Command-lineOptionsandArguments"></a>Command-line Options and Arguments</h5>
<div class="paragraph">
<p>The shell supports several options to control verbosity, ANSI coloring
and other features.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">.</span><span class="str">/bin/</span><span class="pln">groovysh </span><span class="pun">--</span><span class="pln">help

</span><span class="typ">Usage</span><span class="pun">:</span><span class="pln"> groovysh </span><span class="pun">[</span><span class="pln">options</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[...]</span><span class="pln">
</span><span class="typ">The</span><span class="pln"> </span><span class="typ">Groovy</span><span class="pln"> </span><span class="typ">Shell</span><span class="pun">,</span><span class="pln"> aka groovysh</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a command</span><span class="pun">-</span><span class="pln">line application which allows easy
access to evaluate </span><span class="typ">Groovy</span><span class="pln"> expressions</span><span class="pun">,</span><span class="pln"> define classes </span><span class="kwd">and</span><span class="pln"> run simple
experiments</span><span class="pun">.</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">C</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">color</span><span class="pun">[=&lt;</span><span class="pln">FLAG</span><span class="pun">&gt;]</span><span class="pln">    </span><span class="typ">Enable</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> disable </span><span class="kwd">use</span><span class="pln"> of ANSI colors
      </span><span class="pun">-</span><span class="pln">cp</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">classpath</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">classpath
                          </span><span class="typ">Specify</span><span class="pln"> </span><span class="kwd">where</span><span class="pln"> to find the </span><span class="kwd">class</span><span class="pln"> files </span><span class="pun">-</span><span class="pln"> must be first
                            argument
  </span><span class="pun">-</span><span class="pln">d</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">debug             </span><span class="typ">Enable</span><span class="pln"> debug output
  </span><span class="pun">-</span><span class="pln">D</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">define</span><span class="pun">=&lt;</span><span class="pln">name</span><span class="pun">=</span><span class="pln">value</span><span class="pun">&gt;</span><span class="pln">
                          </span><span class="typ">Define</span><span class="pln"> a system </span><span class="kwd">property</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">e</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">evaluate</span><span class="pun">=&lt;</span><span class="pln">CODE</span><span class="pun">&gt;</span><span class="pln">   </span><span class="typ">Evaluate</span><span class="pln"> the code first </span><span class="kwd">when</span><span class="pln"> starting interactive session
  </span><span class="pun">-</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">help              </span><span class="typ">Display</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> help message
  </span><span class="pun">-</span><span class="pln">pa</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">parameters       </span><span class="typ">Generate</span><span class="pln"> metadata </span><span class="kwd">for</span><span class="pln"> reflection on method parameter names
                            </span><span class="pun">(</span><span class="pln">jdk8</span><span class="pun">+</span><span class="pln"> only</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">pr</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">enable</span><span class="pun">-</span><span class="pln">preview          </span><span class="typ">Enable</span><span class="pln"> preview </span><span class="typ">Java</span><span class="pln"> features </span><span class="pun">(</span><span class="pln">JEP </span><span class="lit">12</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">jdk12</span><span class="pun">+</span><span class="pln"> only</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">q</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">quiet             </span><span class="typ">Suppress</span><span class="pln"> superfluous output
  </span><span class="pun">-</span><span class="pln">T</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">terminal</span><span class="pun">=&lt;</span><span class="pln">TYPE</span><span class="pun">&gt;</span><span class="pln">   </span><span class="typ">Specify</span><span class="pln"> the terminal TYPE to </span><span class="kwd">use</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">verbose           </span><span class="typ">Enable</span><span class="pln"> verbose output
  </span><span class="pun">-</span><span class="pln">V</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">version           </span><span class="typ">Display</span><span class="pln"> the version</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-EvaluatingExpressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-EvaluatingExpressions"></a>Evaluating Expressions</h5>
<div class="sect5">
<h6 id="GroovyShell-SimpleExpressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-SimpleExpressions"></a>Simple Expressions</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">println </span><span class="str">"Hello"</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-EvaluationResult"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-EvaluationResult"></a>Evaluation Result</h6>
<div class="paragraph">
<p>When a complete expression is found, it is compiled and evaluated. The
result of the evaluation is stored into the _ variable.</p>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-Multi-lineExpressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Multi-lineExpressions"></a>Multi-line Expressions</h6>
<div class="paragraph">
<p>Multi-line/complex expressions (like closure or class definitions) may
be defined over several lines. When the shell detects that it has a
complete expression it will compile and evaluate it.</p>
</div>
<div class="sect6">
<h7 id="GroovyShell-DefineaClass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-DefineaClass"></a>Define a Class</h7>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> bar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"baz"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-UsetheClass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-UsetheClass"></a>Use the Class</h7>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">foo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span><span class="pln">
foo</span><span class="pun">.</span><span class="pln">bar</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-Variables"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Variables"></a>Variables</h6>
<div class="paragraph">
<p>Shell variables are <strong>all</strong> untyped (i.e. no <code>def</code> or other type information).</p>
</div>
<div class="paragraph">
<p>This <strong>will</strong> set a shell variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">foo </span><span class="pun">=</span><span class="pln"> </span><span class="str">"bar"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But, this will evaluate a local variable and will <strong>not</strong> be saved to the shell’s environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> foo </span><span class="pun">=</span><span class="pln"> </span><span class="str">"bar"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This behavior can be changed by activating <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-InterpreterMode">interpreter mode</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-Functions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Functions"></a>Functions</h6>
<div class="paragraph">
<p>Functions can be defined in the shell, and will be saved for later use.</p>
</div>
<div class="paragraph">
<p>Defining a function is easy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">groovy</span><span class="pun">:</span><span class="lit">000</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> hello</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
groovy</span><span class="pun">:</span><span class="lit">001</span><span class="pun">&gt;</span><span class="pln"> println</span><span class="pun">(</span><span class="str">"Hello $name"</span><span class="pun">)</span><span class="pln">
groovy</span><span class="pun">:</span><span class="lit">002</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And then using it is as one might expect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">hello</span><span class="pun">(</span><span class="str">"Jason"</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Internally the shell creates a closure to encapsulate the function and
then binds the closure to a variable. So variables and functions share
the same namespace.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-Commands"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Commands"></a>Commands</h5>
<div class="paragraph">
<p>The shell has a number of different commands, which provide rich access
to the shell’s environment.</p>
</div>
<div class="paragraph">
<p>Commands all have a <em>name</em> and a <em>shortcut</em> (which is something like
<code>\h</code>). Commands may also have some predefined system <em>aliases</em>. Users
may also create their own aliases.</p>
</div>
<div class="sect5">
<h6 id="GroovyShell-RecognizedCommands"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-RecognizedCommands"></a>Recognized Commands</h6>
<div class="sect6">
<h7 id="GroovyShell-help"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-help"></a><code>help</code></h7>
<div class="paragraph">
<p>Display the list of commands (and aliases) or the help text for specific command.</p>
</div>
<div id="GroovyShell-TheCommandList" class="paragraph">
<p>The Command List</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :help

For information about Groovy, visit:
    http://groovy-lang.org

Available commands:
  :help      (:h ) Display this help message
  ?          (:? ) Alias to: :help
  :exit      (:x ) Exit the shell
  :quit      (:q ) Alias to: :exit
  import     (:i ) Import a class into the namespace
  :display   (:d ) Display the current buffer
  :clear     (:c ) Clear the buffer and reset the prompt counter
  :show      (:S ) Show variables, classes or imports
  :inspect   (:n ) Inspect a variable or the last result with the GUI object browser
  :purge     (:p ) Purge variables, classes, imports or preferences
  :edit      (:e ) Edit the current buffer
  :load      (:l ) Load a file or URL into the buffer
  .          (:. ) Alias to: :load
  :save      (:s ) Save the current buffer to a file
  :record    (:r ) Record the current session to a file
  :history   (:H ) Display, manage and recall edit-line history
  :alias     (:a ) Create an alias
  :set       (:= ) Set (or list) preferences
  :grab      (:g ) Add a dependency to the shell environment
  :register  (:rc) Register a new command with the shell
  :doc       (:D ) Open a browser window displaying the doc for the argument

For help on a specific command type:
    :help &lt;command&gt;</pre>
</div>
</div>
<div id="GroovyShell-HelpforaCommand" class="paragraph">
<p>Help for a Command</p>
</div>
<div class="paragraph">
<p>While in the interactive shell, you can ask for help for any command to
get more details about its syntax or function. Here is an example of
what happens when you ask for help for the <code>help</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :help :help

usage: :help [&lt;command&gt;]

Display the list of commands or the help text for &lt;command&gt;.</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-exit"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-exit"></a><code>exit</code></h7>
<div class="paragraph">
<p>Exit the shell.</p>
</div>
<div class="paragraph">
<p>This is the <strong>only</strong> way to exit the shell. Well, you can still <code>CTRL-C</code>,
but the shell will complain about an abnormal shutdown of the JVM.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-import"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-import"></a><code>import</code></h7>
<div class="paragraph">
<p>Add a custom import which will be included for all shell evaluations.</p>
</div>
<div class="paragraph">
<p>This command can be given at any time to add new imports.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-grab"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-grab"></a><code>grab</code></h7>
<div class="paragraph">
<p>Grab a dependency (Maven, Ivy, etc.) from Internet sources or cache,
and add it to the Groovy Shell environment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :grab 'com.google.guava:guava:19.0'
groovy:000&gt; import com.google.common.collect.BiMap
===&gt; com.google.common.collect.BiMap</pre>
</div>
</div>
<div class="paragraph">
<p>This command can be given at any time to add new dependencies.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-display"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-display"></a><code>display</code></h7>
<div class="paragraph">
<p>Display the contents of the current buffer.</p>
</div>
<div class="paragraph">
<p>This only displays the buffer of an incomplete expression. Once the
expression is complete, the buffer is rest. The prompt will update to
show the size of the current buffer as well.</p>
</div>
<div id="GroovyShell-Example" class="paragraph">
<p>Example</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; class Foo {
groovy:001&gt; def bar
groovy:002&gt; def baz() {
groovy:003&gt; :display
 001&gt; class Foo {
 002&gt; def bar
 003&gt; def baz() {</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-clear"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-clear"></a><code>clear</code></h7>
<div class="paragraph">
<p>Clears&nbsp;the&nbsp;current&nbsp;buffer,&nbsp;resetting&nbsp;the&nbsp;prompt&nbsp;counter&nbsp;to&nbsp;000.&nbsp;Can&nbsp;be&nbsp;used&nbsp;to&nbsp;recover&nbsp;from&nbsp;compilation&nbsp;errors.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-show"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-show"></a><code>show</code></h7>
<div class="paragraph">
<p>Show variables, classes or preferences or imports.</p>
</div>
<div id="GroovyShell-showvariables" class="paragraph">
<p><code>show variables</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :show variables
Variables:
  _ = true</pre>
</div>
</div>
<div id="GroovyShell-showclasses" class="paragraph">
<p><code>show classes</code></p>
</div>
<div id="GroovyShell-showimports" class="paragraph">
<p><code>show imports</code></p>
</div>
<div id="GroovyShell-showpreferences" class="paragraph">
<p><code>show preferences</code></p>
</div>
<div id="GroovyShell-showall" class="paragraph">
<p><code>show all</code></p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-inspect"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-inspect"></a><code>inspect</code></h7>
<div class="paragraph">
<p>Opens the GUI object browser to inspect a variable or the result of the
last evaluation.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-purge"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-purge"></a><code>purge</code></h7>
<div class="paragraph">
<p>Purges objects from the shell.</p>
</div>
<div id="GroovyShell-purgevariables" class="paragraph">
<p><code>purge variables</code></p>
</div>
<div id="GroovyShell-purgeclasses" class="paragraph">
<p><code>purge classes</code></p>
</div>
<div id="GroovyShell-purgeimports" class="paragraph">
<p><code>purge imports</code></p>
</div>
<div id="GroovyShell-purgepreferences" class="paragraph">
<p><code>purge preferences</code></p>
</div>
<div id="GroovyShell-purgeall" class="paragraph">
<p><code>purge all</code></p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-edit"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-edit"></a><code>edit</code></h7>
<div class="paragraph">
<p>Edit the current buffer in an external editor.</p>
</div>
<div class="paragraph">
<p>Currently only works on UNIX systems which have the <code>EDITOR</code> environment
variable set, or have configured the <code>editor</code> preference.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-load"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-load"></a><code>load</code></h7>
<div class="paragraph">
<p>Load one or more files (or urls) into the buffer.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-save"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-save"></a><code>save</code></h7>
<div class="paragraph">
<p>Saves the buffer’s contents to a file.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-record"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-record"></a><code>record</code></h7>
<div class="paragraph">
<p>Record the current session to a file.</p>
</div>
<div id="GroovyShell-recordstart" class="paragraph">
<p><code>record start</code></p>
</div>
<div id="GroovyShell-recordstop" class="paragraph">
<p><code>record stop</code></p>
</div>
<div id="GroovyShell-recordstatus" class="paragraph">
<p><code>record status</code></p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-history"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-history"></a><code>history</code></h7>
<div class="paragraph">
<p>Display, manage and recall edit-line history.</p>
</div>
<div id="GroovyShell-historyshow" class="paragraph">
<p><code>history show</code></p>
</div>
<div id="GroovyShell-historyrecall" class="paragraph">
<p><code>history recall</code></p>
</div>
<div id="GroovyShell-historyflush" class="paragraph">
<p><code>history flush</code></p>
</div>
<div id="GroovyShell-historyclear" class="paragraph">
<p><code>history clear</code></p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-alias"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-alias"></a><code>alias</code></h7>
<div class="paragraph">
<p>Create an alias.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-doc"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-doc"></a><code>doc</code></h7>
<div class="paragraph">
<p>Opens a browser with documentation for the provided class. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :doc java.util.List
http://docs.oracle.com/javase/7/docs/api/java/util/List.html
http://docs.groovy-lang.org/2.4.2-SNAPSHOT/html/groovy-jdk/java/util/List.html</pre>
</div>
</div>
<div class="paragraph">
<p>will open two windows (or tabs, depending on your browser):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>one for the JDK documentation</p>
</li>
<li>
<p>one for the GDK documentation</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-set"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-set"></a><code>set</code></h7>
<div class="paragraph">
<p>Set or list preferences.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-Preferences"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Preferences"></a>Preferences</h5>
<div class="paragraph">
<p>Some of aspects of <code>groovysh</code> behaviors can be customized by setting
preferences. Preferences are set using the <code>set</code> command or the <code>:=</code>
shortcut.</p>
</div>
<div class="sect5">
<h6 id="GroovyShell-RecognizedPreferences"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-RecognizedPreferences"></a>Recognized Preferences</h6>
<div class="sect6">
<h7 id="GroovyShell-InterpreterMode"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-InterpreterMode"></a><code>interpreterMode</code></h7>
<div class="paragraph">
<p>Allows the use of typed variables (i.e. <code>def</code> or other type information):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; def x = 3
===&gt; 3
groovy:000&gt; x
===&gt; 3</pre>
</div>
</div>
<div class="paragraph">
<p>It’s especially useful for copy&amp;pasting code from tutorials etc. into the running session.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-verbosity"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-verbosity"></a><code>verbosity</code></h7>
<div class="paragraph">
<p>Set the shell’s verbosity level. Expected to be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DEBUG</code></p>
</li>
<li>
<p><code>VERBOSE</code></p>
</li>
<li>
<p><code>INFO</code></p>
</li>
<li>
<p><code>QUIET</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default is <code>INFO</code>.</p>
</div>
<div class="paragraph">
<p>If this preference is set to an invalid value, then the previous setting
will be used, or if there is none, then the preference is removed and
the default is used.</p>
</div>
</div>
<div class="sect6">
<h7 id="_code_colors_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_colors_code"></a><code>colors</code></h7>
<div class="paragraph">
<p>Set the shell’s use of colors.</p>
</div>
<div class="paragraph">
<p>Default is <code>true</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-show-last-result"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-show-last-result"></a><code>show-last-result</code></h7>
<div class="paragraph">
<p>Show the last result after an execution.</p>
</div>
<div class="paragraph">
<p>Default is <code>true</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-sanitize-stack-trace"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-sanitize-stack-trace"></a><code>sanitize-stack-trace</code></h7>
<div class="paragraph">
<p>Sanitize (trim-down/filter) stack traces.</p>
</div>
<div class="paragraph">
<p>Default is <code>true</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-editor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-editor"></a><code>editor</code></h7>
<div class="paragraph">
<p>Configures the editor used by the <code>edit</code> command.</p>
</div>
<div class="paragraph">
<p>Default is the value of the system environment variable <code>EDITOR</code>.</p>
</div>
<div class="paragraph">
<p>Mac OS XTo use TextEdit, the default text editor on Mac OS X, configure:
set editor /Applications/TextEdit.app/Contents/MacOS/TextEdit</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-SettingaPreference"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-SettingaPreference"></a>Setting a Preference</h6>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :set verbosity DEBUG</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-ListingPreferences"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ListingPreferences"></a>Listing Preferences</h6>
<div class="paragraph">
<p>To list the current <em>set</em> preferences (and their values):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :show preferences</pre>
</div>
</div>
<div class="paragraph">
<p>Limitation: At the moment, there is no way to list all of the
known/available preferences to be set.</p>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-ClearingPreferencesieResettingtoDefaults"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ClearingPreferencesieResettingtoDefaults"></a>Clearing Preferences (i.e. Resetting to Defaults)</h6>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :purge preferences</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-UserProfileScriptsandState"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-UserProfileScriptsandState"></a>User Profile Scripts and State</h5>
<div class="sect5">
<h6 id="GroovyShell-ProfileScripts"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProfileScripts"></a>Profile Scripts</h6>
<div class="sect6">
<h7 id="GroovyShell-HOMEgroovygroovyshprofile"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshprofile"></a><code>$HOME/.groovy/groovysh.profile</code></h7>
<div class="paragraph">
<p>This script, if it exists, is loaded when the shell starts up.</p>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-HOMEgroovygroovyshrc"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshrc"></a><code>$HOME/.groovy/groovysh.rc</code></h7>
<div class="paragraph">
<p>This script, if it exists, is loaded when the shell enters interactive
mode.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="GroovyShell-State"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-State"></a>State</h6>
<div class="sect6">
<h7 id="GroovyShell-HOMEgroovygroovyshhistory"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-HOMEgroovygroovyshhistory"></a><code>$HOME/.groovy/groovysh.history</code></h7>
<div class="paragraph">
<p>Edit-line history is stored in this file.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-register"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-register"></a>Custom commands</h5>
<div class="paragraph">
<p>The <code>register</code> command allows you to register custom commands in the shell. For example, writing the following
will register the <code>Stats</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :register Stats</pre>
</div>
</div>
<div class="paragraph">
<p>where the <code>Stats</code> class is a class extending the <code>org.apache.groovy.groovysh.CommandSupport</code> class. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">apache</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">groovysh</span><span class="pun">.</span><span class="typ">CommandSupport</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">apache</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">groovysh</span><span class="pun">.</span><span class="typ">Groovysh</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Stats</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">CommandSupport</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Stats</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Groovysh</span><span class="pln"> shell</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">shell</span><span class="pun">,</span><span class="pln"> </span><span class="str">'stats'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'T'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> execute</span><span class="pun">(</span><span class="typ">List</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println </span><span class="str">"Free memory: ${Runtime.runtime.freeMemory()}"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the command can be called using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :stats
stats
Free memory: 139474880
groovy:000&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the command class must be found on classpath: you cannot define a new command from within the shell.</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-Troubleshooting"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-Troubleshooting"></a>Troubleshooting</h5>
<div class="paragraph">
<p>Please <a href="https://issues.apache.org/jira/browse/GROOVY">report</a> any problems you
run into. Please be sure to mark the JIRA issue with the <code>Groovysh</code>
component.</p>
</div>
<div class="sect5">
<h6 id="GroovyShell-PlatformProblems"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-PlatformProblems"></a>Platform Problems</h6>
<div class="sect6">
<h7 id="GroovyShell-ProblemsloadingtheJLineDLL"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProblemsloadingtheJLineDLL"></a>Problems loading the JLine DLL</h7>
<div class="paragraph">
<p>On Windows, <a href="https://github.com/jline/jline2">JLine2</a> (which is used for the fancy
shell input/history/completion fluff), uses a <strong>tiny</strong> DLL file to trick
the <strong>evil</strong> Windows faux-shell (<code>CMD.EXE</code> or <code>COMMAND.COM</code>) into
providing Java with unbuffered input. In some rare cases, this might
fail to load or initialize.</p>
</div>
<div class="paragraph">
<p>One solution is to disable the frills and use the unsupported terminal
instance. You can do that on the command-line using the <code>--terminal</code>
flag and set it to one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code></p>
</li>
<li>
<p><code>false</code></p>
</li>
<li>
<p><code>off</code></p>
</li>
<li>
<p><code>jline.UnsupportedTerminal</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>groovysh --terminal=none</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="GroovyShell-ProblemswithCygwinonWindows"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-ProblemswithCygwinonWindows"></a>Problems with Cygwin on Windows</h7>
<div class="paragraph">
<p>Some people have issues when running groovysh with cygwin. If you have
troubles, the following may help:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stty -icanon min 1 -echo
groovysh --terminal=unix
stty icanon echo</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-GMavenPlus"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-GMavenPlus"></a>2.3.2. GMavenPlus Maven Plugin</h4>
<div class="paragraph">
<p><a href="https://github.com/groovy/GMavenPlus">GMavenPlus</a> is a Maven plugin with goals
that support launching a Groovy Shell or Groovy Console bound to a Maven
project.</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-GradleGroovyshPlugin"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyShell-GradleGroovyshPlugin"></a>2.3.3. Gradle Groovysh Plugin</h4>
<div class="paragraph">
<p><a href="https://github.com/tkruse/gradle-groovysh-plugin">Gradle Groovysh Plugin</a> is a Gradle plugin that provides gradle tasks to start a Groovy Shell bound to a Gradle project.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovyconsole_the_groovy_swing_console"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyconsole_the_groovy_swing_console"></a>2.4. groovyConsole, the Groovy swing console</h3>
<div class="sect3">
<h4 id="title-heading"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#title-heading"></a>2.4.1. Groovy : Groovy Console</h4>
<div class="paragraph">
<p>The Groovy Swing Console allows a user to enter and run Groovy scripts.
This page documents the features of this user interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyConsole-Basics"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Basics"></a>2.4.2. Basics</h4>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xGroovyConsole.gif.pagespeed.ic.THAQZfXYzr.webp" alt="image"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Groovy Console is launched via <code>groovyConsole</code> or
<code>groovyConsole.bat</code>, both located in <code>$GROOVY_HOME/bin</code></p>
</li>
<li>
<p>The Console has an input area and an output area.</p>
</li>
<li>
<p>You type a Groovy script in the input area.</p>
</li>
<li>
<p>When you select <code>Run</code> from the <code>Actions</code> menu, the console
compiles the script and runs it.</p>
</li>
<li>
<p>Anything that would normally be printed on <code>System.out</code> is printed in
the output area.</p>
</li>
<li>
<p>If the script returns a non-null result, that result is printed.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="GroovyConsole-Features"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Features"></a>2.4.3. Features</h4>
<div class="sect4">
<h5 id="GroovyConsole-Command-lineOptionsandArguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Command-lineOptionsandArguments"></a>Command-line Options and Arguments</h5>
<div class="paragraph">
<p>The Groovy Console supports several options to control classpath and other features.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">.</span><span class="str">/bin/</span><span class="pln">groovyConsole </span><span class="pun">--</span><span class="pln">help
</span><span class="typ">Usage</span><span class="pun">:</span><span class="pln"> groovyConsole </span><span class="pun">[</span><span class="pln">options</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[</span><span class="pln">filename</span><span class="pun">]</span><span class="pln">
</span><span class="typ">The</span><span class="pln"> </span><span class="typ">Groovy</span><span class="pln"> </span><span class="typ">Swing</span><span class="pln"> </span><span class="typ">Console</span><span class="pln"> allows a user to enter </span><span class="kwd">and</span><span class="pln"> run </span><span class="typ">Groovy</span><span class="pln"> scripts</span><span class="pun">.</span><span class="pln">
      </span><span class="pun">--</span><span class="pln">configscript</span><span class="pun">=</span><span class="pln">PARAM   A script </span><span class="kwd">for</span><span class="pln"> tweaking the compiler configuration options
      </span><span class="pun">-</span><span class="pln">cp</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">classpath</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">classpath
                             </span><span class="typ">Specify</span><span class="pln"> </span><span class="kwd">where</span><span class="pln"> to find the </span><span class="kwd">class</span><span class="pln"> files </span><span class="pun">-</span><span class="pln"> must be first
                               argument
  </span><span class="pun">-</span><span class="pln">D</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">define</span><span class="pun">=&lt;</span><span class="pln">name</span><span class="pun">=</span><span class="pln">value</span><span class="pun">&gt;</span><span class="pln">  </span><span class="typ">Define</span><span class="pln"> a system </span><span class="kwd">property</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">help                 </span><span class="typ">Display</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> help message
  </span><span class="pun">-</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">indy                 </span><span class="typ">Enable</span><span class="pln"> </span><span class="typ">InvokeDynamic</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Indy</span><span class="pun">)</span><span class="pln"> compilation </span><span class="kwd">for</span><span class="pln"> scripts
  </span><span class="pun">-</span><span class="pln">pa</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">parameters          </span><span class="typ">Generate</span><span class="pln"> metadata </span><span class="kwd">for</span><span class="pln"> reflection on method parameter
                               names </span><span class="pun">(</span><span class="pln">jdk8</span><span class="pun">+</span><span class="pln"> only</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">pr</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">enable</span><span class="pun">-</span><span class="pln">preview             </span><span class="typ">Enable</span><span class="pln"> preview </span><span class="typ">Java</span><span class="pln"> features </span><span class="pun">(</span><span class="pln">JEP </span><span class="lit">12</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">jdk12</span><span class="pun">+</span><span class="pln"> only</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">-</span><span class="pln">V</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln">version              </span><span class="typ">Display</span><span class="pln"> the version</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyConsole-RunningScripts"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-RunningScripts"></a>Running Scripts</h5>
<div class="paragraph">
<p>There are several shortcuts that you can use to run scripts or code snippets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Ctrl+Enter</code> and <code>Ctrl+R</code> are both shortcut keys for <code>Run Script</code>.</p>
</li>
<li>
<p>If you highlight just part of the text in the input area, then Groovy
runs just that text.</p>
</li>
<li>
<p>The result of a script is the value of the last expression
executed.</p>
</li>
<li>
<p>You can turn the System.out capture on and off by selecting <code>Capture
System.out</code> from the <code>Actions</code> menu</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GroovyConsole-EditingFiles"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-EditingFiles"></a>Editing Files</h5>
<div class="paragraph">
<p>You can open any text file, edit it, run it (as a Groovy Script) and
then save it again when you are finished.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select <code>File &gt; Open</code> (shortcut key <code>ctrl+O</code>) to open a file</p>
</li>
<li>
<p>Select <code>File &gt; Save</code> (shortcut key <code>ctrl+S</code>) to save a file</p>
</li>
<li>
<p>Select <code>File &gt; New File</code> (shortcut key <code>ctrl+Q</code>) to start again with a
blank input area</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GroovyConsole-Historyandresults"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Historyandresults"></a>History and results</h5>
<div class="ulist">
<ul>
<li>
<p>You can pop-up a gui inspector on the last (non-null) result by
selecting <code>Inspect Last</code> from the <code>Actions</code> menu. The inspector is a
convenient way to view lists and maps.</p>
</li>
<li>
<p>The console remembers the last ten script runs. You can scroll back
and forth through the history by selecting <code>Next</code> and <code>Previous</code>
from the <code>Edit</code> menu. <code>Ctrl-N</code> and <code>ctrl-P</code> are convenient shortcut keys.</p>
</li>
<li>
<p>The last (non-null) result is bound to a variable named <code>_</code> (an
underscore).</p>
</li>
<li>
<p>The last result (null and non-null) for every run in the history is
bound into a list variable named <code><em></em></code><em> (two underscores). The result of
the last run is <code></code></em><code>[-1]</code>, the result of the second to last run is
<code>__[-2]</code> and so forth.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GroovyConsole-Interrupt"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Interrupt"></a>Interrupting a script</h5>
<div class="paragraph">
<p>The Groovy console is a very handy tool to develop scripts. Often, you will
find yourself running a script multiple times until it works the way you want
it to. However, what if your code takes too long to finish or worse, creates
an infinite loop? Interrupting script execution can be achieved by clicking
the <code>interrupt</code> button on the small dialog box that pops up when a script
is executing or through the <code>interrupt</code> icon in the tool bar.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/webp;base64,UklGRm4JAABXRUJQVlA4IGIJAADwLwCdASrMARkAPm0skkWkIqGXuXbsQAbEoAy94xYJ5V5r+TAEX3py740vUX5gH6p+bp6ivMR+2HrL+kb/P+op/YP8z60XqJ+gB5aXsp/5H/pZTZ1L6zOBrZmfuRi7ZDsAJ2vaBd2/9n/WvG11Du9nmp+i3+08UHzL2A/5D/X/9z6bn/R+vPpf/O/87/5/8n8A/6w+ll7Df3U9jr9tU+HuMhNkHHC1v77fB7G6Y7QyV69+SMu8dpbZTlNOa4FbOZL3oOgXlO2ln9atjcUMQZ+J2yqPyMQ+MJQhwu1gXRGKqaV0fLG1ZcO4sYttY8Hd/pAeNH0z+OoLdHoXPAFVzG5npAFZk/Q9uLkIae5p9Hn5jUlood4Ih5uac9GadimtWHJjt84kfExFdyx6TzlhIUPJ+2wSQOBekAJEjbDS4F8WtfcxWOjDV8s3vs/cVJk+mkYQta3A473vwn4wM1jTh6lx3HdXYQQXHvBrDVv8Bf6fvOVnxL2ZLAYxV+4559gHBHk3jcMCBbEJkAD++Sec24JUV5YPtD8r4YMbTtDPd2vc4ybmvQOfTntSHR886UXwreXupWDjfIyJTjC+A8E7g+QD6YE6u4oT2uKv10+z6w60bRUokVHz/3nZH+KqBP08v48iIFfzS6sBPd4N6wfDkc+O9F17rTjfwHlWl3xFDcsquu1doT8patwC0u0K1KgVPLPxxbx7zc5gahzarzt/WL4i1F0xLOvAXLlLT+I03IzVRtFqNNI7pU1Os1H4LisEO6CsU8td30E2XPtJt7Of+X7OgX8n9uxzNfwunAmQDpz9OvZeafYuicmOaVTurNVuVfJ3StQtkqQCa5dzRcE5SPoUzr5azYA3oTfY4/y765ZApBwAIzFfNXCvwxPyXzaUttmH1XPfDGD1UtDjBmgGp3FQIoM9bYr0luIo6ywGvcXomykw9L71i/tfg9ZbhVhy4WuP6Qmo4Nk4ytK9FnS9+a36606s4FoMrs85rxBEP0HeMxraNqKDVoEjQh0In6INsDIUtHd1OTTzZiGJJunrh8tSB7spTgWoLGI2ofE609Xn8LPQvXAqhrzhvmRksQ9yMbpe1TJDolYr1eU5XqLPhrR3LC1vnEDtxJM1+lDVj6jdC7OuHHlUMMHLInxIHEAGB6tqvrmnIvK6jEwgx6FqXYz4MjWMiPBNhd2AX+MYn2DX+dE8qZmhigdjBJeUncIDABJ+omB3qkwsRSMc+OMW5iEjwOD6v+3ScUBelHk8spTMmBgl50HlHvNttzErqRkst2ch0utjgWGDNlnL+SA17DoewA1jc39r8++6NPriewfPUQB4GhHUgbIOtW2D84MASxhGT6ByniNQSchIXt+uCKoLVmysukMTu7Xr8Gl9d/8NJKfgt2ArfMM97n5o7fKvnFxhVB96BlQ08O/qQAanfTxLkNCvw9RI1SzlPVpCBzI+IFytSX5Sn6/5K1KtSzNI+/n/gmhV5IsezErIfWs1zEULBqrtjpOk4VP1QqbZDtdV5HrhJF355qyhIw1jN2yE4J2roEhmFc0EHfACVgUtRwOO+hSF3gOuaVefsO9aqVTYrgw71fLj8GZz+sfagDMZRptxfZ/0lRK/J/OI0XbrZvqMZH95Nt/HdGZdHof9fmPumwDKkHI0nHHgDE6d0/rF8Zs3pMvNPhyI9UfkNL+L+QQYJ2/dHERkURlH5Zp2Auos2sZEhArvPp9ci0p8F7qROdohxtz4jBzss0gkAFwUjWGXdTgSnliCTT1FJeauk0kEfXty9CfqPHo07nE8npNjA2gH5KLtQU1M1uQdVge3F0agTfTpmDp6AwIj5twNW2ZGSIF3GSnUfvtMEVJDFoeKgBv1UBM/Smz8KALeHJOKmU0UNXM0SkwkvMcPzoU6afp3idoHyb99V9pGQmokti1LJcCvoVMK0Z/5QDhhUffJKoRAv0ReCLWEmjvWR7529iPrSPtlv6I7F6a5jw63WTUlmtY21O0sU6kYesQeNvwOb3IfdNSXDG8NhhrobLd3ve0580SAZN8M2Y6ngZlLxiD8hjz4/GP6zwf87DjYgYSnlasjHjSceSRy/kH70DnwCD0nWRuN+dt0e4ea8Fe1HONlq8Det/W12O8bhIKbpPX1Ff2keIxTcS2otWdKOQjEHP2iM7utArnzVj+32O7KHnuQ0aH90wldOM+Q1zFKhH9qyCpFFyPtADIAhroOgeu7PztQCqPpq6g56nUgim3scDGz6Ia4448pXr7ZAa5LhdxIvkV3P8LocNC5IvNRzHV9FzobN8fZf2brQ83Z5or/0EEb68V6U2vvb1jO6NkNKpFP35VMmlRMZNeYMcn+INuLF+jFOsnmqg8ytO4TnGgo9PSfCNLzOhyY38l8gpnsHcG1KOxtKXrn7SGWKRH6/tSfyszWLcA5JPJ27hfzeWfQPLY8KXkLPv/yomjKXGgC9tPM5yHmMmGLWLqSA/8ULmDMGFhSJONhkmdVTMPP/jGAm+Tr+3Sf95+3YD06tMPCsU1FNkiL22Ct0SegKdOFIgeKmlSMsJPpK8KZWYaYJhdJi6Nn3qU/z8UviWSIlehbjti8O7DGoo4TA0oEKmYjPHZlLANCA2DNqftrtsGtCu3uh/Zt+ZxH8ZHOFBKktwHUCFMzX82y5JiENQowIm4345zeMakabXSlDLDQifvLgiGlUab2pE3yThVQHVpKijO4usUQHvHV53PHsKJyyRfojUlVzcqQcKvjdgtCP0hOOeTkOyRP5iW+XkRVpTZ23a36+/GQKiMRdfjIgEhvfEmqdPmJP15jynvcOsv9mv8nO80M2h6/38MUXgwdf0LPwRyC+XYL3wKdi1YEmny8lTLT/JiFoDPO/hj1TQ3QQlrVgD2EnsyXlFjzD4AR7Dp3KZ5m6a647t5tMxKV1W+3HuLs+bfMzlOwAUuAsWPaZ+Dp5DgBotNoF96D9CjuwSVQ/aG2yhzOXJMm6JGk15VTP5XsVybGdaQAp9l1it2/TcR79Qni2taSKdZ7ahWfqKAifn5etoRYnMy7bn/HME9BLz7/3WI2XHfzF8Apuh8+zPeIwyT0f8Gvb7PKLnk3Bw2buNKPaXxPklbAts0lcBAlrCAJSfDu2T6ctexnt8Og0aC0XXzRjmLtujQkOvDNZGK179Ab5wDArtVNdytbMHx4WDubh48B34dF0lJVIWdenvao8/psWgJCeLkAAA==" alt="Toolbar"></span></p>
</div>
<div class="paragraph">
<p>However, this may not be sufficient to interrupt a script: clicking the button
will interrupt the execution thread, but if your code doesn’t handle the interrupt
flag, the script is likely to keep running without you being able to effectively
stop it. To avoid that, you have to make sure that the <code>Script &gt; Allow interruption</code>
menu item is flagged. This will automatically apply an AST transformation to your
script which will take care of checking the interrupt flag (<code>@ThreadInterrupt</code>).
This way, you guarantee that the script can be interrupted even if you don’t explicitly
handle interruption, at the cost of extra execution time.</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyConsole-Andmore"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Andmore"></a>And more</h5>
<div class="ulist">
<ul>
<li>
<p>You can change the font size by selecting <code>Smaller Font</code> or <code>Larger
Font</code> from the <code>Actions menu</code></p>
</li>
<li>
<p>The console can be run as an Applet thanks to <code>groovy.ui.ConsoleApplet</code></p>
</li>
<li>
<p>Code is auto indented when you hit return</p>
</li>
<li>
<p>You can drag’n’drop a Groovy script over the text area to open a file</p>
</li>
<li>
<p>You can modify the classpath with which the script in the console is
being run by adding a new JAR or a directory to the classpath from the
<code>Script</code> menu</p>
</li>
<li>
<p>Error hyperlinking from the output area when a compilation error is
expected or when an exception is thrown</p>
</li>
<li>
<p>You can enable InvokeDynamic (Indy) compilation mode by selecting
<code>Enable Indy Compilation</code> from the <code>Script</code> menu</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyConsole-EmbeddingtheConsole"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-EmbeddingtheConsole"></a>2.4.4. Embedding the Console</h4>
<div class="paragraph">
<p>To embed a Swing console in your application, simply create the Console
object, load some variables, and then launch it. The console can be embedded in
either Java or Groovy code. The Java code for this is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">import</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">ui</span><span class="pun">.</span><span class="typ">Console</span><span class="pun">;</span><span class="pln">

    </span><span class="pun">...</span><span class="pln">
    </span><span class="typ">Console</span><span class="pln"> console </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Console</span><span class="pun">();</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">setVariable</span><span class="pun">(</span><span class="str">"var1"</span><span class="pun">,</span><span class="pln"> getValueOfVar1</span><span class="pun">());</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">setVariable</span><span class="pun">(</span><span class="str">"var2"</span><span class="pun">,</span><span class="pln"> getValueOfVar2</span><span class="pun">());</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">run</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the console is launched, you can use the variable values in Groovy
code.</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyConsole-Visualizingscriptoutputresults"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-Visualizingscriptoutputresults"></a>2.4.5. Visualizing script output results</h4>
<div class="paragraph">
<p>You can customize the way script output results are visualized. Let’s
see how we can customize this. For example, viewing a map result would
show something like this:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xgconsole-sc-without-visu.png.pagespeed.ic.Tx-W0tR9C0.webp" alt="image"></span></p>
</div>
<div class="paragraph">
<p>What you see here is the usual textual representation of a Map. But,
what if we enabled custom visualization of certain results? The Swing
console allows you to do just that. First of all, you have to ensure
that the visualization option is ticked: <code>View → Visualize Script
Results</code> — for the record, all settings of the Groovy Console are stored
and remembered thanks to the Preference API. There are a few result
visualizations built-in: if the script returns a <code>java.awt.Image</code>, a
<code>javax.swing.Icon</code>, or a <code>java.awt.Component</code> with no parent, the object is
displayed instead of its <code>toString()</code> representation. Otherwise,
everything else is still just represented as text. Now, create the
following Groovy script in <code>~/.groovy/OutputTransforms.groovy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">swing</span><span class="pun">.*</span><span class="pln">

transforms </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> result </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> table </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JTable</span><span class="pun">(</span><span class="pln">
            result</span><span class="pun">.</span><span class="pln">collect</span><span class="pun">{</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> v </span><span class="pun">-&gt;</span><span class="pln">
                </span><span class="pun">[</span><span class="pln">k</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">?.</span><span class="pln">inspect</span><span class="pun">()]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]</span><span class="pln">
            </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[][],</span><span class="pln">
            </span><span class="pun">[</span><span class="str">'Key'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Value'</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[])</span><span class="pln">
        table</span><span class="pun">.</span><span class="pln">preferredViewportSize </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">preferredSize
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JScrollPane</span><span class="pun">(</span><span class="pln">table</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Groovy Swing console will execute that script on startup, injecting
a transforms list in the binding of the script, so that you can add your
own script results representations. In our case, we transform the Map
into a nice-looking Swing JTable. And we’re now able to visualize maps
in a friendly and attractive fashion, as the screenshot below shows:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xgconsole-sc-with-visu.png.pagespeed.ic.k-uCt7VWUK.webp" alt="image"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyConsole-ASTbrowser"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#GroovyConsole-ASTbrowser"></a>2.4.6. AST browser</h4>
<div class="paragraph">
<p>Groovy Console can visualize the AST (Abstract Syntax Tree) representing
the currently edited script, as shown by the screenshot below. This is
particularly handy when you want to develop AST transformations.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xastbrowser.png.pagespeed.ic.7Kw4Tjja8u.webp" alt="AST Browser"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovydoc_the_groovy_java_documentation_generator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovydoc_the_groovy_java_documentation_generator"></a>2.5. groovydoc, the Groovy &amp; Java documentation generator</h3>
<div class="paragraph">
<p>GroovyDoc is a tool responsible for generating documentation from your code. It acts like the Javadoc tool in the
Java world but is capable of handling both <code>groovy</code> and <code>java</code> files. The distribution comes with two ways of generating
documentation: from <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-CommandLine">command line</a> or from <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-Ant">Apache Ant</a>. Other build tools
like Maven or Gradle also offer wrappers for Groovydoc.</p>
</div>
<div class="sect3">
<h4 id="Groovydoc-CommandLine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-CommandLine"></a>2.5.1. The groovydoc command line tool</h4>
<div class="paragraph">
<p>The <code>groovydoc</code> command line can be invoked to generate groovydocs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovydoc [options] [packagenames] [sourcefiles]</pre>
</div>
</div>
<div class="paragraph">
<p>where options must be picked from the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Short version</th>
<th class="tableblock halign-left valign-top">Long version</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-windowtitle &lt;text&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser window title for the documentation</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-author</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include @author paragraphs (currently not used)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-charset &lt;charset&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charset for cross-platform viewing of generated documentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-classpath, -cp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify where to find the class files - must be
first argument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--destdir &lt;dir&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination directory for output files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable debug output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-doctitle &lt;html&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include title for the overview page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-exclude &lt;pkglist&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify a list of packages to exclude
(separated by colons for all operating systems)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-fileEncoding &lt;charset&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charset for generated documentation files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-footer &lt;html&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include footer text for each page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-header &lt;html&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include header text for each page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-help</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--help</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display help message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-nomainforscripts</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don’t include the implicit 'public static void
main' method for scripts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-noscripts</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don’t process Groovy Scripts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-notimestamp</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don’t include timestamp within hidden comment in generated HTML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-noversionstamp</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don’t include Groovy version within hidden comment in generated HTML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-overview &lt;file&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read overview documentation from HTML file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-package</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show package/protected/public classes and members</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-private</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show all classes and members</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-protected</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show protected/public classes and members (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-public</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show only public classes and members</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-quiet</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suppress superfluous output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-sourcepath &lt;pathlist&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify where to find source files (dirs
separated by platform path separator)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-stylesheetfile &lt;path&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File to change style of the generated documentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-verbose</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable verbose output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display the version</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="Groovydoc-Ant"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-Ant"></a>2.5.2. The groovydoc Ant task</h4>
<div class="paragraph">
<p>The <code>groovydoc</code> Ant task allows generating groovydocs from an Ant build.</p>
</div>
<div class="sect4">
<h5 id="ThegroovydocAnttask-Requiredtaskdef"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Requiredtaskdef"></a>Required taskdef</h5>
<div class="paragraph">
<p>Assuming all the groovy jars you need are in <em>my.classpath</em> (this will be <code>groovy-VERSION.jar</code>,
<code>groovy-ant-VERSION.jar</code>, <code>groovy-groovydoc-VERSION.jar</code> plus any modules and transitive dependencies you might be using)
you will need to declare this task at some point in the build.xml prior to the groovydoc task being invoked.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pln">         </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"groovydoc"</span><span class="pln">
         </span><span class="atn">classname</span><span class="pln">    </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"org.codehaus.groovy.ant.Groovydoc"</span><span class="pln">
         </span><span class="atn">classpathref</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"my.classpath"</span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ThegroovydocAnttask-groovydocAttributes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-groovydocAttributes"></a>&lt;groovydoc&gt; Attributes</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">private</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show all classes and members (i.e. including private ones) if
set to ``true''.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">destdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to store the class files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourcepath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sourcepath to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">packagenames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of package files (with terminating
wildcard).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create class and package usage pages.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">windowtitle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser window title for the documentation (text).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doctitle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include title for the package index(first) page (html-code).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include header text for each page (html-code).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">footer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include footer text for each page (html-code).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overview</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read overview documentation from HTML file.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="ThegroovydocAnttask-groovydocNestedElements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-groovydocNestedElements"></a>&lt;groovydoc&gt; Nested Elements</h5>
<div class="sect5">
<h6 id="ThegroovydocAnttask-link"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-link"></a>link</h6>
<div class="paragraph">
<p>Create link to groovydoc/javadoc output at the given URL.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">href</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base URL of external site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">packages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of package prefixes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="ThegroovydocAnttask-Example1-groovydocAnttask"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Example1-groovydocAnttask"></a>Example #1 - &lt;groovydoc&gt; Ant task</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pln">           </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"groovydoc"</span><span class="pln">
         </span><span class="atn">classname</span><span class="pln">      </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"org.codehaus.groovy.ant.Groovydoc"</span><span class="pln">
         </span><span class="atn">classpathref</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"path_to_groovy_all"</span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;groovydoc</span><span class="pln"> </span><span class="atn">destdir</span><span class="pln">      </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${docsDirectory}/gapi"</span><span class="pln">
           </span><span class="atn">sourcepath</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${mainSourceDirectory}"</span><span class="pln">
           </span><span class="atn">packagenames</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"**.*"</span><span class="pln">
           </span><span class="atn">use</span><span class="pln">          </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"true"</span><span class="pln">
           </span><span class="atn">windowtitle</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${title}"</span><span class="pln">
           </span><span class="atn">doctitle</span><span class="pln">     </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${title}"</span><span class="pln">
           </span><span class="atn">header</span><span class="pln">       </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${title}"</span><span class="pln">
           </span><span class="atn">footer</span><span class="pln">       </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"${docFooter}"</span><span class="pln">
           </span><span class="atn">overview</span><span class="pln">     </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"src/main/overview.html"</span><span class="pln">
           </span><span class="atn">private</span><span class="pln">      </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"false"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">packages</span><span class="pun">=</span><span class="atv">"java.,org.xml.,javax.,org.xml."</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://docs.oracle.com/javase/8/docs/api/"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">packages</span><span class="pun">=</span><span class="atv">"org.apache.tools.ant."</span><span class="pln">          </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://docs.groovy-lang.org/docs/ant/api/"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">packages</span><span class="pun">=</span><span class="atv">"org.junit.,junit.framework."</span><span class="pln">    </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://junit.org/junit4/javadoc/latest/"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">packages</span><span class="pun">=</span><span class="atv">"groovy.,org.codehaus.groovy."</span><span class="pln">   </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://docs.groovy-lang.org/latest/html/api/"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">packages</span><span class="pun">=</span><span class="atv">"org.codehaus.gmaven."</span><span class="pln">           </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://groovy.github.io/gmaven/apidocs/"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/groovydoc&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="ThegroovydocAnttask-Example2-ExecutinggroovydocfromGroovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#ThegroovydocAnttask-Example2-ExecutinggroovydocfromGroovy"></a>Example #2 - Executing &lt;groovydoc&gt; from Groovy</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> ant </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AntBuilder</span><span class="pun">()</span><span class="pln">
ant</span><span class="pun">.</span><span class="pln">taskdef</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">"groovydoc"</span><span class="pun">,</span><span class="pln"> classname</span><span class="pun">:</span><span class="pln"> </span><span class="str">"org.codehaus.groovy.ant.Groovydoc"</span><span class="pun">)</span><span class="pln">
ant</span><span class="pun">.</span><span class="pln">groovydoc</span><span class="pun">(</span><span class="pln">
    destdir      </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${docsDirectory}/gapi"</span><span class="pun">,</span><span class="pln">
    sourcepath   </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${mainSourceDirectory}"</span><span class="pun">,</span><span class="pln">
    packagenames </span><span class="pun">:</span><span class="pln"> </span><span class="str">"**.*"</span><span class="pun">,</span><span class="pln">
    </span><span class="kwd">use</span><span class="pln">          </span><span class="pun">:</span><span class="pln"> </span><span class="str">"true"</span><span class="pun">,</span><span class="pln">
    windowtitle  </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${title}"</span><span class="pun">,</span><span class="pln">
    doctitle     </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${title}"</span><span class="pun">,</span><span class="pln">
    header       </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${title}"</span><span class="pun">,</span><span class="pln">
    footer       </span><span class="pun">:</span><span class="pln"> </span><span class="str">"${docFooter}"</span><span class="pun">,</span><span class="pln">
    overview     </span><span class="pun">:</span><span class="pln"> </span><span class="str">"src/main/overview.html"</span><span class="pun">,</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln">      </span><span class="pun">:</span><span class="pln"> </span><span class="str">"false"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        link</span><span class="pun">(</span><span class="pln">packages</span><span class="pun">:</span><span class="str">"java.,org.xml.,javax.,org.xml."</span><span class="pun">,</span><span class="pln">href</span><span class="pun">:</span><span class="str">"http://docs.oracle.com/javase/8/docs/api/"</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">(</span><span class="pln">packages</span><span class="pun">:</span><span class="str">"groovy.,org.codehaus.groovy."</span><span class="pun">,</span><span class="pln">  href</span><span class="pun">:</span><span class="str">"http://docs.groovy-lang.org/latest/html/api/"</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">(</span><span class="pln">packages</span><span class="pun">:</span><span class="str">"org.apache.tools.ant."</span><span class="pun">,</span><span class="pln">         href</span><span class="pun">:</span><span class="str">"http://docs.groovy-lang.org/docs/ant/api/"</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">(</span><span class="pln">packages</span><span class="pun">:</span><span class="str">"org.junit.,junit.framework."</span><span class="pun">,</span><span class="pln">   href</span><span class="pun">:</span><span class="str">"http://junit.org/junit4/javadoc/latest/"</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">(</span><span class="pln">packages</span><span class="pun">:</span><span class="str">"org.codehaus.gmaven."</span><span class="pun">,</span><span class="pln">          href</span><span class="pun">:</span><span class="str">"http://groovy.github.io/gmaven/apidocs/"</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_custom_templates"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_templates"></a>Custom templates</h5>
<div class="paragraph">
<p>The <code>groovydoc</code> Ant task supports custom templates, but it requires two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A custom groovydoc class</p>
</li>
<li>
<p>A new groovydoc task definition</p>
</li>
</ol>
</div>
<div class="sect5">
<h6 id="_custom_groovydoc_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_groovydoc_class"></a>Custom Groovydoc class</h6>
<div class="paragraph">
<p>The first step requires you to extend the <code>Groovydoc</code> class, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">tools</span><span class="pun">.</span><span class="pln">groovydoc</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">groovy</span><span class="pun">.</span><span class="pln">ant</span><span class="pun">.</span><span class="typ">Groovydoc</span><span class="pun">;</span><span class="pln">

</span><span class="com">/**
 * Overrides GroovyDoc's default class template - for testing purpose only.
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CustomGroovyDoc</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Groovydoc</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> getClassTemplates</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]{</span><span class="str">"org/codehaus/groovy/tools/groovydoc/testfiles/classDocName.html"</span><span class="pun">};</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can override the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getClassTemplates</code> for class-level templates</p>
</li>
<li>
<p><code>getPackageTemplates</code> for package-level templates</p>
</li>
<li>
<p><code>getDocTemplates</code> for top-level templates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find the list of default templates in the <code>org.codehaus.groovy.tools.groovydoc.gstringTemplates.GroovyDocTemplateInfo</code>
class.</p>
</div>
</div>
<div class="sect5">
<h6 id="_using_the_custom_groovydoc_task"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_the_custom_groovydoc_task"></a>Using the custom groovydoc task</h6>
<div class="paragraph">
<p>Once you’ve written the class, using it is just a matter of redefining the <code>groovydoc</code> task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-xml" data-lang="xml"><span class="tag">&lt;taskdef</span><span class="pln"> </span><span class="atn">name</span><span class="pln">           </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"groovydoc"</span><span class="pln">
         </span><span class="atn">classname</span><span class="pln">      </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"org.codehaus.groovy.ant.CustomGroovyDoc"</span><span class="pln">
         </span><span class="atn">classpathref</span><span class="pln">   </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"path_to_groovy_all"</span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that template customization is provided as is. APIs are subject to change, so you must consider this as a
fragile feature.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Groovydoc-GMavenPlus"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovydoc-GMavenPlus"></a>2.5.3. GMavenPlus Maven Plugin</h4>
<div class="paragraph">
<p><a href="https://github.com/groovy/GMavenPlus">GMavenPlus</a> is a Maven plugin with goals that
support GroovyDoc generation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ide_integration"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ide_integration"></a>2.6. IDE integration</h3>
<div class="paragraph">
<p>The Groovy language is supported by lots of IDEs and text editors.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Syntax highlighting</th>
<th class="tableblock halign-left valign-top">Code completion</th>
<th class="tableblock halign-left valign-top">Refactoring</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://code.visualstudio.com/">VSCode</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/groovy/groovy-eclipse">Groovy Eclipse Plugin</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.jetbrains.com/idea/features/groovy.html">IntelliJ IDEA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/features/groovy/">Netbeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/Groovy-Emacs-Modes/groovy-emacs-modes">Groovy Emacs Modes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/textmate/groovy.tmbundle">TextMate</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.vim.org/">vim</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.ultraedit.com/">UltraEdit</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.slickedit.com/products/slickedit/419-the-most-powerful-groovy-editor-in-the-world/">SlickEdit</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://editrocket.com/features/groovy_editor.html">EditRocket</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_guides"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_user_guides"></a>3. User Guides</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_started"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_getting_started"></a>3.1. Getting started</h3>
<div class="sect3">
<h4 id="_download"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_download"></a>3.1.1. Download</h4>
<div class="paragraph">
<p>In this download area, you will be able to download the distribution (binary and source), the Windows installer and the documentation for <strong>Groovy</strong>.</p>
</div>
<div class="paragraph">
<p>For a quick and effortless start on Mac OSX, Linux or Cygwin, you can use <a href="http://sdkman.io/">SDKMAN!</a> (The Software Development Kit Manager) to download and configure any <strong>Groovy</strong> version of your choice. Basic <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#SDKMAN">instructions</a> can be found below.</p>
</div>
<div class="sect4">
<h5 id="_stable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stable"></a>Stable</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Download zip</strong>: <a href="https://bintray.com/artifact/download/groovy/maven/apache-groovy-binary-3.0.0-SNAPSHOT.zip"><strong>Binary Release</strong></a> | <a href="https://bintray.com/artifact/download/groovy/maven/groovy-src-3.0.0-SNAPSHOT.zip">Source Release</a></p>
</li>
<li>
<p><strong>Download documentation</strong>: <a href="https://bintray.com/artifact/download/groovy/maven/apache-groovy-docs-3.0.0-SNAPSHOT.zip"><strong>JavaDoc and zipped online documentation</strong></a></p>
</li>
<li>
<p><strong>Combined binary / source / documentation bundle</strong>: <a href="https://bintray.com/artifact/download/groovy/maven/apache-groovy-sdk-3.0.0-SNAPSHOT.zip"><strong>Distribution bundle</strong></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can learn more about this version in the <a href="http://groovy-lang.org/releasenotes/groovy-3.0.html">release notes</a> or in the <a href="http://groovy-lang.org/changelogs/changelog-3.0.0-SNAPSHOT.html">changelog</a>.</p>
</div>
<div class="paragraph">
<p>If you plan on using invokedynamic support, <a href="https://docs.groovy-lang.org/docs/next/html/documentation/invokedynamic-support.html">read those notes</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_snapshots"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_snapshots"></a>Snapshots</h5>
<div class="paragraph">
<p>For those who want to test the very latest versions of Groovy and live on the bleeding edge, you can use our <a href="https://oss.jfrog.org/oss-snapshot-local/org/codehaus/groovy">snapshot builds</a>. As soon as a build succeeds on our continuous integration server a snapshot is deployed to Artifactory’s OSS snapshot repository.</p>
</div>
</div>
<div class="sect4">
<h5 id="_prerequisites"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_prerequisites"></a>Prerequisites</h5>
<div class="paragraph">
<p>Groovy 3.0 requires Java 6+ with full support up to Java 8.
There are currently some known issues for some aspects when using Java 9 snapshots.
The <code>groovy-nio</code> module requires Java 7+.
Using Groovy’s invokeDynamic features require Java 7+ but we recommend Java 8.</p>
</div>
<div class="paragraph">
<p>The Groovy CI server is also useful to look at to confirm supported Java versions for different Groovy releases.
The test suite (getting close to 10000 tests) runs for the currently supported streams of Groovy across
all the main versions of Java each stream supports.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_maven_repository"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_maven_repository"></a>3.1.2. Maven Repository</h4>
<div class="paragraph">
<p>If you wish to embed Groovy in your application, you may just prefer to point to your favourite maven repositories or the <a href="https://oss.jfrog.org/oss-release-local/org/codehaus/groovy">JCenter maven repository</a>.</p>
</div>
<div class="sect4">
<h5 id="_stable_release"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stable_release"></a>Stable Release</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Gradle</th>
<th class="tableblock halign-left valign-top">Maven</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'org.codehaus.groovy:groovy:3.0.0-SNAPSHOT'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;<br>
&lt;artifactId&gt;groovy&lt;/artifactId&gt;<br>
&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Just the core of groovy without the modules (see below).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'org.codehaus.groovy:groovy-$module:3.0.0-SNAPSHOT'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;<br>
&lt;artifactId&gt;groovy-$module&lt;/artifactId&gt;<br>
&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"$module" stands for the different optional groovy modules "ant", "bsf", "console", "docgenerator", "groovydoc", "groovysh", "jmx", "json", "jsr223", "servlet", "sql", "swing", "test", "testng" and "xml". Example: &lt;artifactId&gt;groovy-sql&lt;/artifactId&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'org.codehaus.groovy:groovy-all:3.0.0-SNAPSHOT'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;<br>
&lt;artifactId&gt;groovy-all&lt;/artifactId&gt;<br>
&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;<br>
&lt;type&gt;pom&lt;/type&gt; &lt;!-- required JUST since Groovy 2.5.0 --&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The core plus all the modules. Optional dependencies are marked as optional. You may need to include some of the optional dependencies to use some features of Groovy, e.g. AntBuilder, GroovyMBeans, etc.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To use the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/invokedynamic-support.html">InvokeDynamic</a> version of the jars just append ':indy' for Gradle or &lt;classifier&gt;indy&lt;/classifier&gt; for Maven.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="SDKMAN"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#SDKMAN"></a>3.1.3. SDKMAN! (The Software Development Kit Manager)</h4>
<div class="paragraph">
<p>This tool makes installing Groovy on any Bash platform (Mac OSX, Linux, Cygwin, Solaris or FreeBSD) very easy.</p>
</div>
<div class="paragraph">
<p>Simply open a new terminal and enter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">$ curl </span><span class="pun">-</span><span class="pln">s </span><span class="kwd">get</span><span class="pun">.</span><span class="pln">sdkman</span><span class="pun">.</span><span class="pln">io </span><span class="pun">|</span><span class="pln"> bash</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the instructions on-screen to complete installation.</p>
</div>
<div class="paragraph">
<p>Open a new terminal or type the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">$ source </span><span class="str">"$HOME/.sdkman/bin/sdkman-init.sh"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then install the latest stable Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">$ sdk install groovy</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After installation is complete and you’ve made it your default version, test it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">$ groovy </span><span class="pun">-</span><span class="pln">version</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That’s all there is to it!</p>
</div>
</div>
<div class="sect3">
<h4 id="_other_ways_to_get_groovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_ways_to_get_groovy"></a>3.1.4. Other ways to get Groovy</h4>
<div class="sect4">
<h5 id="_installation_on_mac_os_x"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_installation_on_mac_os_x"></a>Installation on Mac OS X</h5>
<div class="sect5">
<h6 id="_macports"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macports"></a>MacPorts</h6>
<div class="paragraph">
<p>If you’re on MacOS and have <a href="http://www.macports.org/">MacPorts</a> installed, you can run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">sudo port install groovy</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_homebrew"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_homebrew"></a>Homebrew</h6>
<div class="paragraph">
<p>If you’re on MacOS and have <a href="http://mxcl.github.com/homebrew">Homebrew</a> installed, you can run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">brew install groovy</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_installation_on_windows"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_installation_on_windows"></a>Installation on Windows</h5>
<div class="paragraph">
<p>If you’re on Windows, you can also use the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/TODO-Windows+NSIS-Installer">NSIS Windows installer</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_other_distributions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_distributions"></a>Other Distributions</h5>
<div class="paragraph">
<p>You may download other distributions of Groovy from <a href="https://bintray.com/groovy/maven">this site</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_source_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_code"></a>Source Code</h5>
<div class="paragraph">
<p>If you prefer to live on the bleeding edge, you can also grab the <a href="https://github.com/apache/groovy">source code from GitHub</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ide_plugin"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ide_plugin"></a>IDE plugin</h5>
<div class="paragraph">
<p>If you are an IDE user, you can just grab the latest <a href="https://docs.groovy-lang.org/docs/next/html/documentation/tools-ide.html">IDE plugin</a> and follow the plugin installation instructions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_install_binary"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_install_binary"></a>3.1.5. Install Binary</h4>
<div class="paragraph">
<p>These instructions describe how to install a binary distribution of <strong>Groovy</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#download-groovy">Download</a> a binary distribution of Groovy and unpack it into some file on your local file system.</p>
</li>
<li>
<p>Set your <code>GROOVY_HOME</code> environment variable to the directory you unpacked the distribution.</p>
</li>
<li>
<p>Add <code>GROOVY_HOME/bin</code> to your <code>PATH</code> environment variable.</p>
</li>
<li>
<p>Set your <code>JAVA_HOME</code> environment variable to point to your JDK. On OS X this is <code>/Library/Java/Home</code>, on other unixes its often <code>/usr/java</code> etc. If you’ve already installed tools like Ant or Maven you’ve probably already done this step.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should now have Groovy installed properly. You can test this by typing the following in a command shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">groovysh</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which should create an interactive groovy shell where you can type Groovy statements. Or to run the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#../../../subprojects/groovy-console/src/spec/doc/groovy-console.adoc">Swing interactive console</a> type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">groovyConsole</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To run a specific Groovy script type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-shell" data-lang="shell"><span class="pln">groovy </span><span class="typ">SomeScript</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_differences_with_java"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_differences_with_java"></a>3.2. Differences with Java</h3>
<div class="paragraph">
<p>Groovy tries to be as natural as possible for Java developers. We’ve
tried to follow the principle of least surprise when designing Groovy,
particularly for developers learning Groovy who’ve come from a Java
background.</p>
</div>
<div class="paragraph">
<p>Here we list all the major differences between Java and Groovy.</p>
</div>
<div class="sect3">
<h4 id="_default_imports_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_default_imports_2"></a>3.2.1. Default imports</h4>
<div class="paragraph">
<p>All these packages and classes are imported by default, i.e. you do not
have to use an explicit <code>import</code> statement to use them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>java.io.*</p>
</li>
<li>
<p>java.lang.*</p>
</li>
<li>
<p>java.math.BigDecimal</p>
</li>
<li>
<p>java.math.BigInteger</p>
</li>
<li>
<p>java.net.*</p>
</li>
<li>
<p>java.util.*</p>
</li>
<li>
<p>groovy.lang.*</p>
</li>
<li>
<p>groovy.util.*</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_multi_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multi_methods"></a>3.2.2. Multi-methods</h4>
<div class="paragraph">
<p>In Groovy, the methods which will be invoked are chosen at runtime. This is called runtime dispatch or multi-methods. It
means that the method will be chosen based on the types of the arguments at runtime. In Java, this is the opposite: methods
are chosen at compile time, based on the declared types.</p>
</div>
<div class="paragraph">
<p>The following code, written as Java code, can be compiled in both Java and Groovy, but it will behave differently:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">int</span><span class="pln"> method</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> method</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="typ">Object</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Object"</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> method</span><span class="pun">(</span><span class="pln">o</span><span class="pun">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In Java, you would have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="pln">assertEquals</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> result</span><span class="pun">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Whereas in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="pln">assertEquals</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> result</span><span class="pun">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is because Java will use the static information type, which is that <code>o</code> is declared as an <code>Object</code>, whereas
Groovy will choose at runtime, when the method is actually called. Since it is called with a <code>String</code>, then the
<code>String</code> version is called.</p>
</div>
</div>
<div class="sect3">
<h4 id="_array_initializers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_array_initializers"></a>3.2.3. Array initializers</h4>
<div class="paragraph">
<p>In Groovy, the <code>{ …​ }</code> block is reserved for closures. That means that you cannot create array literals with this
syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You actually have to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_package_scope_visibility"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_package_scope_visibility"></a>3.2.4. Package scope visibility</h4>
<div class="paragraph">
<p>In Groovy, omitting a modifier on a field doesn’t result in a package-private field like in Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead, it is used to create a <em>property</em>, that is to say a <em>private field</em>, an associated <em>getter</em> and an associated
<em>setter</em>.</p>
</div>
<div class="paragraph">
<p>It is possible to create a package-private field by annotating it with <code>@PackageScope</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@PackageScope</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_arm_blocks"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arm_blocks"></a>3.2.5. ARM blocks</h4>
<div class="paragraph">
<p>ARM (Automatic Resource Management) block from Java 7 are not supported in Groovy. Instead, Groovy provides various
methods relying on closures, which have the same effect while being more idiomatic. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="typ">Path</span><span class="pln"> file </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Paths</span><span class="pun">.</span><span class="pln">get</span><span class="pun">(</span><span class="str">"/path/to/file"</span><span class="pun">);</span><span class="pln">
</span><span class="typ">Charset</span><span class="pln"> charset </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Charset</span><span class="pun">.</span><span class="pln">forName</span><span class="pun">(</span><span class="str">"UTF-8"</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">(</span><span class="typ">BufferedReader</span><span class="pln"> reader </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Files</span><span class="pun">.</span><span class="pln">newBufferedReader</span><span class="pun">(</span><span class="pln">file</span><span class="pun">,</span><span class="pln"> charset</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> line</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">((</span><span class="pln">line </span><span class="pun">=</span><span class="pln"> reader</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">line</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be written like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">'/path/to/file'</span><span class="pun">).</span><span class="pln">eachLine</span><span class="pun">(</span><span class="str">'UTF-8'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   println it
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or, if you want a version closer to Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">'/path/to/file'</span><span class="pun">).</span><span class="pln">withReader</span><span class="pun">(</span><span class="str">'UTF-8'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> reader </span><span class="pun">-&gt;</span><span class="pln">
   reader</span><span class="pun">.</span><span class="pln">eachLine </span><span class="pun">{</span><span class="pln">
       println it
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_inner_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inner_classes"></a>3.2.6. Inner classes</h4>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The implementation of anonymous inner classes and nested classes follows the Java lead, but
you should not take out the Java Language Spec and keep shaking the head
about things that are different. The implementation done looks much like
what we do for <code>groovy.lang.Closure</code>, with some benefits and some
differences. Accessing private fields and methods for example can become
a problem, but on the other hand local variables don’t have to be final.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_static_inner_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_inner_classes"></a>Static inner classes</h5>
<div class="paragraph">
<p>Here’s an example of static inner class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> A </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> B </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">new</span><span class="pln"> A</span><span class="pun">.</span><span class="pln">B</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The usage of static inner classes is the best supported one. If you
absolutely need an inner class, you should make it a static one.</p>
</div>
</div>
<div class="sect4">
<h5 id="_anonymous_inner_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_anonymous_inner_classes"></a>Anonymous Inner Classes</h5>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">concurrent</span><span class="pun">.</span><span class="typ">CountDownLatch</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">concurrent</span><span class="pun">.</span><span class="typ">TimeUnit</span><span class="pln">

</span><span class="typ">CountDownLatch</span><span class="pln"> called </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CountDownLatch</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">

</span><span class="typ">Timer</span><span class="pln"> timer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Timer</span><span class="pun">()</span><span class="pln">
timer</span><span class="pun">.</span><span class="pln">schedule</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TimerTask</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        called</span><span class="pun">.</span><span class="pln">countDown</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> called</span><span class="pun">.</span><span class="pln">await</span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="typ">TimeUnit</span><span class="pun">.</span><span class="pln">SECONDS</span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_creating_instances_of_non_static_inner_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_instances_of_non_static_inner_classes"></a>Creating Instances of Non-Static Inner Classes</h5>
<div class="paragraph">
<p>In Java you can do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> Y </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> X </span><span class="pun">{}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> X foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> X</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> X createX</span><span class="pun">(</span><span class="pln">Y y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> y</span><span class="pun">.</span><span class="kwd">new</span><span class="pln"> X</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy doesn’t support the <code>y.new X()</code> syntax. Instead, you have to write <code>new X(y)</code>, like in the code below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> Y </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> X </span><span class="pun">{}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> X foo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> X</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> X createX</span><span class="pun">(</span><span class="pln">Y y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> X</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Caution though, Groovy supports calling methods with one
parameter without giving an argument. The parameter will then have the
value null. Basically the same rules apply to calling a constructor.
There is a danger that you will write new X() instead of new X(this) for
example. Since this might also be the regular way we have not yet found
a good way to prevent this problem.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lambda_expressions_and_the_method_reference_operator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_lambda_expressions_and_the_method_reference_operator"></a>3.2.7. Lambda expressions and the method reference operator</h4>
<div class="paragraph">
<p>Java 8+ supports lambda expressions and the method reference operator (<code>::</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="typ">Runnable</span><span class="pln"> run </span><span class="pun">=</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Run"</span><span class="pun">);</span><span class="pln">  </span><span class="com">// Java</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">::</span><span class="pln">println</span><span class="pun">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy 3 and above also support these within the Parrot parser.
In earlier versions of Groovy you should use closures instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Runnable</span><span class="pln"> run </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> println </span><span class="str">'run'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> println it </span><span class="pun">}</span><span class="pln"> </span><span class="com">// or list.each(this.&amp;println)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gstrings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstrings"></a>3.2.8. GStrings</h4>
<div class="paragraph">
<p>As double-quoted string literals are interpreted as <code>GString</code> values, Groovy may fail
with compile error or produce subtly different code if a class with <code>String</code> literal
containing a dollar character is compiled with Groovy and Java compiler.</p>
</div>
<div class="paragraph">
<p>While typically, Groovy will auto-cast between <code>GString</code> and <code>String</code> if an API declares
the type of a parameter, beware of Java APIs that accept an <code>Object</code> parameter and then
check the actual type.</p>
</div>
</div>
<div class="sect3">
<h4 id="_string_and_character_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_string_and_character_literals"></a>3.2.9. String and Character literals</h4>
<div class="paragraph">
<p>Singly-quoted literals in Groovy are used for <code>String</code>, and double-quoted result in
<code>String</code> or <code>GString</code>, depending whether there is interpolation in the literal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()==</span><span class="typ">String</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">"c"</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()==</span><span class="typ">String</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">"c${1}"</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">GString</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy will automatically cast a single-character <code>String</code> to <code>char</code> only when assigning to
a variable of type <code>char</code>. When calling methods with arguments of type <code>char</code> we need
to either cast explicitly or make sure the value has been cast in advance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">char</span><span class="pln"> a</span><span class="pun">=</span><span class="str">'a'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Character</span><span class="pun">.</span><span class="pln">digit</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)==</span><span class="lit">10</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'But Groovy does boxing'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Character</span><span class="pun">.</span><span class="pln">digit</span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)==</span><span class="lit">10</span><span class="pln">

</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Character</span><span class="pun">.</span><span class="pln">digit</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)==</span><span class="lit">10</span><span class="pln">
  </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Need explicit cast'</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">MissingMethodException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy supports two styles of casting and in the case of casting to <code>char</code> there
are subtle differences when casting a multi-char strings. The Groovy style cast is
more lenient and will take the first character, while the C-style cast will fail
with exception.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// for single char strings, both are the same</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="str">"c"</span><span class="pun">).</span><span class="kwd">class</span><span class="pun">==</span><span class="typ">Character</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">"c"</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">).</span><span class="kwd">class</span><span class="pun">==</span><span class="typ">Character</span><span class="pln">

</span><span class="com">// for multi char strings they are not</span><span class="pln">
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="str">'cx'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">
  </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">:</span><span class="pln"> </span><span class="str">'will fail - not castable'</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">GroovyCastException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="str">'cx'</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="str">'cx'</span><span class="pun">.</span><span class="pln">asType</span><span class="pun">(</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_primitives_and_wrappers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_primitives_and_wrappers"></a>3.2.10. Primitives and wrappers</h4>
<div class="paragraph">
<p>Because Groovy uses Objects for everything, it <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-object-orientation.html#_primitive_types">autowraps</a> references
to primitives. Because of this, it does not follow Java’s behavior of widening taking priority over boxing.
Here’s an example using <code>int</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">int</span><span class="pln"> i
m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> m</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> l</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
  println </span><span class="str">"in m(long)"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> m</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
  println </span><span class="str">"in m(Integer)"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the method that Java would call, since widening has precedence over unboxing.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the method Groovy actually calls, since all primitive references use their wrapper class.</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_behaviour_of_code_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_behaviour_of_code_code"></a>3.2.11. Behaviour of <code>==</code></h4>
<div class="paragraph">
<p>In Java <code>==</code> means equality of primitive types or identity for objects.  In
Groovy <code>==</code> translates to <code>a.compareTo(b)==0</code>, if they are <code>Comparable</code>, and
<code>a.equals(b)</code> otherwise.  To check for identity, there is <code>is</code>.  E.g.
<code>a.is(b)</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conversions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_conversions"></a>3.2.12. Conversions</h4>
<div class="paragraph">
<p>Java does automatic widening and narrowing
<a href="https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html">conversions</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Java Conversions</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"></td>
<td class="tableblock halign-center valign-top" colspan="8"><div><div class="paragraph">
<p><strong>Converts to</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Converts from</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>boolean</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>byte</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>short</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>char</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>int</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>long</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>float</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>double</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>boolean</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>byte</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>short</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>char</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>int</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>long</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>float</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>double</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>C</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><sup>*</sup> 'Y' indicates a conversion Java can make, 'C' indicates a conversion Java can make when there is an explicit cast,
'T` indicates a conversion Java can make but data is truncated, 'N' indicates a conversion Java can’t make.</p>
</div>
<div class="paragraph">
<p>Groovy expands greatly on this.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Groovy Conversions</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"></td>
<td class="tableblock halign-center valign-top" colspan="18"><div><div class="paragraph">
<p><strong>Converts to</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Converts from</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>boolean</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Boolean</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>byte</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Byte</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>short</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Short</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>char</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Character</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>int</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Integer</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>long</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Long</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>BigInteger</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>float</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Float</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>double</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>Double</strong></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><strong>BigDecimal</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>boolean</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Boolean</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>N</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>byte</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Byte</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>short</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Short</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>char</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Character</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>int</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Integer</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>long</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Long</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BigInteger</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>float</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Float</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>double</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Double</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>B</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>Y</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>BigDecimal</strong></p></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>T</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>D</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><sup>*</sup> 'Y' indicates a conversion Groovy can make, 'D' indicates a conversion Groovy can make when compiled dynamically or
explicitly cast, 'T` indicates a conversion Groovy can make but data is truncated, 'B' indicates a boxing/unboxing
operation, 'N' indicates a conversion Groovy can’t make.</p>
</div>
<div class="paragraph">
<p>The truncation uses <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Groovy-Truth">Groovy Truth</a> when converting to <code>boolean</code>/<code>Boolean</code>. Converting
from a number to a character casts the <code>Number.intvalue()</code> to <code>char</code>. Groovy constructs <code>BigInteger</code> and <code>BigDecimal</code>
using <code>Number.doubleValue()</code> when converting from a <code>Float</code> or <code>Double</code>, otherwise it constructs using <code>toString()</code>.
Other conversions have their behavior defined by <code>java.lang.Number</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_extra_keywords"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extra_keywords"></a>3.2.13. Extra keywords</h4>
<div class="paragraph">
<p>There are a few more keywords in Groovy than in Java.  Don’t use them for
variable names etc.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>as</code></p>
</li>
<li>
<p><code>def</code></p>
</li>
<li>
<p><code>in</code></p>
</li>
<li>
<p><code>trait</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovy_development_kit"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_development_kit"></a>3.3. Groovy Development Kit</h3>
<div class="sect3">
<h4 id="_working_with_io"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_io"></a>3.3.1. Working with IO</h4>
<div class="paragraph">
<p>Groovy provides a number of
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/gdk.html">helper methods</a> for working
with I/O. While you could use standard Java code in Groovy to deal with those,
Groovy provides much more convenient ways to handle files, streams, readers, …​</p>
</div>
<div class="paragraph">
<p>In particular, you should take a look at methods added to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>java.io.File</code> class : <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html</a></p>
</li>
<li>
<p>the <code>java.io.InputStream</code> class: <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html</a></p>
</li>
<li>
<p>the <code>java.io.OutputStream</code> class: <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/OutputStream.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/OutputStream.html</a></p>
</li>
<li>
<p>the <code>java.io.Reader</code> class: <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/Reader.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/Reader.html</a></p>
</li>
<li>
<p>the <code>java.io.Writer</code> class: <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/Writer.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/Writer.html</a></p>
</li>
<li>
<p>the <code>java.nio.file.Path</code> class: <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/nio/file/Path.html" class="bare">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/nio/file/Path.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following section focuses on sample idiomatic constructs using helper methods available above but is not meant
to be a complete description of all available methods. For that, please read the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/gdk.html">GDK API</a>.</p>
</div>
<div class="sect4">
<h5 id="_reading_files"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_reading_files"></a>Reading files</h5>
<div class="paragraph">
<p>As a first example, let’s see how you would print all lines of a text file in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">eachLine </span><span class="pun">{</span><span class="pln"> line </span><span class="pun">-&gt;</span><span class="pln">
    println line
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>eachLine</code> method is a method added to the <code>File</code> class automatically by Groovy and has many variants, for example
if you need to know the line number, you can use this variant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">eachLine </span><span class="pun">{</span><span class="pln"> line</span><span class="pun">,</span><span class="pln"> nb </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"Line $nb: $line"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If for whatever reason the an exception is thrown in the <code>eachLine</code> body, the method makes sure that the resource
is properly closed. This is true for all I/O resource methods that Groovy adds.</p>
</div>
<div class="paragraph">
<p>For example in some cases you will prefer to use a <code>Reader</code>, but still benefit from the automatic resource management
from Groovy. In the next example, the reader <strong>will</strong> be closed even if the exception occurs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> MAXSIZE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">"haiku.txt"</span><span class="pun">).</span><span class="pln">withReader </span><span class="pun">{</span><span class="pln"> reader </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">reader</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">count </span><span class="pun">&gt;</span><span class="pln"> MAXSIZE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RuntimeException</span><span class="pun">(</span><span class="str">'Haiku should only have 3 verses'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Should you need to collect the lines of a text file into a list, you can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">collect </span><span class="pun">{</span><span class="pln">it</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can even leverage the <code>as</code> operator to get the contents of the file into an array of lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'haiku.txt'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>How many times did you have to get the contents of a file into a <code>byte[]</code> and how much code does it require? Groovy
makes it very easy actually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> contents </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">bytes</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Working with I/O is not limited to dealing with files. In fact, a lot of operations rely on input/output streams,
hence why Groovy adds a lot of support methods to those, as you can see in the
<a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html">documentation</a>.</p>
</div>
<div class="paragraph">
<p>As an example, you can obtain an <code>InputStream</code> from a <code>File</code> very easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">newInputStream</span><span class="pun">()</span><span class="pln">
</span><span class="com">// do something ...</span><span class="pln">
</span><span class="kwd">is</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However you can see that it requires you to deal with closing the inputstream. In Groovy it is in general a better
idea to use the <code>withInputStream</code> idiom that will take care of that for you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">withInputStream </span><span class="pun">{</span><span class="pln"> stream </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="com">// do something ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_writing_files"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_writing_files"></a>Writing files</h5>
<div class="paragraph">
<p>Of course in some cases you won’t want to read but write a file. One of the options is to use a <code>Writer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'haiku.txt'</span><span class="pun">).</span><span class="pln">withWriter</span><span class="pun">(</span><span class="str">'utf-8'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> writer </span><span class="pun">-&gt;</span><span class="pln">
    writer</span><span class="pun">.</span><span class="pln">writeLine </span><span class="str">'Into the ancient pond'</span><span class="pln">
    writer</span><span class="pun">.</span><span class="pln">writeLine </span><span class="str">'A frog jumps'</span><span class="pln">
    writer</span><span class="pun">.</span><span class="pln">writeLine </span><span class="str">'Water’s sound!'</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But for such a simple example, using the <code>&lt;&lt;</code> operator would have been enough:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'haiku.txt'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'''Into the ancient pond
A frog jumps
Water’s sound!'''</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course we do not always deal with text contents, so you could use the <code>Writer</code> or directly write bytes as in
this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">file</span><span class="pun">.</span><span class="pln">bytes </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">66</span><span class="pun">,</span><span class="lit">22</span><span class="pun">,</span><span class="lit">11</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you can also directly deal with output streams. For example, here is how you would create an output
stream to write into a file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> os </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'data.bin'</span><span class="pun">).</span><span class="pln">newOutputStream</span><span class="pun">()</span><span class="pln">
</span><span class="com">// do something ...</span><span class="pln">
os</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However you can see that it requires you to deal with closing the output stream. Again it is in general a better
idea to use the <code>withOutputStream</code> idiom that will handle the exceptions and close the stream in any case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">baseDir</span><span class="pun">,</span><span class="str">'data.bin'</span><span class="pun">).</span><span class="pln">withOutputStream </span><span class="pun">{</span><span class="pln"> stream </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="com">// do something ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_traversing_file_trees"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traversing_file_trees"></a>Traversing file trees</h5>
<div class="paragraph">
<p>In scripting contexts it is a common task to traverse a file tree in order to find some specific files and do
something with them. Groovy provides multiple methods to do this. For example you can perform something on all files
of a directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dir</span><span class="pun">.</span><span class="pln">eachFile </span><span class="pun">{</span><span class="pln"> file </span><span class="pun">-&gt;</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    println file</span><span class="pun">.</span><span class="pln">name
</span><span class="pun">}</span><span class="pln">
dir</span><span class="pun">.</span><span class="pln">eachFileMatch</span><span class="pun">(~</span><span class="str">/.*\.txt/</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> file </span><span class="pun">-&gt;</span><span class="pln">     </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    println file</span><span class="pun">.</span><span class="pln">name
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>executes the closure code on each file found in the directory</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>executes the closure code on files in the directory matching the specified pattern</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Often you will have to deal with a deeper hierarchy of files, in which case you can use <code>eachFileRecurse</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dir</span><span class="pun">.</span><span class="pln">eachFileRecurse </span><span class="pun">{</span><span class="pln"> file </span><span class="pun">-&gt;</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    println file</span><span class="pun">.</span><span class="pln">name
</span><span class="pun">}</span><span class="pln">

dir</span><span class="pun">.</span><span class="pln">eachFileRecurse</span><span class="pun">(</span><span class="typ">FileType</span><span class="pun">.</span><span class="pln">FILES</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> file </span><span class="pun">-&gt;</span><span class="pln">      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    println file</span><span class="pun">.</span><span class="pln">name
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>executes the closure code on each file or directory found in the directory, recursively</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>executes the closure code only on files, but recursively</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>For more complex traversal techniques you can use the <code>traverse</code> method, which requires you to set a special flag
indicating what to do with the traversal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dir</span><span class="pun">.</span><span class="pln">traverse </span><span class="pun">{</span><span class="pln"> file </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">file</span><span class="pun">.</span><span class="pln">directory </span><span class="pun">&amp;&amp;</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">name</span><span class="pun">==</span><span class="str">'bin'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">FileVisitResult</span><span class="pun">.</span><span class="pln">TERMINATE                   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        println file</span><span class="pun">.</span><span class="pln">name
        </span><span class="typ">FileVisitResult</span><span class="pun">.</span><span class="pln">CONTINUE                    </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if the current file is a directory and its name is <code>bin</code>, stop the traversal</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>otherwise print the file name and continue</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_data_and_objects"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_data_and_objects"></a>Data and objects</h5>
<div class="paragraph">
<p>In Java it is not uncommon to serialize and deserialize data using the <code>java.io.DataOutputStream</code> and
<code>java.io.DataInputStream</code> classes respectively. Groovy will make it even easier to deal with them. For example, you could
serialize data into a file and deserialize it using this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">boolean</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Hello from Groovy'</span><span class="pln">
</span><span class="com">// Serialize data into a file</span><span class="pln">
file</span><span class="pun">.</span><span class="pln">withDataOutputStream </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">out</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">out</span><span class="pun">.</span><span class="pln">writeBoolean</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">out</span><span class="pun">.</span><span class="pln">writeUTF</span><span class="pun">(</span><span class="pln">message</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="com">// ...</span><span class="pln">
</span><span class="com">// Then read it back</span><span class="pln">
file</span><span class="pun">.</span><span class="pln">withDataInputStream </span><span class="pun">{</span><span class="pln"> input </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">readBoolean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> b
    </span><span class="kwd">assert</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">readUTF</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> message
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And similarily, if the data you want to serialize implements the <code>Serializable</code> interface, you can proceed with
an object output stream, as illustrated here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Person</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Bob'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="lit">76</span><span class="pun">)</span><span class="pln">
</span><span class="com">// Serialize data into a file</span><span class="pln">
file</span><span class="pun">.</span><span class="pln">withObjectOutputStream </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">out</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">out</span><span class="pun">.</span><span class="pln">writeObject</span><span class="pun">(</span><span class="pln">p</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="com">// ...</span><span class="pln">
</span><span class="com">// Then read it back</span><span class="pln">
file</span><span class="pun">.</span><span class="pln">withObjectInputStream </span><span class="pun">{</span><span class="pln"> input </span><span class="pun">-&gt;</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> p2 </span><span class="pun">=</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">readObject</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> p2</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">name
    </span><span class="kwd">assert</span><span class="pln"> p2</span><span class="pun">.</span><span class="pln">age </span><span class="pun">==</span><span class="pln"> p</span><span class="pun">.</span><span class="pln">age
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="process-management"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#process-management"></a>Executing External Processes</h5>
<div class="paragraph">
<p>The previous section described how easy it was to deal with files, readers or streams in Groovy. However in domains
like system administration or devops it is often required to communicate with external processes.</p>
</div>
<div class="paragraph">
<p>Groovy provides a simple way to execute command line processes. Simply
write the command line as a string and call the <code>execute()</code> method.
E.g., on a *nix machine (or a windows machine with appropriate *nix
commands installed), you can execute this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> process </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ls -l"</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
println </span><span class="str">"Found text ${process.text}"</span><span class="pln">        </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>executes the <code>ls</code> command in an external process</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>consume the output of the command and retrieve the text</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>execute()</code> method returns a <code>java.lang.Process</code> instance which will
subsequently allow the in/out/err streams to be processed and the exit
value from the process to be inspected etc.</p>
</div>
<div class="paragraph">
<p>e.g. here is the same command as above but we will now process the
resulting stream a line at a time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> process </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ls -l"</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">             </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
process</span><span class="pun">.</span><span class="kwd">in</span><span class="pun">.</span><span class="pln">eachLine </span><span class="pun">{</span><span class="pln"> line </span><span class="pun">-&gt;</span><span class="pln">               </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    println line                            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>executes the <code>ls</code> command in an external process</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>for each line of the input stream of the process</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>print the line</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is worth noting that <code>in</code> corresponds to an input stream to the standard output of the command. <code>out</code> will refer
to a stream where you can send data to the process (its standard input).</p>
</div>
<div class="paragraph">
<p>Remember that many commands are shell built-ins and need special
handling. So if you want a listing of files in a directory on a Windows
machine and write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> process </span><span class="pun">=</span><span class="pln"> </span><span class="str">"dir"</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
println </span><span class="str">"${process.text}"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>you will receive an <code>IOException</code> saying&nbsp; <em>Cannot run program "dir":
CreateProcess error=2, The system cannot find the file specified.</em></p>
</div>
<div class="paragraph">
<p>This is because <code>dir</code> is built-in to the Windows shell (<code>cmd.exe</code>) and
can’t be run as a simple executable. Instead, you will need to write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> process </span><span class="pun">=</span><span class="pln"> </span><span class="str">"cmd /c dir"</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
println </span><span class="str">"${process.text}"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, because this functionality currently makes use of
<code>java.lang.Process</code> undercover, the deficiencies of that class
must be taken into consideration. In particular, the javadoc
for this class says:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Because some native platforms only provide limited buffer size for
standard input and output streams, failure to promptly write the input
stream or read the output stream of the subprocess may cause the
subprocess to block, and even deadlock</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Because of this, Groovy provides some additional helper methods which
make stream handling for processes easier.</p>
</div>
<div class="paragraph">
<p>Here is how to gobble all of the output (including the error stream
output) from your process:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> p </span><span class="pun">=</span><span class="pln"> </span><span class="str">"rm -f foo.tmp"</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">([],</span><span class="pln"> tmpDir</span><span class="pun">)</span><span class="pln">
p</span><span class="pun">.</span><span class="pln">consumeProcessOutput</span><span class="pun">()</span><span class="pln">
p</span><span class="pun">.</span><span class="pln">waitFor</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are also variations of <code>consumeProcessOutput</code> that make use of <code>StringBuffer</code>, <code>InputStream</code>,
<code>OutputStream</code> etc…​ For a complete list, please read the
<a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Process.html">GDK API for java.lang.Process</a></p>
</div>
<div class="paragraph">
<p>In addition, these is a <code>pipeTo</code> command (mapped to <code>|</code>
to allow overloading) which lets the output stream of one process be fed
into the input stream of another process.</p>
</div>
<div class="paragraph">
<p>Here are some examples of use:</p>
</div>
<div class="listingblock">
<div class="title">Pipes in action</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">proc1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ls'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d o'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc3 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d e'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc4 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d i'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc1 </span><span class="pun">|</span><span class="pln"> proc2 </span><span class="pun">|</span><span class="pln"> proc3 </span><span class="pun">|</span><span class="pln"> proc4
proc4</span><span class="pun">.</span><span class="pln">waitFor</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">proc4</span><span class="pun">.</span><span class="pln">exitValue</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println proc4</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">text
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println proc4</span><span class="pun">.</span><span class="pln">text
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Consuming errors</div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> sout </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StringBuilder</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> serr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StringBuilder</span><span class="pun">()</span><span class="pln">
proc2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d o'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc3 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d e'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc4 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'tr -d i'</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">()</span><span class="pln">
proc4</span><span class="pun">.</span><span class="pln">consumeProcessOutput</span><span class="pun">(</span><span class="pln">sout</span><span class="pun">,</span><span class="pln"> serr</span><span class="pun">)</span><span class="pln">
proc2 </span><span class="pun">|</span><span class="pln"> proc3 </span><span class="pun">|</span><span class="pln"> proc4
</span><span class="pun">[</span><span class="pln">proc2</span><span class="pun">,</span><span class="pln"> proc3</span><span class="pun">].</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">consumeProcessErrorStream</span><span class="pun">(</span><span class="pln">serr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
proc2</span><span class="pun">.</span><span class="pln">withWriter </span><span class="pun">{</span><span class="pln"> writer </span><span class="pun">-&gt;</span><span class="pln">
    writer </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'testfile.groovy'</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
proc4</span><span class="pun">.</span><span class="pln">waitForOrKill</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln">
println </span><span class="str">"Standard output: $sout"</span><span class="pln">
println </span><span class="str">"Standard error: $serr"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_collections"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_collections"></a>3.3.2. Working with collections</h4>
<div class="paragraph">
<p>Groovy provides native support for various collection types, including <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Lists">lists</a>,
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Maps">maps</a> or <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Ranges">ranges</a>. Most of those are based on the Java
collection types and decorated with additional methods found in the <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a>.</p>
</div>
<div class="sect4">
<h5 id="Collections-Lists"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Lists"></a>Lists</h5>
<div class="sect5">
<h6 id="_list_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_literals"></a>List literals</h6>
<div class="paragraph">
<p>You can create lists as follows. Notice that <code>[]</code> is the empty list
expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> emptyList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyList</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
emptyList</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyList</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each list expression creates an implementation of <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html">java.util.List</a>.</p>
</div>
<div class="paragraph">
<p>Of course lists can be used as a source to construct another list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">]</span><span class="pln">
</span><span class="com">//construct a new list, seeded with the same items as in list1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;(</span><span class="pln">list1</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list2 </span><span class="pun">==</span><span class="pln"> list1 </span><span class="com">// == checks that each corresponding element is the same</span><span class="pln">

</span><span class="com">// clone() can also be called</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list3 </span><span class="pun">=</span><span class="pln"> list1</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list3 </span><span class="pun">==</span><span class="pln"> list1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A list is an ordered collection of objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pln">     </span><span class="com">// the specific kind of list being used</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">                     </span><span class="com">// indexing starts at 0</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">getAt</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">               </span><span class="com">// equivalent method to subscript operator []</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">                 </span><span class="com">// alternative method</span><span class="pln">

list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,]</span><span class="pln">           </span><span class="com">// trailing comma OK</span><span class="pln">

list</span><span class="pun">.</span><span class="pln">putAt</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span><span class="pln">                       </span><span class="com">// equivalent method to [] when value being changed</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">            </span><span class="com">// alternative method that returns old value</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.5f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2.5d</span><span class="pun">,</span><span class="pln"> </span><span class="str">'hello'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">]</span><span class="pln">
</span><span class="com">//objects can be of different types; duplicates allowed</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">][-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span><span class="pln">             </span><span class="com">// use negative indices to count from the end</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">][-</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">].</span><span class="pln">getAt</span><span class="pun">(-</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">       </span><span class="com">// getAt() available with negative index...</span><span class="pln">
</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">].</span><span class="kwd">get</span><span class="pun">(-</span><span class="lit">2</span><span class="pun">)</span><span class="pln">                 </span><span class="com">// but negative index not allowed with get()</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> e </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">IndexOutOfBoundsException</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_list_as_a_boolean_expression"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_list_as_a_boolean_expression"></a>List as a boolean expression</h6>
<div class="paragraph">
<p>Lists can be evaluated as a <code>boolean</code> value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![]</span><span class="pln">             </span><span class="com">// an empty list evaluates as false</span><span class="pln">

</span><span class="com">//all other lists, irrespective of contents, evaluate as true</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0.0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">false</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">null</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_iterating_on_a_list"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterating_on_a_list"></a>Iterating on a list</h6>
<div class="paragraph">
<p>Iterating on elements of a list is usually done calling the <code>each</code> and <code>eachWithIndex</code> methods, which execute code on each
item of a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">each </span><span class="pun">{</span><span class="pln">
    println </span><span class="str">"Item: $it"</span><span class="pln"> </span><span class="com">// `it` is an implicit parameter corresponding to the current element</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">].</span><span class="pln">eachWithIndex </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">,</span><span class="pln"> i </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="com">// `it` is the current element, while `i` is the index</span><span class="pln">
    println </span><span class="str">"$i: $it"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to iterating, it is often useful to create a new list by transforming each of its elements into
something else. This operation, often called mapping, is done in Groovy thanks to the <code>collect</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">collect </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">

</span><span class="com">// shortcut syntax instead of collect</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]*.</span><span class="pln">multiply</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">collect </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">multiply</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
</span><span class="com">// it is possible to give `collect` the list which collects the elements</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_manipulating_lists"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_lists"></a>Manipulating lists</h6>
<div class="sect6">
<h7 id="List-Filtering"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#List-Filtering"></a>Filtering and searching</h7>
<div class="paragraph">
<p>The <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> contains a lot of methods on collections that enhance
the standard collections with pragmatic methods, some of which are illustrated here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">find </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">           </span><span class="com">// find 1st element matching criteria</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">findAll </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">   </span><span class="com">// find all elements matching critieria</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">].</span><span class="pln">findIndexOf </span><span class="pun">{</span><span class="pln">      </span><span class="com">// find index of 1st element matching criteria</span><span class="pln">
    it </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'g'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">].</span><span class="pln">indexOf</span><span class="pun">(</span><span class="str">'c'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">  </span><span class="com">// index returned</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">].</span><span class="pln">indexOf</span><span class="pun">(</span><span class="str">'z'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="com">// index -1 means value not in list</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">].</span><span class="pln">lastIndexOf</span><span class="pun">(</span><span class="str">'c'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">every </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">}</span><span class="pln">               </span><span class="com">// returns true if all elements match the predicate</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">every </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">any </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">}</span><span class="pln">                 </span><span class="com">// returns true if any element matches the predicate</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">any </span><span class="pun">{</span><span class="pln"> it </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">].</span><span class="pln">sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">21</span><span class="pln">                </span><span class="com">// sum anything with a plus() method</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">].</span><span class="pln">sum </span><span class="pun">{</span><span class="pln">
    it </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> it </span><span class="pun">==</span><span class="pln"> </span><span class="str">'b'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> it </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> it </span><span class="pun">==</span><span class="pln"> </span><span class="str">'d'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> it </span><span class="pun">==</span><span class="pln"> </span><span class="str">'e'</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="com">// custom value to use in sum</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">].</span><span class="pln">sum </span><span class="pun">{</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> it</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">].</span><span class="pln">sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'abcde'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">]].</span><span class="pln">sum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">]</span><span class="pln">

</span><span class="com">// an initial value can be provided</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[].</span><span class="pln">sum</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1000</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">sum</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1006</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">join</span><span class="pun">(</span><span class="str">'-'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'1-2-3'</span><span class="pln">           </span><span class="com">// String joining</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">inject</span><span class="pun">(</span><span class="str">'counting: '</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    str</span><span class="pun">,</span><span class="pln"> item </span><span class="pun">-&gt;</span><span class="pln"> str </span><span class="pun">+</span><span class="pln"> item                     </span><span class="com">// reduce operation</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'counting: 123'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">inject</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> count</span><span class="pun">,</span><span class="pln"> item </span><span class="pun">-&gt;</span><span class="pln">
    count </span><span class="pun">+</span><span class="pln"> item
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is idiomatic Groovy code for finding the maximum and minimum in a collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">max</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">min</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="com">// we can also compare single characters, as anything comparable</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'x'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'y'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">].</span><span class="pln">min</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">

</span><span class="com">// we can use a closure to specify the sorting behaviour</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> list2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'xyzuvw'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Hello'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'321'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list2</span><span class="pun">.</span><span class="pln">max </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'xyzuvw'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list2</span><span class="pun">.</span><span class="pln">min </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'z'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to closures, you can use a <code>Comparator</code> to define the comparison criteria:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Comparator</span><span class="pln"> mc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">&lt;</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="pln">mc</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">11</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">min</span><span class="pun">(</span><span class="pln">mc</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pln">

</span><span class="typ">Comparator</span><span class="pln"> mc2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">b</span><span class="pun">))</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">


</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="pln">mc2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">min</span><span class="pun">(</span><span class="pln">mc2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">max </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">min </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_adding_or_removing_elements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_or_removing_elements"></a>Adding or removing elements</h7>
<div class="paragraph">
<p>We can use <code>[]</code> to assign a new empty list and <code>&lt;&lt;</code> to append items to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">empty

list </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

list </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">7</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'i'</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">11</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="str">'i'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">]</span><span class="pln">

list </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">[</span><span class="str">'m'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'o'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="str">'i'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'m'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'o'</span><span class="pun">]]</span><span class="pln">

</span><span class="com">//first item in chain of &lt;&lt; is target list</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">],</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">

</span><span class="com">//using leftShift is equivalent to using &lt;&lt;</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">leftShift</span><span class="pun">(</span><span class="lit">4</span><span class="pun">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can add to a list in many ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">6</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">
</span><span class="com">// equivalent to calling the `plus` method</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">].</span><span class="pln">plus</span><span class="pun">(</span><span class="lit">3</span><span class="pun">).</span><span class="pln">plus</span><span class="pun">([</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]).</span><span class="pln">plus</span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
a </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">      </span><span class="com">// creates a new list and assigns it to `a`</span><span class="pln">
a </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*[</span><span class="lit">222</span><span class="pun">,</span><span class="pln"> </span><span class="lit">333</span><span class="pun">],</span><span class="pln"> </span><span class="lit">456</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">222</span><span class="pun">,</span><span class="pln"> </span><span class="lit">333</span><span class="pun">,</span><span class="pln"> </span><span class="lit">456</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[*[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">],</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]].</span><span class="pln">flatten</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">addAll</span><span class="pun">([</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">])</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln">

list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="com">// add 3 just before index 1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">

list</span><span class="pun">.</span><span class="pln">addAll</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">])</span><span class="pln"> </span><span class="com">//add [5,4] just before index 2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">

list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'u'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'v'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'g'</span><span class="pun">]</span><span class="pln">
list</span><span class="pun">[</span><span class="lit">8</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'x'</span><span class="pln"> </span><span class="com">// the [] operator is growing the list as needed</span><span class="pln">
</span><span class="com">// nulls inserted if required</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'u'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'v'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'g'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is however important that the <code>+</code> operator on a list is <strong>not mutating</strong>. Compared to <code>&lt;&lt;</code>, it will create a new
list, which is often not what you want and can lead to performance issues.</p>
</div>
<div class="paragraph">
<p>The <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> also contains methods allowing you to easily remove elements from a list by value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="str">'c'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="str">'b'</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">[</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
list </span><span class="pun">-=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">           </span><span class="com">// creates a new list by removing `3` from the original one</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> list </span><span class="pun">-=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to remove an element by passing its index to the <code>remove</code> method, in which case the list is mutated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">,</span><span class="str">'e'</span><span class="pun">,</span><span class="str">'f'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'a'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">        </span><span class="com">// remove the third element, and return it</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">,</span><span class="str">'e'</span><span class="pun">,</span><span class="str">'f'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'a'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In case you only want to remove the first element having the same value in a list, instead of removing all
elements, you can call the <code>remove</code> method passing the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list</span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'c'</span><span class="pun">)</span><span class="pln">             </span><span class="com">// remove 'c', and return true because element removed</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'b'</span><span class="pun">)</span><span class="pln">             </span><span class="com">// remove first 'b', and return true because element removed</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">'z'</span><span class="pun">)</span><span class="pln">           </span><span class="com">// return false because no elements removed</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, there are two <code>remove</code> methods available.  One that takes an integer and removes an element
by its index, and another that will remove the first element that matches the passed value.  So what should we
do when we have a list of integers?  In this case, you may wish to use <code>removeAt</code> to remove an element by its
index, and <code>removeElement</code> to remove the first element that matches a value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">          </span><span class="com">// this removes the element at index 2, and returns it</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">removeElement</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">        </span><span class="com">// remove first 2 and return true</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">removeElement</span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">      </span><span class="com">// return false because 8 is not in the list</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">removeAt</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">        </span><span class="com">// remove element at index 1, and return it</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, <code>removeAt</code> and <code>removeElement</code> will work with lists of any type.</p>
</div>
<div class="paragraph">
<p>Additionally, removing all the elements in a list can be done by calling the <code>clear</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> list</span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]</span><span class="pln">
list</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[]</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_set_operations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_set_operations"></a>Set operations</h7>
<div class="paragraph">
<p>The <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> also includes methods making it easy to reason on sets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="str">'a'</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">             </span><span class="com">// returns true if an element belongs to the list</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">].</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">      </span><span class="com">// equivalent to the `contains` method in Java</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">].</span><span class="pln">containsAll</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">4</span><span class="pun">])</span><span class="pln">       </span><span class="com">// `containsAll` will check that all elements are found</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">].</span><span class="pln">count</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">  </span><span class="com">// count the number of elements which have some value</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">].</span><span class="pln">count </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">0</span><span class="pln">                             </span><span class="com">// count the number of elements which match the predicate</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">8</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="lit">12</span><span class="pun">].</span><span class="pln">intersect</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">9</span><span class="pun">,</span><span class="lit">12</span><span class="pun">])</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">12</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">].</span><span class="pln">disjoint</span><span class="pun">(</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">![</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">].</span><span class="pln">disjoint</span><span class="pun">(</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">6</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_sorting"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sorting"></a>Sorting</h7>
<div class="paragraph">
<p>Working with collections often implies sorting. Groovy offers a variety of options to sort lists,
from using closures to comparators, as in the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">].</span><span class="pln">sort</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'abc'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'xyzuvw'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Hello'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'321'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list</span><span class="pun">.</span><span class="pln">sort </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'abc'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'321'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Hello'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'xyzuvw'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list2</span><span class="pun">.</span><span class="pln">sort </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln">
        </span><span class="pun">[-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">13</span><span class="pun">]</span><span class="pln">

</span><span class="typ">Comparator</span><span class="pln"> mc </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="com">// JDK 8+ only</span><span class="pln">
</span><span class="com">// list2.sort(mc)</span><span class="pln">
</span><span class="com">// assert list2 == [-1, 2, 3, 4, 5, -6, 7, -9, 11, -13]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln">

</span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">list3</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list3 </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[-</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">

</span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">list3</span><span class="pun">,</span><span class="pln"> mc</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list3 </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_duplicating_elements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_duplicating_elements"></a>Duplicating elements</h7>
<div class="paragraph">
<p>The <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> also takes advantage of operator overloading to provide methods allowing duplication of elements
of a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">].</span><span class="pln">multiply</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">nCopies</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">]</span><span class="pln">

</span><span class="com">// nCopies from the JDK has different semantics than multiply for lists</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">nCopies</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">])</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]]</span><span class="pln"> </span><span class="com">//not [1,2,1,2]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Collections-Maps"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Maps"></a>Maps</h5>
<div class="sect5">
<h6 id="_map_literals"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_literals"></a>Map literals</h6>
<div class="paragraph">
<p>In Groovy, maps (also known as associative arrays) can be created using the map literal syntax: <code>[:]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pun">,</span><span class="pln"> likes</span><span class="pun">:</span><span class="pln"> </span><span class="str">'cheese'</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1234</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'id'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1234</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">[</span><span class="str">'name'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">[</span><span class="str">'id'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1234</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> emptyMap </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
emptyMap</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Map keys are strings by default: <code>[a:1]</code> is equivalent to <code>['a':1]</code>. This can be confusing if you define a variable
named <code>a</code> and that you want the <strong>value</strong> of <code>a</code> to be the key in your map. If this is the case, then you <strong>must</strong> escape
the key by adding parenthesis, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> ages </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="lit">43</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> ages</span><span class="pun">[</span><span class="str">'Bob'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="com">// `Bob` is not found</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> ages</span><span class="pun">[</span><span class="str">'a'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">43</span><span class="pln">     </span><span class="com">// because `a` is a literal!</span><span class="pln">

ages </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">a</span><span class="pun">):</span><span class="pln"> </span><span class="lit">43</span><span class="pun">]</span><span class="pln">            </span><span class="com">// now we escape `a` by using parenthesis</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> ages</span><span class="pun">[</span><span class="str">'Bob'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">43</span><span class="pln">   </span><span class="com">// and the value is found!</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to map literals, it is possible, to get a new copy of a map, to clone it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        simple </span><span class="pun">:</span><span class="pln"> </span><span class="lit">123</span><span class="pun">,</span><span class="pln">
        complex</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln">
</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map2 </span><span class="pun">=</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map2</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'simple'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'simple'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map2</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'complex'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'complex'</span><span class="pun">)</span><span class="pln">
map2</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'complex'</span><span class="pun">).</span><span class="pln">put</span><span class="pun">(</span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'complex'</span><span class="pun">).</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'c'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting map is a <strong>shallow</strong> copy of the original one, as illustrated in the previous example.</p>
</div>
</div>
<div class="sect5">
<h6 id="_map_property_notation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_property_notation"></a>Map property notation</h6>
<div class="paragraph">
<p>Maps also act like beans so you can use the property notation to get/set
items inside the <code>Map</code> as long as the keys are strings which are valid
Groovy identifiers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pun">,</span><span class="pln"> likes</span><span class="pun">:</span><span class="pln"> </span><span class="str">'cheese'</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1234</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pln">     </span><span class="com">// can be used instead of map.get('name')</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">id </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1234</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> emptyMap </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
emptyMap</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> emptyMap</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">==</span><span class="pln"> </span><span class="lit">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: by design <code>map.foo</code> will always look for the key <code>foo</code> in the map. This
means <code>foo.class</code> will return <code>null</code> on a map that doesn’t contain the <code>class</code> key. Should you really want to know
the class, then you must use <code>getClass()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Gromit'</span><span class="pun">,</span><span class="pln"> likes</span><span class="pun">:</span><span class="pln"> </span><span class="str">'cheese'</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1234</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'class'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">LinkedHashMap</span><span class="pln"> </span><span class="com">// this is probably what you want</span><span class="pln">

map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pln">      </span><span class="pun">:</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln">
       </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'p'</span><span class="pun">,</span><span class="pln">
       </span><span class="pun">(</span><span class="kwd">false</span><span class="pun">):</span><span class="pln"> </span><span class="str">'q'</span><span class="pun">,</span><span class="pln">
       </span><span class="pun">(</span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">,</span><span class="pln">
       </span><span class="str">'null'</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 1 is not an identifier so used as is</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">true</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">false</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'p'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'q'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">null</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'z'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'x'</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_iterating_on_maps"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterating_on_maps"></a>Iterating on maps</h6>
<div class="paragraph">
<p>As usual in the <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a>, idiomatic iteration on maps makes use of the <code>each</code> and <code>eachWithIndex</code> methods.
It’s worth noting that maps created using the map literal notation are <strong>ordered</strong>, that is to say that if you iterate
on map entries, it is guaranteed that the entries will be returned in the same order they were added in the map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="typ">Bob</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">Alice</span><span class="pun">:</span><span class="pln"> </span><span class="lit">54</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">Max</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">33</span><span class="pln">
</span><span class="pun">]</span><span class="pln">

</span><span class="com">// `entry` is a map entry</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> entry </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"Name: $entry.key Age: $entry.value"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// `entry` is a map entry, `i` the index in the map</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">eachWithIndex </span><span class="pun">{</span><span class="pln"> entry</span><span class="pun">,</span><span class="pln"> i </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"$i - Name: $entry.key Age: $entry.value"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// Alternatively you can use key and value directly</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> key</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"Name: $key Age: $value"</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// Key, value and i as the index in the map</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">eachWithIndex </span><span class="pun">{</span><span class="pln"> key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> i </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"$i - Name: $key Age: $value"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_manipulating_maps"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_maps"></a>Manipulating maps</h6>
<div class="sect6">
<h7 id="_adding_or_removing_elements_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_or_removing_elements_2"></a>Adding or removing elements</h7>
<div class="paragraph">
<p>Adding an element to a map can be done either using the <code>put</code> method, the subscript operator or using <code>putAll</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> defaults </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">:</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> overrides </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">:</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">:</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinkedHashMap</span><span class="pun">(</span><span class="pln">defaults</span><span class="pun">)</span><span class="pln">
result</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="lit">15</span><span class="pun">,</span><span class="pln"> </span><span class="str">'t'</span><span class="pun">)</span><span class="pln">
result</span><span class="pun">[</span><span class="lit">17</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'u'</span><span class="pln">
result</span><span class="pun">.</span><span class="pln">putAll</span><span class="pun">(</span><span class="pln">overrides</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> result </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">:</span><span class="pln"> </span><span class="str">'d'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">:</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">:</span><span class="pln"> </span><span class="str">'x'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="pln"> </span><span class="str">'t'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">17</span><span class="pun">:</span><span class="pln"> </span><span class="str">'u'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Removing all the elements of a map can be done by calling the <code>clear</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="str">'b'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> m</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">
m</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> m </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[:]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Maps generated using the map literal syntax are using the object <code>equals</code> and <code>hashcode</code> methods. This means that
you should <strong>never</strong> use an object which hash code is subject to change over time, or you wouldn’t be able to get
the associated value back.</p>
</div>
<div class="paragraph">
<p>It is also worth noting that you should <strong>never</strong> use a <code>GString</code> as the key of a map, because the hash code of a <code>GString</code>
is not the same as the hash code of an equivalent <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> </span><span class="str">'some key'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> gstringKey </span><span class="pun">=</span><span class="pln"> </span><span class="str">"${key.toUpperCase()}"</span><span class="pln">
map</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">gstringKey</span><span class="pun">,</span><span class="str">'value'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> map</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'SOME KEY'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="JN1035-Maps-Collectionviewsofamap"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#JN1035-Maps-Collectionviewsofamap"></a>Keys, values and entries</h7>
<div class="paragraph">
<p>We can inspect the keys, values, and entries in a view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> entries </span><span class="pun">=</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">entrySet</span><span class="pun">()</span><span class="pln">
entries</span><span class="pun">.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> entry </span><span class="pun">-&gt;</span><span class="pln">
  </span><span class="kwd">assert</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">key </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span><span class="pln">
  </span><span class="kwd">assert</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">value </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> keys </span><span class="pun">=</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">keySet</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> keys </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">Set</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mutating values returned by the view (be it a map entry, a key or a value) is highly discouraged because success
of the operation directly depends on the type of the map being manipulated. In particular, Groovy relies on collections
from the JDK that in general make no guarantee that a collection can safely be manipulated through <code>keySet</code>, <code>entrySet</code>, or
<code>values</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_filtering_and_searching"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_filtering_and_searching"></a>Filtering and searching</h7>
<div class="paragraph">
<p>The <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> contains filtering, searching and collecting methods similar to those found
for <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#List-Filtering">lists</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> people </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Bob'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">32</span><span class="pun">,</span><span class="pln"> gender</span><span class="pun">:</span><span class="pln"> </span><span class="str">'M'</span><span class="pun">],</span><span class="pln">
    </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Johnny'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">36</span><span class="pun">,</span><span class="pln"> gender</span><span class="pun">:</span><span class="pln"> </span><span class="str">'M'</span><span class="pun">],</span><span class="pln">
    </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Claire'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> gender</span><span class="pun">:</span><span class="pln"> </span><span class="str">'F'</span><span class="pun">],</span><span class="pln">
    </span><span class="lit">4</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Amy'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">54</span><span class="pun">,</span><span class="pln"> gender</span><span class="pun">:</span><span class="str">'F'</span><span class="pun">]</span><span class="pln">
</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> bob </span><span class="pun">=</span><span class="pln"> people</span><span class="pun">.</span><span class="pln">find </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">value</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Bob'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="com">// find a single entry</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> females </span><span class="pun">=</span><span class="pln"> people</span><span class="pun">.</span><span class="pln">findAll </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">value</span><span class="pun">.</span><span class="pln">gender </span><span class="pun">==</span><span class="pln"> </span><span class="str">'F'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="com">// both return entries, but you can use collect to retrieve the ages for example</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> ageOfBob </span><span class="pun">=</span><span class="pln"> bob</span><span class="pun">.</span><span class="pln">value</span><span class="pun">.</span><span class="pln">age
</span><span class="kwd">def</span><span class="pln"> agesOfFemales </span><span class="pun">=</span><span class="pln"> females</span><span class="pun">.</span><span class="pln">collect </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">.</span><span class="pln">value</span><span class="pun">.</span><span class="pln">age
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> ageOfBob </span><span class="pun">==</span><span class="pln"> </span><span class="lit">32</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> agesOfFemales </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">21</span><span class="pun">,</span><span class="lit">54</span><span class="pun">]</span><span class="pln">

</span><span class="com">// but you could also use a key/pair value as the parameters of the closures</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> agesOfMales </span><span class="pun">=</span><span class="pln"> people</span><span class="pun">.</span><span class="pln">findAll </span><span class="pun">{</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> person </span><span class="pun">-&gt;</span><span class="pln">
    person</span><span class="pun">.</span><span class="pln">gender </span><span class="pun">==</span><span class="pln"> </span><span class="str">'M'</span><span class="pln">
</span><span class="pun">}.</span><span class="pln">collect </span><span class="pun">{</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> person </span><span class="pun">-&gt;</span><span class="pln">
    person</span><span class="pun">.</span><span class="pln">age
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> agesOfMales </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">32</span><span class="pun">,</span><span class="pln"> </span><span class="lit">36</span><span class="pun">]</span><span class="pln">

</span><span class="com">// `every` returns true if all entries match the predicate</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> people</span><span class="pun">.</span><span class="pln">every </span><span class="pun">{</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> person </span><span class="pun">-&gt;</span><span class="pln">
    person</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">18</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// `any` returns true if any entry matches the predicate</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> people</span><span class="pun">.</span><span class="pln">any </span><span class="pun">{</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> person </span><span class="pun">-&gt;</span><span class="pln">
    person</span><span class="pun">.</span><span class="pln">age </span><span class="pun">==</span><span class="pln"> </span><span class="lit">54</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="Maps-Grouping"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Maps-Grouping"></a>Grouping</h7>
<div class="paragraph">
<p>We can group a list into a map using some criteria:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]].</span><span class="pln">groupBy </span><span class="pun">{</span><span class="pln">
    it</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[(</span><span class="typ">String</span><span class="pun">)</span><span class="pln">   </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">],</span><span class="pln">
      </span><span class="pun">(</span><span class="typ">Integer</span><span class="pun">)</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln">
      </span><span class="pun">(</span><span class="typ">ArrayList</span><span class="pun">):</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Clark'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'London'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Sharma'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'London'</span><span class="pun">],</span><span class="pln">
        </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Maradona'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'LA'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Zhang'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">],</span><span class="pln">
        </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ali'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Liu'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">],</span><span class="pln">
</span><span class="pun">].</span><span class="pln">groupBy </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">city </span><span class="pun">}</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="typ">London</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Clark'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'London'</span><span class="pun">],</span><span class="pln">
                 </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Sharma'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'London'</span><span class="pun">]],</span><span class="pln">
        LA    </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Maradona'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'LA'</span><span class="pun">]],</span><span class="pln">
        HK    </span><span class="pun">:</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Zhang'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">],</span><span class="pln">
                 </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ali'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">],</span><span class="pln">
                 </span><span class="pun">[</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Liu'</span><span class="pun">,</span><span class="pln"> city</span><span class="pun">:</span><span class="pln"> </span><span class="str">'HK'</span><span class="pun">]],</span><span class="pln">
</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Collections-Ranges"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Ranges"></a>Ranges</h5>
<div class="paragraph">
<p>Ranges allow you to create a list of sequential values. These can be
used as <code>List</code> since
<a href="http://docs.groovy-lang.org/latest/html/api/groovy/lang/Range.html">Range</a> extends
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html">java.util.List</a>.</p>
</div>
<div class="paragraph">
<p>Ranges defined with the <code>..</code> notation are inclusive (that is the list
contains the from and to value).</p>
</div>
<div class="paragraph">
<p>Ranges defined with the <code>..&lt;</code> notation are half-open, they include the
first value but not the last value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// an inclusive range</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> range </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5.</span><span class="pun">.</span><span class="lit">8</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">

</span><span class="com">// lets use a half-open range</span><span class="pln">
range </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5.</span><span class="pun">.&lt;</span><span class="lit">8</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">

</span><span class="com">//get the end points of the range without using indexes</span><span class="pln">
range </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">.</span><span class="lit">10</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="kwd">from</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">to </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that int ranges are implemented efficiently, creating a lightweight
Java object containing a from and to value.</p>
</div>
<div class="paragraph">
<p>Ranges can be used for any Java object which implements java.lang.Comparable
for comparison and also have methods <code>next()</code> and <code>previous()</code> to return the
next / previous item in the range. For example, you can create a range of <code>String</code> elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// an inclusive range</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> range </span><span class="pun">=</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">..</span><span class="str">'d'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range </span><span class="kwd">instanceof</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'d'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">range</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="str">'e'</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can iterate on a range using a classic <code>for</code> loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">.</span><span class="lit">10</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    println </span><span class="str">"Hello ${i}"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>but alternatively you can achieve the same effect in a more Groovy idiomatic style, by iterating a range
with <code>each</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pun">(</span><span class="lit">1.</span><span class="pun">.</span><span class="lit">10</span><span class="pun">).</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> i </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="str">"Hello ${i}"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ranges can be also used in the <code>switch</code> statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">years</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">.</span><span class="lit">10</span><span class="pun">:</span><span class="pln"> interestRate </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.076</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">11.</span><span class="pun">.</span><span class="lit">25</span><span class="pun">:</span><span class="pln"> interestRate </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.052</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> interestRate </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.037</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_syntax_enhancements_for_collections"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_syntax_enhancements_for_collections"></a>Syntax enhancements for collections</h5>
<div class="sect5">
<h6 id="_gpath_support"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath_support"></a>GPath support</h6>
<div class="paragraph">
<p>Thanks to the support of property notation for both lists and maps, Groovy provides syntactic sugar making it
really easy to deal with nested collections, as illustrated in the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> listOfMaps </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">12</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">22</span><span class="pun">]]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listOfMaps</span><span class="pun">.</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">21</span><span class="pun">]</span><span class="pln"> </span><span class="com">//GPath notation</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listOfMaps</span><span class="pun">*.</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">21</span><span class="pun">]</span><span class="pln"> </span><span class="com">//spread dot notation</span><span class="pln">

listOfMaps </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">12</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">22</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listOfMaps</span><span class="pun">*.</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">]</span><span class="pln"> </span><span class="com">// caters for null values</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listOfMaps</span><span class="pun">*.</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> listOfMaps</span><span class="pun">.</span><span class="pln">collect </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">?.</span><span class="pln">a </span><span class="pun">}</span><span class="pln"> </span><span class="com">//equivalent notation</span><span class="pln">
</span><span class="com">// But this will only collect non-null values</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> listOfMaps</span><span class="pun">.</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">11</span><span class="pun">,</span><span class="lit">21</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_spread_operator_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spread_operator_2"></a>Spread operator</h6>
<div class="paragraph">
<p>The spread operator can be used to "inline" a collection into another. It is syntactic sugar which often avoids calls
to <code>putAll</code> and facilitates the realization of one-liners:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">900</span><span class="pun">,</span><span class="pln">
         </span><span class="pun">*:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">200</span><span class="pun">],</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">300</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">300</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="str">'z'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">900</span><span class="pun">]</span><span class="pln">
</span><span class="com">//spread map notation in map definition</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[*:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]],</span><span class="pln"> </span><span class="lit">7</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="str">'u'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'v'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="str">'w'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[*:</span><span class="pln"> f</span><span class="pun">(),</span><span class="pln"> </span><span class="lit">10</span><span class="pun">:</span><span class="pln"> </span><span class="str">'zz'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln"> </span><span class="str">'u'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">:</span><span class="pln"> </span><span class="str">'zz'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> </span><span class="str">'v'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="str">'w'</span><span class="pun">]</span><span class="pln">
</span><span class="com">//spread map notation in function arguments</span><span class="pln">
f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> map </span><span class="pun">-&gt;</span><span class="pln"> map</span><span class="pun">.</span><span class="pln">c </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">(*:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">30</span><span class="pun">],</span><span class="pln"> </span><span class="str">'e'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">50</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">30</span><span class="pln">

f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">,</span><span class="pln"> k </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">[</span><span class="pln">m</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="com">//using spread map notation with mixed unnamed and named arguments</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">(</span><span class="str">'e'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">],</span><span class="pln"> </span><span class="pun">*:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="str">'c'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">30</span><span class="pun">],</span><span class="pln"> </span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln">
        </span><span class="pun">[[</span><span class="str">"e"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="str">"b"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="str">"c"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">30</span><span class="pun">,</span><span class="pln"> </span><span class="str">"a"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pun">],</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="Collections-Gettingefficientwiththestar-dotoperator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Gettingefficientwiththestar-dotoperator"></a>The star-dot `*.' operator</h6>
<div class="paragraph">
<p>The "star-dot" operator is a shortcut operator allowing you to call a method or a property on all elements of a
collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'few'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'words'</span><span class="pun">]*.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name
    </span><span class="kwd">int</span><span class="pln"> age
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> persons </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Hugo'</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">:</span><span class="lit">17</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="str">'Sandra'</span><span class="pun">,</span><span class="pln">age</span><span class="pun">:</span><span class="lit">19</span><span class="pun">)]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">[</span><span class="lit">17</span><span class="pun">,</span><span class="pln"> </span><span class="lit">19</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> persons</span><span class="pun">*.</span><span class="pln">age</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="Collections-Slicingwiththesubscriptoperator"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Slicingwiththesubscriptoperator"></a>Slicing with the subscript operator</h6>
<div class="paragraph">
<p>You can index into lists, arrays, maps using the subscript expression. It is interesting that strings
are considered as special kinds of collections in that context:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> </span><span class="str">'nice cheese gromit!'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="str">'c'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">String</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">[</span><span class="lit">5.</span><span class="pun">.</span><span class="lit">10</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'cheese'</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> answer </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> answer </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">12</span><span class="pun">,</span><span class="lit">13</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that you can use ranges to extract part of a collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">list </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100.</span><span class="pun">.</span><span class="lit">200</span><span class="pln">
</span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20.</span><span class="pun">.</span><span class="lit">25</span><span class="pun">,</span><span class="pln"> </span><span class="lit">33</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">101</span><span class="pun">,</span><span class="pln"> </span><span class="lit">103</span><span class="pun">,</span><span class="pln"> </span><span class="lit">120</span><span class="pun">,</span><span class="pln"> </span><span class="lit">121</span><span class="pun">,</span><span class="pln"> </span><span class="lit">122</span><span class="pun">,</span><span class="pln"> </span><span class="lit">123</span><span class="pun">,</span><span class="pln"> </span><span class="lit">124</span><span class="pun">,</span><span class="pln"> </span><span class="lit">125</span><span class="pun">,</span><span class="pln"> </span><span class="lit">133</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The subscript operator can be used to update an existing collection (for collection type which are not immutable):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'x'</span><span class="pun">,</span><span class="str">'x'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">]</span><span class="pln">
list</span><span class="pun">[</span><span class="lit">1.</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> list </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is worth noting that negative indices are allowed, to extract more easily from the end of a collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">text </span><span class="pun">=</span><span class="pln"> </span><span class="str">"nice cheese gromit!"</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> x </span><span class="pun">==</span><span class="pln"> </span><span class="str">"!"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use negative indices to count from the end of the List, array,
String etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">[-</span><span class="lit">7.</span><span class="pun">.-</span><span class="lit">2</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> name </span><span class="pun">==</span><span class="pln"> </span><span class="str">"gromit"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Eventually, if you use a backwards range (the starting index is greater than
the end index), then the answer is reversed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">text </span><span class="pun">=</span><span class="pln"> </span><span class="str">"nice cheese gromit!"</span><span class="pln">
name </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">[</span><span class="lit">3.</span><span class="pun">.</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> name </span><span class="pun">==</span><span class="pln"> </span><span class="str">"eci"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Collections-EnhancedCollectionMethods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-EnhancedCollectionMethods"></a>Enhanced Collection Methods</h5>
<div class="paragraph">
<p>In addition to <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Lists">lists</a>, <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Maps">maps</a> or <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#Collections-Ranges">ranges</a>, Groovy offers
a lot of additional methods for filtering, collecting, grouping, counting, …​ which are directly available on either
collections or more easily iterables.</p>
</div>
<div class="paragraph">
<p>In particular, we invite you to read the <a href="http://www.groovy-lang.org/gdk.html">Groovy development kit</a> API docs and specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>methods added to <code>Iterable</code> can be found <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Iterable.html">here</a></p>
</li>
<li>
<p>methods added to <code>Iterator</code> can be found <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Iterator.html">here</a></p>
</li>
<li>
<p>methods added to <code>Collection</code> can be found <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Collection.html">here</a></p>
</li>
<li>
<p>methods added to <code>List</code> can be found <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/List.html">here</a></p>
</li>
<li>
<p>methods added to <code>Map</code> can be found <a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html">here</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_legacy_date_calendar_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_legacy_date_calendar_types"></a>3.3.3. Working with legacy Date/Calendar types</h4>
<div class="paragraph">
<p>The <code>groovy-dateutil</code> module supports numerous extensions for working with
Java’s classic <code>Date</code> and <code>Calendar</code> classes.</p>
</div>
<div class="paragraph">
<p>You can access the properties of a <code>Date</code> or <code>Calendar</code> using the normal array index notation
with the constant field numbers from the <code>Calendar</code> class as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Calendar</span><span class="pun">.*</span><span class="pln">    </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> cal </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">instance
cal</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2000</span><span class="pln">                      </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
cal</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> JANUARY                  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
cal</span><span class="pun">[</span><span class="pln">DAY_OF_MONTH</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">                 </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> cal</span><span class="pun">[</span><span class="pln">DAY_OF_WEEK</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> SATURDAY   </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import the constants</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Setting the calendar’s year, month and day of month</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Accessing the calendar’s day of week</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Groovy supports arithmetic on and iteration between <code>Date</code> and <code>Calendar</code> instances as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> utc </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TimeZone</span><span class="pun">.</span><span class="pln">getTimeZone</span><span class="pun">(</span><span class="str">'UTC'</span><span class="pun">)</span><span class="pln">
</span><span class="typ">Date</span><span class="pln"> date </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">"yyyy-MM-dd HH:mm"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"2010-05-23 09:01"</span><span class="pun">,</span><span class="pln"> utc</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> date </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">next</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> date </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> diffInDays </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">next</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> prev
</span><span class="kwd">assert</span><span class="pln"> diffInDays </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
prev</span><span class="pun">.</span><span class="pln">upto</span><span class="pun">(</span><span class="kwd">next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> count</span><span class="pun">++</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can parse strings into dates and output dates into formatted strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> orig </span><span class="pun">=</span><span class="pln"> </span><span class="str">'2000-01-01'</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> newYear </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'yyyy-MM-dd'</span><span class="pun">,</span><span class="pln"> orig</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> newYear</span><span class="pun">[</span><span class="pln">DAY_OF_WEEK</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> SATURDAY
</span><span class="kwd">assert</span><span class="pln"> newYear</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">'yyyy-MM-dd'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> orig
</span><span class="kwd">assert</span><span class="pln"> newYear</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">'dd/MM/yyyy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'01/01/2000'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create a new Date or Calendar based on an existing one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> newYear </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'yyyy-MM-dd'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2000-01-01'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> newYearsEve </span><span class="pun">=</span><span class="pln"> newYear</span><span class="pun">.</span><span class="pln">copyWith</span><span class="pun">(</span><span class="pln">
    year</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1999</span><span class="pun">,</span><span class="pln">
    month</span><span class="pun">:</span><span class="pln"> DECEMBER</span><span class="pun">,</span><span class="pln">
    dayOfMonth</span><span class="pun">:</span><span class="pln"> </span><span class="lit">31</span><span class="pln">
</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> newYearsEve</span><span class="pun">[</span><span class="pln">DAY_OF_WEEK</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> FRIDAY</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_date_time_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_date_time_types"></a>3.3.4. Working with Date/Time types</h4>
<div class="paragraph">
<p>The <code>groovy-datetime</code> module supports numerous extensions for working with
the <a href="http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html">Date/Time API</a>
introduced in Java 8. This documentation refers to the data types defined by this API as
"JSR 310 types."</p>
</div>
<div class="sect4">
<h5 id="_formatting_and_parsing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_formatting_and_parsing"></a>Formatting and parsing</h5>
<div class="paragraph">
<p>A common use case when working with date/time types is to convert them to Strings (formatting)
and from Strings (parsing). Groovy provides these additional formatting methods:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getDateString()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalDate</code> and <code>LocalDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE"><code>DateTimeFormatter.ISO_LOCAL_DATE</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>OffsetDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_OFFSET_DATE"><code>DateTimeFormatter.ISO_OFFSET_DATE</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10+04:00</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>ZonedDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE"><code>DateTimeFormatter.ISO_LOCAL_DATE</code></a>
and appends the <code>ZoneId</code> short name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10EST</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getDateTimeString()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME"><code>DateTimeFormatter.ISO_LOCAL_DATE_TIME</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10T20:30:45</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>OffsetDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_OFFSET_DATE_TIME"><code>DateTimeFormatter.ISO_OFFSET_DATE_TIME</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10T20:30:45+04:00</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>ZonedDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME"><code>DateTimeFormatter.ISO_LOCAL_DATE_TIME</code></a>
and appends the <code>ZoneId</code> short name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2018-03-10T20:30:45EST</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getTimeString()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalTime</code> and <code>LocalDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_TIME"><code>DateTimeFormatter.ISO_LOCAL_TIME</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20:30:45</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>OffsetTime</code> and <code>OffsetDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_OFFSET_TIME"><code>DateTimeFormatter.ISO_OFFSET_TIME</code></a>
formatter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20:30:45+04:00</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>ZonedDateTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_TIME"><code>DateTimeFormatter.ISO_LOCAL_TIME</code></a>
and appends the <code>ZoneId</code> short name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20:30:45EST</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>format(FormatStyle style)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalTime</code> and <code>OffsetTime</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedTime-java.time.format.FormatStyle-"><code>DateTimeFormatter.ofLocalizedTime(style)</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4:30 AM</code> (with style <code>FormatStyle.SHORT</code>, e.g.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalDate</code>, formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedDate-java.time.format.FormatStyle-"><code>DateTimeFormatter.ofLocalizedDate(style)</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Saturday, March 10, 2018</code> (with style <code>FormatStyle.FULL</code>, e.g.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>LocalDateTime</code>, <code>OffsetDateTime</code>, and <code>ZonedDateTime</code> formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedDateTime-java.time.format.FormatStyle-"><code>DateTimeFormatter.ofLocalizedDateTime(style)</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Mar 10, 2019 4:30:45 AM</code> (with style <code>FormatStyle.MEDIUM</code>, e.g.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>format(String pattern)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formats with
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofPattern-java.lang.String-"><code>DateTimeFormatter.ofPattern(pattern)</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>03/10/2018</code> (with pattern ’MM/dd/yyyy', e.g.)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For parsing, Groovy adds a static <code>parse</code> method to many of the JSR 310 types. The method
takes two arguments: the value to be formatted and the pattern to use. The pattern is
defined by the
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html"><code>java.time.format.DateTimeFormatter</code> API</a>.
As an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> date </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'Jun 3, 04'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MMM d, yy'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> date </span><span class="pun">==</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2004</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">JUNE</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> time </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'4:45'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'H:mm'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> time </span><span class="pun">==</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">45</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> offsetTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">OffsetTime</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'09:47:51-1234'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'HH:mm:ssZ'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> offsetTime </span><span class="pun">==</span><span class="pln"> </span><span class="typ">OffsetTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">47</span><span class="pun">,</span><span class="pln"> </span><span class="lit">51</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ZoneOffset</span><span class="pun">.</span><span class="pln">ofHoursMinutes</span><span class="pun">(-</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">34</span><span class="pun">))</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> dateTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ZonedDateTime</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'2017/07/11 9:47PM Pacific Standard Time'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'yyyy/MM/dd h:mma zzzz'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> dateTime </span><span class="pun">==</span><span class="pln"> </span><span class="typ">ZonedDateTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2017</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">),</span><span class="pln">
        </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="lit">47</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">),</span><span class="pln">
        </span><span class="typ">ZoneId</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="str">'America/Los_Angeles'</span><span class="pun">)</span><span class="pln">
</span><span class="pun">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that these <code>parse</code> methods have a different argument ordering than the static
<code>parse</code> method Groovy added to <code>java.util.Date</code>.
This was done to be consistent with the existing <code>parse</code> methods of the Date/Time API.</p>
</div>
</div>
<div class="sect4">
<h5 id="_manipulating_date_time"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_date_time"></a>Manipulating date/time</h5>
<div class="sect5">
<h6 id="_addition_and_subtraction"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_addition_and_subtraction"></a>Addition and subtraction</h6>
<div class="paragraph">
<p><code>Temporal</code> types have <code>plus</code> and <code>minus</code> methods for adding or subtracting a provided
<code>java.time.temporal.TemporalAmount</code> argument. Because Groovy maps the <code>+</code> and <code>-</code> operators
to single-argument methods of these names, a more natural expression syntax can be used to add and subtract.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> aprilFools </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">APRIL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> nextAprilFools </span><span class="pun">=</span><span class="pln"> aprilFools </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Period</span><span class="pun">.</span><span class="pln">ofDays</span><span class="pun">(</span><span class="lit">365</span><span class="pun">)</span><span class="pln"> </span><span class="com">// add 365 days</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> nextAprilFools</span><span class="pun">.</span><span class="pln">year </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2019</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> idesOfMarch </span><span class="pun">=</span><span class="pln"> aprilFools </span><span class="pun">-</span><span class="pln"> </span><span class="typ">Period</span><span class="pun">.</span><span class="pln">ofDays</span><span class="pun">(</span><span class="lit">17</span><span class="pun">)</span><span class="pln"> </span><span class="com">// subtract 17 days</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> idesOfMarch</span><span class="pun">.</span><span class="pln">dayOfMonth </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> idesOfMarch</span><span class="pun">.</span><span class="pln">month </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">MARCH</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy provides additional <code>plus</code> and <code>minus</code> methods that accept an integer argument,
enabling the above to be rewritten more succinctly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> nextAprilFools </span><span class="pun">=</span><span class="pln"> aprilFools </span><span class="pun">+</span><span class="pln"> </span><span class="lit">365</span><span class="pln"> </span><span class="com">// add 365 days</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> idesOfMarch </span><span class="pun">=</span><span class="pln"> aprilFools </span><span class="pun">-</span><span class="pln"> </span><span class="lit">17</span><span class="pln"> </span><span class="com">// subtract 17 days</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The unit of these integers depends on the JSR 310 type operand. As evident above,
integers used with <code>ChronoLocalDate</code> types like <code>LocalDate</code> have a unit of
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#DAYShttp://days">days</a>.
Integers used with <code>Year</code> and <code>YearMonth</code> have a unit of
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#YEARS">years</a> and
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#MONTHS">months</a>, respectively.
All other types have a unit of
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#SECONDS">seconds</a>,
such as <code>LocalTime</code>, for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> mars </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">34</span><span class="pun">,</span><span class="pln"> </span><span class="lit">56</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 12:34:56 pm</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> thirtySecondsToMars </span><span class="pun">=</span><span class="pln"> mars </span><span class="pun">-</span><span class="pln"> </span><span class="lit">30</span><span class="pln"> </span><span class="com">// go back 30 seconds</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> thirtySecondsToMars</span><span class="pun">.</span><span class="pln">second </span><span class="pun">==</span><span class="pln"> </span><span class="lit">26</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_multiplication_and_division"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiplication_and_division"></a>Multiplication and division</h6>
<div class="paragraph">
<p>The <code>*</code> operator can be used to multiply <code>Period</code> and <code>Duration</code> instances by an
integer value; the <code>/</code> operator can be used to divide <code>Duration</code> instances by an integer value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> period </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Period</span><span class="pun">.</span><span class="pln">ofMonths</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="com">// a 1-month period times 2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> period</span><span class="pun">.</span><span class="pln">months </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> duration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Duration</span><span class="pun">.</span><span class="pln">ofSeconds</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">5</span><span class="com">// a 10-second duration divided by 5</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> duration</span><span class="pun">.</span><span class="pln">seconds </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_incrementing_and_decrementing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_incrementing_and_decrementing"></a>Incrementing and decrementing</h6>
<div class="paragraph">
<p>The  <code>++</code> and <code>--</code> operators can be used increment and decrement date/time values by one unit. Since the JSR 310 types
are immutable, the operation will create a new instance with the incremented/decremented value and reassign it to the
reference.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> year </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">)</span><span class="pln">
</span><span class="pun">--</span><span class="pln">year </span><span class="com">// decrement by one year</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> year</span><span class="pun">.</span><span class="pln">value </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1999</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> offsetTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">OffsetTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ZoneOffset</span><span class="pun">.</span><span class="pln">UTC</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 00:00:00.000 UTC</span><span class="pln">
offsetTime</span><span class="pun">++</span><span class="pln"> </span><span class="com">// increment by one second</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> offsetTime</span><span class="pun">.</span><span class="pln">second </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_negation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_negation"></a>Negation</h6>
<div class="paragraph">
<p>The <code>Duration</code> and <code>Period</code> types represent a negative or positive length of time.
These can be negated with the unary <code>-</code> operator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> duration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Duration</span><span class="pun">.</span><span class="pln">ofSeconds</span><span class="pun">(-</span><span class="lit">15</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> negated </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration
</span><span class="kwd">assert</span><span class="pln"> negated</span><span class="pun">.</span><span class="pln">seconds </span><span class="pun">==</span><span class="pln"> </span><span class="lit">15</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_interacting_with_date_time_values"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interacting_with_date_time_values"></a>Interacting with date/time values</h5>
<div class="sect5">
<h6 id="_property_notation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_property_notation"></a>Property notation</h6>
<div class="paragraph">
<p>The
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAccessor.html#getLong-java.time.temporal.TemporalField-"><code>getLong(TemporalField)</code></a>
method of <code>TemporalAccessor</code> types (e.g. <code>LocalDate</code>,
<code>LocalTime</code>, <code>ZonedDateTime</code>, etc.) and the
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAmount.html#get-java.time.temporal.TemporalUnit-"><code>get(TemporalUnit)</code></a>
method of <code>TemporalAmount</code> types (namely <code>Period</code> and <code>Duration</code>), can be invoked with
Groovy’s property notation. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> date </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">MARCH</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> date</span><span class="pun">[</span><span class="typ">ChronoField</span><span class="pun">.</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2018</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> date</span><span class="pun">[</span><span class="typ">ChronoField</span><span class="pun">.</span><span class="pln">MONTH_OF_YEAR</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">MARCH</span><span class="pun">.</span><span class="pln">value
</span><span class="kwd">assert</span><span class="pln"> date</span><span class="pun">[</span><span class="typ">ChronoField</span><span class="pun">.</span><span class="pln">DAY_OF_MONTH</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">12</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> date</span><span class="pun">[</span><span class="typ">ChronoField</span><span class="pun">.</span><span class="pln">DAY_OF_WEEK</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">DayOfWeek</span><span class="pun">.</span><span class="pln">MONDAY</span><span class="pun">.</span><span class="pln">value

</span><span class="kwd">def</span><span class="pln"> period </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Period</span><span class="pun">.</span><span class="pln">ofYears</span><span class="pun">(</span><span class="lit">2</span><span class="pun">).</span><span class="pln">withMonths</span><span class="pun">(</span><span class="lit">4</span><span class="pun">).</span><span class="pln">withDays</span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> period</span><span class="pun">[</span><span class="typ">ChronoUnit</span><span class="pun">.</span><span class="pln">YEARS</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> period</span><span class="pun">[</span><span class="typ">ChronoUnit</span><span class="pun">.</span><span class="pln">MONTHS</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> period</span><span class="pun">[</span><span class="typ">ChronoUnit</span><span class="pun">.</span><span class="pln">DAYS</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">6</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_ranges_code_upto_code_and_code_downto_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ranges_code_upto_code_and_code_downto_code"></a>Ranges, <code>upto</code>, and <code>downto</code></h6>
<div class="paragraph">
<p>The JSR 310 types can be used with the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_range_operator">range operator</a>.
The following example iterates between today and the <code>LocalDate</code> six days from now,
printing out the day of the week for each iteration. As both range bounds are inclusive,
this prints all seven days of the week.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">now</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> </span><span class="lit">6</span><span class="pln"> </span><span class="com">// 6 days later</span><span class="pln">
</span><span class="pun">(</span><span class="pln">start</span><span class="pun">..</span><span class="kwd">end</span><span class="pun">).</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> date </span><span class="pun">-&gt;</span><span class="pln">
    println date</span><span class="pun">.</span><span class="pln">dayOfWeek
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>upto</code> method will accomplish the same as the range in the above example.
The <code>upto</code> method iterates from the earlier <code>start</code> value (inclusive) to the later <code>end</code> value
(also inclusive), calling the closure with the incremented <code>next</code> value once per iteration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">now</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> </span><span class="lit">6</span><span class="pln"> </span><span class="com">// 6 days later</span><span class="pln">
start</span><span class="pun">.</span><span class="pln">upto</span><span class="pun">(</span><span class="kwd">end</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">next</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="kwd">next</span><span class="pun">.</span><span class="pln">dayOfWeek
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>downto</code> method iterates in the opposite direction, from a later <code>start</code> value
to an earlier <code>end</code> value.</p>
</div>
<div class="paragraph">
<p>The unit of iteration for <code>upto</code>, <code>downto</code>, and ranges is the same as the unit for addition
and subtraction: <code>LocalDate</code> iterates by one day at a time,
<code>YearMonth</code> iterates by one month, <code>Year</code> by one year, and everything else by one second.
Both methods also support an optional a <code>TemporalUnit</code> argument to change the unit of
iteration.</p>
</div>
<div class="paragraph">
<p>Consider the following example, where March 1st, 2018 is iterated up to March 2nd, 2018
using an iteration unit of
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#MONTHS">months</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">MARCH</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="com">// 1 day later</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> iterationCount </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
start</span><span class="pun">.</span><span class="pln">upto</span><span class="pun">(</span><span class="kwd">end</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ChronoUnit</span><span class="pun">.</span><span class="pln">MONTHS</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">next</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln">
    println </span><span class="kwd">next</span><span class="pln">
    </span><span class="pun">++</span><span class="pln">iterationCount
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> iterationCount </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the <code>start</code> date is inclusive, the closure is called with a <code>next</code> date value of March 1st.
The <code>upto</code> method then increments the date by one month, yielding the date, April 1st.
Because this date is <em>after</em> the specified <code>end</code> date of March 2nd, the iteration stops immediately,
having only called the closure once. This behavior is the same for the <code>downto</code> method except that
the iteration will stop as soon as the value of <code>next</code> becomes earlier than the targeted <code>end</code> date.</p>
</div>
<div class="paragraph">
<p>In short, when iterating with the <code>upto</code> or <code>downto</code> methods with a custom unit of iteration,
the current value of iteration will never exceed the end value.</p>
</div>
</div>
<div class="sect5">
<h6 id="_combining_date_time_values"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_combining_date_time_values"></a>Combining date/time values</h6>
<div class="paragraph">
<p>The left-shift operator (<code>&lt;&lt;</code>) can be used to combine two JSR 310 types into an aggregate type.
For example, a <code>LocalDate</code> can be left-shifted into a <code>LocalTime</code> to produce a composite
<code>LocalDateTime</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">MonthDay</span><span class="pln"> monthDay </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">JUNE </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="com">// June 3rd</span><span class="pln">
</span><span class="typ">LocalDate</span><span class="pln"> date </span><span class="pun">=</span><span class="pln"> monthDay </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2015</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 3-Jun-2015</span><span class="pln">
</span><span class="typ">LocalDateTime</span><span class="pln"> dateTime </span><span class="pun">=</span><span class="pln"> date </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">NOON </span><span class="com">// 3-Jun-2015 @ 12pm</span><span class="pln">
</span><span class="typ">OffsetDateTime</span><span class="pln"> offsetDateTime </span><span class="pun">=</span><span class="pln"> dateTime </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="typ">ZoneOffset</span><span class="pun">.</span><span class="pln">ofHours</span><span class="pun">(-</span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 3-Jun-2015 @ 12pm UTC-5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The left-shift operator is reflexive; the order of the operands does not matter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> year </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> month </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">DECEMBER

</span><span class="typ">YearMonth</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> year </span><span class="pun">&lt;&lt;</span><span class="pln"> month
</span><span class="typ">YearMonth</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> month </span><span class="pun">&lt;&lt;</span><span class="pln"> year
</span><span class="kwd">assert</span><span class="pln"> a </span><span class="pun">==</span><span class="pln"> b</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_creating_periods_and_durations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_periods_and_durations"></a>Creating periods and durations</h6>
<div class="paragraph">
<p>The right-shift operator (<code>&gt;&gt;</code>) produces a value representing the period or duration between the
operands. For <code>ChronoLocalDate</code>, <code>YearMonth</code>, and <code>Year</code>, the operator yields
a <code>Period</code> instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> newYears </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">JANUARY</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> aprilFools </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">APRIL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> period </span><span class="pun">=</span><span class="pln"> newYears </span><span class="pun">&gt;&gt;</span><span class="pln"> aprilFools
</span><span class="kwd">assert</span><span class="pln"> period </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Period</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> period</span><span class="pun">.</span><span class="pln">months </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The operator produces a <code>Duration</code> for the time-aware JSR types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> duration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">NOON </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">NOON </span><span class="pun">+</span><span class="pln"> </span><span class="lit">30</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> duration </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Duration</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> duration</span><span class="pun">.</span><span class="pln">seconds </span><span class="pun">==</span><span class="pln"> </span><span class="lit">30</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the value on the left-hand side of the operator is earlier than the value on the right-hand
side, the result is positive. If the left-hand side is later than the right-hand side, the
result is negative:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> decade </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2010</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> decade</span><span class="pun">.</span><span class="pln">years </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_converting_between_legacy_and_jsr_310_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_converting_between_legacy_and_jsr_310_types"></a>Converting between legacy and JSR 310 types</h5>
<div class="paragraph">
<p>Despite the shortcomings of <code>Date</code>, <code>Calendar</code>, and <code>TimeZone</code> types in the <code>java.util</code> package
they are farily common in Java APIs (at least in those prior to Java 8).
To accommodate use of such APIs, Groovy provides methods for converting between the
JSR 310 types and legacy types.</p>
</div>
<div class="paragraph">
<p>Most JSR types have been fitted with <code>toDate()</code> and <code>toCalendar()</code> methods for
converting to relatively equivalent <code>java.util.Date</code> and <code>java.util.Calendar</code> values.
Both <code>ZoneId</code> and <code>ZoneOffset</code> have been given a <code>toTimeZone()</code> method for converting to
<code>java.util.TimeZone</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// LocalDate to java.util.Date</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> valentines </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">FEBRUARY</span><span class="pun">,</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> valentines</span><span class="pun">.</span><span class="pln">toDate</span><span class="pun">().</span><span class="pln">format</span><span class="pun">(</span><span class="str">'MMMM dd, yyyy'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'February 14, 2018'</span><span class="pln">

</span><span class="com">// LocalTime to java.util.Date</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> noon </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> noon</span><span class="pun">.</span><span class="pln">toDate</span><span class="pun">().</span><span class="pln">format</span><span class="pun">(</span><span class="str">'HH:mm:ss'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'12:00:00'</span><span class="pln">

</span><span class="com">// ZoneId to java.util.TimeZone</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> newYork </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ZoneId</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="str">'America/New_York'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> newYork</span><span class="pun">.</span><span class="pln">toTimeZone</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">TimeZone</span><span class="pun">.</span><span class="pln">getTimeZone</span><span class="pun">(</span><span class="str">'America/New_York'</span><span class="pun">)</span><span class="pln">

</span><span class="com">// ZonedDateTime to java.util.Calendar</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> valAtNoonInNY </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ZonedDateTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln">valentines</span><span class="pun">,</span><span class="pln"> noon</span><span class="pun">,</span><span class="pln"> newYork</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> valAtNoonInNY</span><span class="pun">.</span><span class="pln">toCalendar</span><span class="pun">().</span><span class="pln">getTimeZone</span><span class="pun">().</span><span class="pln">toZoneId</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> newYork</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that when converting to a legacy type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nanosecond values are truncated to milliseconds. A <code>LocalTime</code>, for example, with a <code>ChronoUnit.NANOS</code> value
of 999,999,999 nanoseconds translates to 999 milliseconds.</p>
</li>
<li>
<p>When converting the "local" types (<code>LocalDate</code>, <code>LocalTime</code>, and <code>LocalDateTime</code>), the time zone of the
returned <code>Date</code> or <code>Calendar</code> will be the system default.</p>
</li>
<li>
<p>When converting a time-only type (<code>LocalTime</code> or <code>OffsetTime</code>), the year/month/day of the <code>Date</code> or <code>Calendar</code> is set
to the current date.</p>
</li>
<li>
<p>When converting a date-only type (<code>LocalDate</code>), the time value of the <code>Date</code> or <code>Calendar</code> will be cleared,
i.e. <code>00:00:00.000</code>.</p>
</li>
<li>
<p>When converting an <code>OffsetDateTime</code> to a <code>Calendar</code>, only the hours and minutes of the <code>ZoneOffset</code> convey
into the corresponding <code>TimeZone</code>. Fortunately, Zone Offsets with non-zero seconds are rare.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Groovy has added a number of methods to <code>Date</code> and <code>Calendar</code>
for converting into the various JSR 310 types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="typ">Date</span><span class="pln"> legacy </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'yyyy-MM-dd HH:mm:ss.SSS'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2010-04-03 10:30:58.999'</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toLocalDate</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">LocalDate</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2010</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toLocalTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">LocalTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">,</span><span class="pln"> </span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="lit">999</span><span class="pln">_000_000</span><span class="pun">)</span><span class="pln"> </span><span class="com">// 999M ns = 999ms</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toOffsetTime</span><span class="pun">().</span><span class="pln">hour </span><span class="pun">==</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toYear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Year</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2010</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toMonth</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">APRIL
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toDayOfWeek</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">DayOfWeek</span><span class="pun">.</span><span class="pln">SATURDAY
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toMonthDay</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">MonthDay</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="typ">Month</span><span class="pun">.</span><span class="pln">APRIL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toYearMonth</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="typ">YearMonth</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="lit">2010</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Month</span><span class="pun">.</span><span class="pln">APRIL</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toLocalDateTime</span><span class="pun">().</span><span class="pln">year </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2010</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toOffsetDateTime</span><span class="pun">().</span><span class="pln">dayOfMonth </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> legacy</span><span class="pun">.</span><span class="pln">toZonedDateTime</span><span class="pun">().</span><span class="pln">zone </span><span class="pun">==</span><span class="pln"> </span><span class="typ">ZoneId</span><span class="pun">.</span><span class="pln">systemDefault</span><span class="pun">()</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_handy_utilities"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handy_utilities"></a>3.3.5. Handy utilities</h4>
<div class="sect4">
<h5 id="_configslurper"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_configslurper"></a>ConfigSlurper</h5>
<div class="paragraph">
<p><code>ConfigSlurper</code> is a utility class for reading configuration files defined in the form of Groovy scripts. Like it is
the case with Java <code>*.properties</code> files, <code>ConfigSlurper</code> allows a dot notation. But in addition, it allows for Closure scoped
configuration values and arbitrary object types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">().</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
    app.date = new Date()  </span><i class="conum" data-value="1"></i><b><span class="str">(1)</span></b><span class="str">
    app.age  = 42
    app {                  </span><i class="conum" data-value="2"></i><b><span class="str">(2)</span></b><span class="str">
        name = "Test${42}"
    }
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="pln">date </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Date</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="pln">age </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Test42'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Usage of the dot notation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Usage of Closure scopes as an alternative to the dot notation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As can be seen in the above example, the <code>parse</code> method can be used to retrieve <code>groovy.util.ConfigObject</code> instances. The
<code>ConfigObject</code> is a specialized <code>java.util.Map</code> implementation that either returns the configured value or a new <code>ConfigObject</code>
instance but never <code>null</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">().</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
    app.date = new Date()
    app.age  = 42
    app.name = "Test${42}"
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">test </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>config.test</code> has not been specified yet it returns a <code>ConfigObject</code> when being called.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the case of a dot being part of a configuration variable name, it can be escaped by using single or double quotes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">().</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
    app."person.age"  = 42
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="str">"person.age"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, <code>ConfigSlurper</code> comes with support for <code>environments</code>. The <code>environments</code> method can be used to hand over
a Closure instance that itself may consist of a several sections. Let’s say we wanted to create a particular configuration
value for the development environment. When creating the <code>ConfigSlurper</code> instance we can use the <code>ConfigSlurper(String)</code>
constructor to specify the target environment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">(</span><span class="str">'development'</span><span class="pun">).</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
  environments {
       development {
           app.port = 8080
       }

       test {
           app.port = 8082
       }

       production {
           app.port = 80
       }
  }
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="pln">port </span><span class="pun">==</span><span class="pln"> </span><span class="lit">8080</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>ConfigSlurper</code> environments aren’t restricted to any particular environment names. It solely depends on the
<code>ConfigSlurper</code> client code what value are supported and interpreted accordingly.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>environments</code> method is built-in but the <code>registerConditionalBlock</code> method can be used to register other method names
in addition to the <code>environments</code> name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> slurper </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">()</span><span class="pln">
slurper</span><span class="pun">.</span><span class="pln">registerConditionalBlock</span><span class="pun">(</span><span class="str">'myProject'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'developers'</span><span class="pun">)</span><span class="pln">   </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> slurper</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
  sendMail = true

  myProject {
       developers {
           sendMail = false
       }
  }
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="pun">!</span><span class="pln">config</span><span class="pun">.</span><span class="pln">sendMail</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Once the new block is registered <code>ConfigSlurper</code> can parse it.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>For Java integration purposes the <code>toProperties</code> method can be used to convert the <code>ConfigObject</code> to a <code>java.util.Properties</code>
object that might be stored to a <code>*.properties</code> text file. Be aware though that the configuration values are converted to
<code>String</code> instances during adding them to the newly created <code>Properties</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigSlurper</span><span class="pun">().</span><span class="pln">parse</span><span class="pun">(</span><span class="str">'''
    app.date = new Date()
    app.age  = 42
    app {
        name = "Test${42}"
    }
'''</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> properties </span><span class="pun">=</span><span class="pln"> config</span><span class="pun">.</span><span class="pln">toProperties</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> properties</span><span class="pun">.</span><span class="str">"app.date"</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">String</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> properties</span><span class="pun">.</span><span class="str">"app.age"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'42'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> properties</span><span class="pun">.</span><span class="str">"app.name"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Test42'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_expando"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_expando"></a>Expando</h5>
<div class="paragraph">
<p>The <code>Expando</code> class can be used to create a dynamically expandable object. Despite its name it does not use the
<code>ExpandoMetaClass</code> underneath. Each <code>Expando</code> object represents a standalone, dynamically-crafted instance that can be
extended with properties (or methods) at runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> expando </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Expando</span><span class="pun">()</span><span class="pln">
expando</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'John'</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> expando</span><span class="pun">.</span><span class="pln">name </span><span class="pun">==</span><span class="pln"> </span><span class="str">'John'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A special case occurs when a dynamic property registers a <code>Closure</code> code block. Once being registered it can be invoked
as it would be done with a method call.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> expando </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Expando</span><span class="pun">()</span><span class="pln">
expando</span><span class="pun">.</span><span class="pln">toString </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="str">'John'</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
expando</span><span class="pun">.</span><span class="pln">say </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> s </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="str">"John says: ${s}"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> expando </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'John'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> expando</span><span class="pun">.</span><span class="pln">say</span><span class="pun">(</span><span class="str">'Hi'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'John says: Hi'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_observable_list_map_and_set"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_observable_list_map_and_set"></a>Observable list, map and set</h5>
<div class="paragraph">
<p>Groovy comes with observable lists, maps and sets. Each of these collections trigger <code>java.beans.PropertyChangeEvent</code> events when elements
are added, removed or changed. Note that a <code>PropertyChangeEvent</code> is not only signalling that a certain event has
 occurred, moreover, it holds information on the property name and the old/new value a certain property has been changed to.</p>
</div>
<div class="paragraph">
<p>Depending on the type of change that has happened, observable collections might fire more specialized <code>PropertyChangeEvent</code>
 types. For example, adding an element to an observable list fires an <code>ObservableList.ElementAddedEvent</code> event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">event</span><span class="pln">                                       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="kwd">def</span><span class="pln"> listener </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">it </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementEvent</span><span class="pun">)</span><span class="pln">  </span><span class="pun">{</span><span class="pln">  </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">event</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">PropertyChangeListener</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pln">    </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
observable</span><span class="pun">.</span><span class="pln">addPropertyChangeListener</span><span class="pun">(</span><span class="pln">listener</span><span class="pun">)</span><span class="pln">  </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">

observable</span><span class="pun">.</span><span class="pln">add </span><span class="lit">42</span><span class="pln">                               </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementAddedEvent</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> elementAddedEvent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementAddedEvent</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> elementAddedEvent</span><span class="pun">.</span><span class="pln">changeType </span><span class="pun">==</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ChangeType</span><span class="pun">.</span><span class="pln">ADDED
</span><span class="kwd">assert</span><span class="pln"> elementAddedEvent</span><span class="pun">.</span><span class="pln">index </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> elementAddedEvent</span><span class="pun">.</span><span class="pln">oldValue </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> elementAddedEvent</span><span class="pun">.</span><span class="pln">newValue </span><span class="pun">==</span><span class="pln"> </span><span class="lit">42</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declares a <code>PropertyChangeEventListener</code> that is capturing the fired events</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>ObservableList.ElementEvent</code> and its descendant types are relevant for this listener</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Registers the listener</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Creates an <code>ObservableList</code> from the given list</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Triggers an <code>ObservableList.ElementAddedEvent</code> event</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Be aware that adding an element in fact causes two events to be triggered. The first is of type <code>ObservableList.ElementAddedEvent</code>,
the second is a plain <code>PropertyChangeEvent</code> that informs listeners about the change of property <code>size</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>ObservableList.ElementClearedEvent</code> event type is another interesting one. Whenever multiple
 elements are removed, for example when calling <code>clear()</code>, it holds the elements being removed from the list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">def</span><span class="pln"> </span><span class="kwd">event</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> listener </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">it </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementEvent</span><span class="pun">)</span><span class="pln">  </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">event</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> it
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">PropertyChangeListener</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> observable </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pln">
observable</span><span class="pun">.</span><span class="pln">addPropertyChangeListener</span><span class="pun">(</span><span class="pln">listener</span><span class="pun">)</span><span class="pln">

observable</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementClearedEvent</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> elementClearedEvent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="typ">ObservableList</span><span class="pun">.</span><span class="typ">ElementClearedEvent</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> elementClearedEvent</span><span class="pun">.</span><span class="pln">values </span><span class="pun">==</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> observable</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To get an overview of all the supported event types the reader is encouraged to have a look at the JavaDoc documentation
or the source code of the observable collection in use.</p>
</div>
<div class="paragraph">
<p><code>ObservableMap</code> and <code>ObservableSet</code> come with the same concepts as we have seen for <code>ObservableList</code> in this section.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metaprogramming"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_metaprogramming"></a>3.4. Metaprogramming</h3>
<div class="paragraph">
<p>The Groovy language supports two flavors of metaprogramming: runtime and compile-time.
The first allows altering the class model and the behavior of a program at runtime while the second only occurs
at compile-time. Both have pros and cons that we will detail in this section.</p>
</div>
<div class="sect3">
<h4 id="_runtime_metaprogramming"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_metaprogramming"></a>3.4.1. Runtime metaprogramming</h4>
<div class="paragraph">
<p>With runtime metaprogramming we can postpone to runtime the decision to intercept, inject and even synthesize methods of classes and interfaces. For a deep understanding of Groovy’s metaobject protocol (MOP) we need to understand Groovy objects and Groovy’s method handling.
In Groovy we work with three kinds of objects: POJO, POGO and Groovy Interceptors. Groovy allows metaprogramming for all types of objects but in a different manner.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POJO - A regular Java object whose class can be written in Java or any other language for the JVM.</p>
</li>
<li>
<p>POGO - A Groovy object whose class is written in Groovy. It extends <code>java.lang.Object</code> and implements the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyObject.html">groovy.lang.GroovyObject</a> interface by default.</p>
</li>
<li>
<p>Groovy Interceptor - A Groovy object that implements the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyInterceptable.html">groovy.lang.GroovyInterceptable</a> interface and has method-interception capability which is discussed in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyinterceptable">GroovyInterceptable</a> section.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For every method call Groovy checks whether the object is a POJO or a POGO. For POJOs, Groovy fetches its <code>MetaClass</code> from the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/MetaClassRegistry.html">groovy.lang.MetaClassRegistry</a> and delegates method invocation to it. For POGOs, Groovy takes more steps, as illustrated in the following figure:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Groovy Language Documentation_files/xGroovyInterceptions.png.pagespeed.ic.ja6VBTwusK.webp" alt="GroovyInterceptions">
</div>
<div class="title">Figure 1. Groovy interception mechanism</div>
</div>
<div class="sect4">
<h5 id="_groovyobject_interface"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyobject_interface"></a>GroovyObject interface</h5>
<div class="paragraph">
<p><a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyObject.html">groovy.lang.GroovyObject</a> is the main interface in Groovy as the <code>Object</code> class is in Java. <code>GroovyObject</code> has a default implementation in the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyObjectSupport.html">groovy.lang.GroovyObjectSupport</a> class and it is responsible to transfer invocation to the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/MetaClass.html">groovy.lang.MetaClass</a> object. The <code>GroovyObject</code> source looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">GroovyObject</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">Object</span><span class="pln"> invokeMethod</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args</span><span class="pun">);</span><span class="pln">

    </span><span class="typ">Object</span><span class="pln"> getProperty</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> propertyName</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> setProperty</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> propertyName</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> newValue</span><span class="pun">);</span><span class="pln">

    </span><span class="typ">MetaClass</span><span class="pln"> getMetaClass</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> setMetaClass</span><span class="pun">(</span><span class="typ">MetaClass</span><span class="pln"> metaClass</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_invokemethod"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_invokemethod"></a>invokeMethod</h6>
<div class="paragraph">
<p>This method is primarily intended to be used in conjunction with the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyinterceptable">GroovyInterceptable</a>
interface or an object’s <code>MetaClass</code> where it will intercept all method calls.</p>
</div>
<div class="paragraph">
<p>It is also invoked when the method called is not present on a Groovy object. Here is a simple example using an
overridden <code>invokeMethod()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> invokeMethod</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"called invokeMethod $name $args"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'method exists'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> someGroovyClass </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'method exists'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'called invokeMethod someMethod []'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, the use of <code>invokeMethod</code> to intercept missing methods is discouraged.  In cases where the intent is to only
intercept method calls in the case of a failed method dispatch use <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methodmissing">methodMissing</a>
instead.</p>
</div>
</div>
<div class="sect5">
<h6 id="_get_setproperty"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setproperty"></a>get/setProperty</h6>
<div class="paragraph">
<p>Every read access to a property can be intercepted by overriding the <code>getProperty()</code> method of the current object.
Here is a simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> property1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ha'</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> field2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ho'</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> field4 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'hu'</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> getField1</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'getHa'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> getProperty</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">name </span><span class="pun">!=</span><span class="pln"> </span><span class="str">'field3'</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> metaClass</span><span class="pun">.</span><span class="pln">getProperty</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
        </span><span class="kwd">else</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'field3'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> someGroovyClass </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">field1 </span><span class="pun">==</span><span class="pln"> </span><span class="str">'getHa'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">field2 </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ho'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">field3 </span><span class="pun">==</span><span class="pln"> </span><span class="str">'field3'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">field4 </span><span class="pun">==</span><span class="pln"> </span><span class="str">'hu'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Forwards the request to the getter for all properties except <code>field3</code>.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can intercept write access to properties by overriding the <code>setProperty()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> POGO </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> </span><span class="kwd">property</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> setProperty</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.@</span><span class="str">"$name"</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'overridden'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> pogo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> POGO</span><span class="pun">()</span><span class="pln">
pogo</span><span class="pun">.</span><span class="kwd">property</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'a'</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> pogo</span><span class="pun">.</span><span class="kwd">property</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'overridden'</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_get_setmetaclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setmetaclass"></a>get/setMetaClass</h6>
<div class="paragraph">
<p>You can access an object’s <code>metaClass</code> or set your own <code>MetaClass</code> implementation for changing the default interception mechanism. For example, you can write your own implementation of the <code>MetaClass</code> interface and assign it to objects in order to change the interception mechanism:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// getMetaclass</span><span class="pln">
someObject</span><span class="pun">.</span><span class="pln">metaClass

</span><span class="com">// setMetaClass</span><span class="pln">
someObject</span><span class="pun">.</span><span class="pln">metaClass </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">OwnMetaClassImplementation</span><span class="pun">()</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can find an additional example in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyinterceptable">GroovyInterceptable</a> topic.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_get_setattribute"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_get_setattribute"></a>get/setAttribute</h5>
<div class="paragraph">
<p>This functionality is related to the <code>MetaClass</code> implementation. In the default implementation you can access fields without invoking their getters and setters. The examples below demonstrates this approach:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> field1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ha'</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> field2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ho'</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> getField1</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'getHa'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> someGroovyClass </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SomeGroovyClass</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="pln">someGroovyClass</span><span class="pun">,</span><span class="pln"> </span><span class="str">'field1'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ha'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> someGroovyClass</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="pln">someGroovyClass</span><span class="pun">,</span><span class="pln"> </span><span class="str">'field2'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ho'</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> POGO </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> field
    </span><span class="typ">String</span><span class="pln"> property1

    </span><span class="kwd">void</span><span class="pln"> setProperty1</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> property1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">property1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">"setProperty1"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> pogo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> POGO</span><span class="pun">()</span><span class="pln">
pogo</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="pln">pogo</span><span class="pun">,</span><span class="pln"> </span><span class="str">'field'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'ha'</span><span class="pun">)</span><span class="pln">
pogo</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="pln">pogo</span><span class="pun">,</span><span class="pln"> </span><span class="str">'property1'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'ho'</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> pogo</span><span class="pun">.</span><span class="pln">field </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ha'</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> pogo</span><span class="pun">.</span><span class="pln">property1 </span><span class="pun">==</span><span class="pln"> </span><span class="str">'ho'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_methodmissing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methodmissing"></a>methodMissing</h5>
<div class="paragraph">
<p>Groovy supports the concept of <code>methodMissing</code>. This method differs from <code>invokeMethod</code> in that it
is only invoked in the case of a failed method dispatch when no method can be found for the given name and/or the
given arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

   </span><span class="kwd">def</span><span class="pln"> methodMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"this is me"</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">().</span><span class="pln">someUnknownMethod</span><span class="pun">(</span><span class="lit">42l</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'this is me'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Typically when using <code>methodMissing</code> it is possible to cache the result for the next time the same method is called.</p>
</div>
<div class="paragraph">
<p>For example, consider dynamic finders in GORM. These are implemented in terms of <code>methodMissing</code>. The code resembles
something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> GORM </span><span class="pun">{</span><span class="pln">

   </span><span class="kwd">def</span><span class="pln"> dynamicMethods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[...]</span><span class="pln"> </span><span class="com">// an array of dynamic methods that use regex</span><span class="pln">

   </span><span class="kwd">def</span><span class="pln"> methodMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
       </span><span class="kwd">def</span><span class="pln"> method </span><span class="pun">=</span><span class="pln"> dynamicMethods</span><span class="pun">.</span><span class="pln">find </span><span class="pun">{</span><span class="pln"> it</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
       </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">method</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          GORM</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="str">"$name"</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> varArgs </span><span class="pun">-&gt;</span><span class="pln">
             method</span><span class="pun">.</span><span class="pln">invoke</span><span class="pun">(</span><span class="kwd">delegate</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> varArgs</span><span class="pun">)</span><span class="pln">
          </span><span class="pun">}</span><span class="pln">
          </span><span class="kwd">return</span><span class="pln"> method</span><span class="pun">.</span><span class="pln">invoke</span><span class="pun">(</span><span class="kwd">delegate</span><span class="pun">,</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">
       </span><span class="pun">}</span><span class="pln">
       </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MissingMethodException</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how, if we find a method to invoke, we then dynamically register a new method on the fly using <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#metaprogramming_emc">ExpandoMetaClass</a>.
This is so that the next time the same method is called it is more efficient. This way of using <code>methodMissing</code> does not have
the overhead of <code>invokeMethod</code> <em>and</em> is not expensive from the second call on.</p>
</div>
</div>
<div class="sect4">
<h5 id="_propertymissing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_propertymissing"></a>propertyMissing</h5>
<div class="paragraph">
<p>Groovy supports the concept of <code>propertyMissing</code> for intercepting otherwise failing property resolution attempts. In the
case of a getter method, <code>propertyMissing</code> takes a single <code>String</code> argument containing the property name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">def</span><span class="pln"> propertyMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> name </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">().</span><span class="pln">boo </span><span class="pun">==</span><span class="pln"> </span><span class="str">'boo'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>propertyMissing(String)</code> method is only called when no getter method for the given property can be found by the Groovy
runtime.</p>
</div>
<div class="paragraph">
<p>For setter methods a second <code>propertyMissing</code> definition can be added that takes an additional value argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">def</span><span class="pln"> storage </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[:]</span><span class="pln">
   </span><span class="kwd">def</span><span class="pln"> propertyMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> storage</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> value </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">def</span><span class="pln"> propertyMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> storage</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span><span class="pln">
f</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">=</span><span class="pln"> </span><span class="str">"bar"</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">foo </span><span class="pun">==</span><span class="pln"> </span><span class="str">"bar"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As with <code>methodMissing</code> it is best practice to dynamically register new properties at runtime to improve the overall lookup
performance.</p>
</div>
</div>
<div class="sect4">
<h5 id="_static_methodmissing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methodmissing"></a>static methodMissing</h5>
<div class="paragraph">
<p>Static variant of <code>methodMissing</code> method can be added via the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#metaprogramming_emc">ExpandoMetaClass</a>
or can be implemented at the class level with <code>$static_methodMissing</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> $static_methodMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"Missing static method name is $name"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">bar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Missing static method name is bar'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_static_propertymissing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_propertymissing"></a>static propertyMissing</h5>
<div class="paragraph">
<p>Static variant of <code>propertyMissing</code> method can be added via the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#metaprogramming_emc">ExpandoMetaClass</a>
or can be implemented at the class level with <code>$static_propertyMissing</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> $static_propertyMissing</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"Missing static property name is $name"</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">foobar </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Missing static property name is foobar'</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovyinterceptable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyinterceptable"></a>GroovyInterceptable</h5>
<div class="paragraph">
<p>The <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyInterceptable.html">groovy.lang.GroovyInterceptable</a> interface is marker interface that extends <code>GroovyObject</code> and is used to notify the Groovy runtime that all methods should be intercepted through the method dispatcher mechanism of the Groovy runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">GroovyInterceptable</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">GroovyObject</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When a Groovy object implements the <code>GroovyInterceptable</code> interface, its <code>invokeMethod()</code> is called for any method calls. Below you can see a simple example of an object of this type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Interception</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">GroovyInterceptable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> definedMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> invokeMethod</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">'invokedMethod'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next piece of code is a test which shows that both calls to existing and non-existing methods will return the same value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">InterceptableTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">GroovyTestCase</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> testCheckInterception</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">def</span><span class="pln"> interception </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Interception</span><span class="pun">()</span><span class="pln">

        </span><span class="kwd">assert</span><span class="pln"> interception</span><span class="pun">.</span><span class="pln">definedMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invokedMethod'</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> interception</span><span class="pun">.</span><span class="pln">someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invokedMethod'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We cannot use default groovy methods like <code>println</code> because these methods are injected into all Groovy objects so they will be intercepted too.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If we want to intercept all method calls but do not want to implement the <code>GroovyInterceptable</code> interface we can implement <code>invokeMethod()</code> on an object’s <code>MetaClass</code>.
This approach works for both POGOs and POJOs, as shown by this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">InterceptionThroughMetaClassTest</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">GroovyTestCase</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> testPOJOMetaClassInterception</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">String</span><span class="pln"> invoking </span><span class="pun">=</span><span class="pln"> </span><span class="str">'ha'</span><span class="pln">
        invoking</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">invokeMethod </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args </span><span class="pun">-&gt;</span><span class="pln">
            </span><span class="str">'invoked'</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">assert</span><span class="pln"> invoking</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invoked'</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> invoking</span><span class="pun">.</span><span class="pln">someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invoked'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> testPOGOMetaClassInterception</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Entity</span><span class="pln"> entity </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Entity</span><span class="pun">(</span><span class="str">'Hello'</span><span class="pun">)</span><span class="pln">
        entity</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">.</span><span class="pln">invokeMethod </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> args </span><span class="pun">-&gt;</span><span class="pln">
            </span><span class="str">'invoked'</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">assert</span><span class="pln"> entity</span><span class="pun">.</span><span class="pln">build</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">())</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invoked'</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> entity</span><span class="pun">.</span><span class="pln">someMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'invoked'</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Additional information about <code>MetaClass</code> can be found in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_metaclasses">MetaClasses</a> section.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="categories"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#categories"></a>Categories</h5>
<div class="paragraph">
<p>There are situations where it is useful if a class <em>not</em> under control had additional methods. In order to enable this
capability, Groovy implements a feature borrowed from Objective-C, called <em>Categories</em>.</p>
</div>
<div class="paragraph">
<p>Categories are implemented with so-called <em>category classes</em>. A category class is special in that it needs to meet certain
pre-defined rules for defining extension methods.</p>
</div>
<div class="paragraph">
<p>There are a few categories that are included in the system for adding functionality to classes that make them more
usable within the Groovy environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/time/TimeCategory.html">groovy.time.TimeCategory</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/servlet/ServletCategory.html">groovy.servlet.ServletCategory</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/xml/dom/DOMCategory.html">groovy.xml.dom.DOMCategory</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Category classes aren’t enabled by default. To use the methods defined in a category class it is necessary to apply
the scoped <code>use</code> method that is provided by the GDK and available from inside every Groovy object instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">use</span><span class="pun">(</span><span class="typ">TimeCategory</span><span class="pun">)</span><span class="pln">  </span><span class="pun">{</span><span class="pln">
    println </span><span class="lit">1.minute</span><span class="pun">.</span><span class="kwd">from</span><span class="pun">.</span><span class="pln">now       </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
    println </span><span class="lit">10.hours</span><span class="pun">.</span><span class="pln">ago

    </span><span class="kwd">def</span><span class="pln"> someDate </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">()</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
    println someDate </span><span class="pun">-</span><span class="pln"> </span><span class="lit">3.months</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>TimeCategory</code> adds methods to <code>Integer</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>TimeCategory</code> adds methods to <code>Date</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>use</code> method takes the category class as its first parameter and a closure code block as second parameter. Inside the
<code>Closure</code> access to the category methods is available. As can be seen in the example above even JDK classes
like <code>java.lang.Integer</code> or <code>java.util.Date</code> can be enriched with user-defined methods.</p>
</div>
<div class="paragraph">
<p>A category needs not to be directly exposed to the user code, the following will also do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">JPACategory</span><span class="pun">{</span><span class="pln">
  </span><span class="com">// Let's enhance JPA EntityManager without getting into the JSR committee</span><span class="pln">
  </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> persistAll</span><span class="pun">(</span><span class="typ">EntityManager</span><span class="pln"> em </span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> entities</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">//add an interface to save all</span><span class="pln">
    entities</span><span class="pun">?.</span><span class="pln">each </span><span class="pun">{</span><span class="pln"> em</span><span class="pun">.</span><span class="pln">persist</span><span class="pun">(</span><span class="pln">it</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> transactionContext </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">EntityManager</span><span class="pln"> em</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Closure</span><span class="pln"> c </span><span class="pun">-&gt;</span><span class="pln">
  </span><span class="kwd">def</span><span class="pln"> tx </span><span class="pun">=</span><span class="pln"> em</span><span class="pun">.</span><span class="pln">transaction
  </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    tx</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">use</span><span class="pun">(</span><span class="typ">JPACategory</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      c</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    tx</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span><span class="pln">
  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    tx</span><span class="pun">.</span><span class="pln">rollback</span><span class="pun">()</span><span class="pln">
  </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">finally</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">//cleanup your resource here</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// user code, they always forget to close resource in exception, some even forget to commit, let's not rely on them.</span><span class="pln">
</span><span class="typ">EntityManager</span><span class="pln"> em</span><span class="pun">;</span><span class="pln"> </span><span class="com">//probably injected</span><span class="pln">
transactionContext </span><span class="pun">(</span><span class="pln">em</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
 em</span><span class="pun">.</span><span class="pln">persistAll</span><span class="pun">(</span><span class="pln">obj1</span><span class="pun">,</span><span class="pln"> obj2</span><span class="pun">,</span><span class="pln"> obj3</span><span class="pun">)</span><span class="pln">
 </span><span class="com">// let's do some logics here to make the example sensible</span><span class="pln">
 em</span><span class="pun">.</span><span class="pln">persistAll</span><span class="pun">(</span><span class="pln">obj2</span><span class="pun">,</span><span class="pln"> obj4</span><span class="pun">,</span><span class="pln"> obj6</span><span class="pun">)</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When we have a look at the <code>groovy.time.TimeCategory</code> class we see that the extension methods are all declared as <code>static</code>
methods. In fact, this is one of the requirements that must be met by category classes for its methods to be successfully added to
a class inside the <code>use</code> code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TimeCategory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> plus</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> date</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">BaseDuration</span><span class="pln"> duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> duration</span><span class="pun">.</span><span class="pln">plus</span><span class="pun">(</span><span class="pln">date</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> minus</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> date</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">BaseDuration</span><span class="pln"> duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Calendar</span><span class="pln"> cal </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">();</span><span class="pln">

        cal</span><span class="pun">.</span><span class="pln">setTime</span><span class="pun">(</span><span class="pln">date</span><span class="pun">);</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">YEAR</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getYears</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">MONTH</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getMonths</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">DAY_OF_YEAR</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getDays</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">HOUR_OF_DAY</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getHours</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">MINUTE</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getMinutes</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">SECOND</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getSeconds</span><span class="pun">());</span><span class="pln">
        cal</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">MILLISECOND</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">getMillis</span><span class="pun">());</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> cal</span><span class="pun">.</span><span class="pln">getTime</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Another requirement is the first argument of the static method must define the type the method is attached to once being activated. The
other arguments are the normal arguments the method will take as parameters.</p>
</div>
<div class="paragraph">
<p>Because of the parameter and static method convention, category method definitions may be a bit less intuitive than
normal method definitions. As an alternative Groovy comes with a <code>@Category</code> annotation that transforms annotated classes
into category classes at compile-time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Distance</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> number
    </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"${number}m"</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Category</span><span class="pun">(</span><span class="typ">Number</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">NumberCategory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Distance</span><span class="pln"> getMeters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Distance</span><span class="pun">(</span><span class="pln">number</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">use</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NumberCategory</span><span class="pun">)</span><span class="pln">  </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">assert</span><span class="pln"> </span><span class="lit">42.meters</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'42m'</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Applying the <code>@Category</code> annotation has the advantage of being able to use instance methods without the target type as a
first parameter. The target type class is given as an argument to the annotation instead.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is a distinct section on <code>@Category</code> in the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Category">compile-time metaprogramming section</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_metaclasses"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_metaclasses"></a>Metaclasses</h5>
<div class="paragraph">
<p>As explained earlier, Metaclasses play a central role in method resolution.
For every method invocation from groovy code, Groovy will find the <code>MetaClass</code> for the given object
and delegate the method resolution to the metaclass via
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/groovy/lang/MetaClass.html#invokeMethod(java.lang.Class,%20java.lang.Object,%20java.lang.String,%20java.lang.Object,%20boolean,%20boolean)">MetaClass#invokeMethod</a>
which should not be confused with
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/groovy/lang/GroovyObject.html#invokeMethod(java.lang.String,%20java.lang.Object)">GroovyObject#invokeMethod</a>
which happens to be a method that the metaclass may eventually call.</p>
</div>
<div class="sect5">
<h6 id="_the_default_metaclass_code_metaclassimpl_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_default_metaclass_code_metaclassimpl_code"></a>The default metaclass <code>MetaClassImpl</code></h6>
<div class="paragraph">
<p>By default, objects get an instance of <code>MetaClassImpl</code> that implements the default method lookup.
This method lookup includes looking up of the method in the object class ("regular" method) but also if no
method is found this way it will resort to calling <code>methodMissing</code> and ultimately
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/groovy/lang/GroovyObject.html#invokeMethod(java.lang.String,%20java.lang.Object)">GroovyObject#invokeMethod</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">metaClass </span><span class="pun">=~</span><span class="pln"> </span><span class="pun">/</span><span class="typ">MetaClassImpl</span><span class="pun">/</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_custom_metaclasses"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_metaclasses"></a>Custom metaclasses</h6>
<div class="paragraph">
<p>You can change the metaclass of any object or class and replace with a custom implementation of the <code>MetaClass</code> <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/MetaClass.html">interface</a>. Usually you will want to subclass one of the existing metaclasses <code>MetaClassImpl</code>, <code>DelegatingMetaClass</code>, <code>ExpandoMetaClass</code>, <code>ProxyMetaClass</code>, etc. otherwise you will need to implement the complete method lookup logic. Before using a new metaclass instance you should call  <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/groovy/lang/MetaClass.html#initialize()">groovy.lang.MetaClass#initialize()</a> otherwise the metaclass may or may not behave as expected.</p>
</div>
<div class="sect6">
<h7 id="_delegating_metaclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_metaclass"></a>Delegating metaclass</h7>
<div class="paragraph">
<p>If you only need to decorate an existing metaclass the <code>DelegatingMetaClass</code> simplifies that use case. The old metaclass implementation is still accessible via <code>super</code> making easy to apply pretransformations to the inputs, routing to other methods and postprocess the outputs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">def</span><span class="pln"> bar</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"bar"</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFooMetaClass</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">DelegatingMetaClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">MyFooMetaClass</span><span class="pun">(</span><span class="typ">MetaClass</span><span class="pln"> metaClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">metaClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="typ">MyFooMetaClass</span><span class="pun">(</span><span class="typ">Class</span><span class="pln"> theClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">theClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  </span><span class="typ">Object</span><span class="pln"> invokeMethod</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> methodName</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="kwd">def</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">invokeMethod</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">,</span><span class="pln">methodName</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(),</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">
     result</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> mc </span><span class="pun">=</span><span class="pln">  </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyFooMetaClass</span><span class="pun">(</span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">metaClass</span><span class="pun">)</span><span class="pln">
mc</span><span class="pun">.</span><span class="pln">initialize</span><span class="pun">()</span><span class="pln">

</span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">metaClass </span><span class="pun">=</span><span class="pln"> mc
</span><span class="kwd">def</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">assert</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">BAR</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"BAR"</span><span class="pln"> </span><span class="com">// the new metaclass routes .BAR() to .bar() and uppercases the result</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_magic_package"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_magic_package"></a>Magic package</h7>
<div class="paragraph">
<p>It is possible to change the metaclass at startup time by giving the metaclass a specially crafted (magic) class name  and package name. In order to change the metaclass for <code>java.lang.Integer</code> it’s enough to put a class <code>groovy.runtime.metaclass.java.lang.IntegerMetaClass</code> in the classpath. This is useful, for example,  when working with frameworks if you want to to metaclass changes before your code is executed by the framework. The general form of the magic package is <code>groovy.runtime.metaclass.[package].[class]MetaClass</code>. In the example below the <code>[package]</code> is <code>java.lang</code> and the <code>[class]</code> is <code>Integer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="com">// file: IntegerMetaClass.groovy</span><span class="pln">
</span><span class="kwd">package</span><span class="pln"> groovy</span><span class="pun">.</span><span class="pln">runtime</span><span class="pun">.</span><span class="pln">metaclass</span><span class="pun">.</span><span class="pln">java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">IntegerMetaClass</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">DelegatingMetaClass</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">IntegerMetaClass</span><span class="pun">(</span><span class="typ">MetaClass</span><span class="pln"> metaClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">metaClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="typ">IntegerMetaClass</span><span class="pun">(</span><span class="typ">Class</span><span class="pln"> theClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">theClass</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="typ">Object</span><span class="pln"> invokeMethod</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">name </span><span class="pun">=~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">isBiggerThan</span><span class="pun">/)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">def</span><span class="pln"> other </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">/isBiggerThan/</span><span class="pun">)[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">toInteger</span><span class="pun">()</span><span class="pln">
      </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> other
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">invokeMethod</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">,</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By compiling the above file with <code>groovyc IntegerMetaClass.groovy</code> a <code>./groovy/runtime/metaclass/java/lang/IntegerMetaClass.class</code> will be generated. The example below will use this new metaclass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// File testInteger.groovy
def i = 10

assert i.isBiggerThan5()
assert !i.isBiggerThan15()

println i.isBiggerThan5()</code></pre>
</div>
</div>
<div class="paragraph">
<p>By running that file with <code>groovy -cp . testInteger.groovy</code> the <code>IntegerMetaClass</code> will be in the classpath and therefore it will become the metaclass for <code>java.lang.Integer</code> intercepting the method calls to <code>isBiggerThan*()</code> methods.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_per_instance_metaclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_per_instance_metaclass"></a>Per instance metaclass</h6>
<div class="paragraph">
<p>You can change the metaclass of individual objects separately, so it’s possible to have multiple object of the same class with different metaclasses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Foo { def bar() { "bar" }}

class FooMetaClass extends DelegatingMetaClass {
  FooMetaClass(MetaClass metaClass) { super(metaClass) }
  Object invokeMethod(Object object, String name, Object[] args) {
      super.invokeMethod(object,name,args).toUpperCase()
  }
}

def f1 = new Foo()
def f2 = new Foo()
f2.metaClass = new FooMetaClass(f2.metaClass)

assert f1.bar() == "bar"
assert f2.bar() == "BAR"
assert f1.metaClass =~ /MetaClassImpl/
assert f2.metaClass =~ /FooMetaClass/
assert f1.class.toString() == "class Foo"
assert f2.class.toString() == "class Foo"</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="metaprogramming_emc"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#metaprogramming_emc"></a>ExpandoMetaClass</h6>
<div class="paragraph">
<p>Groovy comes with a special <code>MetaClass</code> the so-called <code>ExpandoMetaClass</code>. It is special in that it allows for dynamically
adding or changing methods, constructors, properties and even static methods by using a neat closure syntax.</p>
</div>
<div class="paragraph">
<p>Applying those modifications can be especially useful in mocking or stubbing scenarios as shown in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#testing_guide_emc">Testing Guide</a>.</p>
</div>
<div class="paragraph">
<p>Every <code>java.lang.Class</code> is supplied by Groovy with a special <code>metaClass</code> property that will give you a reference to an
<code>ExpandoMetaClass</code> instance. This instance can then be used to add methods or change the behaviour of already existing
ones.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default <code>ExpandoMetaClass</code> doesn’t do inheritance. To enable this you must call <code>ExpandoMetaClass#enableGlobally()</code>
before your app starts such as in the main method or servlet bootstrap.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The following sections go into detail on how <code>ExpandoMetaClass</code> can be used in various scenarios.</p>
</div>
<div class="sect6">
<h7 id="_methods_4"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_methods_4"></a>Methods</h7>
<div class="paragraph">
<p>Once the <code>ExpandoMetaClass</code> is accessed by calling the <code>metaClass</code> property, methods can added by using either the left shift
<code>&lt;&lt;</code> or the <code>=</code> operator.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the left shift operator is used to <em>append</em> a new method. If a public method with the same name and
parameter types is declared by the class or interface, including those inherited from superclasses and superinterfaces
but excluding those added to the <code>metaClass</code> at runtime, an exception will be thrown. If you want to <em>replace</em> a
method declared by the class or interface you can use the <code>=</code> operator.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The operators are applied on a non-existent property of <code>metaClass</code> passing an instance of a <code>Closure</code> code block.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title
}

Book.metaClass.titleInUpperCase &lt;&lt; {-&gt; title.toUpperCase() }

def b = new Book(title:"The Stand")

assert "THE STAND" == b.titleInUpperCase()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above shows how a new method can be added to a class by accessing the <code>metaClass</code> property and using the <code>&lt;&lt;</code> or
 <code>=</code> operator to assign a <code>Closure</code> code block. The <code>Closure</code> parameters are interpreted as method parameters. Parameterless methods
 can be added by using the <code>{→ …​}</code> syntax.</p>
</div>
</div>
<div class="sect6">
<h7 id="_properties_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_properties_2"></a>Properties</h7>
<div class="paragraph">
<p><code>ExpandoMetaClass</code> supports two mechanisms for adding or overriding properties.</p>
</div>
<div class="paragraph">
<p>Firstly, it has support for declaring a <em>mutable property</em> by simply assigning a value to a property of <code>metaClass</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title
}

Book.metaClass.author = "Stephen King"
def b = new Book()

assert "Stephen King" == b.author</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another way is to add getter and/or setter methods by using the standard mechanisms for adding instance methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
  String title
}
Book.metaClass.getAuthor &lt;&lt; {-&gt; "Stephen King" }

def b = new Book()

assert "Stephen King" == b.author</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the source code example above the property is dictated by the closure and is a read-only property. It is feasible to add
an equivalent setter method but then the property value needs to be stored for later usage. This could be done as
shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
  String title
}

def properties = Collections.synchronizedMap([:])

Book.metaClass.setAuthor = { String value -&gt;
   properties[System.identityHashCode(delegate) + "author"] = value
}
Book.metaClass.getAuthor = {-&gt;
   properties[System.identityHashCode(delegate) + "author"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is not the only technique however. For example in a servlet container one way might be to store the values in
the currently executing request as request attributes (as is done in some cases in Grails).</p>
</div>
</div>
<div class="sect6">
<h7 id="_constructors_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_constructors_2"></a>Constructors</h7>
<div class="paragraph">
<p>Constructors can be added by using a special <code>constructor</code> property. Either the <code>&lt;&lt;</code> or <code>=</code> operator can be used
to assign a <code>Closure</code> code block. The <code>Closure</code> arguments will become the constructor arguments when the code is
executed at runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
}
Book.metaClass.constructor &lt;&lt; { String title -&gt; new Book(title:title) }

def book = new Book('Groovy in Action - 2nd Edition')
assert book.title == 'Groovy in Action - 2nd Edition'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Be careful when adding constructors however, as it is very easy to get into stack overflow troubles.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_static_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods"></a>Static Methods</h7>
<div class="paragraph">
<p>Static methods can be added using the same technique as instance methods with the addition of the <code>static</code> qualifier
before the method name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title
}

Book.metaClass.static.create &lt;&lt; { String title -&gt; new Book(title:title) }

def b = Book.create("The Stand")</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_borrowing_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_borrowing_methods"></a>Borrowing Methods</h7>
<div class="paragraph">
<p>With <code>ExpandoMetaClass</code> it is possible to use Groovy’s method pointer syntax to borrow methods from other classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
}
class MortgageLender {
   def borrowMoney() {
      "buy house"
   }
}

def lender = new MortgageLender()

Person.metaClass.buyHouse = lender.&amp;borrowMoney

def p = new Person()

assert "buy house" == p.buyHouse()</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_dynamic_method_names"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic_method_names"></a>Dynamic Method Names</h7>
<div class="paragraph">
<p>Since Groovy allows you to use Strings as property names this in turns allows you to dynamically create method and
property names at runtime. To create a method with a dynamic name simply use the language feature of reference property
names as strings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
   String name = "Fred"
}

def methodName = "Bob"

Person.metaClass."changeNameTo${methodName}" = {-&gt; delegate.name = "Bob" }

def p = new Person()

assert "Fred" == p.name

p.changeNameToBob()

assert "Bob" == p.name</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same concept can be applied to static methods and properties.</p>
</div>
<div class="paragraph">
<p>One application of dynamic method names can be found in the Grails web application framework. The concept of "dynamic
codecs" is implemented by using dynamic method names.</p>
</div>
<div class="listingblock">
<div class="title"><code>HTMLCodec</code> Class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class HTMLCodec {
    static encode = { theTarget -&gt;
        HtmlUtils.htmlEscape(theTarget.toString())
    }

    static decode = { theTarget -&gt;
    	HtmlUtils.htmlUnescape(theTarget.toString())
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above shows a codec implementation. Grails comes with various codec implementations each defined in a single class.
At runtime there will be multiple codec classes in the application classpath. At application startup the framework adds
a <code>encodeXXX</code> and a <code>decodeXXX</code> method to certain meta-classes where <code>XXX</code> is the first part of the codec class name (e.g.
<code>encodeHTML</code>). This mechanism is in the following shown in some Groovy pseudo-code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def codecs = classes.findAll { it.name.endsWith('Codec') }

codecs.each { codec -&gt;
    Object.metaClass."encodeAs${codec.name-'Codec'}" = { codec.newInstance().encode(delegate) }
    Object.metaClass."decodeFrom${codec.name-'Codec'}" = { codec.newInstance().decode(delegate) }
}


def html = '&lt;html&gt;&lt;body&gt;hello&lt;/body&gt;&lt;/html&gt;'

assert '&lt;html&gt;&lt;body&gt;hello&lt;/body&gt;&lt;/html&gt;' == html.encodeAsHTML()</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_runtime_discovery"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_discovery"></a>Runtime Discovery</h7>
<div class="paragraph">
<p>At runtime it is often useful to know what other methods or properties exist at the time the method is executed. <code>ExpandoMetaClass</code>
provides the following methods as of this writing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getMetaMethod</code></p>
</li>
<li>
<p><code>hasMetaMethod</code></p>
</li>
<li>
<p><code>getMetaProperty</code></p>
</li>
<li>
<p><code>hasMetaProperty</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Why can’t you just use reflection? Well because Groovy is different, it has the methods that are "real" methods and
methods that are available only at runtime. These are sometimes (but not always) represented as MetaMethods. The
MetaMethods tell you what methods are available at runtime, thus your code can adapt.</p>
</div>
<div class="paragraph">
<p>This is of particular use when overriding <code>invokeMethod</code>, <code>getProperty</code> and/or <code>setProperty</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_groovyobject_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyobject_methods"></a>GroovyObject Methods</h7>
<div class="paragraph">
<p>Another feature of <code>ExpandoMetaClass</code> is that it allows to override the methods <code>invokeMethod</code>, <code>getProperty</code> and
<code>setProperty</code>, all of them can be found in the <code>groovy.lang.GroovyObject</code> class.</p>
</div>
<div class="paragraph">
<p>The following example shows how to override <code>invokeMethod</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Stuff {
   def invokeMe() { "foo" }
}

Stuff.metaClass.invokeMethod = { String name, args -&gt;
   def metaMethod = Stuff.metaClass.getMetaMethod(name, args)
   def result
   if(metaMethod) result = metaMethod.invoke(delegate,args)
   else {
      result = "bar"
   }
   result
}

def stf = new Stuff()

assert "foo" == stf.invokeMe()
assert "bar" == stf.doStuff()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first step in the <code>Closure</code> code is to lookup the <code>MetaMethod</code> for the given name and arguments. If the method
can be found everything is fine and it is delegated to. If not, a dummy value is returned.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>MetaMethod</code> is a method that is known to exist on the <code>MetaClass</code> whether added at runtime or at compile-time.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The same logic can be used to override <code>setProperty</code> or <code>getProperty</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
   String name = "Fred"
}

Person.metaClass.getProperty = { String name -&gt;
   def metaProperty = Person.metaClass.getMetaProperty(name)
   def result
   if(metaProperty) result = metaProperty.getProperty(delegate)
   else {
      result = "Flintstone"
   }
   result
}

def p = new Person()

assert "Fred" == p.name
assert "Flintstone" == p.other</code></pre>
</div>
</div>
<div class="paragraph">
<p>The important thing to note here is that instead of a <code>MetaMethod</code> a <code>MetaProperty</code> instance is looked up. If that exists
the <code>getProperty</code> method of the <code>MetaProperty</code> is called, passing the delegate.</p>
</div>
</div>
<div class="sect6">
<h7 id="_overriding_static_invokemethod"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_overriding_static_invokemethod"></a>Overriding Static invokeMethod</h7>
<div class="paragraph">
<p><code>ExpandoMetaClass</code> even allows for overriding static method with a special <code>invokeMethod</code> syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Stuff {
   static invokeMe() { "foo" }
}

Stuff.metaClass.'static'.invokeMethod = { String name, args -&gt;
   def metaMethod = Stuff.metaClass.getStaticMetaMethod(name, args)
   def result
   if(metaMethod) result = metaMethod.invoke(delegate,args)
   else {
      result = "bar"
   }
   result
}

assert "foo" == Stuff.invokeMe()
assert "bar" == Stuff.doStuff()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logic that is used for overriding the static method is the same as we’ve seen before for overriding instance methods. The
only difference is the access to the <code>metaClass.static</code> property and the call to <code>getStaticMethodName</code> for retrieving
the static <code>MetaMethod</code> instance.</p>
</div>
</div>
<div class="sect6">
<h7 id="_extending_interfaces"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_interfaces"></a>Extending Interfaces</h7>
<div class="paragraph">
<p>It is possible to add methods onto interfaces with <code>ExpandoMetaClass</code>. To do this however, it <strong>must</strong> be enabled
globally using the <code>ExpandoMetaClass.enableGlobally()</code> method before application start-up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">List.metaClass.sizeDoubled = {-&gt; delegate.size() * 2 }

def list = []

list &lt;&lt; 1
list &lt;&lt; 2

assert 4 == list.sizeDoubled()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_extension_modules"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extension_modules"></a>Extension modules</h5>
<div class="sect5">
<h6 id="_extending_existing_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extending_existing_classes"></a>Extending existing classes</h6>
<div class="paragraph">
<p>An extension module allows you to add new methods to existing classes, including classes which are precompiled, like
classes from the JDK. Those new methods, unlike those defined through a metaclass or using a category, are available
globally. For example, when you write:</p>
</div>
<div class="listingblock">
<div class="title">Standard extension method</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def file = new File(...)
def contents = file.getText('utf-8')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getText</code> method doesn’t exist on the <code>File</code> class. However, Groovy knows it because it is defined in a special
class, <code>ResourceGroovyMethods</code>:</p>
</div>
<div class="listingblock">
<div class="title">ResourceGroovyMethods.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public static String getText(File file, String charset) throws IOException {
 return IOGroovyMethods.getText(newReader(file, charset));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may notice that the extension method is defined using a static method in a helper class (where various extension
methods are defined). The first argument of the <code>getText</code> method corresponds to the receiver, while additional parameters
correspond to the arguments of the extension method. So here, we are defining a method called <em>getText</em> on
the <code>File</code> class (because the first argument is of type <code>File</code>), which takes a single argument as a parameter (the encoding <code>String</code>).</p>
</div>
<div class="paragraph">
<p>The process of creating an extension module is simple:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>write an extension class like above</p>
</li>
<li>
<p>write a module descriptor file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then you have to make the extension module visible to Groovy, which is as simple as having the extension module classes
and descriptor available on classpath. This means that you have the choice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>either provide the classes and module descriptor directly on classpath</p>
</li>
<li>
<p>or bundle your extension module into a jar for reusability</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An extension module may add two kind of methods to a class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>instance methods (to be called on an instance of a class)</p>
</li>
<li>
<p>static methods (to be called on the class itself)</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_instance_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instance_methods"></a>Instance methods</h6>
<div class="paragraph">
<p>To add an instance method to an existing class, you need to create an extension class. For example, let’s say you
want to add a <code>maxRetries</code> method on <code>Integer</code> which accepts a closure and executes it at most <em>n</em> times until no
exception is thrown. To do that, you only need to write the following:</p>
</div>
<div class="listingblock">
<div class="title">MaxRetriesExtension.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MaxRetriesExtension {                                     <i class="conum" data-value="1"></i><b>(1)</b>
    static void maxRetries(Integer self, Closure code) {        <i class="conum" data-value="2"></i><b>(2)</b>
        assert self &gt;= 0
        int retries = self
        Throwable e = null
        while (retries &gt; 0) {
            try {
                code.call()
                break
            } catch (Throwable err) {
                e = err
                retries--
            }
        }
        if (retries == 0 &amp;&amp; e) {
            throw e
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The extension class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>First argument of the static method corresponds to the receiver of the message, that is to say the extended instance</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then, after <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#module-descriptor">having declared your extension class</a>, you can call it this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">int i=0
5.maxRetries {
    i++
}
assert i == 1
i=0
try {
    5.maxRetries {
        i++
        throw new RuntimeException("oops")
    }
} catch (RuntimeException e) {
    assert i == 5
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_static_methods_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_methods_2"></a>Static methods</h6>
<div class="paragraph">
<p>It is also possible to add static methods to a class. In that case, the static method needs to be defined in its <strong>own</strong>
file. Static and instance extension methods <strong>cannot</strong> be present in the same class.</p>
</div>
<div class="listingblock">
<div class="title">StaticStringExtension.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class StaticStringExtension {                                       <i class="conum" data-value="1"></i><b>(1)</b>
    static String greeting(String self) {                           <i class="conum" data-value="2"></i><b>(2)</b>
        'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The static extension class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>First argument of the static method corresponds to the class being extended and is <strong>unused</strong></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In which case you can call it directly on the <code>String</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert String.greeting() == 'Hello, world!'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="module-descriptor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#module-descriptor"></a>Module descriptor</h6>
<div class="paragraph">
<p>For Groovy to be able to load your extension methods, you must declare
your extension helper classes. You must create a file named
<code>org.codehaus.groovy.runtime.ExtensionModule</code> into the
<code>META-INF/groovy</code> directory:</p>
</div>
<div class="listingblock">
<div class="title">org.codehaus.groovy.runtime.ExtensionModule</div>
<div class="content">
<pre>moduleName=Test module for specifications
moduleVersion=1.0-test
extensionClasses=support.MaxRetriesExtension
staticExtensionClasses=support.StaticStringExtension</pre>
</div>
</div>
<div class="paragraph">
<p>The module descriptor requires 4 keys:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>moduleName</em> : the name of your module</p>
</li>
<li>
<p><em>moduleVersion</em>: the version of your module. Note that version number
is only used to check that you don’t load the same module in two
different versions.</p>
</li>
<li>
<p><em>extensionClasses</em>: the list of extension helper classes for instance
methods. You can provide several classes, given that they are comma
separated.</p>
</li>
<li>
<p><em>staticExtensionClasses</em>: the list of extension helper classes for
static methods. You can provide several classes, given that they are
comma separated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that it is not required for a module to define both static helpers
and instance helpers, and that you may add several classes to a single
module. You can also extend different classes in a single module without
problem. It is even possible to use different classes in a single
extension class, but it is recommended to group extension methods into
classes by feature set.</p>
</div>
</div>
<div class="sect5">
<h6 id="_extension_modules_and_classpath"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_extension_modules_and_classpath"></a>Extension modules and classpath</h6>
<div class="paragraph">
<p>It’s worth noting that you can’t use an extension which is compiled at the same time as code using it. That means that
to use an extension, it <strong>has</strong> to be available on classpath, as compiled classes, before the code using it gets compiled.
Usually, this means that you can’t have the <em>test</em> classes in the same source unit as the extension class itself. Since
in general, test sources are separated from normal sources and executed in another step of the build, this is not an issue.</p>
</div>
</div>
<div class="sect5">
<h6 id="_compatibility_with_type_checking"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compatibility_with_type_checking"></a>Compatibility with type checking</h6>
<div class="paragraph">
<p>Unlike categories, extension modules are compatible with type checking: if they are found on classpath, then the type
checker is aware of the extension methods and will not complain when you call them. It is also compatible with static
compilation.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compile_time_metaprogramming"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compile_time_metaprogramming"></a>3.4.2. Compile-time metaprogramming</h4>
<div class="paragraph">
<p>Compile-time metaprogramming in Groovy allows code generation at compile-time. Those transformations are altering the
Abstract Syntax Tree (AST) of a program, which is why in Groovy we call it AST transformations. AST transformations
allow you to hook into the compilation process, modify the AST and continue the compilation process to generate regular
bytecode. Compared to runtime metaprogramming, this has the advantage of making the changes visible in the class file
itself (that is to say, in the bytecode). Making it visible in the bytecode is important for example if you want the
transformations to be part of the class contract (implementing interfaces, extending abstract classes, …​) or even
if you need your class to be callable from Java (or other JVM languages). For example, an AST transformation can add
methods to a class. If you do it with runtime metaprogramming, the new method would only be visible from Groovy. If you
do the same using compile-time metaprogramming, the method would be visible from Java too. Last but not least, performance
would likely be better with compile-time metaprogramming (because no initialization phase is required).</p>
</div>
<div class="paragraph">
<p>In this section, we will start with explaining the various compile-time transformations that are bundled with the Groovy
distribution. In a subsequent section, we will describe how you can <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#developing-ast-xforms">implement your own AST transformations</a>
and what are the disadvantages of this technique.</p>
</div>
<div class="sect4">
<h5 id="_available_ast_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_available_ast_transformations"></a>Available AST transformations</h5>
<div class="paragraph">
<p>Groovy comes with various AST transformations covering different needs: reducing boilerplate (code generation), implementing
design patterns (delegation, …​), logging, declarative concurrency, cloning, safer scripting, tweaking the compilation,
implementing Swing patterns, testing and eventually managing dependencies. If none of those AST transformations cover
your needs, you can still implement your own, as show in section <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#developing-ast-xforms">Developing your own AST
transformations</a>.</p>
</div>
<div class="paragraph">
<p>AST transformations can be separated into two categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>global AST transformations are applied transparently, globally, as soon as they are found on compile classpath</p>
</li>
<li>
<p>local AST transformations are applied by annotating the source code with markers. Unlike global AST transformations,
local AST transformations may support parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Groovy doesn’t ship with any global AST transformation, but you can find a list of local AST transformations
available for you to use in your code here:</p>
</div>
<div class="sect5">
<h6 id="_code_generation_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_code_generation_transformations"></a>Code generation transformations</h6>
<div class="paragraph">
<p>This category of transformation includes AST transformations which help removing boilerplate code. This is typically
code that you have to write but that does not carry any useful information. By autogenerating this boilerplate code,
the code you have to write is left clean and concise and the chance of introducing an error by getting such
boilerplate code incorrect is reduced.</p>
</div>
<div class="sect6">
<h7 id="xform-ToString"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ToString"></a><code>@groovy.transform.ToString</code></h7>
<div class="paragraph">
<p>The <code>@ToString</code> AST transformation generates a human readable <code>toString</code> representation of the class. For example,
annotating the <code>Person</code> class like below will automatically generate the <code>toString</code> method for you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ToString

@ToString
class Person {
    String firstName
    String lastName
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this definition, then the following assertion passes, meaning that a <code>toString</code> method taking the field values from
the class and printing them out has been generated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def p = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p.toString() == 'Person(Jack, Nicholson)'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@ToString</code> annotation accepts several parameters which are summarized in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of properties to exclude from toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(excludes=['firstName'])
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p.toString() == 'Person(Nicholson)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undefined marker list (indicates all fields)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of fields to include in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includes=['lastName'])
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p.toString() == 'Person(Nicholson)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should superclass be included in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString
class Id { long id }

@ToString(includeSuper=true)
class Person extends Id {
    String firstName
    String lastName
}

def p = new Person(id:1, firstName: 'Jack', lastName: 'Nicholson')
assert p.toString() == 'Person(Jack, Nicholson, Id(1))'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to include names of properties in generated toString.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includeNames=true)
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p.toString() == 'Person(firstName:Jack, lastName:Nicholson)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields be included in toString, in addition to properties</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includeFields=true)
class Person {
    String firstName
    String lastName
    private int age
    void test() {
       age = 42
    }
}

def p = new Person(firstName: 'Jack', lastName: 'Nicholson')
p.test()
assert p.toString() == 'Person(Jack, Nicholson, 42)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should super properties be included in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
}

@ToString(includeSuperProperties = true, includeNames = true)
class BandMember extends Person {
    String bandName
}

def bono = new BandMember(name:'Bono', bandName: 'U2').toString()

assert bono.toString() == 'BandMember(bandName:U2, name:Bono)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should visible super fields be included in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    protected String name
}

@ToString(includeSuperFields = true, includeNames = true)
@MapConstructor(includeSuperFields = true)
class BandMember extends Person {
    String bandName
}

def bono = new BandMember(name:'Bono', bandName: 'U2').toString()

assert bono.toString() == 'BandMember(bandName:U2, name:Bono)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ignoreNulls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should properties/fields with null value be displayed</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(ignoreNulls=true)
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack')
assert p.toString() == 'Person(Jack)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includePackage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use fully qualified class name instead of simple name in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includePackage=true)
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack', lastName:'Nicholson')
assert p.toString() == 'acme.Person(Jack, Nicholson)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include all JavaBean properties in toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includeNames=true)
class Person {
    String firstName
    String getLastName() { 'Nicholson' }
}

def p = new Person(firstName: 'Jack')
assert p.toString() == 'acme.Person(firstName:Jack, lastName:Nicholson)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache the toString string. Should only be set to true if the class is immutable.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(cache=true)
class Person {
    String firstName
    String lastName
}

def p = new Person(firstName: 'Jack', lastName:'Nicholson')
def s1 = p.toString()
def s2 = p.toString()
assert s1 == s2
assert s1 == 'Person(Jack, Nicholson)'
assert s1.is(s2) // same instance</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields and/or properties with internal names be included in the generated toString</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(allNames=true)
class Person {
    String $firstName
}

def p = new Person($firstName: "Jack")
assert p.toString() == 'acme.Person(Jack)'</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-EqualsAndHashCode"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-EqualsAndHashCode"></a><code>@groovy.transform.EqualsAndHashCode</code></h7>
<div class="paragraph">
<p>The <code>@EqualsAndHashCode</code> AST transformation aims at generating <code>equals</code> and <code>hashCode</code> methods for you. The generated
hashcode follows the best practices as described in <em>Effective Java</em> by <em>Josh Bloch</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person(firstName: 'Jack', lastName: 'Nicholson')

assert p1==p2
assert p1.hashCode() == p2.hashCode()</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are several options available to tweak the behavior of <code>@EqualsAndHashCode</code>:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of properties to exclude from equals/hashCode</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode(excludes=['firstName'])
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person(firstName: 'Bob', lastName: 'Nicholson')

assert p1==p2
assert p1.hashCode() == p2.hashCode()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undefined marker list (indicating all fields)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of fields to include in equals/hashCode</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode(includes=['lastName'])
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person(firstName: 'Bob', lastName: 'Nicholson')

assert p1==p2
assert p1.hashCode() == p2.hashCode()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache the hashCode computation. Should only be set to true if the class is immutable.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode
import groovy.transform.Immutable

@Immutable
class SlowHashCode {
    int hashCode() {
        sleep 100
        127
    }
}

@EqualsAndHashCode(cache=true)
@Immutable
class Person {
    SlowHashCode slowHashCode = new SlowHashCode()
}

def p = new Person()
p.hashCode()

def start = System.currentTimeMillis()
p.hashCode()
assert System.currentTimeMillis() - start &lt; 100</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">callSuper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to include super in equals and hashCode calculations</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode
class Living {
    String race
}

@EqualsAndHashCode(callSuper=true)
class Person extends Living {
    String firstName
    String lastName
}

def p1 = new Person(race:'Human', firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person(race: 'Human being', firstName: 'Jack', lastName: 'Nicholson')

assert p1!=p2
assert p1.hashCode() != p2.hashCode()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields be included in equals/hashCode, in addition to properties</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode(includeFields=true)
class Person {
    private String firstName

    Person(String firstName) {
        this.firstName = firstName
    }
}

def p1 = new Person('Jack')
def p2 = new Person('Jack')
def p3 = new Person('Bob')

assert p1 == p2
assert p1 != p3</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useCanEqual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should equals call canEqual helper method.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="http://www.artima.com/lejava/articles/equality.html" class="bare">http://www.artima.com/lejava/articles/equality.html</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should JavaBean properties be included in equals and hashCode calculations</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@EqualsAndHashCode(allProperties=true, excludes='first, last')
class Person {
    String first, last
    String getInitials() { first[0] + last[0] }
}

def p1 = new Person(first: 'Jack', last: 'Smith')
def p2 = new Person(first: 'Jack', last: 'Spratt')
def p3 = new Person(first: 'Bob', last: 'Smith')

assert p1 == p2
assert p1.hashCode() == p2.hashCode()
assert p1 != p3
assert p1.hashCode() != p3.hashCode()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields and/or properties with internal names be included in equals and hashCode calculations</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.EqualsAndHashCode

@EqualsAndHashCode(allNames=true)
class Person {
    String $firstName
}

def p1 = new Person($firstName: 'Jack')
def p2 = new Person($firstName: 'Bob')

assert p1 != p2
assert p1.hashCode() != p2.hashCode()</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-TupleConstructor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TupleConstructor"></a><code>@groovy.transform.TupleConstructor</code></h7>
<div class="paragraph">
<p>The <code>@TupleConstructor</code> annotation aims at eliminating boilerplate code by generating constructors for you. A tuple
constructor is created having a parameter for each property (and possibly each field). Each parameter has a default value
(using the initial value of the property if present or otherwise Java’s default value according to the properties type).</p>
</div>
</div>
<div class="sect6">
<h7 id="_implementation_details"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implementation_details"></a>Implementation Details</h7>
<div class="paragraph">
<p>Normally you don’t need to understand the imp[ementation details of the generated constructor(s); you just use them in the normal way.
However, if you want to add multiple constructors, understand Java integration options or meet requirements of some
dependency injection frameworks, then some details are useful.</p>
</div>
<div class="paragraph">
<p>As previously mentioned, the generated constructor has default values applied. In later compilation phases,
the Groovy compiler’s standard default value processing behavior is then applied.
The end result is that multiple constructors are placed within the bytecode of your class.
This provides a well understood semantics and is also useful for Java integration purposes. As an example, the
following code will generate 3 constructors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor
class Person {
    String firstName
    String lastName
}

// traditional map-style constructor
def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
// generated tuple constructor
def p2 = new Person('Jack', 'Nicholson')
// generated tuple constructor with default value for second property
def p3 = new Person('Jack')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first constructor is a no-arg constructor which allows the traditional map-style construction so long as
you don’t have final properties. Groovy calls the no-arg constructor and then the relevant setters under the covers.
It is worth noting that if the first property (or field) has type LinkedHashMap or if there is a single Map,
AbstractMap or HashMap property (or field), then the map-style named arguments won’t be available.</p>
</div>
<div class="paragraph">
<p>The other constructors are generated by taking the properties in the order they are defined. Groovy will generate as
many constructors as there are properties (or fields, depending on the options).</p>
</div>
<div class="paragraph">
<p>Setting the <code>defaults</code> attribute (see the available configuration options table) to <code>false</code>, disables the normal default values behavior which means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exactly one constructor will be produced</p>
</li>
<li>
<p>Attempting to use an initial value will produce an error</p>
</li>
<li>
<p>Map-style named arguments won’t be available</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This attribute is normally only used in situations where another Java framework is
expecting exactly one constructor, e.g. injection frameworks or JUnit parameterized runners.</p>
</div>
</div>
<div class="sect6">
<h7 id="_immutability_support"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_immutability_support"></a>Immutability support</h7>
<div class="paragraph">
<p>If the <code>@PropertyOptions</code> annotation is also found on the class with the <code>@TupleConstructor</code> annotation,
then the generated constructor may contain custom property handling logic.
The <code>propertyHandler</code> attribute on the <code>@PropertyOptions</code> annotation could for instance be set to
<code>ImmutablePropertyHandler</code> which will result in the addition of the necessary logic for immutable classes
(defensive copy in, cloning, etc.). This normally would happen automatically behind the scenes when you use
the <code>@Immutable</code> meta-annotation.
Some of the annotation attributes might not be supported by all property handlers.</p>
</div>
</div>
<div class="sect6">
<h7 id="_customization_options"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customization_options"></a>Customization options</h7>
<div class="paragraph">
<p>The <code>@TupleConstructor</code> AST transformation accepts several annotation attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of properties to exclude from tuple constructor generation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(excludes=['lastName'])
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person('Jack')
try {
    // will fail because the second property is excluded
    def p3 = new Person('Jack', 'Nicholson')
} catch (e) {
    assert e.message.contains ('Could not find matching constructor')
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undefined list (indicates all fields)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of fields to include in tuple constructor generation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(includes=['firstName'])
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
def p2 = new Person('Jack')
try {
    // will fail because the second property is not included
    def p3 = new Person('Jack', 'Nicholson')
} catch (e) {
    assert e.message.contains ('Could not find matching constructor')
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should properties be included in tuple constructor generation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(includeProperties=false)
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')

try {
    def p2 = new Person('Jack', 'Nicholson')
} catch(e) {
    // will fail because properties are not included
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields be included in tuple constructor generation, in addition to properties</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(includeFields=true)
class Person {
    String firstName
    String lastName
    private String occupation
    public String toString() {
        "$firstName $lastName: $occupation"
    }
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson', occupation: 'Actor')
def p2 = new Person('Jack', 'Nicholson', 'Actor')

assert p1.firstName == p2.firstName
assert p1.lastName == p2.lastName
assert p1.toString() == 'Jack Nicholson: Actor'
assert p1.toString() == p2.toString()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should properties from super classes be included in tuple constructor generation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

class Base {
    String occupation
}

@TupleConstructor(includeSuperProperties=true)
class Person extends Base {
    String firstName
    String lastName
    public String toString() {
        "$firstName $lastName: $occupation"
    }
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')

def p2 = new Person('Actor', 'Jack', 'Nicholson')

assert p1.firstName == p2.firstName
assert p1.lastName == p2.lastName
assert p1.toString() == 'Jack Nicholson: null'
assert p2.toString() == 'Jack Nicholson: Actor'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields from super classes be included in tuple constructor generation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

class Base {
    protected String occupation
    public String occupation() { this.occupation }
}

@TupleConstructor(includeSuperFields=true)
class Person extends Base {
    String firstName
    String lastName
    public String toString() {
        "$firstName $lastName: ${occupation()}"
    }
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson', occupation: 'Actor')

def p2 = new Person('Actor', 'Jack', 'Nicholson')

assert p1.firstName == p2.firstName
assert p1.lastName == p2.lastName
assert p1.toString() == 'Jack Nicholson: Actor'
assert p2.toString() == p1.toString()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">callSuper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should super properties be called within a call to the parent constructor rather than set as properties</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

class Base {
    String occupation
    Base() {}
    Base(String job) { occupation = job?.toLowerCase() }
}

@TupleConstructor(includeSuperProperties = true, callSuper=true)
class Person extends Base {
    String firstName
    String lastName
    public String toString() {
        "$firstName $lastName: $occupation"
    }
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')

def p2 = new Person('ACTOR', 'Jack', 'Nicholson')

assert p1.firstName == p2.firstName
assert p1.lastName == p2.lastName
assert p1.toString() == 'Jack Nicholson: null'
assert p2.toString() == 'Jack Nicholson: actor'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, the transformation will do nothing if a constructor is already defined. Setting this attribute to
true, the constructor will be generated and it’s your responsibility to ensure that no duplicate constructor is defined.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.*

@ToString @TupleConstructor(force=true)
final class Person {
    String name
    // explicit constructor would normally disable tuple constructor
    Person(String first, String last) { this("$first $last") }
}

assert new Person('john smith').toString() == 'Person(john smith)'
assert new Person('john', 'smith').toString() == 'Person(john smith)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaults</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that default value processing is enabled for constructor parameters.
Set to false to obtain exactly one constructor but with initial value support and named-arguments disabled.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString
@TupleConstructor(defaults=false)
class Musician {
  String name
  String instrument
  int born
}

assert new Musician('Jimi', 'Guitar', 1942).toString() == 'Musician(Jimi, Guitar, 1942)'
assert Musician.constructors.size() == 1</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useSetters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, the transformation will directly set the backing field of each property
from its corresponding constructor parameter. Setting this attribute to true, the constructor will instead call setters if
they exist. It’s usually deemed bad style from within a constructor to call setters that can be overridden. It’s your
responsibility to avoid such bad style.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.*

@ToString @TupleConstructor(useSetters=true)
final class Foo {
    String bar
    void setBar(String bar) {
        this.bar = bar?.toUpperCase() // null-safe
    }
}

assert new Foo('cat').toString() == 'Foo(CAT)'
assert new Foo(bar: 'cat').toString() == 'Foo(CAT)'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should fields and/or properties with internal names be included within the constructor</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(allNames=true)
class Person {
    String $firstName
}

def p = new Person('Jack')

assert p.$firstName == 'Jack'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should JavaBean properties be included within the constructor</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TupleConstructor(allProperties=true)
class Person {
    String first
    private String last
    void setLast(String last) {
        this.last = last
    }
    String getName() { "$first $last" }
}

assert new Person('john', 'smith').name == 'john smith'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A closure containing statements to be inserted at the start of the generated constructor(s)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor

@TupleConstructor(pre={ first = first?.toLowerCase() })
class Person {
    String first
}

def p = new Person('Jack')

assert p.first == 'jack'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A closure containing statements to be inserted at the end of the generated constructor(s)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.TupleConstructor
import static groovy.test.GroovyAssert.shouldFail

@TupleConstructor(post={ assert first })
class Person {
    String first
}

def jack = new Person('Jack')
shouldFail {
  def unknown = new Person()
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Setting the <code>defaults</code> annotation attribute to <code>false</code> and the <code>force</code> annotation attribute to <code>true</code> allows
multiple tuple constructors to be created by using different customization options for the different cases
(provided each case has a different type signature) as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Named {
  String name
}

@ToString(includeSuperProperties=true, ignoreNulls=true, includeNames=true, includeFields=true)
@TupleConstructor(force=true, defaults=false)
@TupleConstructor(force=true, defaults=false, includeFields=true)
@TupleConstructor(force=true, defaults=false, includeSuperProperties=true)
class Book extends Named {
  Integer published
  private Boolean fiction
  Book() {}
}

assert new Book("Regina", 2015).toString() == 'Book(published:2015, name:Regina)'
assert new Book(2015, false).toString() == 'Book(published:2015, fiction:false)'
assert new Book(2015).toString() == 'Book(published:2015)'
assert new Book().toString() == 'Book()'
assert Book.constructors.size() == 4</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, here is another example using different options for <code>includes</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ToString(includeSuperProperties=true, ignoreNulls=true, includeNames=true, includeFields=true)
@TupleConstructor(force=true, defaults=false, includes='name,year')
@TupleConstructor(force=true, defaults=false, includes='year,fiction')
@TupleConstructor(force=true, defaults=false, includes='name,fiction')
class Book {
    String name
    Integer year
    Boolean fiction
}

assert new Book("Regina", 2015).toString() == 'Book(name:Regina, year:2015)'
assert new Book(2015, false).toString() == 'Book(year:2015, fiction:false)'
assert new Book("Regina", false).toString() == 'Book(name:Regina, fiction:false)'
assert Book.constructors.size() == 3</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-MapConstructor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-MapConstructor"></a><code>@groovy.transform.MapConstructor</code></h7>
<div class="paragraph">
<p>The <code>@MapConstructor</code> annotation aims at eliminating boilerplate code by generating a map constructor for you. A map
constructor is created such that each property in the class is set based on the value in the supplied map
having the key with the name of the property. Usage is as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.*

@ToString
@MapConstructor
class Person {
    String firstName
    String lastName
}

def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p1.toString() == 'Person(Jack, Nicholson)'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated constructor will be roughly like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public Person(Map args) {
    if (args.containsKey('firstName')) {
        this.firstName = args.get('firstName')
    }
    if (args.containsKey('lastName')) {
        this.lastName = args.get('lastName')
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Canonical"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Canonical"></a><code>@groovy.transform.Canonical</code></h7>
<div class="paragraph">
<p>The <code>@Canonical</code> meta-annotation combines the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ToString">@ToString</a>,
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-EqualsAndHashCode">@EqualsAndHashCode</a> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TupleConstructor">@TupleConstructor</a>
annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Canonical

@Canonical
class Person {
    String firstName
    String lastName
}
def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p1.toString() == 'Person(Jack, Nicholson)' // Effect of @ToString

def p2 = new Person('Jack','Nicholson') // Effect of @TupleConstructor
assert p2.toString() == 'Person(Jack, Nicholson)'

assert p1==p2 // Effect of @EqualsAndHashCode
assert p1.hashCode()==p2.hashCode() // Effect of @EqualsAndHashCode</code></pre>
</div>
</div>
<div class="paragraph">
<p>A similar immutable class can be generated using the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Immutable">@Immutable</a> meta-annotation instead.
The <code>@Canonical</code> meta-annotation supports the configuration options found in the annotations
it aggregates. See those annotations for more details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Canonical

@Canonical(excludes=['lastName'])
class Person {
    String firstName
    String lastName
}
def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p1.toString() == 'Person(Jack)' // Effect of @ToString(excludes=['lastName'])

def p2 = new Person('Jack') // Effect of @TupleConstructor(excludes=['lastName'])
assert p2.toString() == 'Person(Jack)'

assert p1==p2 // Effect of @EqualsAndHashCode(excludes=['lastName'])
assert p1.hashCode()==p2.hashCode() // Effect of @EqualsAndHashCode(excludes=['lastName'])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@Canonical</code> meta-annotation can be used in conjunction with an explicit use one or more of its
component annotations, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Canonical

@Canonical(excludes=['lastName'])
class Person {
    String firstName
    String lastName
}
def p1 = new Person(firstName: 'Jack', lastName: 'Nicholson')
assert p1.toString() == 'Person(Jack)' // Effect of @ToString(excludes=['lastName'])

def p2 = new Person('Jack') // Effect of @TupleConstructor(excludes=['lastName'])
assert p2.toString() == 'Person(Jack)'

assert p1==p2 // Effect of @EqualsAndHashCode(excludes=['lastName'])
assert p1.hashCode()==p2.hashCode() // Effect of @EqualsAndHashCode(excludes=['lastName'])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any applicable annotation attributes from <code>@Canonical</code> are passed along to the explicit annotation but
attributes already existing in the explicit annotation take precedence.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-InheritConstructors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-InheritConstructors"></a><code>@groovy.transform.InheritConstructors</code></h7>
<div class="paragraph">
<p>The <code>@InheritConstructor</code> AST transformation aims at generating constructors matching super constructors for you. This
is in particular useful when overriding exception classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.InheritConstructors

@InheritConstructors
class CustomException extends Exception {}

// all those are generated constructors
new CustomException()
new CustomException("A custom message")
new CustomException("A custom message", new RuntimeException())
new CustomException(new RuntimeException())

// Java 7 only
// new CustomException("A custom message", new RuntimeException(), false, true)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@InheritConstructor</code> AST transformation supports the following configuration options:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">constructorAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to carry over annotations from the constructor during copying</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.RUNTIME)
@Target([ElementType.CONSTRUCTOR])
public @interface ConsAnno {}

class Base {
  @ConsAnno Base() {}
}

@InheritConstructors(constructorAnnotations=true)
class Child extends Base {}

assert Child.constructors[0].annotations[0].annotationType().name == 'groovy.transform.Generated'
assert Child.constructors[0].annotations[1].annotationType().name == 'ConsAnno'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameterAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to carry over annotations from the constructor parameters when copying the constructor</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.RUNTIME)
@Target([ElementType.PARAMETER])
public @interface ParamAnno {}

class Base {
  Base(@ParamAnno String name) {}
}

@InheritConstructors(parameterAnnotations=true)
class Child extends Base {}

assert Child.constructors[0].parameterAnnotations[0][0].annotationType().name == 'ParamAnno'</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-Category"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Category"></a><code>@groovy.lang.Category</code></h7>
<div class="paragraph">
<p>The <code>@Category</code> AST transformation simplifies the creation of Groovy categories. Historically, a Groovy category was
written like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TripleCategory {
    public static Integer triple(Integer self) {
        3*self
    }
}
use (TripleCategory) {
    assert 9 == 3.triple()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@Category</code> transformation lets you write the same using an instance-style class, rather than a static class style.
This removes the need for having the first argument of each method being the receiver. The category can be written like
this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Category(Integer)
class TripleCategory {
    public Integer triple() { 3*this }
}
use (TripleCategory) {
    assert 9 == 3.triple()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the mixed in class can be referenced using <code>this</code> instead. It’s also worth noting that using instance fields
in a category class is inherently unsafe: categories are not stateful (like traits).</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-IndexedProperty"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-IndexedProperty"></a><code>@groovy.transform.IndexedProperty</code></h7>
<div class="paragraph">
<p>The <code>@IndexedProperty</code> annotation aims at generating indexed getters/setters for properties of list/array types.
This is in particular useful if you want to use a Groovy class from Java. While Groovy supports GPath to access properties,
this is not available from Java. The <code>@IndexedProperty</code> annotation will generate indexed properties of the following
form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SomeBean {
    @IndexedProperty String[] someArray = new String[2]
    @IndexedProperty List someList = []
}

def bean = new SomeBean()
bean.setSomeArray(0, 'value')
bean.setSomeList(0, 123)

assert bean.someArray[0] == 'value'
assert bean.someList == [123]</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Lazy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Lazy"></a><code>@groovy.lang.Lazy</code></h7>
<div class="paragraph">
<p>The <code>@Lazy</code> AST transformation implements lazy initialization of fields. For example, the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SomeBean {
    @Lazy LinkedList myField
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will produce the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">List $myField
List getMyField() {
    if ($myField!=null) { return $myField }
    else {
        $myField = new LinkedList()
        return $myField
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default value which is used to initialize the field is the default constructor of the declaration type. It is possible
to define a default value by using a closure on the right hand side of the property assignment, as in the following
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class SomeBean {
    @Lazy LinkedList myField = { ['a','b','c']}()
}</pre>
</div>
</div>
<div class="paragraph">
<p>In that case, the generated code looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>List $myField
List getMyField() {
    if ($myField!=null) { return $myField }
    else {
        $myField = { ['a','b','c']}()
        return $myField
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>If the field is declared volatile then initialization will be synchronized using the
<a href="http://en.wikipedia.org/wiki/Double-checked_locking">double-checked locking</a> pattern.</p>
</div>
<div class="paragraph">
<p>Using the <code>soft=true</code> parameter, the helper field will use a <code>SoftReference</code> instead, providing a simple way to
implement caching. In that case, if the garbage collector decides to collect the reference, initialization will occur
the next time the field is accessed.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-Newify"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Newify"></a><code>@groovy.lang.Newify</code></h7>
<div class="paragraph">
<p>The <code>@Newify</code> AST transformation is used to bring alternative syntaxes to construct objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using the <code>Python</code> style:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>@Newify([Tree,Leaf])
class TreeBuilder {
    Tree tree = Tree(Leaf('A'),Leaf('B'),Tree(Leaf('C')))
}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>or using the <code>Ruby</code> style:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>@Newify([Tree,Leaf])
class TreeBuilder {
    Tree tree = Tree.new(Leaf.new('A'),Leaf.new('B'),Tree.new(Leaf.new('C')))
}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Ruby</code> version can be disabled by setting the <code>auto</code> flag to <code>false</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-Sortable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Sortable"></a><code>@groovy.transform.Sortable</code></h7>
<div class="paragraph">
<p>The <code>@Sortable</code> AST transformation is used to help write classes that are <code>Comparable</code> and easily sorted
typically by numerous properties. It is easy to use as shown in the following example where we annotate
the <code>Person</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Sortable

@Sortable class Person {
    String first
    String last
    Integer born
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated class has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it implements the <code>Comparable</code> interface</p>
</li>
<li>
<p>it contains a <code>compareTo</code> method with an implementation based on the natural ordering of the <code>first</code>, <code>last</code> and <code>born</code> properties</p>
</li>
<li>
<p>it has three methods returning comparators: <code>comparatorByFirst</code>, <code>comparatorByLast</code> and <code>comparatorByBorn</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The generated <code>compareTo</code> method will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public int compareTo(java.lang.Object obj) {
    if (this.is(obj)) {
        return 0
    }
    if (!(obj instanceof Person)) {
        return -1
    }
    java.lang.Integer value = this.first &lt;=&gt; obj.first
    if (value != 0) {
        return value
    }
    value = this.last &lt;=&gt; obj.last
    if (value != 0) {
        return value
    }
    value = this.born &lt;=&gt; obj.born
    if (value != 0) {
        return value
    }
    return 0
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As an example of the generated comparators, the <code>comparatorByFirst</code> comparator will have a <code>compare</code> method that looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public int compare(java.lang.Object arg0, java.lang.Object arg1) {
    if (arg0 == arg1) {
        return 0
    }
    if (arg0 != null &amp;&amp; arg1 == null) {
        return -1
    }
    if (arg0 == null &amp;&amp; arg1 != null) {
        return 1
    }
    return arg0.first &lt;=&gt; arg1.first
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Person</code> class can be used wherever a <code>Comparable</code> is expected and the generated comparators
wherever a <code>Comparator</code> is expected as shown by these examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def people = [
    new Person(first: 'Johnny', last: 'Depp', born: 1963),
    new Person(first: 'Keira', last: 'Knightley', born: 1985),
    new Person(first: 'Geoffrey', last: 'Rush', born: 1951),
    new Person(first: 'Orlando', last: 'Bloom', born: 1977)
]

assert people[0] &gt; people[2]
assert people.sort()*.last == ['Rush', 'Depp', 'Knightley', 'Bloom']
assert people.sort(false, Person.comparatorByFirst())*.first == ['Geoffrey', 'Johnny', 'Keira', 'Orlando']
assert people.sort(false, Person.comparatorByLast())*.last == ['Bloom', 'Depp', 'Knightley', 'Rush']
assert people.sort(false, Person.comparatorByBorn())*.last == ['Rush', 'Depp', 'Bloom', 'Knightley']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Normally, all properties are used in the generated <code>compareTo</code> method in the priority order in which they are defined.
You can include or exclude certain properties from the generated <code>compareTo</code> method by giving a list of property names
in the <code>includes</code> or <code>excludes</code> annotation attributes. If using <code>includes</code>, the order of the property names given will
determine the priority of properties when comparing. To illustrate, consider the following <code>Person</code> class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Sortable(includes='first,born') class Person {
    String last
    int born
    String first
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will have two comparator methods <code>comparatorByFirst</code> and <code>comparatorByBorn</code> and the generated <code>compareTo</code> method will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public int compareTo(java.lang.Object obj) {
    if (this.is(obj)) {
        return 0
    }
    if (!(obj instanceof Person)) {
        return -1
    }
    java.lang.Integer value = this.first &lt;=&gt; obj.first
    if (value != 0) {
        return value
    }
    value = this.born &lt;=&gt; obj.born
    if (value != 0) {
        return value
    }
    return 0
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>Person</code> class can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def people = [
    new Person(first: 'Ben', last: 'Affleck', born: 1972),
    new Person(first: 'Ben', last: 'Stiller', born: 1965)
]

assert people.sort()*.last == ['Stiller', 'Affleck']</code></pre>
</div>
</div>
<div class="paragraph">
<p>The behavior of the <code>@Sortable</code> AST transformation can be further changed using the following additional parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should JavaBean properties (ordered after native properties) be used</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.*

@Canonical(includeFields = true)
@Sortable(allProperties = true, includes = 'nameSize')
class Player {
  String name
  int getNameSize() { name.size() }
}

def finalists = [
  new Player('Serena'),
  new Player('Venus'),
  new Player('CoCo'),
  new Player('Mirjana')
]

assert finalists.sort()*.name == ['CoCo', 'Venus', 'Serena', 'Mirjana']</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should properties with "internal" names be used</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.*

@Canonical(allNames = true)
@Sortable(allNames = false)
class Player {
  String $country
  String name
}

def finalists = [
  new Player('USA', 'Serena'),
  new Player('USA', 'Venus'),
  new Player('USA', 'CoCo'),
  new Player('Croatian', 'Mirjana')
]

assert finalists.sort()*.name == ['Mirjana', 'CoCo', 'Serena', 'Venus']</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should super properties also be used (ordered first)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
  String name
}

@Canonical(includeSuperProperties = true)
@Sortable(includeSuperProperties = true)
class Citizen extends Person {
  String country
}

def people = [
  new Citizen('Bob', 'Italy'),
  new Citizen('Cathy', 'Hungary'),
  new Citizen('Cathy', 'Egypt'),
  new Citizen('Bob', 'Germany'),
  new Citizen('Alan', 'France')
]

assert people.sort()*.name == ['Alan', 'Bob', 'Bob', 'Cathy', 'Cathy']
assert people.sort()*.country == ['France', 'Germany', 'Italy', 'Egypt', 'Hungary']</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-Builder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Builder"></a><code>@groovy.transform.builder.Builder</code></h7>
<div class="paragraph">
<p>The <code>@Builder</code> AST transformation is used to help write classes that can be created using <em>fluent</em> api calls.
The transform supports multiple building strategies to cover a range of cases and there are a number
of configuration options to customize the building process. If you’re an AST hacker, you can also define your own
strategy class. The following table lists the available strategies that are bundled with Groovy and the
configuration options each strategy supports.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">builderClassName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">builderMethodName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">buildMethodName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes/excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeSuperProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SimpleStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chained setters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "set"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExternalStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">explicit builder class, class being built untouched</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "build"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default ""</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DefaultStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">creates a nested helper class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <em>&lt;TypeName&gt;</em>Builder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "builder"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "build"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default ""</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>InitializerStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">creates a nested helper class providing type-safe fluent creation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <em>&lt;TypeName&gt;</em>Initializer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "createInitializer"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default "create" but usually only used internally</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default ""</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, default <code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">SimpleStrategy</div>
<p>To use the <code>SimpleStrategy</code>, annotate your Groovy class using the <code>@Builder</code> annotation, and specify the strategy as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*

@Builder(builderStrategy=SimpleStrategy)
class Person {
    String first
    String last
    Integer born
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, just call the setters in a chained fashion as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def p1 = new Person().setFirst('Johnny').setLast('Depp').setBorn(1963)
assert "$p1.first $p1.last" == 'Johnny Depp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For each property, a generated setter will be created which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public Person setFirst(java.lang.String first) {
    this.first = first
    return this
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify a prefix as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*

@Builder(builderStrategy=SimpleStrategy, prefix="")
class Person {
    String first
    String last
    Integer born
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And calling the chained setters would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def p = new Person().first('Johnny').last('Depp').born(1963)
assert "$p.first $p.last" == 'Johnny Depp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the <code>SimpleStrategy</code> in conjunction with <code>@TupleConstructor</code>. If your <code>@Builder</code>
annotation doesn’t have explicit <code>includes</code> or <code>excludes</code> annotation attributes but your <code>@TupleConstructor</code>
annotation does, the ones from <code>@TupleConstructor</code> will be re-used for <code>@Builder</code>. The same applies for any
annotation aliases which combine <code>@TupleConstructor</code> such as <code>@Canonical</code>.</p>
</div>
<div class="paragraph">
<p>The annotation attribute <code>useSetters</code> can be used if you have a setter which you want called as part of the
construction process. See the JavaDoc for details.</p>
</div>
<div class="paragraph">
<p>The annotation attributes <code>builderClassName</code>, <code>buildMethodName</code>, <code>builderMethodName</code>, <code>forClass</code> and <code>includeSuperProperties</code> are not supported for this strategy.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Groovy already has built-in building mechanisms. Don’t rush to using <code>@Builder</code> if the built-in mechanisms meet your needs. Some examples:
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def p2 = new Person(first: 'Keira', last: 'Knightley', born: 1985)
def p3 = new Person().with {
    first = 'Geoffrey'
    last = 'Rush'
    born = 1951
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">ExternalStrategy</div>
<p>To use the <code>ExternalStrategy</code>, create and annotate a Groovy builder class using the <code>@Builder</code> annotation, specify the
class the builder is for using <code>forClass</code> and indicate use of the <code>ExternalStrategy</code>.
Suppose you have the following class you would like a builder for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String first
    String last
    int born
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>you explicitly create and use your builder class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*

@Builder(builderStrategy=ExternalStrategy, forClass=Person)
class PersonBuilder { }

def p = new PersonBuilder().first('Johnny').last('Depp').born(1963).build()
assert "$p.first $p.last" == 'Johnny Depp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the (normally empty) builder class you provide will be filled in with appropriate setters and a build method.
The generated build method will look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public Person build() {
    Person _thePerson = new Person()
    _thePerson.first = first
    _thePerson.last = last
    _thePerson.born = born
    return _thePerson
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class you are creating the builder for can be any Java or Groovy class following the normal JavaBean conventions,
e.g. a no-arg constructor and setters for the properties. Here is an example using a Java class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*

@Builder(builderStrategy=ExternalStrategy, forClass=javax.swing.DefaultButtonModel)
class ButtonModelBuilder {}

def model = new ButtonModelBuilder().enabled(true).pressed(true).armed(true).rollover(true).selected(true).build()
assert model.isArmed()
assert model.isPressed()
assert model.isEnabled()
assert model.isSelected()
assert model.isRollover()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated builder can be customised using the <code>prefix</code>, <code>includes</code>, <code>excludes</code> and <code>buildMethodName</code> annotation attributes.
Here is an example illustrating various customisations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*
import groovy.transform.Canonical

@Canonical
class Person {
    String first
    String last
    int born
}

@Builder(builderStrategy=ExternalStrategy, forClass=Person, includes=['first', 'last'], buildMethodName='create', prefix='with')
class PersonBuilder { }

def p = new PersonBuilder().withFirst('Johnny').withLast('Depp').create()
assert "$p.first $p.last" == 'Johnny Depp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>builderMethodName</code> and <code>builderClassName</code> annotation attributes for <code>@Builder</code> aren’t applicable for this strategy.</p>
</div>
<div class="paragraph">
<p>You can use the <code>ExternalStrategy</code> in conjunction with <code>@TupleConstructor</code>. If your <code>@Builder</code> annotation doesn’t have
explicit <code>includes</code> or <code>excludes</code> annotation attributes but the <code>@TupleConstructor</code> annotation of the class you are creating
the builder for does, the ones from <code>@TupleConstructor</code> will be re-used for <code>@Builder</code>. The same applies for any
annotation aliases which combine <code>@TupleConstructor</code> such as <code>@Canonical</code>.</p>
</div>
<div class="paragraph">
<div class="title">DefaultStrategy</div>
<p>To use the <code>DefaultStrategy</code>, annotate your Groovy class using the <code>@Builder</code> annotation as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.Builder

@Builder
class Person {
    String firstName
    String lastName
    int age
}

def person = Person.builder().firstName("Robert").lastName("Lewandowski").age(21).build()
assert person.firstName == "Robert"
assert person.lastName == "Lewandowski"
assert person.age == 21</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want, you can customize various aspects of the building process
using the <code>builderClassName</code>, <code>buildMethodName</code>, <code>builderMethodName</code>, <code>prefix</code>, <code>includes</code> and <code>excludes</code> annotation attributes,
some of which are used in the example here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.Builder

@Builder(buildMethodName='make', builderMethodName='maker', prefix='with', excludes='age')
class Person {
    String firstName
    String lastName
    int age
}

def p = Person.maker().withFirstName("Robert").withLastName("Lewandowski").make()
assert "$p.firstName $p.lastName" == "Robert Lewandowski"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This strategy also supports annotating static methods and constructors. In this case, the static method or constructor
parameters become the properties to use for building purposes and in the case of static methods, the return type
of the method becomes the target class being built. If you have more than one <code>@Builder</code> annotation used within
a class (at either the class, method or constructor positions) then it is up to you to ensure that the generated
helper classes and factory methods have unique names (i.e. no more than one can use the default name values).
Here is an example highlighting method and constructor usage (and also illustrating the renaming required for unique names).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*
import groovy.transform.*

@ToString
@Builder
class Person {
  String first, last
  int born

  Person(){}

  @Builder(builderClassName='MovieBuilder', builderMethodName='byRoleBuilder')
  Person(String roleName) {
     if (roleName == 'Jack Sparrow') {
         this.first = 'Johnny'; this.last = 'Depp'; this.born = 1963
     }
  }

  @Builder(builderClassName='NameBuilder', builderMethodName='nameBuilder', prefix='having', buildMethodName='fullName')
  static String join(String first, String last) {
      first + ' ' + last
  }

  @Builder(builderClassName='SplitBuilder', builderMethodName='splitBuilder')
  static Person split(String name, int year) {
      def parts = name.split(' ')
      new Person(first: parts[0], last: parts[1], born: year)
  }
}

assert Person.splitBuilder().name("Johnny Depp").year(1963).build().toString() == 'Person(Johnny, Depp, 1963)'
assert Person.byRoleBuilder().roleName("Jack Sparrow").build().toString() == 'Person(Johnny, Depp, 1963)'
assert Person.nameBuilder().havingFirst('Johnny').havingLast('Depp').fullName() == 'Johnny Depp'
assert Person.builder().first("Johnny").last('Depp').born(1963).build().toString() == 'Person(Johnny, Depp, 1963)'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>forClass</code> annotation attribute is not supported for this strategy.</p>
</div>
<div class="paragraph">
<div class="title">InitializerStrategy</div>
<p>To use the <code>InitializerStrategy</code>, annotate your Groovy class using the <code>@Builder</code> annotation, and specify the strategy as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*
import groovy.transform.*

@ToString
@Builder(builderStrategy=InitializerStrategy)
class Person {
    String firstName
    String lastName
    int age
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your class will be locked down to have a single public constructor taking a "fully set" initializer.
It will also have a factory method to create the initializer. These are used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic
def firstLastAge() {
    assert new Person(Person.createInitializer().firstName("John").lastName("Smith").age(21)).toString() == 'Person(John, Smith, 21)'
}
firstLastAge()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any attempt to use the initializer which doesn’t involve setting all the properties (though order is not important) will result in
a compilation error. If you don’t need this level of strictness, you don’t need to use <code>@CompileStatic</code>.</p>
</div>
<div class="paragraph">
<p>You can use the <code>InitializerStrategy</code> in conjunction with <code>@Canonical</code> and <code>@Immutable</code>. If your <code>@Builder</code> annotation
doesn’t have explicit <code>includes</code> or <code>excludes</code> annotation attributes but your <code>@Canonical</code> annotation does, the ones
from <code>@Canonical</code> will be re-used for <code>@Builder</code>. Here is an example using <code>@Builder</code> with <code>@Immutable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.builder.*
import groovy.transform.*
import static groovy.transform.options.Visibility.PRIVATE

@Builder(builderStrategy=InitializerStrategy)
@Immutable
@VisibilityOptions(PRIVATE)
class Person {
    String first
    String last
    int born
}

def publicCons = Person.constructors
assert publicCons.size() == 1

@CompileStatic
def createFirstLastBorn() {
  def p = new Person(Person.createInitializer().first('Johnny').last('Depp').born(1963))
  assert "$p.first $p.last $p.born" == 'Johnny Depp 1963'
}

createFirstLastBorn()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation attribute <code>useSetters</code> can be used if you have a setter which you want called as part of the
construction process. See the JavaDoc for details.</p>
</div>
<div class="paragraph">
<p>This strategy also supports annotating static methods and constructors. In this case, the static method or constructor
parameters become the properties to use for building purposes and in the case of static methods, the return type
of the method becomes the target class being built. If you have more than one <code>@Builder</code> annotation used within
a class (at either the class, method or constructor positions) then it is up to you to ensure that the generated
helper classes and factory methods have unique names (i.e. no more than one can use the default name values).
For an example of method and constructor usage but using the <code>DefaultStrategy</code> strategy, consult that strategy’s
documentation.</p>
</div>
<div class="paragraph">
<p>The annotation attribute <code>forClass</code> is not supported for this strategy.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-AutoImplement"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoImplement"></a><code>@groovy.transform.AutoImplement</code></h7>
<div class="paragraph">
<p>The <code>@AutoImplement</code> AST transformation supplies dummy implementations for any found abstract methods from
superclasses or interfaces. The dummy implementation is the same for all abstract methods found and can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>essentially empty (exactly true for void methods and for methods with a return type, returns the default value for
that type)</p>
</li>
<li>
<p>a statement that throws a specified exception (with optional message)</p>
</li>
<li>
<p>some user supplied code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first example illustrates the default case. Our class is annotated with <code>@AutoImplement</code>,
has a superclass and a single interface as can be seen here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoImplement

@AutoImplement
class MyNames extends AbstractList&lt;String&gt; implements Closeable { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>void close()</code> method from the
<code>Closeable</code> interface is supplied and left empty. Implementations are also supplied
for the three abstract methods from the super class. The <code>get</code>, <code>addAll</code> and <code>size</code> methods
have return types of <code>String</code>, <code>boolean</code> and <code>int</code> respectively with default values
<code>null</code>, <code>false</code> and <code>0</code>. We can use our class (and check the expected return type for one
of the methods) using the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert new MyNames().size() == 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also worthwhile examining the equivalent generated code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyNames implements Closeable extends AbstractList&lt;String&gt; {

    String get(int param0) {
        return null
    }

    boolean addAll(Collection&lt;? extends String&gt; param0) {
        return false
    }

    void close() throws Exception {
    }

    int size() {
        return 0
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second example illustrates the simplest exception case. Our class is annotated with <code>@AutoImplement</code>,
has a superclass and an annotation attribute indicates that an <code>IOException</code> should be thrown if any of
our "dummy" methods are called. Here is the class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@AutoImplement(exception=IOException)
class MyWriter extends Writer { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the class (and check the expected exception is thrown for one
of the methods) using the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import static groovy.test.GroovyAssert.shouldFail

shouldFail(IOException) {
  new MyWriter().flush()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also worthwhile examining the equivalent generated code where three void methods
have been provided all of which throw the supplied exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyWriter extends Writer {

    void flush() throws IOException {
        throw new IOException()
    }

    void write(char[] param0, int param1, int param2) throws IOException {
        throw new IOException()
    }

    void close() throws Exception {
        throw new IOException()
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The third example illustrates the exception case with a supplied message. Our class is annotated with <code>@AutoImplement</code>,
implements an interface, and has annotation attributes to indicate that an <code>UnsupportedOperationException</code> with
<code>Not supported by MyIterator</code> as the message should be thrown for any supplied methods. Here is the class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@AutoImplement(exception=UnsupportedOperationException, message='Not supported by MyIterator')
class MyIterator implements Iterator&lt;String&gt; { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the class (and check the expected exception is thrown and has the correct message
for one of the methods) using the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ex = shouldFail(UnsupportedOperationException) {
     new MyIterator().hasNext()
}
assert ex.message == 'Not supported by MyIterator'</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also worthwhile examining the equivalent generated code where three void methods
have been provided all of which throw the supplied exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyIterator implements Iterator&lt;String&gt; {

    boolean hasNext() {
        throw new UnsupportedOperationException('Not supported by MyIterator')
    }

    String next() {
        throw new UnsupportedOperationException('Not supported by MyIterator')
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The fourth example illustrates the case of user supplied code. Our class is annotated with <code>@AutoImplement</code>,
implements an interface, has an explcitly overriden <code>hasNext</code> method, and has an annotation attribute containing the
supplied code for any supplied methods. Here is the class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@AutoImplement(code = { throw new UnsupportedOperationException('Should never be called but was called on ' + new Date()) })
class EmptyIterator implements Iterator&lt;String&gt; {
    boolean hasNext() { false }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the class (and check the expected exception is thrown and has a message of the expected form)
using the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ex = shouldFail(UnsupportedOperationException) {
     new EmptyIterator().next()
}
assert ex.message.startsWith('Should never be called but was called on ')</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also worthwhile examining the equivalent generated code where the <code>next</code> method has been supplied:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class EmptyIterator implements java.util.Iterator&lt;String&gt; {

    boolean hasNext() {
        false
    }

    String next() {
        throw new UnsupportedOperationException('Should never be called but was called on ' + new Date())
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_class_design_annotations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_class_design_annotations"></a>Class design annotations</h6>
<div class="paragraph">
<p>This category of annotations are aimed at simplifying the implementation of well-known design patterns (delegation,
singleton, …​) by using a declarative style.</p>
</div>
<div class="sect6">
<h7 id="xform-BaseScript"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-BaseScript"></a><code>@groovy.transform.BaseScript</code></h7>
<div class="paragraph">
<p><code>@BaseScript</code> is used within scripts to indicate that the script should
extend fron a custom script base class rather than <code>groovy.lang.Script</code>.
See the documentation for <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#dsl-basescript">domain specific languages</a> for further details.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-Delegate"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Delegate"></a><code>@groovy.lang.Delegate</code></h7>
<div class="paragraph">
<p>The <code>@Delegate</code> AST transformation aims at implementing the delegation design pattern. In the following class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Event {
    @Delegate Date when
    String title
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>when</code> property is annotated with <code>@Delegate</code>, meaning that the <code>Event</code> class will delegate calls to <code>Date</code> methods
to the <code>when</code> property. In this case, the generated code looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Event {
    Date when
    String title
    boolean before(Date other) {
        when.before(other)
    }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can call the <code>before</code> method, for example, directly on the <code>Event</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ev = new Event(title:'Groovy keynote', when: Date.parse('yyyy/MM/dd', '2013/09/10'))
def now = new Date()
assert ev.before(now)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of annotating a property (or field), you can also annotate a method.
In this case, the method can be thought of as a getter or factory method for the delegate.
As an example, here is a class which (rather unusually) has a pool of delegates which are
accessed in a round-robin fashion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Test {
    private int robinCount = 0
    private List&lt;List&gt; items = [[0], [1], [2]]

    @Delegate
    List getRoundRobinList() {
        items[robinCount++ % items.size()]
    }

    void checkItems(List&lt;List&gt; testValue) {
        assert items == testValue
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example usage of that class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def t = new Test()
t &lt;&lt; 'fee'
t &lt;&lt; 'fi'
t &lt;&lt; 'fo'
t &lt;&lt; 'fum'
t.checkItems([[0, 'fee', 'fum'], [1, 'fi'], [2, 'fo']])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using a standard list in this round-robin fashion would violate many expected properties of lists, so
don’t expect the above class to do anything useful beyond this trivial example.</p>
</div>
<div class="paragraph">
<p>The behavior of the <code>@Delegate</code> AST transformation can be changed using the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the interfaces implemented by the field be implemented by the class too</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface Greeter { void sayHello() }
class MyGreeter implements Greeter { void sayHello() { println 'Hello!'} }

class DelegatingGreeter { // no explicit interface
    @Delegate MyGreeter greeter = new MyGreeter()
}
def greeter = new DelegatingGreeter()
assert greeter instanceof Greeter // interface was added transparently</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deprecated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, also delegates methods annotated with @Deprecated</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class WithDeprecation {
    @Deprecated
    void foo() {}
}
class WithoutDeprecation {
    @Deprecated
    void bar() {}
}
class Delegating {
    @Delegate(deprecated=true) WithDeprecation with = new WithDeprecation()
    @Delegate WithoutDeprecation without = new WithoutDeprecation()
}
def d = new Delegating()
d.foo() // passes thanks to deprecated=true
d.bar() // fails because of @Deprecated</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">methodAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to carry over annotations from the methods of the delegate to your delegating method.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class WithAnnotations {
    @Transactional
    void method() {
    }
}
class DelegatingWithoutAnnotations {
    @Delegate WithAnnotations delegate
}
class DelegatingWithAnnotations {
    @Delegate(methodAnnotations = true) WithAnnotations delegate
}
def d1 = new DelegatingWithoutAnnotations()
def d2 = new DelegatingWithAnnotations()
assert d1.class.getDeclaredMethod('method').annotations.length==1
assert d2.class.getDeclaredMethod('method').annotations.length==2</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameterAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to carry over annotations from the method parameters of the delegate to your delegating method.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class WithAnnotations {
    void method(@NotNull String str) {
    }
}
class DelegatingWithoutAnnotations {
    @Delegate WithAnnotations delegate
}
class DelegatingWithAnnotations {
    @Delegate(parameterAnnotations = true) WithAnnotations delegate
}
def d1 = new DelegatingWithoutAnnotations()
def d2 = new DelegatingWithAnnotations()
assert d1.class.getDeclaredMethod('method',String).parameterAnnotations[0].length==0
assert d2.class.getDeclaredMethod('method',String).parameterAnnotations[0].length==1</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of methods to be excluded from delegation. For more fine-grained control, see also <code>excludeTypes</code>.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Worker {
    void task1() {}
    void task2() {}
}
class Delegating {
    @Delegate(excludes=['task2']) Worker worker = new Worker()
}
def d = new Delegating()
d.task1() // passes
d.task2() // fails because method is excluded</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undefined marker array (indicates all methods)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of methods to be included in delegation. For more
fine-grained
control, see also <code>includeTypes</code>.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Worker {
    void task1() {}
    void task2() {}
}
class Delegating {
    @Delegate(includes=['task1']) Worker worker = new Worker()
}
def d = new Delegating()
d.task1() // passes
d.task2() // fails because method is not included</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludeTypes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of interfaces containing method signatures to be excluded from delegation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface AppendStringSelector {
    StringBuilder append(String str)
}
class UpperStringBuilder {
    @Delegate(excludeTypes=AppendStringSelector)
    StringBuilder sb1 = new StringBuilder()

    @Delegate(includeTypes=AppendStringSelector)
    StringBuilder sb2 = new StringBuilder()

    String toString() { sb1.toString() + sb2.toString().toUpperCase() }
}
def usb = new UpperStringBuilder()
usb.append(3.5d)
usb.append('hello')
usb.append(true)
assert usb.toString() == '3.5trueHELLO'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeTypes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undefined marker array (indicates no list be default)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of interfaces containing method signatures to
 be included in delegation</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface AppendBooleanSelector {
    StringBuilder append(boolean b)
}
interface AppendFloatSelector {
    StringBuilder append(float b)
}
class NumberBooleanBuilder {
    @Delegate(includeTypes=AppendBooleanSelector, interfaces=false)
    StringBuilder nums = new StringBuilder()
    @Delegate(includeTypes=[AppendFloatSelector], interfaces=false)
    StringBuilder bools = new StringBuilder()
    String result() { "${nums.toString()} ~ ${bools.toString()}" }
}
def b = new NumberBooleanBuilder()
b.append(true)
b.append(3.14f)
b.append(false)
b.append(0.0f)
assert b.result() == "truefalse ~ 3.140.0"
b.append(3.5d) // would fail because we didn't include append(double)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the delegate pattern be also applied to methods with internal names</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Worker {
    void task$() {}
}
class Delegating {
    @Delegate(allNames=true) Worker worker = new Worker()
}
def d = new Delegating()
d.task$() //passes</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-Immutable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Immutable"></a><code>@groovy.transform.Immutable</code></h7>
<div class="paragraph">
<p>The <code>@Immutable</code> meta-annotation combines the following annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ToString">@ToString</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-EqualsAndHashCode">@EqualsAndHashCode</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TupleConstructor">@TupleConstructor</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-MapConstructor">@MapConstructor</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImmutableBase">@ImmutableBase</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImmutableOptions">@ImmutableOptions</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-PropertyOptions">@PropertyOptions</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-KnownImmutable">@KnownImmutable</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>@Immutable</code> meta-annotation simplifies the creation of immutable classes. Immutable classes are useful
since they are often easier to reason about and are inherently thread-safe.
See <a href="http://www.informit.com/store/effective-java-9780134685991">Effective Java, Minimize Mutability</a> for all the details
about how to achieve immutable classes in Java. The <code>@Immutable</code> meta-annotation does most of the things described
in <em>Effective Java</em> for you automatically.
To use the meta-annotation, all you have to do is annotate the class like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Immutable

@Immutable
class Point {
    int x
    int y
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One of the requirements for immutable classes is that there is no way to modify any state information within the class.
One requirement to achieve this is to use immutable classes for each property or alternatively perform special coding
such as defensive copy in and defensive copy out for any mutable properties within the constructors
and property getters. Between <code>@ImmutableBase</code>, <code>@MapConstructor</code> and <code>@TupleConstructor</code> properties
are either identified as immutable or the special coding for numerous known cases is handled automatically.
Various mechanisms are provided for you to extend the handled property types which are allowed. See
<code>@ImmutableOptions</code> and <code>@KnownImmutable</code> for details.</p>
</div>
<div class="paragraph">
<p>The results of applying <code>@Immutable</code> to a class are pretty similar to those of
applying the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Canonical">@Canonical</a> meta-annotation but the generated class will have extra
logic to handle immutability. You will observe this by, for instance, trying to modify a property
which will result in a <code>ReadOnlyPropertyException</code> being thrown since the backing field for the property
will have been automatically made final.</p>
</div>
<div class="paragraph">
<p>The <code>@Immutable</code> meta-annotation supports the configuration options found in the annotations
it aggregates. See those annotations for more details.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-ImmutableBase"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImmutableBase"></a><code>@groovy.transform.ImmutableBase</code></h7>
<div class="paragraph">
<p>Immutable classes generated with <code>@ImmutableBase</code> are automatically made final. Also, the type of each property is checked
and various checks are made on the class, for example, public instance fields currently aren’t allowed. It also generates
a <code>copyWith</code> constructor if desired.</p>
</div>
<div class="paragraph">
<p>The following annotation attribute is supported:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">copyWith</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean whether to generate a <code>copyWith( Map )</code> method.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Immutable

@Immutable( copyWith=true )
class User {
    String  name
    Integer age
}

def bob   = new User( 'bob', 43 )
def alice = bob.copyWith( name:'alice' )
assert alice.name == 'alice'
assert alice.age  == 43</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-PropertyOptions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-PropertyOptions"></a><code>@groovy.transform.PropertyOptions</code></h7>
<div class="paragraph">
<p>This annotation allows you to specify a custom property handler to be used by transformations
during class construction. It is ignored by the main Groovy compiler but is referenced by other transformations
like <code>@TupleConstructor</code>, <code>@MapConstructor</code>, and <code>@ImmutableBase</code>. It is frequently used behind the
scenes by the <code>@Immutable</code> meta-annotation.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-VisibilityOptions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-VisibilityOptions"></a><code>@groovy.transform.VisibilityOptions</code></h7>
<div class="paragraph">
<p>This annotation allows you to specify a custom visibility for a construct generated by another transformation.
It is ignored by the main Groovy compiler but is referenced by other transformations
like <code>@TupleConstructor</code>, <code>@MapConstructor</code>, and <code>@NamedVariant</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-ImumtableOptions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ImumtableOptions"></a><code>@groovy.transform.ImmutableOptions</code></h7>
<div class="paragraph">
<p>Groovy’s immutability support relies on a predefined list of known immutable classes (like <code>java.net.URI</code> or <code>java.lang.String</code>
and fails if you use a type which is not in that list, you are allowed to add to the list of known immutable types
thanks to the following annotation attributes of the <code>@ImmutableOptions</code> annotation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knownImmutableClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of classes which are deemed immutable.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Immutable
import groovy.transform.TupleConstructor

@TupleConstructor
final class Point {
    final int x
    final int y
    public String toString() { "($x,$y)" }
}

@Immutable(knownImmutableClasses=[Point])
class Triangle {
    Point a,b,c
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knownImmutables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of property names which are deemed immutable.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Immutable
import groovy.transform.TupleConstructor

@TupleConstructor
final class Point {
    final int x
    final int y
    public String toString() { "($x,$y)" }
}

@Immutable(knownImmutables=['a','b','c'])
class Triangle {
    Point a,b,c
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you deem a type as immutable and it isn’t one of the ones automatically handled, then it is up to you
to correctly code that class to ensure immutability.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-KnownImmutable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-KnownImmutable"></a><code>@groovy.transform.KnownImmutable</code></h7>
<div class="paragraph">
<p>The <code>@KnownImmutable</code> annotation isn’t actually one that triggers any AST transformations. It is simply
a marker annotation. You can annotate your classes with the annotation (including Java classes) and they
will be recognized as acceptable types for members within an immutable class. This saves you having to
explicitly use the <code>knownImmutables</code> or <code>knownImmutableClasses</code> annotation attributes from <code>@ImmutableOptions</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-Memoized"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Memoized"></a><code>@groovy.transform.Memoized</code></h7>
<div class="paragraph">
<p>The <code>@Memoized</code> AST transformations simplifies the implementation of caching by allowing the result of method calls
to be cached just by annotating the method with <code>@Memoized</code>. Let’s imagine the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">long longComputation(int seed) {
    // slow computation
    Thread.sleep(100*seed)
    System.nanoTime()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This emulates a long computation, based on the actual parameters of the method. Without <code>@Memoized</code>, each method call
would take several seconds plus it would return a random result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def x = longComputation(1)
def y = longComputation(1)
assert x!=y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding <code>@Memoized</code> changes the semantics of the method by adding caching, based on the parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Memoized
long longComputation(int seed) {
    // slow computation
    Thread.sleep(100*seed)
    System.nanoTime()
}

def x = longComputation(1) // returns after 100 milliseconds
def y = longComputation(1) // returns immediatly
def z = longComputation(2) // returns after 200 milliseconds
assert x==y
assert x!=z</code></pre>
</div>
</div>
<div class="paragraph">
<p>The size of the cache can be configured using two optional parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>protectedCacheSize</em>: the number of results which are guaranteed not to be cleared after garbage collection</p>
</li>
<li>
<p><em>maxCacheSize</em>: the maximum number of results that can be kept in memory</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the size of the cache is unlimited and no cache result is protected from garbage collection. Setting a
<em>protectedCacheSize&gt;0</em> would create an unlimited cache with some results protected. Setting <em>maxCacheSize&gt;0</em> would
 create a limited cache but without any protection from garbage protection. Setting both would create a limited,
 protected cache.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-TailRecursive"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TailRecursive"></a><code>@groovy.transform.TailRecursive</code></h7>
<div class="paragraph">
<p>The <code>@TailRecursive</code> annotation can be used to automatically transform a recursive call at the end of a method
into an equivalent iterative version of the same code. This avoids stack overflow due to too many recursive calls.
Below is an example of use when calculating factorial:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.CompileStatic
import groovy.transform.TailRecursive

@CompileStatic
class Factorial {

    @TailRecursive
    static BigInteger factorial( BigInteger i, BigInteger product = 1) {
        if( i == 1) {
            return product
        }
        return factorial(i-1, product*i)
    }
}

assert Factorial.factorial(1) == 1
assert Factorial.factorial(3) == 6
assert Factorial.factorial(5) == 120
assert Factorial.factorial(50000).toString().size() == 213237 // Big number and no Stack Overflow</code></pre>
</div>
</div>
<div class="paragraph">
<p>Currently, the annotation will only work for self-recursive method calls, i.e. a single recursive call to the exact same method again.
Consider using Closures and <code>trampoline()</code> if you have a scenario involving simple mutual recursion.
Also note that only non-void methods are currently handled (void calls will result in a compilation error).</p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Currently, some forms of method overloading can trick the compiler,
and some non-tail recursive calls are erroneously treated as tail recursive.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="xform-Singleton"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Singleton"></a><code>@groovy.lang.Singleton</code></h7>
<div class="paragraph">
<p>The <code>@Singleton</code> annotation can be used to implement the singleton design pattern on a class. The singleton instance
is defined eagerly by default, using class initialization, or lazily, in which case the field is initialized using
double checked locking.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Singleton
class GreetingService {
    String greeting(String name) { "Hello, $name!" }
}
assert GreetingService.instance.greeting('Bob') == 'Hello, Bob!'</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the singleton is created eagerly when the class is initialized and available through the <code>instance</code> property.
It is possible to change the name of the singleton using the <code>property</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Singleton(property='theOne')
class GreetingService {
    String greeting(String name) { "Hello, $name!" }
}

assert GreetingService.theOne.greeting('Bob') == 'Hello, Bob!'</code></pre>
</div>
</div>
<div class="paragraph">
<p>And it is also possible to make initialization lazy using the <code>lazy</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Collaborator {
    public static boolean init = false
}
@Singleton(lazy=true,strict=false)
class GreetingService {
    static void init() {}
    GreetingService() {
        Collaborator.init = true
    }
    String greeting(String name) { "Hello, $name!" }
}
GreetingService.init() // make sure class is initialized
assert Collaborator.init == false
GreetingService.instance
assert Collaborator.init == true
assert GreetingService.instance.greeting('Bob') == 'Hello, Bob!'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we also set the <code>strict</code> parameter to false, which allows us to define our own constructor.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-Mixin"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Mixin"></a><code>@groovy.lang.Mixin</code></h7>
<div class="paragraph">
<p>Deprecated. Consider using traits instead.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_logging_improvements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_logging_improvements"></a>Logging improvements</h6>
<div class="paragraph">
<p>Groovy provides AST transformation that helps integrating with the most widely used logging frameworks. It’s worth noting
that annotating a class with one of those annotations doesn’t prevent you from adding the appropriate logging framework
on classpath.</p>
</div>
<div class="paragraph">
<p>All transformations work in a similar way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add static final <code>log</code> field corresponding to the logger</p>
</li>
<li>
<p>wrap all calls to <code>log.level()</code> into the appropriate <code>log.isLevelEnabled</code> guard, depending on the underlying framework</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those transformations support two parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>value</code> (default <code>log</code>) corresponds to the name of the logger field</p>
</li>
<li>
<p><code>category</code> (defaults to the class name) is the name of the logger category</p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="xform-Log"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log"></a><code>@groovy.util.logging.Log</code></h7>
<div class="paragraph">
<p>The first logging AST transformation available is the <code>@Log</code> annotation which relies on the JDK logging framework. Writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.util.logging.Log
class Greeter {
    void greet() {
        log.info 'Called greeter'
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.util.logging.Level
import java.util.logging.Logger

class Greeter {
    private static final Logger log = Logger.getLogger(Greeter.name)
    void greet() {
        if (log.isLoggable(Level.INFO)) {
            log.info 'Called greeter'
        }
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Commons"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Commons"></a><code>@groovy.util.logging.Commons</code></h7>
<div class="paragraph">
<p>Groovy supports the <a href="http://commons.apache.org/proper/commons-logging/">Apache Commons Logging</a> framework using to the
<code>@Commons</code> annotation. Writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.util.logging.Commons
class Greeter {
    void greet() {
        log.debug 'Called greeter'
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.apache.commons.logging.LogFactory
import org.apache.commons.logging.Log

class Greeter {
    private static final Log log = LogFactory.getLog(Greeter)
    void greet() {
        if (log.isDebugEnabled()) {
            log.debug 'Called greeter'
        }
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Log4j"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log4j"></a><code>@groovy.util.logging.Log4j</code></h7>
<div class="paragraph">
<p>Groovy supports the <a href="http://logging.apache.org/log4j/1.2/">Apache Log4j 1.x</a> framework using to the
<code>@Log4j</code> annotation. Writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.util.logging.Log4j
class Greeter {
    void greet() {
        log.debug 'Called greeter'
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.apache.log4j.Logger

class Greeter {
    private static final Logger log = Logger.getLogger(Greeter)
    void greet() {
        if (log.isDebugEnabled()) {
            log.debug 'Called greeter'
        }
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Log4j2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Log4j2"></a><code>@groovy.util.logging.Log4j2</code></h7>
<div class="paragraph">
<p>Groovy supports the <a href="http://logging.apache.org/log4j/2.x/">Apache Log4j 2.x</a> framework using to the
<code>@Log4j2</code> annotation. Writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.util.logging.Log4j2
class Greeter {
    void greet() {
        log.debug 'Called greeter'
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.apache.logging.log4j.LogManager
import org.apache.logging.log4j.Logger

class Greeter {
    private static final Logger log = LogManager.getLogger(Greeter)
    void greet() {
        if (log.isDebugEnabled()) {
            log.debug 'Called greeter'
        }
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-Slf4j"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Slf4j"></a><code>@groovy.util.logging.Slf4j</code></h7>
<div class="paragraph">
<p>Groovy supports the <a href="http://www.slf4j.org/">Simple Logging Facade for Java (SLF4J)</a> framework using to the
<code>@Slf4j</code> annotation. Writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.util.logging.Slf4j
class Greeter {
    void greet() {
        log.debug 'Called greeter'
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.slf4j.LoggerFactory
import org.slf4j.Logger

class Greeter {
    private static final Logger log = LoggerFactory.getLogger(Greeter)
    void greet() {
        if (log.isDebugEnabled()) {
            log.debug 'Called greeter'
        }
        println 'Hello, world!'
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_declarative_concurrency"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declarative_concurrency"></a>Declarative concurrency</h6>
<div class="paragraph">
<p>The Groovy language provides a set of annotations aimed at simplifying common concurrency patterns in a declarative
approach.</p>
</div>
<div class="sect6">
<h7 id="xform-Synchronized"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Synchronized"></a><code>@groovy.transform.Synchronized</code></h7>
<div class="paragraph">
<p>The <code>@Synchronized</code> AST transformations works in a similar way to the <code>synchronized</code> keyword but locks on different
objects for safer concurrency. It can be applied on any method or static method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Synchronized

import java.util.concurrent.Executors
import java.util.concurrent.TimeUnit

class Counter {
    int cpt
    @Synchronized
    int incrementAndGet() {
        cpt++
    }
    int get() {
        cpt
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Writing this is equivalent to creating a lock object and wrapping the whole method into a synchronized block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Counter {
    int cpt
    private final Object $lock = new Object()

    int incrementAndGet() {
        synchronized($lock) {
            cpt++
        }
    }
    int get() {
        cpt
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, <code>@Synchronized</code> creates a field named <code>$lock</code> (or <code>$LOCK</code> for a static method) but you can make it use any
field you want by specifying the value attribute, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Synchronized

import java.util.concurrent.Executors
import java.util.concurrent.TimeUnit

class Counter {
    int cpt
    private final Object myLock = new Object()

    @Synchronized('myLock')
    int incrementAndGet() {
        cpt++
    }
    int get() {
        cpt
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-WithReadLock"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-WithReadLock"></a><code>@groovy.transform.WithReadLock</code> and <code>@groovy.transform.WithWriteLock</code></h7>
<div class="paragraph">
<p>The <code>@WithReadLock</code> AST transformation works in conjunction with the <code>@WithWriteLock</code> transformation
to provide read/write synchronization using the <code>ReentrantReadWriteLock</code> facility that the JDK provides. The annotation
can be added to a method or a static method. It will transparently create a <code>$reentrantLock</code> final field (or
<code>$REENTRANTLOCK</code> for a static method) and proper synchronization code will be added. For example, the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.WithReadLock
import groovy.transform.WithWriteLock

class Counters {
    public final Map&lt;String,Integer&gt; map = [:].withDefault { 0 }

    @WithReadLock
    int get(String id) {
        map.get(id)
    }

    @WithWriteLock
    void add(String id, int num) {
        Thread.sleep(200) // emulate long computation
        map.put(id, map.get(id)+num)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.WithReadLock as WithReadLock
import groovy.transform.WithWriteLock as WithWriteLock

public class Counters {

    private final Map&lt;String, Integer&gt; map
    private final java.util.concurrent.locks.ReentrantReadWriteLock $reentrantlock

    public int get(java.lang.String id) {
        $reentrantlock.readLock().lock()
        try {
            map.get(id)
        }
        finally {
            $reentrantlock.readLock().unlock()
        }
    }

    public void add(java.lang.String id, int num) {
        $reentrantlock.writeLock().lock()
        try {
            java.lang.Thread.sleep(200)
            map.put(id, map.get(id) + num )
        }
        finally {
            $reentrantlock.writeLock().unlock()
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>@WithReadLock</code> and <code>@WithWriteLock</code> support specifying an alternative lock object. In that case, the referenced
 field must be declared by the user, like in the following alternative:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.WithReadLock
import groovy.transform.WithWriteLock

import java.util.concurrent.locks.ReentrantReadWriteLock

class Counters {
    public final Map&lt;String,Integer&gt; map = [:].withDefault { 0 }
    private final ReentrantReadWriteLock customLock = new ReentrantReadWriteLock()

    @WithReadLock('customLock')
    int get(String id) {
        map.get(id)
    }

    @WithWriteLock('customLock')
    void add(String id, int num) {
        Thread.sleep(200) // emulate long computation
        map.put(id, map.get(id)+num)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For details</p>
</div>
<div class="ulist">
<ul>
<li>
<p>See Javadoc for <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/WithReadLock.html">groovy.transform.WithReadLock</a></p>
</li>
<li>
<p>See Javadoc for <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/WithWriteLock.html">groovy.transform.WithWriteLock</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_easier_cloning_and_externalizing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_easier_cloning_and_externalizing"></a>Easier cloning and externalizing</h6>
<div class="paragraph">
<p>Groovy provides two annotations aimed at facilitating the implementation of <code>Cloneable</code> and <code>Externalizable</code> interfaces,
respectively named <code>@AutoClone</code> and <code>@AutoExternalize</code>.</p>
</div>
<div class="sect6">
<h7 id="xform-AutoClone"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoClone"></a><code>@groovy.transform.AutoClone</code></h7>
<div class="paragraph">
<p>The <code>@AutoClone</code> annotation is aimed at implementing the <code>@java.lang.Cloneable</code> interface using various strategies, thanks to the <code>style</code> parameter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the default <code>AutoCloneStyle.CLONE</code> strategy calls <code>super.clone()</code> first then <code>clone()</code> on each cloneable property</p>
</li>
<li>
<p>the <code>AutoCloneStyle.SIMPLE</code> strategy uses a regular constructor call and copies properties from the source to the clone</p>
</li>
<li>
<p>the <code>AutoCloneStyle.COPY_CONSTRUCTOR</code> strategy creates and uses a copy constructor</p>
</li>
<li>
<p>the <code>AutoCloneStyle.SERIALIZATION</code> strategy uses serialization (or externalization) to clone the object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of those strategies have pros and cons which are discussed in the Javadoc for <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/AutoClone.html">groovy.transform.AutoClone</a> and <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/AutoCloneStyle.html">groovy.transform.AutoCloneStyle</a> .</p>
</div>
<div class="paragraph">
<p>For example, the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoClone

@AutoClone
class Book {
    String isbn
    String title
    List&lt;String&gt; authors
    Date publicationDate
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book implements Cloneable {
    String isbn
    String title
    List&lt;String&gt; authors
    Date publicationDate

    public Book clone() throws CloneNotSupportedException {
        Book result = super.clone()
        result.authors = authors instanceof Cloneable ? (List) authors.clone() : authors
        result.publicationDate = publicationDate.clone()
        result
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the String properties aren’t explicitly handled because Strings are immutable and the <code>clone()</code> method from <code>Object</code> will copy the String references. The same would apply to primitive fields and most of the concrete subclasses of <code>java.lang.Number</code>.</p>
</div>
<div class="paragraph">
<p>In addition to cloning styles, <code>@AutoClone</code> supports multiple options:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of property or field names that need to be excluded from cloning. A string consisting of a comma-separated field/property names is also allowed.
See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/AutoClone.html#excludes">groovy.transform.AutoClone#excludes</a> for details</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoClone
import groovy.transform.AutoCloneStyle

@AutoClone(style=AutoCloneStyle.SIMPLE,excludes='authors')
class Book {
    String isbn
    String title
    List authors
    Date publicationDate
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, only properties are cloned. Setting this flag to true will also clone fields.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoClone
import groovy.transform.AutoCloneStyle

@AutoClone(style=AutoCloneStyle.SIMPLE,includeFields=true)
class Book {
    String isbn
    String title
    List authors
    protected Date publicationDate
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-AutoExternalize"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoExternalize"></a><code>@groovy.transform.AutoExternalize</code></h7>
<div class="paragraph">
<p>The <code>@AutoExternalize</code> AST transformation will assist in the creation of <code>java.io.Externalizable</code> classes. It will
automatically add the interface to the class and generate the <code>writeExternal</code> and <code>readExternal</code> methods. For example, this
code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoExternalize

@AutoExternalize
class Book {
    String isbn
    String title
    float price
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be converted into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book implements java.io.Externalizable {
    String isbn
    String title
    float price

    void writeExternal(ObjectOutput out) throws IOException {
        out.writeObject(isbn)
        out.writeObject(title)
        out.writeFloat( price )
    }

    public void readExternal(ObjectInput oin) {
        isbn = (String) oin.readObject()
        title = (String) oin.readObject()
        price = oin.readFloat()
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@AutoExternalize</code> annotation supports two parameters which will let you slightly customize its behavior:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of property or field names that need to be excluded from externalizing. A string consisting of a comma-separated field/property names is also allowed.
See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/AutoExternalize.html#excludes">groovy.transform.AutoExternalize#excludes</a> for details</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoExternalize

@AutoExternalize(excludes='price')
class Book {
    String isbn
    String title
    float price
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, only properties are externalized. Setting this flag to true will also clone fields.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoExternalize

@AutoExternalize(includeFields=true)
class Book {
    String isbn
    String title
    protected float price
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_safer_scripting"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_safer_scripting"></a>Safer scripting</h6>
<div class="paragraph">
<p>The Groovy language makes it easy to execute user scripts at runtime (for example using <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/GroovyShell.html">groovy.lang.GroovyShell</a>),
but how do you make sure that a script won’t eat all CPU (infinite loops) or that concurrent scripts won’t slowly consume
all available threads of a thread pool? Groovy provides several annotations which are aimed towards safer scripting,
generating code which will for example allow you to interrupt execution automatically.</p>
</div>
<div class="sect6">
<h7 id="xform-ThreadInterrupt"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ThreadInterrupt"></a><code>@groovy.transform.ThreadInterrupt</code></h7>
<div class="paragraph">
<p>One complicated situation in the JVM world is when a thread can’t be stopped. The <code>Thread#stop</code> method exists but is
deprecated (and isn’t reliable) so your only chance relies in <code>Thread#interrupt</code>. Calling the latter will set the
<code>interrupt</code> flag on the thread, but it will <strong>not</strong> stop the execution of the thread. This is problematic because it’s the
responsibility of the code executing in the thread to check the interrupt flag and properly exit. This makes sense when
you, as a developer, know that the code you are executing is meant to be run in an independent thread, but in general,
you don’t know it. It’s even worse with user scripts, who might not even know what a thread is (think of DSLs).</p>
</div>
<div class="paragraph">
<p><code>@ThreadInterrupt</code> simplifies this by adding thread interruption checks at critical places in the code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>loops (for, while)</p>
</li>
<li>
<p>first instruction of a method</p>
</li>
<li>
<p>first instruction of a closure body</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s imagine the following user script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">while (true) {
    i++
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is an obvious infinite loop. If this code executes in its own thread, interrupting wouldn’t help: if you <code>join</code> on
the thread, then the calling code would be able to continue, but the thread would still be alive, running in background
without any ability for you to stop it, slowly causing thread starvation.</p>
</div>
<div class="paragraph">
<p>One possibility to work around this is to set up your shell this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def config = new CompilerConfiguration()
config.addCompilationCustomizers(
        new ASTTransformationCustomizer(ThreadInterrupt)
)
def binding = new Binding(i:0)
def shell = new GroovyShell(binding,config)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The shell is then configured to automatically apply the <code>@ThreadInterrupt</code> AST transformations on all scripts. This allows
you to execute user scripts this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def t = Thread.start {
    shell.evaluate(userCode)
}
t.join(1000) // give at most 1000ms for the script to complete
if (t.alive) {
    t.interrupt()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The transformation automatically modified user code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">while (true) {
    if (Thread.currentThread().interrupted) {
        throw new InterruptedException('The current thread has been interrupted.')
    }
    i++
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The check which is introduced inside the loop guarantees that if the <code>interrupt</code> flag is set on the current thread, an
exception will be thrown, interrupting the execution of the thread.</p>
</div>
<div class="paragraph">
<p><code>@ThreadInterrupt</code> supports multiple options that will let you further customize the behavior of the transformation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">thrown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.InterruptedException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of exception which is thrown if the thread is interrupted.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class BadException extends Exception {
    BadException(String message) { super(message) }
}

def config = new CompilerConfiguration()
config.addCompilationCustomizers(
        new ASTTransformationCustomizer(thrown:BadException, ThreadInterrupt)
)
def binding = new Binding(i:0)
def shell = new GroovyShell(this.class.classLoader,binding,config)

def userCode = """
try {
    while (true) {
        i++
    }
} catch (BadException e) {
    i = -1
}
"""

def t = Thread.start {
    shell.evaluate(userCode)
}
t.join(1000) // give at most 1s for the script to complete
assert binding.i &gt; 0
if (t.alive) {
    t.interrupt()
}
Thread.sleep(500)
assert binding.i == -1'''</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOnMethodStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should an interruption check be inserted at the beginning of each method body. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ThreadInterrupt.html">groovy.transform.ThreadInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ThreadInterrupt(checkOnMethodStart=false)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all classes of the same source unit (in the same source file). See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ThreadInterrupt.html">groovy.transform.ThreadInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ThreadInterrupt(applyToAllClasses=false)
class A { ... } // interrupt checks added
class B { ... } // no interrupt checks</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllMembers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all members of class. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ThreadInterrupt.html">groovy.transform.ThreadInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class A {
    @ThreadInterrupt(applyToAllMembers=false)
    void method1() { ... } // interrupt checked added
    void method2() { ... } // no interrupt checks
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-TimedInterrupt"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TimedInterrupt"></a><code>@groovy.transform.TimedInterrupt</code></h7>
<div class="paragraph">
<p>The <code>@TimedInterrupt</code> AST transformation tries to solve a slightly different problem from <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ThreadInterrupt"><code>@groovy.transform.ThreadInterrupt</code></a>: instead of checking the <code>interrupt</code> flag of the thread, it will automatically
throw an exception if the thread has been running for too long.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This annotation does <strong>not</strong> spawn a monitoring thread. Instead, it works in a similar manner as <code>@ThreadInterrupt</code> by placing checks at appropriate places in the code. This means that if you
have a thread blocked by I/O, it will <strong>not</strong> be interrupted.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Imagine the following user code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def fib(int n) { n&lt;2?n:fib(n-1)+fib(n-2) }

result = fib(600)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation of the famous Fibonacci number computation here is far from optimized. If it is called with a high <code>n</code> value, it can take minutes to answer. With <code>@TimedInterrupt</code>, you can
choose how long a script is allowed to run. The following setup code will allow the user script to run for 1 second at max:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def config = new CompilerConfiguration()
config.addCompilationCustomizers(
        new ASTTransformationCustomizer(value:1, TimedInterrupt)
)
def binding = new Binding(result:0)
def shell = new GroovyShell(this.class.classLoader, binding,config)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code is equivalent to annotating a class with <code>@TimedInterrupt</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(value=1, unit=TimeUnit.SECONDS)
class MyClass {
    def fib(int n) {
        n&lt;2?n:fib(n-1)+fib(n-2)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@TimedInterrupt</code> supports multiple options that will let you further customize the behavior of the transformation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long.MAX_VALUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used in combination with <code>unit</code> to specify after how long execution times out.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(value=500L, unit= TimeUnit.MILLISECONDS, applyToAllClasses = false)
class Slow {
    def fib(n) { n&lt;2?n:fib(n-1)+fib(n-2) }
}
def result
def t = Thread.start {
    result = new Slow().fib(500)
}
t.join(5000)
assert result == null
assert !t.alive</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.SECONDS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used in combination with <code>value</code> to specify after how long execution times out.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(value=500L, unit= TimeUnit.MILLISECONDS, applyToAllClasses = false)
class Slow {
    def fib(n) { n&lt;2?n:fib(n-1)+fib(n-2) }
}
def result
def t = Thread.start {
    result = new Slow().fib(500)
}
t.join(5000)
assert result == null
assert !t.alive</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">thrown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.concurrent.TimeoutException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of exception which is thrown if timeout is reached.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(thrown=TooLongException, applyToAllClasses = false, value=1L)
class Slow {
    def fib(n) { Thread.sleep(100); n&lt;2?n:fib(n-1)+fib(n-2) }
}
def result
def t = Thread.start {
    try {
        result = new Slow().fib(50)
    } catch (TooLongException e) {
        result = -1
    }
}
t.join(5000)
assert result == -1</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOnMethodStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should an interruption check be inserted at the beginning of each method body. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/TimedInterrupt.html">groovy.transform.TimedInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(checkOnMethodStart=false)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all classes of the same source unit (in the same source file). See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/TimedInterrupt.html">groovy.transform.TimedInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TimedInterrupt(applyToAllClasses=false)
class A { ... } // interrupt checks added
class B { ... } // no interrupt checks</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllMembers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all members of class. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/TimedInterrupt.html">groovy.transform.TimedInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class A {
    @TimedInterrupt(applyToAllMembers=false)
    void method1() { ... } // interrupt checked added
    void method2() { ... } // no interrupt checks
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>@TimedInterrupt</code> is currently not compatible with static methods!
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="xform-ConditionalInterrupt"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ConditionalInterrupt"></a><code>@groovy.transform.ConditionalInterrupt</code></h7>
<div class="paragraph">
<p>The last annotation for safer scripting is the base annotation when you want to interrupt a script using a custom strategy. In particular, this is the annotation of choice if you
want to use resource management (limit the number of calls to an API, …​). In the following example, user code is using an infinite loop, but <code>@ConditionalInterrupt</code> will allow us
to check a quota manager and interrupt automatically the script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ConditionalInterrupt({Quotas.disallow('user')})
class UserCode {
    void doSomething() {
        int i=0
        while (true) {
            println "Consuming resources ${++i}"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The quota checking is very basic here, but it can be any code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Quotas {
    static def quotas = [:].withDefault { 10 }
    static boolean disallow(String userName) {
        println "Checking quota for $userName"
        (quotas[userName]--)&lt;0
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can make sure <code>@ConditionalInterrupt</code> works properly using this test code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert Quotas.quotas['user'] == 10
def t = Thread.start {
    new UserCode().doSomething()
}
t.join(5000)
assert !t.alive
assert Quotas.quotas['user'] &lt; 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, in practice, it is unlikely that <code>@ConditionalInterrupt</code> will be itself added by hand on user code. It can be injected in a similar manner as the example shown in the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ThreadInterrupt">ThreadInterrupt</a> section, using the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/customizers/ASTTransformationCustomizer.html">org.codehaus.groovy.control.customizers.ASTTransformationCustomizer</a> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def config = new CompilerConfiguration()
def checkExpression = new ClosureExpression(
        Parameter.EMPTY_ARRAY,
        new ExpressionStatement(
                new MethodCallExpression(new ClassExpression(ClassHelper.make(Quotas)), 'disallow', new ConstantExpression('user'))
        )
)
config.addCompilationCustomizers(
        new ASTTransformationCustomizer(value: checkExpression, ConditionalInterrupt)
)

def shell = new GroovyShell(this.class.classLoader,new Binding(),config)

def userCode = """
        int i=0
        while (true) {
            println "Consuming resources \\${++i}"
        }
"""

assert Quotas.quotas['user'] == 10
def t = Thread.start {
    shell.evaluate(userCode)
}
t.join(5000)
assert !t.alive
assert Quotas.quotas['user'] &lt; 0</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@ConditionalInterrupt</code> supports multiple options that will let you further customize the behavior of the transformation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The closure which will be called to check if execution is allowed. If the closure returns false, execution is allowed. If it returns true, then an exception will be thrown.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ConditionalInterrupt({ ... })</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">thrown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.InterruptedException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of exception which is thrown if execution should be aborted.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">config.addCompilationCustomizers(
        new ASTTransformationCustomizer(thrown: QuotaExceededException,value: checkExpression, ConditionalInterrupt)
)
assert Quotas.quotas['user'] == 10
def t = Thread.start {
    try {
        shell.evaluate(userCode)
    } catch (QuotaExceededException) {
        Quotas.quotas['user'] = 'Quota exceeded'
    }
}
t.join(5000)
assert !t.alive
assert Quotas.quotas['user'] == 'Quota exceeded'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOnMethodStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should an interruption check be inserted at the beginning of each method body. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ConditionalInterrupt.html">groovy.transform.ConditionalInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ConditionalInterrupt(checkOnMethodStart=false)</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all classes of the same source unit (in the same source file). See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ConditionalInterrupt.html">groovy.transform.ConditionalInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@ConditionalInterrupt(applyToAllClasses=false)
class A { ... } // interrupt checks added
class B { ... } // no interrupt checks</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applyToAllMembers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should the transformation be applied on all members of class. See <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/ConditionalInterrupt.html">groovy.transform.ConditionalInterrupt</a> for details.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class A {
    @ConditionalInterrupt(applyToAllMembers=false)
    void method1() { ... } // interrupt checked added
    void method2() { ... } // no interrupt checks
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_compiler_directives"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compiler_directives"></a>Compiler directives</h6>
<div class="paragraph">
<p>This category of AST transformations groups annotations which have a direct impact on the semantics of the code, rather
than focusing on code generation. With that regards, they can be seen as compiler directives that either change the
behavior of a program at compile time or runtime.</p>
</div>
<div class="sect6">
<h7 id="xform-Field"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Field"></a><code>@groovy.transform.Field</code></h7>
<div class="paragraph">
<p>The <code>@Field</code> annotation only makes sense in the context of a script and aims at solving a common scoping error with
scripts. The following example will for example fail at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def x

String line() {
    "="*x
}

x=3
assert "===" == line()
x=5
assert "=====" == line()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The error that is thrown may be difficult to interpret: groovy.lang.MissingPropertyException: No such property: x. The reason is that scripts are compiled
to classes and the script body is itself compiled as a single <em>run()</em> method. Methods which are defined in the scripts are independent, so the code above is
equivalent to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyScript extends Script {

    String line() {
        "="*x
    }

    public def run() {
        def x
        x=3
        assert "===" == line()
        x=5
        assert "=====" == line()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So <code>def x</code> is effectively interpreted as a local variable, outside of the scope of the <code>line</code> method. The <code>@Field</code> AST transformation aims at fixing this
by changing the scope of the variable to a field of the enclosing script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Field def x

String line() {
    "="*x
}

x=3
assert "===" == line()
x=5
assert "=====" == line()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting, equivalent, code is now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyScript extends Script {

    def x

    String line() {
        "="*x
    }

    public def run() {
        x=3
        assert "===" == line()
        x=5
        assert "=====" == line()
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-PackageScope"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-PackageScope"></a><code>@groovy.transform.PackageScope</code></h7>
<div class="paragraph">
<p>By default, Groovy visibility rules imply that if you create a field without specifying a modifier, then the field is interpreted as a property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name // this is a property
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Should you want to create a package private field instead of a property (private field+getter/setter), then annotate your field with <code>@PackageScope</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    @PackageScope String name // not a property anymore
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@PackageScope</code> annotation can also be used for classes, methods and constructors. In addition, by specifying a list
of <code>PackageScopeTarget</code> values as the annotation attribute at the class level, all members within that class that don’t
have an explicit modifier and match the provided <code>PackageScopeTarget</code> will remain package protected. For example to apply
to fields within a class use the following annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import static groovy.transform.PackageScopeTarget.FIELDS
@PackageScope(FIELDS)
class Person {
  String name     // not a property, package protected
  Date dob        // not a property, package protected
  private int age // explicit modifier, so won't be touched
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@PackageScope</code> annotation is seldom used as part of normal Groovy conventions but is sometimes useful
for factory methods that should be visible internally within a package or for methods or constructors provided
for testing purposes, or when integrating with third-party libraries which require such visibility conventions.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-AutoFinal"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AutoFinal"></a><code>@groovy.transform.AutoFinal</code></h7>
<div class="paragraph">
<p>The <code>@AutoFinal</code> annotation instructs the compiler to automatically insert the final modifier
in numerous places within the annotated node. If applied on a method (or constructor), the parameters
for that method (or constructor) will be marked as final. If applied on a class definition, the same
treatment will occur for all declared methods and constructors within that class.</p>
</div>
<div class="paragraph">
<p>It is often considered bad practice to reassign parameters of a method or constructor with its body.
By adding the final modifier to all parameter declarations you can avoid this practice entirely.
Some programmers feel that adding final everywhere increases the amount of boilerplate code and makes the
method signatures somewhat noisy. An alternative might instead be to use a code review process or apply
a <a href="http://codenarc.org/">codenarc</a> <a href="http://codenarc.sourceforge.net/codenarc-rules-convention.html#ParameterReassignment">rule</a>
to give warnings if that practice is observed but these alternatives might lead to delayed feedback during
quality checking rather than within the IDE or during compilation. The <code>@AutoFinal</code> annotation aims to
maximise compiler/IDE feedback while retaining succinct code with minimum boilerplate noise.</p>
</div>
<div class="paragraph">
<p>The following example illustrates applying the annotation at the class level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.AutoFinal

@AutoFinal
class Person {
    private String first, last

    Person(String first, String last) {
        this.first = first
        this.last = last
    }

    String fullName(String separator) {
        "$first$separator$last"
    }

    String greeting(String salutation) {
        "$salutation, $first"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the two parameters for the constructor and the single parameter for
both the <code>fullname</code> and <code>greeting</code> methods will be final. Attempts to modify those parameters within the
constructor or method bodies will be flagged by the compiler.</p>
</div>
<div class="paragraph">
<p>The following example illustrates applying the annotation at the method level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Calc {
    @AutoFinal
    int add(int a, int b) { a + b }

    int mult(int a, int b) { a * b }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>add</code> method will have final parameters but the <code>mult</code> method will remain unchanged.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-AnnotationCollector"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-AnnotationCollector"></a><code>@groovy.transform.AnnotationCollector</code></h7>
<div class="paragraph">
<p><code>@AnnotationCollector</code> allows the creation of meta-annotations, which are described in a <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#meta-annotations">dedicated section</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-TypeChecked"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TypeChecked"></a><code>@groovy.transform.TypeChecked</code></h7>
<div class="paragraph">
<p><code>@TypeChecked</code> activates compile-time type checking on your Groovy code. See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-typechecked">section on type checking</a> for details.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-CompileStatic"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-CompileStatic"></a><code>@groovy.transform.CompileStatic</code></h7>
<div class="paragraph">
<p><code>@CompileStatic</code> activates static compilation on your Groovy code. See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-typechecked">section on type checking</a> for details.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-CompileDynamic"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-CompileDynamic"></a><code>@groovy.transform.CompileDynamic</code></h7>
<div class="paragraph">
<p><code>@CompileDynamic</code> disables static compilation on parts of your Groovy code. See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-typechecked">section on type checking</a> for details.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-DelegatesTo"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-DelegatesTo"></a><code>@groovy.lang.DelegatesTo</code></h7>
<div class="paragraph">
<p><code>@DelegatesTo</code> is not, technically speaking, an AST transformation. It is aimed at documenting code and helping the compiler in case you are
using <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-TypeChecked">type checking</a> or <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-CompileStatic">static compilation</a>. The annotation is described thoroughly in the
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-delegatesto">DSL section</a> of this guide.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-SelfType"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-SelfType"></a><code>@groovy.transform.SelfType</code></h7>
<div class="paragraph">
<p><code>@SelfType</code> is not an AST transformation but rather a marker interface used
with traits. See the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#traits-selftype">traits documentation</a> for further details.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_swing_patterns"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_swing_patterns"></a>Swing patterns</h6>
<div class="sect6">
<h7 id="xform-Bindable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Bindable"></a><code>@groovy.beans.Bindable</code></h7>
<div class="paragraph">
<p><code>@Bindable</code> is an AST transformation that transforms a regular property into a bound property (according to the <a href="http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/">JavaBeans specification</a>).
The <code>@Bindable</code> annotation can be placed on a property or a class. To convert all properties of a class into bound properties, on can annotate the class like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.beans.Bindable

@Bindable
class Person {
    String name
    int age
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to writing this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.beans.PropertyChangeListener
import java.beans.PropertyChangeSupport

class Person {
    final private PropertyChangeSupport this$propertyChangeSupport

    String name
    int age

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        this$propertyChangeSupport.addPropertyChangeListener(listener)
    }

    public void addPropertyChangeListener(String name, PropertyChangeListener listener) {
        this$propertyChangeSupport.addPropertyChangeListener(name, listener)
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        this$propertyChangeSupport.removePropertyChangeListener(listener)
    }

    public void removePropertyChangeListener(String name, PropertyChangeListener listener) {
        this$propertyChangeSupport.removePropertyChangeListener(name, listener)
    }

    public void firePropertyChange(String name, Object oldValue, Object newValue) {
        this$propertyChangeSupport.firePropertyChange(name, oldValue, newValue)
    }

    public PropertyChangeListener[] getPropertyChangeListeners() {
        return this$propertyChangeSupport.getPropertyChangeListeners()
    }

    public PropertyChangeListener[] getPropertyChangeListeners(String name) {
        return this$propertyChangeSupport.getPropertyChangeListeners(name)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Bindable</code> therefore removes a lot of boilerplate from your class, dramatically increasing readability. If the annotation is put on a single property, only that property is bound:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.beans.Bindable

class Person {
    String name
    @Bindable int age
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="xform-ListenerList"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ListenerList"></a><code>@groovy.beans.ListenerList</code></h7>
<div class="paragraph">
<p>The <code>@ListenerList</code> AST transformation generates code for adding, removing and getting the list of listeners to a class, just by annotating a collection property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.awt.event.ActionListener
import groovy.beans.ListenerList

class Component {
    @ListenerList
    List&lt;ActionListener&gt; listeners;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The transform will generate the appropriate add/remove methods based on the generic type of the list. In addition, it will also create <code>fireXXX</code> methods based on the public methods declared on the class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.awt.event.ActionEvent
import java.awt.event.ActionListener as ActionListener
import groovy.beans.ListenerList as ListenerList

public class Component {

    @ListenerList
    private List&lt;ActionListener&gt; listeners

    public void addActionListener(ActionListener listener) {
        if ( listener == null) {
            return
        }
        if ( listeners == null) {
            listeners = []
        }
        listeners.add(listener)
    }

    public void removeActionListener(ActionListener listener) {
        if ( listener == null) {
            return
        }
        if ( listeners == null) {
            listeners = []
        }
        listeners.remove(listener)
    }

    public ActionListener[] getActionListeners() {
        Object __result = []
        if ( listeners != null) {
            __result.addAll(listeners)
        }
        return (( __result ) as ActionListener[])
    }

    public void fireActionPerformed(ActionEvent param0) {
        if ( listeners != null) {
            ArrayList&lt;ActionListener&gt; __list = new ArrayList&lt;ActionListener&gt;(listeners)
            for (def listener : __list ) {
                listener.actionPerformed(param0)
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Bindable</code> supports multiple options that will let you further customize the behavior of the transformation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic type name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, the suffix which will be appended to add/remove/…​ methods is the simple class name of the generic type of the list.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Component {
    @ListenerList(name='item')
    List&lt;ActionListener&gt; listeners;
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">synchronize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to true, generated methods will be synchronized</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Component {
    @ListenerList(synchronize = true)
    List&lt;ActionListener&gt; listeners;
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="xform-Vetoable"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Vetoable"></a><code>@groovy.beans.Vetoable</code></h7>
<div class="paragraph">
<p>The <code>@Vetoable</code> annotation works in a similar manner to <code>@Bindable</code> but generates constrained property according to the JavaBeans specification, instead of bound properties. The annotation
can be placed on a class, meaning that all properties will be converted to constrained properties, or on a single property. For example, annotating this class with <code>@Vetoable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.beans.Vetoable

import java.beans.PropertyVetoException
import java.beans.VetoableChangeListener

@Vetoable
class Person {
    String name
    int age
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to writing this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public class Person {

    private String name
    private int age
    final private java.beans.VetoableChangeSupport this$vetoableChangeSupport

    public void addVetoableChangeListener(VetoableChangeListener listener) {
        this$vetoableChangeSupport.addVetoableChangeListener(listener)
    }

    public void addVetoableChangeListener(String name, VetoableChangeListener listener) {
        this$vetoableChangeSupport.addVetoableChangeListener(name, listener)
    }

    public void removeVetoableChangeListener(VetoableChangeListener listener) {
        this$vetoableChangeSupport.removeVetoableChangeListener(listener)
    }

    public void removeVetoableChangeListener(String name, VetoableChangeListener listener) {
        this$vetoableChangeSupport.removeVetoableChangeListener(name, listener)
    }

    public void fireVetoableChange(String name, Object oldValue, Object newValue) throws PropertyVetoException {
        this$vetoableChangeSupport.fireVetoableChange(name, oldValue, newValue)
    }

    public VetoableChangeListener[] getVetoableChangeListeners() {
        return this$vetoableChangeSupport.getVetoableChangeListeners()
    }

    public VetoableChangeListener[] getVetoableChangeListeners(String name) {
        return this$vetoableChangeSupport.getVetoableChangeListeners(name)
    }

    public void setName(String value) throws PropertyVetoException {
        this.fireVetoableChange('name', name, value)
        name = value
    }

    public void setAge(int value) throws PropertyVetoException {
        this.fireVetoableChange('age', age, value)
        age = value
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the annotation is put on a single property, only that property is made vetoable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.beans.Vetoable

class Person {
    String name
    @Vetoable int age
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_test_assistance"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_test_assistance"></a>Test assistance</h6>
<div class="sect6">
<h7 id="xform-NotYetImplemented"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-NotYetImplemented"></a><code>@groovy.transform.NotYetImplemented</code></h7>
<div class="paragraph">
<p><code>@NotYetImplemented</code> is used to invert the result of a JUnit 3/4 test case. It is in particular useful if a feature is not yet implemented but the test is. In that case, it is expected
that the test fails. Marking it with <code>@NotYetImplemented</code> will inverse the result of the test, like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.NotYetImplemented

class Maths {
    static int fib(int n) {
        // todo: implement later
    }
}

class MathsTest extends GroovyTestCase {
    @NotYetImplemented
    void testFib() {
        def dataTable = [
                1:1,
                2:1,
                3:2,
                4:3,
                5:5,
                6:8,
                7:13
        ]
        dataTable.each { i, r -&gt;
            assert Maths.fib(i) == r
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another advantage of using this technique is that you can write test cases for bugs before knowing how to fix them. If some time in the future, a modification in the code fixes a bug by side effect,
you’ll be notified because a test which was expected to fail passed.</p>
</div>
</div>
<div class="sect6">
<h7 id="xform-ASTTest"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ASTTest"></a><code>@groovy.transform.ASTTest</code></h7>
<div class="paragraph">
<p><code>@ASTTest</code> is a special AST transformation meant to help debugging other AST transformations or the Groovy compiler itself. It will let the developer "explore" the AST during compilation and
perform assertions on the AST rather than on the result of compilation. This means that this AST transformations gives access to the AST before the bytecode is produced. <code>@ASTTest</code> can be
placed on any annotable node and requires two parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>phase</em>: sets at which phase at which <code>@ASTTest</code> will be triggered. The test code will work on the AST tree at the end of this phase.</p>
</li>
<li>
<p><em>value</em>: the code which will be executed once the phase is reached, on the annotated node</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Compile phase has to be chosen from one of <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/CompilePhase.html">org.codehaus.groovy.control.CompilePhase</a> . However, since it is not possible to annotate a node twice with the same annotation, you will
not be able to use <code>@ASTTest</code> on the same node at two distinct compile phases.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>value</code> is a closure expression which has access to a special variable <code>node</code> corresponding to the annotated node, and a helper <code>lookup</code> method which will be discussed <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#asttest-lookup">here</a>.
For example, you can annotate a class node like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ASTTest
import org.codehaus.groovy.ast.ClassNode
import static org.codehaus.groovy.control.CompilePhase.*

@ASTTest(phase=CONVERSION, value={   <i class="conum" data-value="1"></i><b>(1)</b>
    assert node instanceof ClassNode <i class="conum" data-value="2"></i><b>(2)</b>
    assert node.name == 'Person'     <i class="conum" data-value="3"></i><b>(3)</b>
})
class Person {

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we’re checking the state of the Abstract Syntax Tree after the CONVERSION phase</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>node refers to the AST node which is annotated by @ASTTest</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>it can be used to perform assertions at compile time</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>One interesting feature of <code>@ASTTest</code> is that if an assertion fails, then <strong>compilation will fail</strong>. Now imagine that we want to check the behavior of an AST transformation at compile time.
We will take <code>@PackageScope</code> here, and we will want to verify that a property annotated with <code>@PackageScope</code> becomes a package private field. For this, we have to know at which phase the
transform runs, which can be found in <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/PackageScopeASTTransformation.html">org.codehaus.groovy.transform.PackageScopeASTTransformation</a> : semantic analysis. Then a test can be written like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ASTTest
import groovy.transform.PackageScope

import static org.codehaus.groovy.control.CompilePhase.*

@ASTTest(phase=SEMANTIC_ANALYSIS, value= {
    def nameNode = node.properties.find { it.name == 'name' }
    def ageNode = node.properties.find { it.name == 'age' }
    assert nameNode
    assert ageNode == null // shouldn't be a property anymore
    def ageField = node.getDeclaredField 'age'
    assert ageField.modifiers == 0
})
class Person {
    String name
    @PackageScope int age
}</code></pre>
</div>
</div>
<div id="asttest-lookup" class="paragraph">
<p>The <code>@ASTTest</code> annotation can only be placed wherever the grammar allows it. Sometimes, you would like to test the contents of an AST node which is not annotable. In this case,
<code>@ASTTest</code> provides a convenient <code>lookup</code> method which will search the AST for nodes which are labelled with a special token:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def list = lookup('anchor') <i class="conum" data-value="1"></i><b>(1)</b>
Statement stmt = list[0] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>returns the list of AST nodes which label is 'anchor'</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>it is always necessary to choose which element to process since lookup always returns a list</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Imagine, for example, that you want to test the declared type of a for loop variable. Then you can do it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ASTTest
import groovy.transform.PackageScope
import org.codehaus.groovy.ast.ClassHelper
import org.codehaus.groovy.ast.expr.DeclarationExpression
import org.codehaus.groovy.ast.stmt.ForStatement

import static org.codehaus.groovy.control.CompilePhase.*

class Something {
    @ASTTest(phase=SEMANTIC_ANALYSIS, value= {
        def forLoop = lookup('anchor')[0]
        assert forLoop instanceof ForStatement
        def decl = forLoop.collectionExpression.expressions[0]
        assert decl instanceof DeclarationExpression
        assert decl.variableExpression.name == 'i'
        assert decl.variableExpression.originType == ClassHelper.int_TYPE
    })
    void someMethod() {
        int x = 1;
        int y = 10;
        anchor: for (int i=0; i&lt;x+y; i++) {
            println "$i"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@ASTTest</code> also exposes those variables inside the test closure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>node</code> corresponds to the annotated node, as usual</p>
</li>
<li>
<p><code>compilationUnit</code> gives access to the current <code>org.codehaus.groovy.control.CompilationUnit</code></p>
</li>
<li>
<p><code>compilePhase</code> returns the current compile phase (<code>org.codehaus.groovy.control.CompilePhase</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The latter is interesting if you don’t specify the <code>phase</code> attribute. In that case, the closure will be executed after
each compile phase after (and including) <code>SEMANTIC_ANALYSIS</code>. The context of the transformation is kept after each phase,
giving you a chance to check what changed between two phases.</p>
</div>
<div class="paragraph">
<p>As an example, here is how you could dump the list of AST transformations registered on a class node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ASTTest
import groovy.transform.CompileStatic
import groovy.transform.Immutable
import org.codehaus.groovy.ast.ClassNode
import org.codehaus.groovy.control.CompilePhase

@ASTTest(value={
    System.err.println "Compile phase: $compilePhase"
    ClassNode cn = node
    System.err.println "Global AST xforms: ${compilationUnit?.ASTTransformationsContext?.globalTransformNames}"
    CompilePhase.values().each {
        def transforms = cn.getTransforms(it)
        if (transforms) {
            System.err.println "Ast xforms for phase $it:"
            transforms.each { map -&gt;
                System.err.println(map)
            }
        }
    }
})
@CompileStatic
@Immutable
class Foo {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is how you can memorize variables for testing between two phases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.ASTTest
import groovy.transform.ToString
import org.codehaus.groovy.ast.ClassNode
import org.codehaus.groovy.control.CompilePhase

@ASTTest(value={
    if (compilePhase==CompilePhase.INSTRUCTION_SELECTION) {             <i class="conum" data-value="1"></i><b>(1)</b>
        println "toString() was added at phase: ${added}"
        assert added == CompilePhase.CANONICALIZATION                   <i class="conum" data-value="2"></i><b>(2)</b>
    } else {
        if (node.getDeclaredMethods('toString') &amp;&amp; added==null) {       <i class="conum" data-value="3"></i><b>(3)</b>
            added = compilePhase                                        <i class="conum" data-value="4"></i><b>(4)</b>
        }
    }
})
@ToString
class Foo {
    String name
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if the current compile phase is instruction selection</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>then we want to make sure <code>toString</code> was added at <code>CANONICALIZATION</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>otherwise, if <code>toString</code> exists and that the variable from the context, <code>added</code> is null</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>then it means that this compile phase is the one where <code>toString</code> was added</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_grape_handling"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_grape_handling"></a>Grape handling</h6>
<div class="sect6">
<h7 id="xform-Grab"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Grab"></a><code>@groovy.lang.Grab</code></h7>

</div>
<div class="sect6">
<h7 id="xform-GrabConfig"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabConfig"></a><code>@groovy.lang.GrabConfig</code></h7>

</div>
<div class="sect6">
<h7 id="xform-GrabExclude"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabExclude"></a><code>@groovy.lang.GrabExclude</code></h7>

</div>
<div class="sect6">
<h7 id="xform-GrabResolver"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-GrabResolver"></a><code>@groovy.lang.GrabResolver</code></h7>

</div>
<div class="sect6">
<h7 id="xform-Grapes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Grapes"></a><code>@groovy.lang.Grapes</code></h7>
<div class="paragraph">
<p><code>Grape</code> is a dependency management engine embedded into Groovy, relying on several annotations which are described
thoroughly in this <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-grape">section of the guide</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="developing-ast-xforms"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#developing-ast-xforms"></a>Developing AST transformations</h5>
<div class="paragraph">
<p>There are two kinds of transformations: global and local transformations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-global">Global transformations</a> are applied to by the compiler on the code being compiled,
wherever the transformation apply. Compiled classes that implement global transformations
are in a JAR added to the classpath of the compiler and contain service locator file
<code>META-INF/services/org.codehaus.groovy.transform.ASTTransformation</code> with a line with the name of the
transformation class. The transformation class must have a no-args constructor and implement the
<code>org.codehaus.groovy.transform.ASTTransformation</code> interface.
It will be run against <strong>every source in the compilation</strong>, so be sure to not create transformations which
scan all the AST in an expansive and time-consuming manner, to keep the compiler fast.</p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-local">Local transformations</a> are transformations applied locally by annotating code elements you want to
transform. For this, we reuse the annotation notation, and those annotations should implement
<code>org.codehaus.groovy.transform.ASTTransformation</code>. The compiler will discover them and apply the
transformation on these code elements.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_compilation_phases_guide"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compilation_phases_guide"></a>Compilation phases guide</h6>
<div class="paragraph">
<p>Groovy AST transformations must be performed in one of the nine defined
compilation phases (<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/CompilePhase.html">org.codehaus.groovy.control.CompilePhase</a>).</p>
</div>
<div class="paragraph">
<p>Global transformations may be applied in any phase, but local
transformations may only be applied in the semantic analysis phase or
later. Briefly, the compiler phases are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Initialization</em>: source files are opened and environment configured</p>
</li>
<li>
<p><em>Parsing</em>: the grammar is used to to produce tree of tokens representing
the source code</p>
</li>
<li>
<p><em>Conversion</em>: An abstract syntax tree (AST) is created from token trees.</p>
</li>
<li>
<p><em>Semantic Analysis</em>: Performs consistency and validity checks that the
grammar can’t check for, and resolves classes.</p>
</li>
<li>
<p><em>Canonicalization</em>: Complete building the AST</p>
</li>
<li>
<p><em>Instruction Selection</em>: instruction set is chosen, for example Java 6 or Java 7 bytecode level</p>
</li>
<li>
<p><em>Class Generation</em>: creates the bytecode of the class in memory</p>
</li>
<li>
<p><em>Output</em>: write the binary output to the file system</p>
</li>
<li>
<p><em>Finalization</em>: Perform any last cleanup</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Generally speaking, there is more type information available later in
the phases. If your transformation is concerned with reading the AST,
then a later phase where information is more plentiful might be a good
choice. If your transformation is concerned with writing AST, then an
earlier phase where the tree is more sparse might be more convenient.</p>
</div>
</div>
<div class="sect5">
<h6 id="transforms-local"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-local"></a>Local transformations</h6>
<div class="paragraph">
<p>Local AST transformations are relative to the context they are applied to. In
most cases, the context is defined by an annotation that will define the scope
of the transform. For example, annotating a field would mean that the transformation
<em>applies to</em> the field, while annotating the class would mean that the transformation
<em>applies to</em> the whole class.</p>
</div>
<div class="paragraph">
<p>As a naive and simple example, consider wanting to write a <code>@WithLogging</code>
transformation that would add console messages at the start and end of a
method invocation. So the following "Hello World" example would
actually print "Hello World" along with a start and stop message:</p>
</div>
<div class="listingblock">
<div class="title">Poor man’s aspect oriented programming</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@WithLogging
def greet() {
    println "Hello World"
}

greet()</code></pre>
</div>
</div>
<div class="paragraph">
<p>A local AST transformation is an easy way to do this. It requires two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a definition of the <code>@WithLogging</code> annotation</p>
</li>
<li>
<p>an implementation of <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/ASTTransformation.html">org.codehaus.groovy.transform.ASTTransformation</a> that adds the logging
expressions to the method</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An <code>ASTTransformation</code> is a callback that gives you access to the
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/SourceUnit.html">org.codehaus.groovy.control.SourceUnit</a>,
through which you can get a reference to the
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/ast/ModuleNode.html">org.codehaus.groovy.ast.ModuleNode</a> (AST).</p>
</div>
<div class="paragraph">
<p>The AST (Abstract Syntax Tree) is a tree structure consisting mostly of
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/ast/expr/Expression.html">org.codehaus.groovy.ast.expr.Expression</a> (expressions) or
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/ast/expr/Statement.html">org.codehaus.groovy.ast.expr.Statement</a> (statements). An easy way to
learn about the AST is to explore it in a debugger. Once you have the AST,
you can analyze it to find out information about the code or rewrite it to add
new functionality.</p>
</div>
<div class="paragraph">
<p>The local transformation annotation is the simple part. Here is the
<code>@WithLogging</code> one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.transform.GroovyASTTransformationClass

import java.lang.annotation.ElementType
import java.lang.annotation.Retention
import java.lang.annotation.RetentionPolicy
import java.lang.annotation.Target

@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.METHOD])
@GroovyASTTransformationClass(["gep.WithLoggingASTTransformation"])
public @interface WithLogging {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation retention can be <code>SOURCE</code> because you won’t need the annotation
past that. The element type here is <code>METHOD</code>, the <code>@WithLogging</code> because the annotation
applies to methods.</p>
</div>
<div class="paragraph">
<p>But the most important part is the
<code>@GroovyASTTransformationClass</code> annotation. This links the <code>@WithLogging</code>
annotation to the <code>ASTTransformation</code> class you will write.
<code>gep.WithLoggingASTTransformation</code> is the fully qualified class name of the
<code>ASTTransformation</code> we are going to write. This line wires the annotation to the transformation.</p>
</div>
<div class="paragraph">
<p>With this in place, the Groovy compiler is going to invoke
<code>gep.WithLoggingASTTransformation</code> every time an <code>@WithLogging</code> is found in a
source unit. Any breakpoint set within <code>LoggingASTTransformation</code> will now
be hit within the IDE when running the sample script.</p>
</div>
<div class="paragraph">
<p>The <code>ASTTransformation</code> class is a little more complex. Here is the
very simple, and very naive, transformation to add a method start and
stop message for <code>@WithLogging</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic                                                                  <i class="conum" data-value="1"></i><b>(1)</b>
@GroovyASTTransformation(phase=CompilePhase.SEMANTIC_ANALYSIS)                  <i class="conum" data-value="2"></i><b>(2)</b>
class WithLoggingASTTransformation implements ASTTransformation {               <i class="conum" data-value="3"></i><b>(3)</b>

    @Override
    void visit(ASTNode[] nodes, SourceUnit sourceUnit) {                        <i class="conum" data-value="4"></i><b>(4)</b>
        MethodNode method = (MethodNode) nodes[1]                               <i class="conum" data-value="5"></i><b>(5)</b>

        def startMessage = createPrintlnAst("Starting $method.name")            <i class="conum" data-value="6"></i><b>(6)</b>
        def endMessage = createPrintlnAst("Ending $method.name")                <i class="conum" data-value="7"></i><b>(7)</b>

        def existingStatements = ((BlockStatement)method.code).statements       <i class="conum" data-value="8"></i><b>(8)</b>
        existingStatements.add(0, startMessage)                                 <i class="conum" data-value="9"></i><b>(9)</b>
        existingStatements.add(endMessage)                                      <i class="conum" data-value="10"></i><b>(10)</b>

    }

    private static Statement createPrintlnAst(String message) {                 <i class="conum" data-value="11"></i><b>(11)</b>
        new ExpressionStatement(
            new MethodCallExpression(
                new VariableExpression("this"),
                new ConstantExpression("println"),
                new ArgumentListExpression(
                    new ConstantExpression(message)
                )
            )
        )
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>even if not mandatory, if you write an AST transformation in Groovy, it is highly recommended to use <code>CompileStatic</code>
because it will improve performance of the compiler.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>annotate with <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/GroovyASTTransformation.html">org.codehaus.groovy.transform.GroovyASTTransformation</a> to tell at which compilation phase the
transform needs to run. Here, it’s at the <em>semantic analysis</em> phase.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>implement the <code>ASTTransformation</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>which only has a single <code>visit</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the <code>nodes</code> parameter is a 2 AST node array, for which the first one is the annotation node (<code>@WithLogging</code>) and
the second one is the annotated node (the method node)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>create a statement that will print a message when we enter the method</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>create a statement that will print a message when we exit the method</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>get the method body, which in this case is a <code>BlockStatement</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>add the enter method message before the first statement of existing code</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>append the exit method message after the last statement of existing code</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>creates an <code>ExpressionStatement</code> wrapping a <code>MethodCallExpression</code> corresponding to <code>this.println("message")</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is important to notice that for the brevity of this example, we didn’t make the necessary checks, such as checking
that the annotated node is really a <code>MethodNode</code>, or that the method body is an instance of <code>BlockStatement</code>. This
exercise is left to the reader.</p>
</div>
<div class="paragraph">
<p>Note the creation of the new println statements in the
<code>createPrintlnAst(String)</code> method. Creating AST for code is not always
simple. In this case we need to construct a new method call, passing in
the receiver/variable, the name of the method, and an argument list.
When creating AST, it might be helpful to write the code you’re trying
to create in a Groovy file and then inspect the AST of that code in the
debugger to learn what to create. Then write a function like
<code>createPrintlnAst</code> using what you learned through the debugger.</p>
</div>
<div class="paragraph">
<p>In the end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@WithLogging
def greet() {
    println "Hello World"
}

greet()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Produces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Starting greet
Hello World
Ending greet</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is important to note that an AST transformation participates directly in the compilation process. A common
error by beginners is to have the AST transformation code in the same source tree as a class that uses the transformation.
Being in the same source tree in general means that they are compiled at the same time. Since the transformation itself
is going to be compiled in phases and that each compile phase processes all files of the same source unit before going
to the next one, there’s a direct consequence: the transformation will not be compiled before the class that uses it! In
conclusion, AST transformations need to be precompiled before you can use them. In general, it is as easy as having them
in a separate source tree.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="transforms-global"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#transforms-global"></a>Global transformations</h6>
<div class="paragraph">
<p>Global AST transformation are similar to local one with a major difference: they do not need an annotation, meaning that
they are applied <em>globally</em>, that is to say on each class being compiled. It is therefore very important to limit their
use to last resort, because it can have a significant impact on the compiler performance.</p>
</div>
<div class="paragraph">
<p>Following the example of the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#transform-local">local AST transformation</a>, imagine that we would like to trace all
methods, and not only those which are annotated with <code>@WithLogging</code>. Basically, we need this code to behave the same
as the one annotated with <code>@WithLogging</code> before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def greet() {
    println "Hello World"
}

greet()</code></pre>
</div>
</div>
<div class="paragraph">
<p>To make this work, there are two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create the <code>org.codehaus.groovy.transform.ASTTransformation</code> descriptor inside the <code>META-INF/services</code> directory</p>
</li>
<li>
<p>create the <code>ASTTransformation</code> implementation</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The descriptor file is required and must be found on classpath. It will contain a single line:</p>
</div>
<div class="listingblock">
<div class="title">META-INF/services/org.codehaus.groovy.transform.ASTTransformation</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">gep.WithLoggingASTTransformation</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code for the transformation looks similar to the local case, but instead of using the <code>ASTNode[]</code> parameter, we need
to use the <code>SourceUnit</code> instead:</p>
</div>
<div class="listingblock">
<div class="title">gep/WithLoggingASTTransformation.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic                                                                  <i class="conum" data-value="1"></i><b>(1)</b>
@GroovyASTTransformation(phase=CompilePhase.SEMANTIC_ANALYSIS)                  <i class="conum" data-value="2"></i><b>(2)</b>
class WithLoggingASTTransformation implements ASTTransformation {               <i class="conum" data-value="3"></i><b>(3)</b>

    @Override
    void visit(ASTNode[] nodes, SourceUnit sourceUnit) {                        <i class="conum" data-value="4"></i><b>(4)</b>
        def methods = sourceUnit.AST.methods                                    <i class="conum" data-value="5"></i><b>(5)</b>
        methods.each { method -&gt;                                                <i class="conum" data-value="6"></i><b>(6)</b>
            def startMessage = createPrintlnAst("Starting $method.name")        <i class="conum" data-value="7"></i><b>(7)</b>
            def endMessage = createPrintlnAst("Ending $method.name")            <i class="conum" data-value="8"></i><b>(8)</b>

            def existingStatements = ((BlockStatement)method.code).statements   <i class="conum" data-value="9"></i><b>(9)</b>
            existingStatements.add(0, startMessage)                             <i class="conum" data-value="10"></i><b>(10)</b>
            existingStatements.add(endMessage)                                  <i class="conum" data-value="11"></i><b>(11)</b>
        }
    }

    private static Statement createPrintlnAst(String message) {                 <i class="conum" data-value="12"></i><b>(12)</b>
        new ExpressionStatement(
            new MethodCallExpression(
                new VariableExpression("this"),
                new ConstantExpression("println"),
                new ArgumentListExpression(
                    new ConstantExpression(message)
                )
            )
        )
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>even if not mandatory, if you write an AST transformation in Groovy, it is highly recommended to use <code>CompileStatic</code>
because it will improve performance of the compiler.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>annotate with <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/GroovyASTTransformation.html">org.codehaus.groovy.transform.GroovyASTTransformation</a> to tell at which compilation phase the
transform needs to run. Here, it’s at the <em>semantic analysis</em> phase.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>implement the <code>ASTTransformation</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>which only has a single <code>visit</code> method</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the <code>sourceUnit</code> parameter gives access to the source being compiled, so we get the AST of the current source
and retrieve the list of methods from this file</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>we iterate on each method from the source file</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>create a statement that will print a message when we enter the method</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>create a statement that will print a message when we exit the method</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>get the method body, which in this case is a <code>BlockStatement</code></td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>add the enter method message before the first statement of existing code</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>append the exit method message after the last statement of existing code</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>creates an <code>ExpressionStatement</code> wrapping a <code>MethodCallExpression</code> corresponding to <code>this.println("message")</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_ast_api_guide"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_api_guide"></a>AST API guide</h6>
<div class="sect6">
<h7 id="_abstractasttransformation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstractasttransformation"></a>AbstractASTTransformation</h7>
<div class="paragraph">
<p>While you have seen that you can directly implement the <code>ASTTransformation</code> interface, in almost all cases you will not
do this but extend the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/transform/AbstractASTTransformation.html">org.codehaus.groovy.transform.AbstractASTTransformation</a> class. This class provides several
utility methods that make AST transformations easier to write. Almost all AST transformations included in Groovy
extend this class.</p>
</div>
</div>
<div class="sect6">
<h7 id="_classcodeexpressiontransformer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classcodeexpressiontransformer"></a>ClassCodeExpressionTransformer</h7>
<div class="paragraph">
<p>It is a common use case to be able to transform an expression into another. Groovy provides a class which makes it
very easy to do this: <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/ast/ClassCodeExpressionTransformer.html">org.codehaus.groovy.ast.ClassCodeExpressionTransformer</a></p>
</div>
<div class="paragraph">
<p>To illustrate this, let’s create a <code>@Shout</code> transformation that will transform all <code>String</code> constants in method call
arguments into their uppercase version. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Shout
def greet() {
    println "Hello World"
}

greet()</code></pre>
</div>
</div>
<div class="paragraph">
<p>should print:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>HELLO WORLD</pre>
</div>
</div>
<div class="paragraph">
<p>Then the code for the transformation can use the <code>ClassCodeExpressionTransformer</code> to make this easier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic
@GroovyASTTransformation(phase=CompilePhase.SEMANTIC_ANALYSIS)
class ShoutASTTransformation implements ASTTransformation {

    @Override
    void visit(ASTNode[] nodes, SourceUnit sourceUnit) {
        ClassCodeExpressionTransformer trn = new ClassCodeExpressionTransformer() {         <i class="conum" data-value="1"></i><b>(1)</b>
            private boolean inArgList = false
            @Override
            protected SourceUnit getSourceUnit() {
                sourceUnit                                                                  <i class="conum" data-value="2"></i><b>(2)</b>
            }

            @Override
            Expression transform(final Expression exp) {
                if (exp instanceof ArgumentListExpression) {
                    inArgList = true
                } else if (inArgList &amp;&amp;
                    exp instanceof ConstantExpression &amp;&amp; exp.value instanceof String) {
                    return new ConstantExpression(exp.value.toUpperCase())                  <i class="conum" data-value="3"></i><b>(3)</b>
                }
                def trn = super.transform(exp)
                inArgList = false
                trn
            }
        }
        trn.visitMethod((MethodNode)nodes[1])                                               <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Internally the transformation creates a <code>ClassCodeExpressionTransformer</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The transformer needs to return the source unit</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>if a constant expression of type string is detected inside an argument list, transform it into its upper case version</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>call the transformer on the method being annotated</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_ast_nodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_nodes"></a>AST Nodes</h7>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Writing an AST transformation requires a deep knowledge of the internal Groovy API. In particular it requires
knowledge about the AST classes. Since those classes are internal, there are chances that the API will change in the
future, meaning that your transformations <em>could</em> break. Despite that warning, the AST has been very stable over time
and such a thing rarely happens.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Classes of the Abstract Syntax Tree belong to the <code>org.codehaus.groovy.ast</code> package. It is recommended to the reader
to use the Groovy Console, in particular the AST browser tool, to gain knowledge about those classes. However, a good
resource for learning is the <a href="https://github.com/apache/groovy/tree/master/src/test/org/codehaus/groovy/ast/builder">AST Builder</a>
test suite.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_macros"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macros"></a>Macros</h6>
<div class="sect6">
<h7 id="_introduction_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_2"></a>Introduction</h7>
<div class="paragraph">
<p>Until version 2.5.0, when developing AST transformations, developers should have a deep knowledge about how the AST
(Abstract Syntax Tree) was built by the compiler in order to know how to add new expressions or statements during
compile time.</p>
</div>
<div class="paragraph">
<p>Although the use of <code>org.codehaus.groovy.ast.tool.GeneralUtils</code> static methods could mitigate the burden of creating
expressions and statements, it’s still a low-level way of writing those AST nodes directly.
We needed something to abstract us from writing the AST directly and that’s exactly what Groovy macros were made for.
They allow you to directly add code during compilation, without having to translate the code you had in mind to the
<code>org.codehaus.groovy.ast.*</code> node related classes.</p>
</div>
</div>
<div class="sect6">
<h7 id="_statements_and_expressions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_statements_and_expressions"></a>Statements and expressions</h7>
<div class="paragraph">
<p>Let’s see an example, lets create a local AST transformation: <code>@AddMessageMethod</code>. When applied to a given class it
will add a new method called <code>getMessage</code> to that class. The method will return "42". The annotation is pretty
straight forward:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.TYPE])
@GroovyASTTransformationClass(["metaprogramming.AddMethodASTTransformation"])
@interface AddMethod { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>What would the AST transformation look like without the use of a macro ? Something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class AddMethodASTTransformation extends AbstractASTTransformation {
    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        ClassNode classNode = (ClassNode) nodes[1]

        ReturnStatement code =
                new ReturnStatement(                              <i class="conum" data-value="1"></i><b>(1)</b>
                        new ConstantExpression("42"))             <i class="conum" data-value="2"></i><b>(2)</b>

        MethodNode methodNode =
                new MethodNode(
                        "getMessage",
                        ACC_PUBLIC,
                        ClassHelper.make(String),
                        [] as Parameter[],
                        [] as ClassNode[],
                        code)                                     <i class="conum" data-value="3"></i><b>(3)</b>

        classNode.addMethod(methodNode)                           <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a return statement</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a constant expression "42"</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Adding the code to the new method</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adding the new method to the annotated class</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you’re not used to the AST API, that definitely doesn’t look like the code you had in mind. Now look how the
previous code simplifies with the use of macros.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class AddMethodWithMacrosASTTransformation extends AbstractASTTransformation {
    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        ClassNode classNode = (ClassNode) nodes[1]

        ReturnStatement simplestCode = macro { return "42" }   <i class="conum" data-value="1"></i><b>(1)</b>

        MethodNode methodNode =
                new MethodNode(
                        "getMessage",
                        ACC_PUBLIC,
                        ClassHelper.make(String),
                        [] as Parameter[],
                        [] as ClassNode[],
                        simplestCode)                          <i class="conum" data-value="2"></i><b>(2)</b>

        classNode.addMethod(methodNode)                        <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Much simpler. You wanted to add a return statement that returned "42" and that’s exactly what you can read inside
the <code>macro</code> utility method. Your plain code will be translated for you to a <code>org.codehaus.groovy.ast.stmt.ReturnStatement</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adding the return statement to the new method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Adding the new code to the annotated class</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Although the <code>macro</code> method is used in this example to create a <strong>statement</strong> the <code>macro</code> method could also be used to create
<strong>expressions</strong> as well, it depends on which <code>macro</code> signature you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>macro(Closure)</code>: Create a given statement with the code inside the closure.</p>
</li>
<li>
<p><code>macro(Boolean,Closure)</code>: if <strong>true</strong> wrap expressions inside the closure inside an statement, if <strong>false</strong> then return
an expression</p>
</li>
<li>
<p><code>macro(CompilePhase, Closure)</code>: Create a given statement with the code inside the closure in a specific compile phase</p>
</li>
<li>
<p><code>macro(CompilePhase, Boolean, Closure)</code>: Create an statement or an expression (true == statement, false == expression)
in a specific compilation phase.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All these signatures can be found at <code>org.codehaus.groovy.macro.runtime.MacroGroovyMethods</code>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Sometimes we could be only interested in creating a given expression, not the whole statement, in order to do that we
should use any of the <code>macro</code> invocations with a boolean parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class AddGetTwoASTTransformation extends AbstractASTTransformation {

    BinaryExpression onePlusOne() {
        return macro(false) { 1 + 1 }                                      <i class="conum" data-value="1"></i><b>(1)</b>
    }

    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        ClassNode classNode = nodes[1]
        BinaryExpression expression = onePlusOne()                         <i class="conum" data-value="2"></i><b>(2)</b>
        ReturnStatement returnStatement = GeneralUtils.returnS(expression) <i class="conum" data-value="3"></i><b>(3)</b>

        MethodNode methodNode =
                new MethodNode("getTwo",
                        ACC_PUBLIC,
                        ClassHelper.Integer_TYPE,
                        [] as Parameter[],
                        [] as ClassNode[],
                        returnStatement                                    <i class="conum" data-value="4"></i><b>(4)</b>
                )

        classNode.addMethod(methodNode)                                    <i class="conum" data-value="5"></i><b>(5)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We’re telling macro not to wrap the expression in a statement, we’re only interested in the expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assigning the expression</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Creating a <code>ReturnStatement</code> using a method from <code>GeneralUtils</code> and returning the expression</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adding the code to the new method</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Adding the method to the class</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_variable_substitution"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variable_substitution"></a>Variable substitution</h7>
<div class="paragraph">
<p>Macros are great but we can’t create anything useful or reusable if our macros couldn’t receive parameters or resolve
surrounding variables.</p>
</div>
<div class="paragraph">
<p>In the following example we’re creating an AST transformation <code>@MD5</code> that when applied to a given String field will
add a method returning the MD5 value of that field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.FIELD])
@GroovyASTTransformationClass(["metaprogramming.MD5ASTTransformation"])
@interface MD5 { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the transformation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GroovyASTTransformation(phase = CompilePhase.CANONICALIZATION)
class MD5ASTTransformation extends AbstractASTTransformation {

    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        FieldNode fieldNode = nodes[1]
        ClassNode classNode = fieldNode.declaringClass
        String capitalizedName = fieldNode.name.capitalize()
        MethodNode methodNode = new MethodNode(
                "get${capitalizedName}MD5",
                ACC_PUBLIC,
                ClassHelper.STRING_TYPE,
                [] as Parameter[],
                [] as ClassNode[],
                buildMD5MethodCode(fieldNode))

        classNode.addMethod(methodNode)
    }

    BlockStatement buildMD5MethodCode(FieldNode fieldNode) {
        VariableExpression fieldVar = GeneralUtils.varX(fieldNode.name) <i class="conum" data-value="1"></i><b>(1)</b>

        return macro(CompilePhase.SEMANTIC_ANALYSIS, true) {            <i class="conum" data-value="2"></i><b>(2)</b>
            return java.security.MessageDigest
                    .getInstance('MD5')
                    .digest($v { fieldVar }.getBytes())                 <i class="conum" data-value="3"></i><b>(3)</b>
                    .encodeHex()
                    .toString()
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We need a reference to a variable expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If using a class outside the standard packages we should add any needed imports or use the qualified name. When
using the qualified named of a given static method you need to make sure it’s resolved in the proper compile phase. In
this particular case we’re instructing the macro to resolve it at the SEMANTIC_ANALYSIS phase, which is the first compile phase
with type information.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In order to substitute any <code>expression</code> inside the macro we need to use the <code>$v</code> method. <code>$v</code> receives a closure as an
argument, and the closure is only allowed to substitute expressions, meaning classes inheriting
<code>org.codehaus.groovy.ast.expr.Expression</code>.</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_macroclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macroclass"></a>MacroClass</h7>
<div class="paragraph">
<p>As we mentioned earlier, the <code>macro</code> method is only capable of producing <code>statements</code> and <code>expressions</code>. But what if we
want to produce other types of nodes, such as a method, a field and so on?</p>
</div>
<div class="paragraph">
<p><code>org.codehaus.groovy.macro.transform.MacroClass</code> can be used to create <strong>classes</strong> (ClassNode instances) in our
transformations the same way we created statements and expressions with the <code>macro</code> method before.</p>
</div>
<div class="paragraph">
<p>The next example is a local transformation <code>@Statistics</code>. When applied to a given class, it will add two methods
<strong>getMethodCount()</strong> and <strong>getFieldCount()</strong> which return how many methods and fields within the class respectively. Here
is the marker annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.TYPE])
@GroovyASTTransformationClass(["metaprogramming.StatisticsASTTransformation"])
@interface Statistics {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the AST transformation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic
@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class StatisticsASTTransformation extends AbstractASTTransformation {

    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        ClassNode classNode = (ClassNode) nodes[1]
        ClassNode templateClass = buildTemplateClass(classNode)  <i class="conum" data-value="1"></i><b>(1)</b>

        templateClass.methods.each { MethodNode node -&gt;          <i class="conum" data-value="2"></i><b>(2)</b>
            classNode.addMethod(node)
        }
    }

    @CompileDynamic
    ClassNode buildTemplateClass(ClassNode reference) {          <i class="conum" data-value="3"></i><b>(3)</b>
        def methodCount = constX(reference.methods.size())       <i class="conum" data-value="4"></i><b>(4)</b>
        def fieldCount = constX(reference.fields.size())         <i class="conum" data-value="5"></i><b>(5)</b>

        return new MacroClass() {
            class Statistics {
                java.lang.Integer getMethodCount() {             <i class="conum" data-value="6"></i><b>(6)</b>
                    return $v { methodCount }
                }

                java.lang.Integer getFieldCount() {              <i class="conum" data-value="7"></i><b>(7)</b>
                    return $v { fieldCount }
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creating a template class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adding template class methods to the annotated class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Passing the reference class</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Extracting reference class method count value expression</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Extracting reference class field count value expression</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Building the <strong>getMethodCount()</strong> method using reference’s method count value expression</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Building the <strong>getFieldCount()</strong> method using reference’s field count value expression</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Basically we’ve created the <strong>Statistics</strong> class as a template to avoid writing low level AST API, then we
copied methods created in the template class to their final destination.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Types inside the <code>MacroClass</code> implementation should be resolved inside, that’s why we had to write
<code>java.lang.Integer</code> instead of simply writing <code>Integer</code>.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Notice that we’re using <code>@CompileDynamic</code>. That’s because the way we use <code>MacroClass</code> is like we
were actually implementing it. So if you were using <code>@CompileStatic</code> it will complain because an implementation of
an abstract class can’t be another different class.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_macro_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_macro_methods"></a>@Macro methods</h7>
<div class="paragraph">
<p>You have seen that by using <code>macro</code> you can save yourself a lot of work but you might wonder where
that method came from. You didn’t declare it or static import it. You can think of it as a special
global method (or if you prefer, a method on every <code>Object</code>). This is much like how the <code>println</code>
extension method is defined. But unlike <code>println</code> which becomes a method selected for execution
later in the compilation process, <code>macro</code> expansion is done early in the compilation process.
The declaration of <code>macro</code> as one of the available methods for this early expansion is done
by annotating a <code>macro</code> method definition with the <code>@Macro</code> annotation and making that method
available using a similar mechanism for extension modules. Such methods are known as <em>macro</em> methods
and the good news is you can define your own.</p>
</div>
<div class="paragraph">
<p>To define your own macro method, create a class in a similar way to an extension module and
add a method such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public class ExampleMacroMethods {

    @Macro
    public static Expression safe(MacroContext macroContext, MethodCallExpression callExpression) {
        return ternaryX(
                notNullX(callExpression.getObjectExpression()),
                callExpression,
                constX(null)
        );
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you would register this as an extension module using a <code>org.codehaus.groovy.runtime.ExtensionModule</code>
file within the <code>META-INF/groovy</code> directory.</p>
</div>
<div class="paragraph">
<p>Now, assuming that the class and meta info file are on your classpath, you can use the
macro method in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def nullObject = null
assert null == safe(safe(nullObject.hashcode()).toString())</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_testing_ast_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_ast_transformations"></a>Testing AST transformations</h6>
<div class="sect6">
<h7 id="_separating_source_trees"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_separating_source_trees"></a>Separating source trees</h7>
<div class="paragraph">
<p>This section is about good practices with regards to testing AST transformations. Previous sections highlighted the fact
that to be able to execute an AST transformation, it has to be precompiled. It might sound obvious but a lot of people
get caught on this, trying to use an AST transformation in the same source tree as where it is defined.</p>
</div>
<div class="paragraph">
<p>The first tip for testing AST transformation is therefore to separate test sources from the sources of the transform.
Again, this is nothing but best practices, but you must make sure that your build too does actually compile them separately.
This is the case by default with both <a href="http://maven.apache.org/">Apache Maven</a> and <a href="http://gradle.org/">Gradle</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_debugging_ast_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_debugging_ast_transformations"></a>Debugging AST transformations</h7>
<div class="paragraph">
<p>It is very handy to be able to put a breakpoint in an AST transformation, so that you can debug your code in the IDE.
However, you might be surprised to see that your IDE doesn’t stop on the breakpoint. The reason is actually simple: if
your IDE uses the Groovy compiler to compile the unit tests for your AST transformation, then the compilation is triggered
from the IDE, but the process which will compile the files doesn’t have debugging options. It’s only when the test case
is executed that the debugging options are set on the virtual machine. In short: it is too late, the class has been compiled
already, and your transformation is already applied.</p>
</div>
<div class="paragraph">
<p>A very easy workaround is to use the <code>GroovyTestCase</code> class which provides an <code>assertScript</code> method. This means that
instead of writing this in a test case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">static class Subject {
    @MyTransformToDebug
    void methodToBeTested() {}
}

void testMyTransform() {
    def c = new Subject()
    c.methodToBeTested()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testMyTransformWithBreakpoint() {
    assertScript '''
        import metaprogramming.MyTransformToDebug

        class Subject {
            @MyTransformToDebug
            void methodToBeTested() {}
        }
        def c = new Subject()
        c.methodToBeTested()
    '''
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference is that when you use <code>assertScript</code>, the code in the <code>assertScript</code> block is compiled <strong>when the
unit test is executed</strong>. That is to say that this time, the <code>Subject</code> class will be compiled with debugging active, and
the breakpoint is going to be hit.</p>
</div>
</div>
<div class="sect6">
<h7 id="_astmatcher"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_astmatcher"></a>ASTMatcher</h7>
<div class="paragraph">
<p>Sometimes you may want to make assertions over AST nodes; perhaps to filter the nodes, or to make sure a given
transformation has built the expected AST node.</p>
</div>
<div class="paragraph">
<p><strong>Filtering nodes</strong></p>
</div>
<div class="paragraph">
<p>For instance if you would like to apply a given transformation only to a specific set of AST nodes, you could
use <strong>ASTMatcher</strong> to filter these nodes. The following example shows how to transform a given expression to
another. Using <strong>ASTMatcher</strong> it looks for a specific expression <code>1 + 1</code> and it transforms it to <code>3</code>. That’s why
we called it the <code>@Joking</code> example.</p>
</div>
<div class="paragraph">
<p>First we create the <code>@Joking</code> annotation that only can be applied to methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.METHOD])
@GroovyASTTransformationClass(["metaprogramming.JokingASTTransformation"])
@interface Joking { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the transformation, that only applies an instance of <code>org.codehaus.groovy.ast.ClassCodeExpressionTransformer</code>
to all the expressions within the method code block.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@CompileStatic
@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class JokingASTTransformation extends AbstractASTTransformation {
    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        MethodNode methodNode = (MethodNode) nodes[1]

        methodNode
            .getCode()
            .visit(new ConvertOnePlusOneToThree(source))  <i class="conum" data-value="1"></i><b>(1)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Get the method’s code statement and apply the expression transformer</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>And this is when the <strong>ASTMatcher</strong> is used to apply the transformation only to those expressions matching
the expression <code>1 + 1</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class ConvertOnePlusOneToThree extends ClassCodeExpressionTransformer {
    SourceUnit sourceUnit

    ConvertOnePlusOneToThree(SourceUnit sourceUnit) {
        this.sourceUnit = sourceUnit
    }

    @Override
    Expression transform(Expression exp) {
        Expression ref = macro { 1 + 1 }     <i class="conum" data-value="1"></i><b>(1)</b>

        if (ASTMatcher.matches(ref, exp)) {  <i class="conum" data-value="2"></i><b>(2)</b>
            return macro { 3 }               <i class="conum" data-value="3"></i><b>(3)</b>
        }

        return super.transform(exp)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Builds the expression used as reference pattern</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Checks the current expression evaluated matches the reference expression</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If it matches then replaces the current expression with the expression built with <code>macro</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then you could test the implementation as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">package metaprogramming

class Something {
    @Joking
    Integer getResult() {
        return 1 + 1
    }
}

assert new Something().result == 3</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Unit testing AST transforms</strong></p>
</div>
<div class="paragraph">
<p>Normally we test AST transformations just checking that the final use of the transformation does what we expect. But
it would be great if we could have an easy way to check, for example, that the nodes the transformation adds are what
we expected from the beginning.</p>
</div>
<div class="paragraph">
<p>The following transformation adds a new method <code>giveMeTwo</code> to an annotated class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GroovyASTTransformation(phase = CompilePhase.INSTRUCTION_SELECTION)
class TwiceASTTransformation extends AbstractASTTransformation {

    static final String VAR_X = 'x'

    @Override
    void visit(ASTNode[] nodes, SourceUnit source) {
        ClassNode classNode = (ClassNode) nodes[1]
        MethodNode giveMeTwo = getTemplateClass(sumExpression)
            .getDeclaredMethods('giveMeTwo')
            .first()

        classNode.addMethod(giveMeTwo)                  <i class="conum" data-value="1"></i><b>(1)</b>
    }

    BinaryExpression getSumExpression() {               <i class="conum" data-value="2"></i><b>(2)</b>
        return macro {
            $v{ varX(VAR_X) } +
            $v{ varX(VAR_X) }
        }
    }

    ClassNode getTemplateClass(Expression expression) { <i class="conum" data-value="3"></i><b>(3)</b>
        return new MacroClass() {
            class Template {
                java.lang.Integer giveMeTwo(java.lang.Integer x) {
                    return $v { expression }
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Adding the method to the annotated class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Building a binary expression. The binary expression uses the same variable expression in both
sides of the <code>+</code> token (check <code>varX</code> method at <strong>org.codehaus.groovy.ast.tool.GeneralUtils</strong>).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Builds a new <strong>ClassNode</strong> with a method called <code>giveMeTwo</code> which returns the result of an expression
passed as parameter.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Now instead of creating a test executing the transformation over a given sample code. I would like to check that
the construction of the binary expression is done properly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testTestingSumExpression() {
    use(ASTMatcher) {                 <i class="conum" data-value="1"></i><b>(1)</b>
        TwiceASTTransformation sample = new TwiceASTTransformation()
        Expression referenceNode = macro {
            a + a                     <i class="conum" data-value="2"></i><b>(2)</b>
        }.withConstraints {           <i class="conum" data-value="3"></i><b>(3)</b>
            placeholder 'a'           <i class="conum" data-value="4"></i><b>(4)</b>
        }

        assert sample
            .sumExpression
            .matches(referenceNode)   <i class="conum" data-value="5"></i><b>(5)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using ASTMatcher as a category</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Build a template node</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply some constraints to that template node</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Tells compiler that <code>a</code> is a placeholder.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Asserts reference node and current node are equal</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Of course you can/should always check the actual execution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testASTBehavior() {
    assertScript '''
    package metaprogramming

    @Twice
    class AAA {

    }

    assert new AAA().giveMeTwo(1) == 2
    '''
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_asttest"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_asttest"></a>ASTTest</h7>
<div class="paragraph">
<p>Last but not least, testing an AST transformation is also about testing the state of the AST <strong>during compilation</strong>. Groovy
provides a tool named <code>@ASTTest</code> for this: it is an annotation that will let you add assertions on an abstract syntax
tree. Please check the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-ASTTest">documentation for ASTTest</a> for more details.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_external_references"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_external_references"></a>External references</h6>
<div class="paragraph">
<p>If you are interested in a step-by-step tutorial about writing AST transformations, you can follow
<a href="http://melix.github.io/ast-workshop/">this workshop</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-grape"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-grape"></a>3.5. Dependency management with Grape</h3>
<div class="sect3">
<h4 id="_quick_start"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_quick_start"></a>3.5.1. Quick start</h4>
<div class="sect4">
<h5 id="_add_a_dependency"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_add_a_dependency"></a>Add a Dependency</h5>
<div class="paragraph">
<p>Grape is a JAR dependency manager embedded into Groovy. Grape lets you quickly add maven repository dependencies to your
classpath, making scripting even easier. The simplest use is as simple as adding an annotation to your script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab(group='org.springframework', module='spring-orm', version='3.2.5.RELEASE')
import org.springframework.jdbc.core.JdbcTemplate</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Grab</code> also supports a shorthand notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.springframework:spring-orm:3.2.5.RELEASE')
import org.springframework.jdbc.core.JdbcTemplate</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that we are using an annotated import here, which is the recommended way. You can also search for
dependencies on <a href="http://mvnrepository.com/">mvnrepository.com</a> and it will
provide you the <code>@Grab</code> annotation form of the <code>pom.xml</code> entry.</p>
</div>
</div>
<div class="sect4">
<h5 id="Grape-SpecifyAdditionalRepositories"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-SpecifyAdditionalRepositories"></a>Specify Additional Repositories</h5>
<div class="paragraph">
<p>Not all dependencies are in maven central. You can add new ones like
this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GrabResolver(name='restlet', root='http://maven.restlet.org/')
@Grab(group='org.restlet', module='org.restlet', version='1.1.6')</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-MavenClassifiers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MavenClassifiers"></a>Maven Classifiers</h5>
<div class="paragraph">
<p>Some maven dependencies need classifiers in order to be able to resolve.
You can fix that like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab(group='net.sf.json-lib', module='json-lib', version='2.2.3', classifier='jdk15')</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-ExcludingTransitiveDependencies"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-ExcludingTransitiveDependencies"></a>Excluding Transitive Dependencies</h5>
<div class="paragraph">
<p>Sometimes you will want to exclude transitive dependencies as you might
be already using a slightly different but compatible version of some
artifact. You can do this as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('net.sourceforge.htmlunit:htmlunit:2.8')
@GrabExclude('xml-apis:xml-apis')</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-JDBCDrivers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-JDBCDrivers"></a>JDBC Drivers</h5>
<div class="paragraph">
<p>Because of the way JDBC drivers are loaded, you’ll need to configure
Grape to attach JDBC driver dependencies to the system class loader.
I.e:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@GrabConfig(systemClassLoader=true)
@Grab(group='mysql', module='mysql-connector-java', version='5.1.6')</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-UsingGrapeFromtheGroovyShell"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-UsingGrapeFromtheGroovyShell"></a>Using Grape From the Groovy Shell</h5>
<div class="paragraph">
<p>From groovysh use the method call variant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">groovy.grape.Grape.grab(group:'org.springframework', module:'spring', version:'2.5.6')</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-Proxysettings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Proxysettings"></a>Proxy settings</h5>
<div class="paragraph">
<p>If you are behind a firewall and/or need to use Groovy/Grape through a
proxy server, you can specify those settings on the command like via the
<code>http.proxyHost</code> and <code>http.proxyPort</code> system properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy -Dhttp.proxyHost=yourproxy -Dhttp.proxyPort=8080 yourscript.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>Or you can make this system wide by adding these properties to your
JAVA_OPTS environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>JAVA_OPTS = -Dhttp.proxyHost=yourproxy -Dhttp.proxyPort=8080</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-Logging"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Logging"></a>Logging</h5>
<div class="paragraph">
<p>If you want to see what Grape is doing set the system property
<code>groovy.grape.report.downloads</code> to <code>true</code> (e.g. add
<code>-Dgroovy.grape.report.downloads=true</code> to invocation or JAVA_OPTS) and Grape will
print the following infos to System.error:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Starting resolve of a dependency</p>
</li>
<li>
<p>Starting download of an artifact</p>
</li>
<li>
<p>Retrying download of an artifact</p>
</li>
<li>
<p>Download size and time for downloaded artifacts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To log with even more verbosity, increase the Ivy log level
(defaults to <code>-1</code>). For example <code>-Divy.message.logger.level=4</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Grape-Detail"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Detail"></a>3.5.2. Detail</h4>
<div class="paragraph">
<p>Grape (The <em>Groovy Adaptable Packaging Engine</em> or <em>Groovy Advanced
Packaging Engine</em>) is the infrastructure enabling the grab() calls in
Groovy, a set of classes leveraging <a href="http://ant.apache.org/ivy/">Ivy</a> to allow for a repository driven
module system for Groovy. This allows a developer to write a script with
an essentially arbitrary library requirement, and ship just the script.
Grape will, at runtime, download as needed and link the named libraries
and all dependencies forming a transitive closure when the script is run
from existing repositories such as JCenter, Ibiblio and java.net.</p>
</div>
<div class="paragraph">
<p>Grape follows the Ivy conventions for module version identification,
with naming change.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>group</code> - Which module group the module comes from. Translates
directly to a Maven groupId or an Ivy Organization. Any group matching
<code>/groovy[x][\..*]^/</code> is reserved and may have special meaning to the
groovy endorsed modules.</p>
</li>
<li>
<p><code>module</code> - The name of the module to load. Translated directly to a
Maven artifactId or an Ivy artifact.</p>
</li>
<li>
<p><code>version</code> - The version of the module to use. Either a literal version
`1.1-RC3' or an Ivy Range `[2.2.1,)' meaning 2.2.1 or any greater
version).</p>
</li>
<li>
<p><code>classifier</code> - The optional classifier to use (for example, <em>jdk15</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The downloaded modules will be stored according to Ivy’s standard
mechanism with a cache root of <code>~/.groovy/grapes</code></p>
</div>
</div>
<div class="sect3">
<h4 id="Grape-Usage"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Usage"></a>3.5.3. Usage</h4>
<div class="sect4">
<h5 id="Grape-Annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Annotation"></a>Annotation</h5>
<div class="paragraph">
<p>One or more <code>groovy.lang.Grab</code> annotations can be added at any place that
annotations are accepted to tell the compiler that this code relies on
the specific library. This will have the effect of adding the library to
the classloader of the groovy compiler. This annotation is detected and
evaluated before any other resolution of classes in the script, so
imported classes can be properly resolved by a <code>@Grab</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import com.jidesoft.swing.JideSplitButton
@Grab(group='com.jidesoft', module='jide-oss', version='[2.2.1,2.3.0)')
public class TestClassAnnotation {
    public static String testMethod () {
        return JideSplitButton.class.name
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An appropriate <code>grab(…​)</code> call will be added to the static initializer
of the class of the containing class (or script class in the case of an
annotated script element).</p>
</div>
</div>
<div class="sect4">
<h5 id="Grape-MultipleGrapeAnnotations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MultipleGrapeAnnotations"></a>Multiple Grape Annotations</h5>
<div class="paragraph">
<p>In early versions of Groovy, if you wanted to use a Grab annotation multiple times
on the same node you had to use the <code>@Grapes</code> annotation, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grapes([
   @Grab(group='commons-primitives', module='commons-primitives', version='1.0'),
   @Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='0.9.7')])
class Example {
// ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise you’d encounter the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Cannot specify duplicate annotation on the same member</pre>
</div>
</div>
<div class="paragraph">
<p>But in recent versions, @Grapes is purely optional.</p>
</div>
<div class="paragraph">
<p>Technical notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Originally, Groovy stored the Grab annotations for access at runtime
and duplicates aren’t allowed in the bytecode. In current versions, @Grab has only
SOURCE retention, so the multiple occurrences aren’t an issue.</p>
</li>
<li>
<p>Future versions of Grape may support using the Grapes annotation to
provide a level of structuring, e.g. allowing a GrabExclude or GrabResolver
annotation to apply to only a subset of the Grab annotations.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Grape-Methodcall"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Methodcall"></a>Method call</h5>
<div class="paragraph">
<p>Typically a call to grab will occur early in the script or in class
initialization. This is to insure that the libraries are made available
to the ClassLoader before the groovy code relies on the code. A couple
of typical calls may appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.grape.Grape
// random maven library
Grape.grab(group:'com.jidesoft', module:'jide-oss', version:'[2.2.0,)')
Grape.grab([group:'org.apache.ivy', module:'ivy', version:'2.0.0-beta1', conf:['default', 'optional']],
     [group:'org.apache.ant', module:'ant', version:'1.7.0'])</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Multiple calls to grab in the same context with the same parameters
should be idempotent. However, if the same code is called with a
different <code>ClassLoader</code> context then resolution may be re-run.</p>
</li>
<li>
<p>If the <code>args</code> map passed into the <code>grab</code> call has an attribute
<code>noExceptions</code> that evaluates true no exceptions will be thrown.</p>
</li>
<li>
<p><code>grab</code> requires that a <code>RootLoader</code> or <code>GroovyClassLoader</code> be specified or
be in the <code>ClassLoader</code> chain of the calling class. By default failure to
have such a <code>ClassLoader</code> available will result in module resolution and
an exception being thrown</p>
<div class="ulist">
<ul>
<li>
<p>The ClassLoader passed in via the <code>classLoader:</code> argument and it’s
parent classloaders.</p>
</li>
<li>
<p>The ClassLoader of the object passed in as the <code>referenceObject:</code>
argument, and it’s parent classloaders.</p>
</li>
<li>
<p>The ClassLoader of the class issuing the call to <code>grab</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="Grape-grabHashMapParameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-grabHashMapParameters"></a>grab(HashMap) Parameters</h6>
<div class="ulist">
<ul>
<li>
<p><code>group:</code> - &lt;String&gt; - Which module group the module comes from.
Translates directly to a Maven groupId. Any group matching
<code>/groovy(|\..|x|x\..)/</code> is reserved and may have special meaning to the
groovy endorsed modules.</p>
</li>
<li>
<p><code>module:</code> - &lt;String&gt; - The name of the module to load. Translated
directly to a Maven artifactId.</p>
</li>
<li>
<p><code>version:</code> - &lt;String&gt; and possibly &lt;Range&gt; - The version of the module
to use. Either a literal version `1.1-RC3' or an Ivy Range `[2.2.1,)'
meaning 2.2.1 or any greater version).</p>
</li>
<li>
<p><code>classifier:</code> - &lt;String&gt; - The Maven classifier to resolve by.</p>
</li>
<li>
<p><code>conf:</code> - &lt;String&gt;, default <code>default' - The configuration or scope of
the module to download. The default conf is `default:</code> which maps to the
maven <code>runtime</code> and <code>master</code> scopes.</p>
</li>
<li>
<p><code>force:</code>- &lt;boolean&gt;, defaults true - Used to indicate that this
revision must be used in case of conflicts, independently of</p>
</li>
<li>
<p>conflicts manager</p>
</li>
<li>
<p><code>changing:</code> - &lt;boolean&gt;, default false - Whether the artifact can
change without it’s version designation changing.</p>
</li>
<li>
<p><code>transitive:</code> - &lt;boolean&gt;, default true - Whether to resolve other
dependencies this module has or not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are two principal variants of <code>grab</code>, one with a single Map and
one with an arguments Map and multiple dependencies map. A call to the
single map grab is the same as calling grab with the same map passed in
twice, so grab arguments and dependencies can be mixed in the same map,
and grab can be called as a single method with named parameters.</p>
</div>
<div class="paragraph">
<p>There are synonyms for these parameters. Submitting more than one is a
runtime exception.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>group:</code>, <code>groupId:</code>, <code>organisation:</code>, <code>organization:</code>, <code>org:</code></p>
</li>
<li>
<p><code>module:</code>, <code>artifactId:</code>, <code>artifact:</code></p>
</li>
<li>
<p><code>version:</code>, <code>revision:</code>, <code>rev:</code></p>
</li>
<li>
<p><code>conf:</code>, <code>scope:</code>, <code>configuration:</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Grape-ArgumentsMaparguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-ArgumentsMaparguments"></a>Arguments Map arguments</h6>
<div class="ulist">
<ul>
<li>
<p><code>classLoader:</code> - &lt;GroovyClassLaoder&gt; or &lt;RootClassLoader&gt; - The
ClassLoader to add resolved Jars to</p>
</li>
<li>
<p><code>refObject:</code> - &lt;Object&gt; - The closest parent ClassLoader for the
object’s class will be treated as though it were passed in as
<code>classLoader:</code></p>
</li>
<li>
<p><code>validate:</code> - &lt;boolean&gt;, default false - Should poms or ivy files be
validated (true), or should we trust the cache (false).</p>
</li>
<li>
<p><code>noExceptions:</code> - &lt;boolean&gt;, default false - If ClassLoader resolution
or repository querying fails, should we throw an exception (false) or
fail silently (true).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-CommandLineTool"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-CommandLineTool"></a>Command Line Tool</h5>
<div class="paragraph">
<p>Grape added a command line executable `grape' that allows for the
inspection and management of the local grape cache.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grape install [-hv] &lt;group&gt; &lt;module&gt; [&lt;version&gt;] [&lt;classifier&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>This installs the specified groovy module or maven artifact. If a
version is specified that specific version will be installed, otherwise
the most recent version will be used (as if `*' we passed in).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grape list</pre>
</div>
</div>
<div class="paragraph">
<p>Lists locally installed modules (with their full maven name in the case
of groovy modules) and versions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grape resolve [-adhisv] (&lt;groupId&gt; &lt;artifactId&gt; &lt;version&gt;)+</pre>
</div>
</div>
<div class="paragraph">
<p>This returns the file locations of the jars representing the artifacts
for the specified module(s) and the respective transitive dependencies.
You may optionally pass in -ant, -dos, or -shell to get the dependencies
expressed in a format applicable for an ant script, windows batch file,
or unix shell script respectively. -ivy may be passed to see the
dependencies expressed in an ivy like format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grape uninstall [-hv] &lt;group&gt; &lt;module&gt; &lt;version&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This uninstalls a particular grape: it non-transitively removes the
respective jar file from the grape cache.</p>
</div>
</div>
<div class="sect4">
<h5 id="Grape-Advancedconfiguration"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-Advancedconfiguration"></a>Advanced configuration</h5>
<div class="sect5">
<h6 id="Grape-RepositoryDirectory"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-RepositoryDirectory"></a>Repository Directory</h6>
<div class="paragraph">
<p>If you need to change the directory grape uses for downloading libraries
you can specify the grape.root system property to change the default
(which is ~/.groovy/grapes)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy -Dgrape.root=/repo/grapes yourscript.groovy</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="Grape-CustomizeIvysettings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-CustomizeIvysettings"></a>Customize Ivy settings</h6>
<div class="paragraph">
<p>You can customize the ivy settings that Grape uses by creating a
~/.groovy/grapeConfig.xml file. If no such file exists,
<a href="https://github.com/apache/groovy/blob/master/src/resources/groovy/grape/defaultGrapeConfig.xml">here</a>
are the default settings used by Grape.</p>
</div>
<div class="paragraph">
<p>For more information on how to customize these settings, please refer to
the <a href="https://ant.apache.org/ivy/history/latest-milestone/index.html">Ivy
documentation</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Grape-MoreExamples"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#Grape-MoreExamples"></a>More Examples</h5>
<div class="paragraph">
<p>Using Apache Commons Collections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// create and use a primitive array list
@Grab(group='commons-primitives', module='commons-primitives', version='1.0')
import org.apache.commons.collections.primitives.ArrayIntList

def createEmptyInts() { new ArrayIntList() }

def ints = createEmptyInts()
ints.add(0, 42)
assert ints.size() == 1
assert ints.get(0) == 42</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using TagSoup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// find the PDF links of the Java specifications
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2.1')
def getHtml() {
    def parser = new XmlParser(new org.ccil.cowan.tagsoup.Parser())
    parser.parse("https://docs.oracle.com/javase/specs/")
}
html.body.'**'.a.@href.grep(~/.*\.pdf/).each{ println it }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using Google Collections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import com.google.common.collect.HashBiMap
@Grab(group='com.google.code.google-collections', module='google-collect', version='snapshot-20080530')
def getFruit() { [grape:'purple', lemon:'yellow', orange:'orange'] as HashBiMap }
assert fruit.lemon == 'yellow'
assert fruit.inverse().yellow == 'lemon'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Launching a Jetty server to serve Groovy templates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.eclipse.jetty.aggregate:jetty-server:8.1.19.v20160209')
@Grab('org.eclipse.jetty.aggregate:jetty-servlet:8.1.19.v20160209')
@Grab('javax.servlet:javax.servlet-api:3.0.1')
import org.eclipse.jetty.server.Server
import org.eclipse.jetty.servlet.ServletContextHandler
import groovy.servlet.TemplateServlet

def runServer(duration) {
    def server = new Server(8080)
    def context = new ServletContextHandler(server, "/", ServletContextHandler.SESSIONS)
    context.resourceBase = "."
    context.addServlet(TemplateServlet, "*.gsp")
    server.start()
    sleep duration
    server.stop()
}

runServer(10000)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Grape will download Jetty and its dependencies on first launch of this
script, and cache them. We create a new Jetty Server on port 8080,
then expose Groovy’s TemplateServlet at the root of the context — Groovy
comes with its own powerful template engine mechanism. We start the
server and let it run for a certain duration. Each time someone will hit
http://localhost:8080/somepage.gsp, it will display the somepage.gsp
template to the user — those template pages should be situated in the
same directory as this server script.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_guide"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_guide"></a>3.6. Testing Guide</h3>
<div class="sect3">
<h4 id="_introduction_3"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_3"></a>3.6.1. Introduction</h4>
<div class="paragraph">
<p>The Groovy programming language comes with great support for writing tests. In addition to the language
features and test integration with state-of-the-art testing libraries and frameworks, the Groovy ecosystem has born
a rich set of testing libraries and frameworks.</p>
</div>
<div class="paragraph">
<p>This chapter will start with language specific testing features and continue with a closer look at JUnit
integration, Spock for specifications, and Geb for functional tests. Finally, we’ll do an overview of other testing
libraries known to be working with Groovy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_language_features"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_language_features"></a>3.6.2. Language Features</h4>
<div class="paragraph">
<p>Besides integrated support for JUnit, the Groovy programming language comes with features that have proven
to be very valuable for test-driven development. This section gives insight on them.</p>
</div>
<div class="sect4">
<h5 id="_power_assertions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_power_assertions"></a>Power Assertions</h5>
<div class="paragraph">
<p>Writing tests means formulating assumptions by using assertions. In Java this can be done by using the <code>assert</code>
keyword that has been added in J2SE 1.4. In Java, <code>assert</code> statements can be enabled via the JVM parameters <code>-ea</code>
(or <code>-enableassertions</code>) and <code>-da</code> (or <code>-disableassertions</code>). Assertion statements in Java are disabled by default.</p>
</div>
<div class="paragraph">
<p>Groovy comes with a rather <em>powerful variant</em> of <code>assert</code> also known as <em>power assertion statement</em>. Groovy’s power
<code>assert</code> differs from the Java version in its output given the boolean expression validates to <code>false</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def x = 1
assert x == 2

// Output:             <i class="conum" data-value="1"></i><b>(1)</b>
//
// Assertion failed:
// assert x == 2
//        | |
//        1 false</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This section shows the std-err output</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>java.lang.AssertionError</code> that is thrown whenever the assertion can not be validated successfully, contains
an extended version of the original exception message. The power assertion output shows evaluation results from
the outer to the inner expression.</p>
</div>
<div class="paragraph">
<p>The power assertion statements true power unleashes in complex Boolean statements, or statements with
collections or other <code>toString</code>-enabled classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def x = [1,2,3,4,5]
assert (x &lt;&lt; 6) == [6,7,8,9,10]

// Output:
//
// Assertion failed:
// assert (x &lt;&lt; 6) == [6,7,8,9,10]
//         | |     |
//         | |     false
//         | [1, 2, 3, 4, 5, 6]
//         [1, 2, 3, 4, 5, 6]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another important difference from Java is that in Groovy assertions are <em>enabled by default</em>. It has been a language design
decision to remove the possibility to deactivate assertions. Or, as Bertrand Meyer stated, <code>it makes no sense to take
off your swim ring if you put your feet into real water</code>.</p>
</div>
<div class="paragraph">
<p>One thing to be aware of are methods with side-effects inside Boolean expressions in power assertion statements. As
the internal error message construction mechanism does only store references to instances under target,
 it happens that the error message text is invalid at rendering time in case of side-effecting methods involved:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert [[1,2,3,3,3,3,4]].first().unique() == [1,2,3]

// Output:
//
// Assertion failed:
// assert [[1,2,3,3,3,3,4]].first().unique() == [1,2,3]
//                          |       |        |
//                          |       |        false
//                          |       [1, 2, 3, 4]
//                          [1, 2, 3, 4]           <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The error message shows the actual state of the collection, not the state before the <code>unique</code> method was applied</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you choose to provide a custom assertion error message this can be done by using the Java syntax <code>assert
expression1 : expression2</code> where <code>expression1</code> is the Boolean expression and <code>expression2</code> is the custom error message.
 Be aware though that this will disable the power assert and will fully fallback to custom
 error messages on assertion errors.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_mocking_and_stubbing"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mocking_and_stubbing"></a>Mocking and Stubbing</h5>
<div class="paragraph">
<p>Groovy has excellent built-in support for a range of mocking and stubbing alternatives. When using Java, dynamic mocking
frameworks are very popular. A key reason for this is that it is hard work creating custom hand-crafted mocks using Java.
Such frameworks can be used easily with Groovy if you choose but creating custom mocks is much easier in Groovy. You
can often get away with simple maps or closures to build your custom mocks.</p>
</div>
<div class="paragraph">
<p>The following sections show ways to create mocks and stubs with Groovy language features only.</p>
</div>
<div class="sect5">
<h6 id="_map_coercion"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_map_coercion"></a>Map Coercion</h6>
<div class="paragraph">
<p>By using maps or expandos, we can incorporate desired behaviour of a collaborator very easily as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TranslationService {
    String convert(String key) {
        return "test"
    }
}

def service = [convert: { String key -&gt; 'some text' }] as TranslationService
assert 'some text' == service.convert('key.text')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>as</code> operator can be used to coerce a map to a particular class. The given map keys are interpreted as
method names and the values, being <code>groovy.lang.Closure</code> blocks, are interpreted as method code blocks.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Be aware that map coercion can get into the way if you deal with custom <code>java.util.Map</code> descendant classes in combination
with the <code>as</code> operator. The map coercion mechanism is targeted directly at certain collection classes, it doesn’t take
custom classes into account.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_closure_coercion_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_closure_coercion_2"></a>Closure Coercion</h6>
<div class="paragraph">
<p>The 'as' operator can be used with closures in a neat way which is great for developer testing in simple scenarios.
We haven’t found this technique to be so powerful that we want to do away with dynamic mocking, but it can be very
useful in simple cases none-the-less.</p>
</div>
<div class="paragraph">
<p>Classes or interfaces holding a single method, including SAM (single abstract method) classes, can be used to coerce
a closure block to be an object of the given type. Be aware that for doing this, Groovy internally create a proxy object
descending for the given class. So the object will not be a direct instance of the given class. This important if, for
example, the generated proxy object’s meta-class is altered afterwards.</p>
</div>
<div class="paragraph">
<p>Let’s have an example on coercing a closure to be of a specific type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def service = { String key -&gt; 'some text' } as TranslationService
assert 'some text' == service.convert('key.text')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy supports a feature called implicit SAM coercion. This means that the <code>as</code> operator is not necessary in situations
where the runtime can infer the target SAM type. This type of coercion might be useful in tests to mock entire SAM
classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class BaseService {
    abstract void doSomething()
}

BaseService service = { -&gt; println 'doing something' }
service.doSomething()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mockfor_and_stubfor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mockfor_and_stubfor"></a>MockFor and StubFor</h6>
<div class="paragraph">
<p>The Groovy mocking and stubbing classes can be found in the <code>groovy.mock.interceptor</code> package.</p>
</div>
<div class="paragraph">
<p>The <code>MockFor</code> class supports (typically unit) testing of classes in isolation by allowing a <em>strictly ordered</em> expectation
of the behavior of collaborators to be defined. A typical test scenario involves a class under test and one or more collaborators. In such a scenario it is
often desirable to just test the business logic of the class under test. One strategy for doing that is to replace
the collaborator instances with simplified mock objects to help isolate out the logic in the test target. MockFor
allows such mocks to be created using meta-programming. The desired behavior of collaborators is defined as a behavior
specification. The behavior is enforced and checked automatically.</p>
</div>
<div class="paragraph">
<p>Let’s assume our target classes looked like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String first, last
}

class Family {
    Person father, mother
    def nameOfMother() { "$mother.first $mother.last" }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With <code>MockFor</code>, a mock expectation is always sequence dependent and its use automatically ends with a call to <code>verify</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def mock = new MockFor(Person)      <i class="conum" data-value="1"></i><b>(1)</b>
mock.demand.getFirst{ 'dummy' }
mock.demand.getLast{ 'name' }
mock.use {                          <i class="conum" data-value="2"></i><b>(2)</b>
    def mary = new Person(first:'Mary', last:'Smith')
    def f = new Family(mother:mary)
    assert f.nameOfMother() == 'dummy name'
}
mock.expect.verify()                <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a new mock is created by a new instance of <code>MockFor</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a <code>Closure</code> is passed to <code>use</code> which enables the mocking functionality</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>a call to <code>verify</code> checks whether the sequence and number of method calls is as expected</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>StubFor</code> class supports (typically unit) testing of classes in isolation by allowing a <em>loosely-ordered</em> expectation
of the behavior of collaborators to be defined. A typical test scenario involves a class under test and one or more
collaborators. In such a scenario it is often desirable to just test the business logic of the CUT. One strategy for
doing that is to replace the collaborator instances with simplified stub objects to help isolate out the logic
in the target class. <code>StubFor</code> allows such stubs to be created using meta-programming. The desired behavior of
collaborators is defined as a behavior specification.</p>
</div>
<div class="paragraph">
<p>In contrast to <code>MockFor</code> the stub expectation checked with <code>verify</code> is sequence independent and its use is optional:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def stub = new StubFor(Person)      <i class="conum" data-value="1"></i><b>(1)</b>
stub.demand.with {                  <i class="conum" data-value="2"></i><b>(2)</b>
    getLast{ 'name' }
    getFirst{ 'dummy' }
}
stub.use {                          <i class="conum" data-value="3"></i><b>(3)</b>
    def john = new Person(first:'John', last:'Smith')
    def f = new Family(father:john)
    assert f.father.first == 'dummy'
    assert f.father.last == 'name'
}
stub.expect.verify()                <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a new stub is created by a new instance of <code>StubFor</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>with</code> method is used for delegating all calls inside the closure to the <code>StubFor</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>a <code>Closure</code> is passed to <code>use</code> which enables the stubbing functionality</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>a call to <code>verify</code> (optional) checks whether the number of method calls is as expected</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>MockFor</code> and <code>StubFor</code> can not be used to test statically compiled classes e.g for Java classes or Groovy classes that
make use of <code>@CompileStatic</code>. To stub and/or mock these classes you can use Spock or one of the Java mocking libraries.</p>
</div>
</div>
<div class="sect5">
<h6 id="testing_guide_emc"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#testing_guide_emc"></a>Expando Meta-Class (EMC)</h6>
<div class="paragraph">
<p>Groovy includes a special <code>MetaClass</code> the so-called <code>ExpandoMetaClass</code> (EMC). It allows to dynamically add methods,
constructors, properties and static methods using a neat closure syntax.</p>
</div>
<div class="paragraph">
<p>Every <code>java.lang.Class</code> is supplied with a special <code>metaClass</code> property that will give a reference to an
<code>ExpandoMetaClass</code> instance. The expando meta-class is not restricted to custom classes, it can be used for
JDK classes like for example <code>java.lang.String</code> as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String.metaClass.swapCase = {-&gt;
    def sb = new StringBuffer()
    delegate.each {
        sb &lt;&lt; (Character.isUpperCase(it as char) ? Character.toLowerCase(it as char) :
            Character.toUpperCase(it as char))
    }
    sb.toString()
}

def s = "heLLo, worLD!"
assert s.swapCase() == 'HEllO, WORld!'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ExpandoMetaClass</code> is a rather good candidate for mocking functionality as it allows for more advanced stuff
like mocking static methods</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
}

Book.metaClass.static.create &lt;&lt; { String title -&gt; new Book(title:title) }

def b = Book.create("The Stand")
assert b.title == 'The Stand'</code></pre>
</div>
</div>
<div class="paragraph">
<p>or even constructors</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Book.metaClass.constructor &lt;&lt; { String title -&gt; new Book(title:title) }

def b = new Book("The Stand")
assert b.title == 'The Stand'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Mocking constructors might seem like a hack that’s better not even to be considered but even there might be valid
use cases. An example can be found in Grails where domain class constructors are added at run-time with the
help of <code>ExpandoMetaClass</code>. This lets the domain object register itself in the Spring application context and allows
for injection of services or other beans controlled by the dependency-injection container.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you want to change the <code>metaClass</code> property on a per test method level you need to remove the changes that were
done to the meta-class, otherwise those changes would be persistent across test method calls. Changes are removed by
replacing the meta-class in the <code>GroovyMetaClassRegistry</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">GroovySystem.metaClassRegistry.setMetaClass(java.lang.String, null)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another alternative is to register a <code>MetaClassRegistryChangeEventListener</code>, track the changed classes and remove
the changes in the cleanup method of your chosen testing runtime. A good example can be found
<a href="https://github.com/grails/grails-core/blob/master/grails-bootstrap/src/main/groovy/grails/build/support/MetaClassRegistryCleaner.java">in the Grails web
development framework</a>.</p>
</div>
<div class="paragraph">
<p>Besides using the <code>ExpandoMetaClass</code> on a class-level, there is also support for using the meta-class on a per-object
level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Stand")
b.metaClass.getTitle {-&gt; 'My Title' }

assert b.title == 'My Title'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case the meta-class change is related to the instance only. Depending on the test scenario this might be a better
fit than the global meta-class change.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_gdk_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gdk_methods"></a>GDK Methods</h5>
<div class="paragraph">
<p>The following section gives a brief overview on GDK methods that can be leveraged in test case scenarios, for example for
test data generation.</p>
</div>
<div class="sect5">
<h6 id="_iterable_combinations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterable_combinations"></a>Iterable#combinations</h6>
<div class="paragraph">
<p>The <code>combinations</code> method that is added on <code>java.lang.Iterable</code> compliant classes can be used to get a list of
combinations from a list containing two or more sub-lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testCombinations() {
    def combinations = [[2, 3],[4, 5, 6]].combinations()
    assert combinations == [[2, 4], [3, 4], [2, 5], [3, 5], [2, 6], [3, 6]]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method could be used in test case scenarios to generate all possible argument combinations for a specific method
call.</p>
</div>
</div>
<div class="sect5">
<h6 id="_iterable_eachcombination"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterable_eachcombination"></a>Iterable#eachCombination</h6>
<div class="paragraph">
<p>The <code>eachCombination</code> method that is added on <code>java.lang.Iterable</code> can be used to apply a function (or in this
 case a <code>groovy.lang.Closure</code>) to each if the combinations that has been built by the <code>combinations</code> method:</p>
</div>
<div class="paragraph">
<p><code>eachCombination</code> is a GDK method that is added to all classes conforming to the <code>java.lang.Iterable</code> interface.
It applies a function on each combination of the input lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testEachCombination() {
    [[2, 3],[4, 5, 6]].eachCombination { println it[0] + it[1] }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method could be used in the testing context to call methods with each of the generated combinations.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tool_support"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tool_support"></a>Tool Support</h5>
<div class="sect5">
<h6 id="_test_code_coverage"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_test_code_coverage"></a>Test Code Coverage</h6>
<div class="paragraph">
<p>Code coverage is a useful measure of the effectiveness of (unit) tests. A program with high code coverage has a
lower chance to hold critical bugs than a program with no or low coverage. To get code coverage metrics,
the generated byte-code usually needs to be instrumented before the tests are executed. One tool with Groovy support
 for this task is <a href="http://cobertura.github.io/cobertura/">Cobertura</a>.</p>
</div>
<div class="paragraph">
<p>Various frameworks and build tools come with Cobertura integration. For Grails, there is the <a href="http://grails.org/plugin/code-coverage">code coverage plugin</a> based
on Cobertura, for Gradle there is the <a href="https://github.com/eriwen/gradle-cobertura-plugin">gradle-cobertura plugin</a>, to name only two of them.</p>
</div>
<div class="paragraph">
<p>The following code listing shows an example on how to enable Cobertura test coverage reports in a Gradle build script from
a Groovy project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def pluginVersion = '&lt;plugin version&gt;'
def groovyVersion = '&lt;groovy version&gt;'
def junitVersion = '&lt;junit version&gt;'

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.eriwen:gradle-cobertura-plugin:${pluginVersion}'
    }
}

apply plugin: 'groovy'
apply plugin: 'cobertura'

repositories {
    mavenCentral()
}

dependencies {
    compile "org.codehaus.groovy:groovy-all:${groovyVersion}"
    testCompile "junit:junit:${junitVersion}"
}

cobertura {
    format = 'html'
    includes = ['**/*.java', '**/*.groovy']
    excludes = ['com/thirdparty/**/*.*']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Several output formats can be chosen for Cobertura coverage reports and test code coverage reports can be added to
continuous integration build tasks.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_testing_with_junit"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_with_junit"></a>3.6.3. Testing with JUnit</h4>
<div class="paragraph">
<p>Groovy simplifies JUnit testing in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You use the same overall practices as you would when testing with Java but you
can adopt much of Groovy’s concise syntax in your tests making them succinct. You can even use
the capabilities for writing testing domain specific languages (DSLs) if you feel so inclined.</p>
</li>
<li>
<p>There are numerous helper classes that simplify many testing activities. The details differ
in some cases depending on the version of JUnit you are using. We’ll cover those details shortly.</p>
</li>
<li>
<p>Groovy’s PowerAssert mechanism is wonderful to use in your tests</p>
</li>
<li>
<p>Groovy deems that tests are so important you should be able to run them as easily as scripts or classes.
This is why Groovy includes an automatic test runner when using the <code>groovy</code> command or the GroovyConsole.
This gives you some additional options over and above running your tests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the following sections we will have a closer look at JUnit 3, 4 and 5 Groovy integration.</p>
</div>
<div class="sect4">
<h5 id="_junit_3"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_3"></a>JUnit 3</h5>
<div class="paragraph">
<p>Maybe one of the most prominent Groovy classes supporting JUnit 3 tests is the <code>GroovyTestCase</code> class. Being
derived from <code>junit.framework.TestCase</code> it offers a bunch of additional methods that make testing in Groovy a breeze.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although <code>GroovyTestCase</code> inherits from <code>TestCase</code> doesn’t mean you can’t use JUnit 4 features in your project. In fact,
the most recent Groovy versions come with a bundled JUnit 4 and that comes with a backwards compatible <code>TestCase</code>
implementation. There have been some discussion on the Groovy mailing-list on whether to use <code>GroovyTestCase</code> or JUnit 4
with the result that it is mostly a matter of taste, but with <code>GroovyTestCase</code> you get a bunch of methods for free that
make certain types of tests easier to write.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In this section, we will have a look at some of the methods provided by <code>GroovyTestCase</code>. A full list of these can be
found in the JavaDoc documentation for <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/test/GroovyTestCase.html">groovy.test.GroovyTestCase</a> ,
don’t forget it is inherited from <code>junit.framework.TestCase</code> which inherits all the <code>assert*</code> methods.</p>
</div>
<div class="sect5">
<h6 id="_assertion_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_assertion_methods"></a>Assertion Methods</h6>
<div class="paragraph">
<p><code>GroovyTestCase</code> is inherited from <code>junit.framework.TestCase</code> therefore it inherits a large number of assertion methods
being available to be called in every test method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyTestCase extends GroovyTestCase {

    void testAssertions() {
        assertTrue(1 == 1)
        assertEquals("test", "test")

        def x = "42"
        assertNotNull "x must not be null", x
        assertNull null

        assertSame x, x
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As can be seen above, in contrast to Java it is possible to leave out the parenthesis in most situations which
leads to even more readability of JUnit assertion method call expressions.</p>
</div>
<div class="paragraph">
<p>An interesting assertion method that is added by <code>GroovyTestCase</code> is <code>assertScript</code>. It ensures that the given Groovy
code string succeeds without any exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testScriptAssertions() {
    assertScript '''
        def x = 1
        def y = 2

        assert x + y == 3
    '''
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_shouldfail_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_shouldfail_methods"></a>shouldFail Methods</h6>
<div class="paragraph">
<p><code>shouldFail</code> can be used to check whether the given code block fails or not. In case it fails, the assertion does hold,
otherwise the assertion fails:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testInvalidIndexAccess1() {
    def numbers = [1,2,3,4]
    shouldFail {
        numbers.get(4)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above uses the basic <code>shouldFail</code> method interface that takes a <code>groovy.lang.Closure</code> as a single argument.
 The <code>Closure</code> instance holds the code that is supposed to be breaking during run-time.</p>
</div>
<div class="paragraph">
<p>If we wanted to assert <code>shouldFail</code> on a specific <code>java.lang.Exception</code> type we could have done so by using the <code>shouldFail</code>
implementation that takes the <code>Exception</code> class as first argument and the <code>Closure</code> as second argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testInvalidIndexAccess2() {
    def numbers = [1,2,3,4]
    shouldFail IndexOutOfBoundsException, {
        numbers.get(4)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If anything other than <code>IndexOutOfBoundsException</code> (or a descendant class of it) is thrown, the test case will fail.</p>
</div>
<div class="paragraph">
<p>A pretty nice feature of <code>shouldFail</code> hasn’t been visible so far: it returns the exception message. This is really
useful if you want to assert on the exception error message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testInvalidIndexAccess3() {
    def numbers = [1,2,3,4]
    def msg = shouldFail IndexOutOfBoundsException, {
        numbers.get(4)
    }
    assert msg.contains('Index: 4, Size: 4') ||
        msg.contains('Index 4 out-of-bounds for length 4') ||
        msg.contains('Index 4 out of bounds for length 4')
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_notyetimplemented_method"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_notyetimplemented_method"></a>notYetImplemented Method</h6>
<div class="paragraph">
<p>The <code>notYetImplemented</code> method has been greatly influenced by HtmlUnit. It allows to write a test method but mark it
as not yet implemented. As long as the test method fails and is marked with <code>notYetImplemented</code> the test goes green:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void testNotYetImplemented1() {
    if (notYetImplemented()) return   <i class="conum" data-value="1"></i><b>(1)</b>

    assert 1 == 2                     <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a call to <code>notYetImplemented</code> is necessary for <code>GroovyTestCase</code> to get the current method stack.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>as long as the test evaluates to <code>false</code> the test execution will be successful.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>An alternative to the <code>notYetImplemented</code> method is the <code>@NotYetImplemented</code> annotation. It allows for annotating a
method as not yet implemented, with the exact same behavior as <code>GroovyTestCase#notYetImplemented</code> but without the need
for the <code>notYetImplemented</code> method call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@NotYetImplemented
void testNotYetImplemented2() {
    assert 1 == 2
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_junit_4"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_4"></a>JUnit 4</h5>
<div class="paragraph">
<p>Groovy can be used to write JUnit 4 test cases without any restrictions. The <code>groovy.test.GroovyAssert</code> holds
various static methods that can be used as replacement for the <code>GroovyTestCase</code> methods in JUnit 4 tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.junit.Test

import static groovy.test.GroovyAssert.shouldFail

class JUnit4ExampleTests {

    @Test
    void indexOutOfBoundsAccess() {
        def numbers = [1,2,3,4]
        shouldFail {
            numbers.get(4)
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As can be seen in the example above, the static methods found in <code>GroovyAssert</code> are imported at the beginning of the
 class definition thus <code>shouldFail</code> can be used the same way it can be used in a <code>GroovyTestCase</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>groovy.test.GroovyAssert</code> descends from <code>org.junit.Assert</code> that means it inherits all JUnit assertion methods. However,
with the introduction of the power assertion statement, it turned out to be <em>good practice to rely on assertion statements</em>
instead of using the JUnit assertion methods with the improved message being the main reason.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is worth mentioning that <code>GroovyAssert.shouldFail</code> is not absolutely identical to <code>GroovyTestCase.shouldFail</code>. While
<code>GroovyTestCase.shouldFail</code> returns the exception message, <code>GroovyAssert.shouldFail</code> returns the exception itself. It
takes a few more keystrokes to get the message, but in return you can access other properties and methods of the
exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Test
void shouldFailReturn() {
    def e = shouldFail {
        throw new RuntimeException('foo',
                                   new RuntimeException('bar'))
    }
    assert e instanceof RuntimeException
    assert e.message == 'foo'
    assert e.cause.message == 'bar'
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_junit_5"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_junit_5"></a>JUnit 5</h5>
<div class="paragraph">
<p>Much of the approach and helper classes described under JUnit4 apply when using JUnit5 however JUnit5
uses some slightly different class annotations when writing your tests. See the <a href="http://junit.org/">JUnit5</a> documentation
for more details.</p>
</div>
<div class="paragraph">
<p>Create your test classes as per normal JUnit5 guidelines as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class MyTest {
  @Test
  void streamSum() {
    assertTrue(Stream.of(1, 2, 3)
      .mapToInt(i -&gt; i)
      .sum() &gt; 5, () -&gt; "Sum should be greater than 5")
  }

  @RepeatedTest(value=2, name = "{displayName} {currentRepetition}/{totalRepetitions}")
  void streamSumRepeated() {
    assert Stream.of(1, 2, 3).mapToInt(i -&gt; i).sum() == 6
  }

  private boolean isPalindrome(s) { s == s.reverse()  }

  @ParameterizedTest                                                              <i class="conum" data-value="1"></i><b>(1)</b>
  @ValueSource(strings = [ "racecar", "radar", "able was I ere I saw elba" ])
  void palindromes(String candidate) {
    assert isPalindrome(candidate)
  }

  @TestFactory
  def dynamicTestCollection() {[
    dynamicTest("Add test") { -&gt; assert 1 + 1 == 2 },
    dynamicTest("Multiply Test", () -&gt; { assert 2 * 3 == 6 })
  ]}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This test requires the additional <code>org.junit.jupiter:junit-jupiter-params</code> dependency if not already in your project.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can run the tests in your IDE or build tool if it supports and is configured for JUnit5.
If you run the above test in the GroovyConsole or via the <code>groovy</code> command, you will see a short text summary of the
result of running the test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>JUnit5 launcher: passed=8, failed=0, skipped=0, time=246ms</pre>
</div>
</div>
<div class="paragraph">
<p>More detailed information is available at the <code>FINE</code> logging level. You can configure your logging to display such
information or do it programmatically as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@BeforeAll
static void init() {
  def logger = Logger.getLogger(LoggingListener.name)
  logger.level = Level.FINE
  logger.addHandler(new ConsoleHandler(level: Level.FINE))
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_testing_with_spock"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_testing_with_spock"></a>3.6.4. Testing with Spock</h4>
<div class="paragraph">
<p>Spock is a testing and specification framework for Java and Groovy applications. What makes it stand out from the
crowd is its beautiful and highly expressive specification DSL. In practice, Spock specifications are written as
Groovy classes. Although written in Groovy they can be used to test Java classes. Spock can be used for unit,
integration or BDD (behavior-driven-development) testing, it doesn’t put itself into a specific category of testing
frameworks or libraries.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Beside these awesome features Spock is a good example on how to leverage advanced Groovy programming
language features in third party libraries, for example, by using Groovy AST transformations.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section should not serve as detailed guide on how to use Spock, it should rather give an impression what Spock
is about and how it can be leveraged for unit, integration, functional or any other type of testing.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The next section we will have an first look at the anatomy of a Spock specification. It should give a
pretty good feeling on what Spock is up to.</p>
</div>
<div class="sect4">
<h5 id="_specifications"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_specifications"></a>Specifications</h5>
<div class="paragraph">
<p>Spock lets you write specifications that describe features (properties, aspects) exhibited by a system of
interest. The "system" can be anything between a single class and an entire application, a more advanced term for it is
<em>system under specification</em>. The <em>feature description</em> starts from a specific snapshot of the system and its
collaborators, this snapshot is called the <em>feature’s fixture</em>.</p>
</div>
<div class="paragraph">
<p>Spock specification classes are derived from <code>spock.lang.Specification</code>. A concrete specification class might consist
of fields, fixture methods, features methods and helper methods.</p>
</div>
<div class="paragraph">
<p>Let’s have a look at a simple specification with a single feature method for an imaginary <code>Stack</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class StackSpec extends Specification {

    def "adding an element leads to size increase"() {  <i class="conum" data-value="1"></i><b>(1)</b>
        setup: "a new stack instance is created"        <i class="conum" data-value="2"></i><b>(2)</b>
            def stack = new Stack()

        when:                                           <i class="conum" data-value="3"></i><b>(3)</b>
            stack.push 42

        then:                                           <i class="conum" data-value="4"></i><b>(4)</b>
            stack.size() == 1
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Feature method, is by convention named with a String literal.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Setup block, here is where any setup work for this feature needs to be done.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>When block describes a stimulus, a certain action under target by this feature specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Then block any expressions that can be used to validate the result of the code that was triggered by the when block.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Spock feature specifications are defined as methods inside a <code>spock.lang.Specification</code> class. They describe the feature
by using a String literal instead of a method name.</p>
</div>
<div class="paragraph">
<p>A feature method holds multiple blocks, in our example we used <code>setup</code>, <code>when</code> and <code>then</code>. The <code>setup</code> block is special
in that it is optional and allows to configure local variables visible inside the feature method. The <code>when</code> block
defines the stimulus and is a companion of the <code>then</code> block which describes the response to the stimulus.</p>
</div>
<div class="paragraph">
<p>Note that the <code>setup</code> method in the <code>StackSpec</code> above additionally
  has a description String. Description Strings are optional and can be added after block labels (like <code>setup</code>, <code>when</code>,
  <code>then</code>).</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_spock"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_spock"></a>More Spock</h5>
<div class="paragraph">
<p>Spock provides much more features like data tables or advanced mocking capabilities. Feel free to consult the
<a href="https://github.com/spockframework/spock">Spock GitHub page</a> for more documentation and download information.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_functional_tests_with_geb"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_functional_tests_with_geb"></a>3.6.5. Functional Tests with Geb</h4>
<div class="paragraph">
<p>Geb is a functional web testing and scraper library that integrates with JUnit and Spock. It is based upon the
Selenium web drivers and, like Spock, provides a Groovy DSL to write functional tests for web applications.</p>
</div>
<div class="paragraph">
<p>Geb has great features that make it a good fit for a functional testing library:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DOM access via a JQuery-like <code>$</code> function</p>
</li>
<li>
<p>implements the <em>page pattern</em></p>
</li>
<li>
<p>support for modularization of certain web components (e.g. menu-bars, etc.) with <em>modules</em></p>
</li>
<li>
<p>integration with JavaScript via the JS variable</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section should not serve as detailed guide on how to use Geb, it should rather give an impression what Geb
is about and how it can be leveraged functional testing.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The next section will give an example on how Geb can be used to write a functional test for a simple
 web page with a single search field.</p>
</div>
<div class="sect4">
<h5 id="_a_geb_script"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_geb_script"></a>A Geb Script</h5>
<div class="paragraph">
<p>Although Geb can be used standalone in a Groovy script, in many scenarios it’s used in combination with other testing
frameworks. Geb comes with various base classes that can be used in JUnit 3, 4, TestNG or Spock tests. The base classes
are part of additional Geb modules that need to be added as a dependency.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>@Grab</code> dependencies can be used to run Geb with the Selenium Firefox driver in
JUnit4 tests. The module that is needed for JUnit 3/4 support is <code>geb-junit4</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.gebish:geb-core:0.9.2')
@Grab('org.gebish:geb-junit4:0.9.2')
@Grab('org.seleniumhq.selenium:selenium-firefox-driver:2.26.0')
@Grab('org.seleniumhq.selenium:selenium-support:2.26.0')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The central class in Geb is the <code>geb.Browser</code> class. As its name implies it is used
 to browse pages and access DOM elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import geb.Browser
import org.openqa.selenium.firefox.FirefoxDriver

def browser = new Browser(driver: new FirefoxDriver(), baseUrl: 'http://myhost:8080/myapp')  <i class="conum" data-value="1"></i><b>(1)</b>
browser.drive {
    go "/login"                        <i class="conum" data-value="2"></i><b>(2)</b>

    $("#username").text = 'John'       <i class="conum" data-value="3"></i><b>(3)</b>
    $("#password").text = 'Doe'

    $("#loginButton").click()

    assert title == "My Application - Dashboard"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A new <code>Browser</code> instance is created. In this case it uses the Selenium <code>FirefoxDriver</code> and sets the <code>baseUrl</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>go</code> is used to navigate to an URL or relative URI</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>$</code> together with CSS selectors is used to access the <code>username</code> and <code>password</code> DOM fields.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>Browser</code> class comes with a <code>drive</code> method that delegates all method/property calls to the current
<code>browser</code> instance. The <code>Browser</code> configuration must not be done inline, it can also be externalized in a
<code>GebConfig.groovy</code> configuration file for example. In practice, the usage of the <code>Browser</code> class is mostly hidden
by Geb test base classes. They delegate all missing properties and method calls to the current <code>browser</code> instance
that exists in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SearchTests extends geb.junit4.GebTest {

    @Test
    void executeSeach() {
        go 'http://somehost/mayapp/search'              <i class="conum" data-value="1"></i><b>(1)</b>
        $('#searchField').text = 'John Doe'             <i class="conum" data-value="2"></i><b>(2)</b>
        $('#searchButton').click()                      <i class="conum" data-value="3"></i><b>(3)</b>

        assert $('.searchResult a').first().text() == 'Mr. John Doe' <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Browser#go</code> takes a relative or absolute link and calls the page.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Browser#$</code> is used to access DOM content. Any CSS selectors supported by the underlying Selenium drivers are allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>click</code> is used to click a button.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>$</code> is used to get the first link out of the <code>searchResult</code> block</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The example above shows a simple Geb web test with the JUnit 4 base class <code>geb.junit4.GebTest</code>. Note that in this case
the <code>Browser</code> configuration is externalized. <code>GebTest</code> delegates methods like <code>go</code> and <code>$</code> to the underlying <code>browser</code>
 instance.</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_geb"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_geb"></a>More Geb</h5>
<div class="paragraph">
<p>In the previous section we only scratched the surface of the available Geb features. More information on Geb can be found
at the <a href="http://gebish.org/">project homepage</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processing_json"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_processing_json"></a>3.7. Processing JSON</h3>
<div class="paragraph">
<p>Groovy comes with integrated support for converting between Groovy objects and JSON. The classes dedicated to
JSON serialisation and parsing are found in the <code>groovy.json</code> package.</p>
</div>
<div class="sect3">
<h4 id="json_jsonslurper"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#json_jsonslurper"></a>3.7.1. JsonSlurper</h4>
<div class="paragraph">
<p><code>JsonSlurper</code> is a class that parses JSON text or reader content into Groovy data structures (objects) such as maps, lists and
primitive types like <code>Integer</code>, <code>Double</code>, <code>Boolean</code> and <code>String</code>.</p>
</div>
<div class="paragraph">
<p>The class comes with a bunch of overloaded <code>parse</code> methods plus some special methods such as <code>parseText</code>,
<code>parseFile</code> and others. For the next example we will use the <code>parseText</code> method. It parses a JSON <code>String</code> and recursively converts it to a
list or map of objects. The other <code>parse*</code> methods are similar in that they return a JSON <code>String</code> but for different parameter
types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jsonSlurper = new JsonSlurper()
def object = jsonSlurper.parseText('{ "name": "John Doe" } /* some comment */')

assert object instanceof Map
assert object.name == 'John Doe'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the result is a plain map and can be handled like a normal Groovy object instance. <code>JsonSlurper</code> parses the
given JSON as defined by the <a href="http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf">ECMA-404 JSON Interchange Standard</a>
plus support for JavaScript comments and dates.</p>
</div>
<div class="paragraph">
<p>In addition to maps <code>JsonSlurper</code> supports JSON arrays which are converted to lists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jsonSlurper = new JsonSlurper()
def object = jsonSlurper.parseText('{ "myList": [4, 8, 15, 16, 23, 42] }')

assert object instanceof Map
assert object.myList instanceof List
assert object.myList == [4, 8, 15, 16, 23, 42]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON standard supports the following primitive data types: string, number, object, <code>true</code>, <code>false</code> and <code>null</code>. <code>JsonSlurper</code>
converts these JSON types into corresponding Groovy types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jsonSlurper = new JsonSlurper()
def object = jsonSlurper.parseText '''
    { "simple": 123,
      "fraction": 123.66,
      "exponential": 123e12
    }'''

assert object instanceof Map
assert object.simple.class == Integer
assert object.fraction.class == BigDecimal
assert object.exponential.class == BigDecimal</code></pre>
</div>
</div>
<div class="paragraph">
<p>As <code>JsonSlurper</code> is returning pure Groovy object instances without any special JSON classes in the back, its usage
is transparent. In fact, <code>JsonSlurper</code> results conform to GPath expressions. GPath is a powerful expression language
that is supported by multiple slurpers for different data formats (<code>XmlSlurper</code> for XML being one example).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more details please have a look at the section on <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#gpath_expressions">GPath expressions</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The following table gives an overview of the JSON types and the corresponding Groovy data types:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JSON</th>
<th class="tableblock halign-left valign-top">Groovy</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.BigDecimal</code> or <code>java.lang.Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.LinkedHashMap</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.ArrayList</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.Date</code> based on the <code>yyyy-MM-dd’T’HH:mm:ssZ</code> date format</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Whenever a value in JSON is <code>null</code>, <code>JsonSlurper</code> supplements it with the Groovy <code>null</code> value. This is in contrast to other
JSON parsers that represent a <code>null</code> value with a library-provided singleton object.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_parser_variants"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parser_variants"></a>Parser Variants</h5>
<div class="paragraph">
<p><code>JsonSlurper</code> comes with a couple of parser implementations. Each parser fits different requirements, it could well be that for certain
scenarios the <code>JsonSlurper</code> default parser is not the best bet for all situations. Here is an overview of the shipped parser implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>JsonParserCharArray</code> parser basically takes a JSON string and operates on the underlying character array. During value
conversion it copies character sub-arrays (a mechanism known as "chopping") and operates on them.</p>
</li>
<li>
<p>The <code>JsonFastParser</code> is a special variant of the <code>JsonParserCharArray</code> and is the fastest parser. However, it is not the
default parser for a reason. <code>JsonFastParser</code> is a so-called index-overlay parser. During parsing of the given JSON <code>String</code> it
tries as hard as possible to avoid creating new char arrays or <code>String</code> instances. It keeps pointers to
the underlying original character array only. In addition, it defers object creation as late as possible. If parsed maps are
put into long-term caches care must be taken as the map objects might not be created and still consist of pointer to the
original char buffer only. However, <code>JsonFastParser</code> comes with a special chop mode which dices up the char buffer
early to keep a small copy of the original buffer. Recommendation is to use the <code>JsonFastParser</code> for JSON buffers
under 2MB and keeping the long-term cache restriction in mind.</p>
</li>
<li>
<p>The <code>JsonParserLax</code> is a special variant of the <code>JsonParserCharArray</code> parser. It has similar performance characteristics as <code>JsonFastParser</code>
but differs in that it isn’t exclusively relying on the ECMA-404 JSON grammar. For example it allows for comments, no quote strings etc.</p>
</li>
<li>
<p>The <code>JsonParserUsingCharacterSource</code> is a special parser for very large files. It uses a technique called "character windowing" to
parse large JSON files (large means files over 2MB size in this case) with constant performance characteristics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default parser implementation for <code>JsonSlurper</code> is <code>JsonParserCharArray</code>. The <code>JsonParserType</code> enumeration contains constants for
the parser implementations described above:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Implementation</th>
<th class="tableblock halign-left valign-top">Constant</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserCharArray</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserType#CHAR_BUFFER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonFastParser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserType#INDEX_OVERLAY</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserLax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserType#LAX</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserUsingCharacterSource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonParserType#CHARACTER_SOURCE</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Changing the parser implementation is as easy as setting the <code>JsonParserType</code> with a call to <code>JsonSlurper#setType()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jsonSlurper = new JsonSlurper(type: JsonParserType.INDEX_OVERLAY)
def object = jsonSlurper.parseText('{ "myList": [4, 8, 15, 16, 23, 42] }')

assert object instanceof Map
assert object.myList instanceof List
assert object.myList == [4, 8, 15, 16, 23, 42]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jsonoutput"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jsonoutput"></a>3.7.2. JsonOutput</h4>
<div class="paragraph">
<p><code>JsonOutput</code> is responsible for serialising Groovy objects into JSON strings. It can be seen as companion object to
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/json-userguide.html#json_jsonslurper">JsonSlurper</a>, being a JSON parser.</p>
</div>
<div class="paragraph">
<p><code>JsonOutput</code> comes with overloaded, static <code>toJson</code> methods. Each <code>toJson</code> implementation takes a different parameter type.
The static methods can either be used directly or by importing the methods with a static import statement.</p>
</div>
<div class="paragraph">
<p>The result of a <code>toJson</code> call is a <code>String</code> containing the JSON code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def json = JsonOutput.toJson([name: 'John Doe', age: 42])

assert json == '{"name":"John Doe","age":42}'</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JsonOutput</code> does not only support primitive, maps or list data types to be serialized to JSON, it goes further and even
has support for serialising POGOs, that is, plain-old Groovy objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person { String name }

def json = JsonOutput.toJson([ new Person(name: 'John'), new Person(name: 'Max') ])

assert json == '[{"name":"John"},{"name":"Max"}]'</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_customizing_output"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizing_output"></a>Customizing Output</h5>
<div class="paragraph">
<p>If you need control over the serialized output you can use a <code>JsonGenerator</code>.  The <code>JsonGenerator.Options</code> builder
can be used to create a customized generator.  One or more options can be set on this builder in order to alter
the resulting output.  When you are done setting the options simply call the <code>build()</code> method in order to get a fully
configured instance that will generate output based on the options selected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
    String title
    int age
    String password
    Date dob
    URL favoriteUrl
}

Person person = new Person(name: 'John', title: null, age: 21, password: 'secret',
                            dob: Date.parse('yyyy-MM-dd', '1984-12-15'),
                            favoriteUrl: new URL('http://groovy-lang.org/'))

def generator = new JsonGenerator.Options()
    .excludeNulls()
    .dateFormat('yyyy@MM')
    .excludeFieldsByName('age', 'password')
    .excludeFieldsByType(URL)
    .build()

assert generator.toJson(person) == '{"dob":"1984@12","name":"John"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>A closure can be used to transform a type.  These closure converters are registered for a given type and will be
called any time that type or a subtype is encountered.  The first parameter to the closure is an object matching the
type for which the converter is registered and this parameter is required. The closure may take an optional second
<code>String</code> parameter and this will be set to the key name if one is available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
    URL favoriteUrl
}

Person person = new Person(name: 'John', favoriteUrl: new URL('http://groovy-lang.org/json.html#_jsonoutput'))

def generator = new JsonGenerator.Options()
    .addConverter(URL) { URL u, String key -&gt;
        if (key == 'favoriteUrl') {
            u.getHost()
        } else {
            u
        }
    }
    .build()

assert generator.toJson(person) == '{"favoriteUrl":"groovy-lang.org","name":"John"}'

// No key available when generating a JSON Array
def list = [new URL('http://groovy-lang.org/json.html#_jsonoutput')]
assert generator.toJson(list) == '["http://groovy-lang.org/json.html#_jsonoutput"]'

// First parameter to the converter must match the type for which it is registered
shouldFail(IllegalArgumentException) {
    new JsonGenerator.Options()
        .addConverter(Date) { Calendar cal -&gt; }
}</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_formatted_output"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_formatted_output"></a>Formatted Output</h6>
<div class="paragraph">
<p>As we saw in previous examples, the JSON output is not pretty printed per default. However, the <code>prettyPrint</code> method in <code>JsonOutput</code> comes
to rescue for this task.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def json = JsonOutput.toJson([name: 'John Doe', age: 42])

assert json == '{"name":"John Doe","age":42}'

assert JsonOutput.prettyPrint(json) == '''\
{
    "name": "John Doe",
    "age": 42
}'''.stripIndent()</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>prettyPrint</code> takes a <code>String</code> as single parameter; therefore, it can be applied on arbitrary JSON <code>String</code> instances, not only the result of
<code>JsonOutput.toJson</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_builders"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_builders"></a>Builders</h5>
<div class="paragraph">
<p>Another way to create JSON from Groovy is to use <code>JsonBuilder</code> or <code>StreamingJsonBuilder</code>. Both builders provide a
DSL which allows to formulate an object graph which is then converted to JSON.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more details on builders, have a look at the builders chapter which covers both <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jsonbuilder">JsonBuilder</a>
and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingjsonbuilder">StreamingJsonBuilder</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interacting_with_a_sql_database"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_interacting_with_a_sql_database"></a>3.8. Interacting with a SQL database</h3>
<div class="paragraph">
<p>Groovy’s <code>groovy-sql</code> module provides a higher-level abstraction over Java’s JDBC technology. JDBC itself provides
a lower-level but fairly comprehensive API which provides uniform access to a whole variety of supported relational database systems.
We’ll use HSQLDB in our examples here but you can alternatively use Oracle, SQL Server, MySQL and a host of others.
The most frequently used class within the <code>groovy-sql</code> module is the <code>groovy.sql.Sql</code> class which raises the JDBC
abstractions up one level. We’ll cover that first.</p>
</div>
<div class="sect3">
<h4 id="_connecting_to_the_database"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_to_the_database"></a>3.8.1. Connecting to the database</h4>
<div class="paragraph">
<p>Connecting to a database with Groovy’s <code>Sql</code> class requires four pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The database uniform resource locator (URL)</p>
</li>
<li>
<p>Username</p>
</li>
<li>
<p>Password</p>
</li>
<li>
<p>The driver class name (which can be derived automatically in some situations)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For our HSQLDB database, the values will be something like that shown in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jdbc:hsqldb:mem:yourdb</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sa (or your <em>username</em>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>yourPassword</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.hsqldb.jdbcDriver</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Consult the documentation for the JDBC driver that you plan to use to determine the correct values for your situation.</p>
</div>
<div class="paragraph">
<p>The <code>Sql</code> class has a <code>newInstance</code> factory method which takes these parameters. You would typically use it as follows:</p>
</div>
<div class="listingblock">
<div class="title">Connecting to HSQLDB</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.sql.Sql

def url = 'jdbc:hsqldb:mem:yourDB'
def user = 'sa'
def password = ''
def driver = 'org.hsqldb.jdbcDriver'
def sql = Sql.newInstance(url, user, password, driver)

// use 'sql' instance ...

sql.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don’t want to have to handle resource handling yourself (i.e. call <code>close()</code> manually) then you can use the <code>withInstance</code> variation as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Connecting to HSQLDB (<code>withInstance</code> variation)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Sql.withInstance(url, user, password, driver) { sql -&gt;
  // use 'sql' instance ...
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_connecting_with_a_datasource"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_with_a_datasource"></a>Connecting with a DataSource</h5>
<div class="paragraph">
<p>It is often preferred to use a DataSource. You may have one available to you from a connection pool.
Here we’ll use the one provided as part of the HSQLDB driver jar as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Connecting to HSQLDB with a DataSource</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.sql.Sql
import org.hsqldb.jdbc.JDBCDataSource

def dataSource = new JDBCDataSource(
    database: 'jdbc:hsqldb:mem:yourDB', user: 'sa', password: '')
def sql = new Sql(dataSource)

// use then close 'sql' instance ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have your own connection pooling, the details will be different, e.g. for Apache Commons DBCP:</p>
</div>
<div class="listingblock">
<div class="title">Connecting to HSQLDB with a DataSource using Apache Commons DBCP</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('commons-dbcp:commons-dbcp:1.4')
import groovy.sql.Sql
import org.apache.commons.dbcp.BasicDataSource

def ds = new BasicDataSource(driverClassName: "org.hsqldb.jdbcDriver",
    url: 'jdbc:hsqldb:mem:yourDB', username: 'sa', password: '')
def sql = new Sql(ds)
// use then close 'sql' instance ...</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_connecting_using_grab"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connecting_using_grab"></a>Connecting using @Grab</h5>
<div class="paragraph">
<p>The previous examples assume that the necessary database driver jar is already on your classpath.
For a self-contained script you can add <code>@Grab</code> statements to the top of the script to automatically download the necessary jar as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Connecting to HSQLDB using @Grab</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.hsqldb:hsqldb:2.3.3')
@GrabConfig(systemClassLoader=true)
// create, use, and then close sql instance ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@GrabConfig</code> statement is necessary to make sure the system classloader is used. This ensures that the driver classes and
system classes like <code>java.sql.DriverManager</code> are in the same classloader.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_executing_sql"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_executing_sql"></a>3.8.2. Executing SQL</h4>
<div class="paragraph">
<p>You can execute arbitrary SQL commands using the <code>execute()</code> method. Let’s have a look at using it to create a table.</p>
</div>
<div class="sect4">
<h5 id="_creating_tables"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_tables"></a>Creating tables</h5>
<div class="paragraph">
<p>The simplest way to execute SQL is to call the <code>execute()</code> method passing the SQL you wish to execute as a String as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Creating a table</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// ... create 'sql' instance
sql.execute '''
  CREATE TABLE Author (
    id          INTEGER GENERATED BY DEFAULT AS IDENTITY,
    firstname   VARCHAR(64),
    lastname    VARCHAR(64)
  );
'''
// close 'sql' instance ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a variant of this method which takes a GString and another with a list of parameters. There are also other variants with similar names: <code>executeInsert</code> and <code>executeUpdate</code>.
We’ll see examples of these variants in other examples in this section.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_basic_crud_operations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_basic_crud_operations"></a>3.8.3. Basic CRUD operations</h4>
<div class="paragraph">
<p>The basic operations on a database are Create, Read, Update and Delete (the so-called CRUD operations). We’ll examine each of these in turn.</p>
</div>
<div class="sect4">
<h5 id="_creating_inserting_data"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_inserting_data"></a>Creating/Inserting data</h5>
<div class="paragraph">
<p>You can use the same <code>execute()</code> statement we saw earlier but to insert a row by using a SQL insert statement as follows:</p>
</div>
<div class="listingblock">
<div class="title">Inserting a row</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute "INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use a special <code>executeInsert</code> method instead of <code>execute</code>. This will return a list of all keys generated.
Both the <code>execute</code> and <code>executeInsert</code> methods allow you to place '?' placeholders into your SQL string and supply a list of parameters.
In this case a PreparedStatement is used which avoids any risk of SQL injection. The following example illustrates <code>executeInsert</code> using placeholders and parameters:</p>
</div>
<div class="listingblock">
<div class="title">Inserting a row using executeInsert with placeholders and parameters</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def insertSql = 'INSERT INTO Author (firstname, lastname) VALUES (?,?)'
def params = ['Jon', 'Skeet']
def keys = sql.executeInsert insertSql, params
assert keys[0] == [1]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, both the <code>execute</code> and <code>executeInsert</code> methods allow you to use GStrings. Any '$' placeholders within the SQL are assumed
to be placeholders. An escaping mechanism exists if you want to supply part of the GString with a variable in a
position which isn’t where normal placeholders go within SQL. See the GroovyDoc for more details.
Also, <code>executeInsert</code> allows you to supply a list of key column names, when multiple keys are returned and you are only interested in some of them.
 Here is a fragment illustrating key name specification and GStrings:</p>
</div>
<div class="listingblock">
<div class="title">Inserting a row using executeInsert with a GString and specifying key names</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def first = 'Guillaume'
def last = 'Laforge'
def myKeyNames = ['ID']
def myKeys = sql.executeInsert """
  INSERT INTO Author (firstname, lastname)
  VALUES (${first}, ${last})
""", myKeyNames
assert myKeys[0] == [ID: 2]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_reading_rows"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_reading_rows"></a>Reading rows</h5>
<div class="paragraph">
<p>Reading rows of data from the database is accomplished using one of several available methods: <code>query</code>, <code>eachRow</code>, <code>firstRow</code> and <code>rows</code>.</p>
</div>
<div class="paragraph">
<p>Use the <code>query</code> method if you want to iterate through the <code>ResultSet</code> returned by the underlying JDBC API as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Reading data using <code>query</code></div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def expected = ['Dierk Koenig', 'Jon Skeet', 'Guillaume Laforge']

def rowNum = 0
sql.query('SELECT firstname, lastname FROM Author') { resultSet -&gt;
  while (resultSet.next()) {
    def first = resultSet.getString(1)
    def last = resultSet.getString('lastname')
    assert expected[rowNum++] == "$first $last"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>eachRow</code> method if you want a slightly higher-level abstraction which provides a Groovy friendly map-like abstraction for the <code>ResultSet</code> as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Reading data using <code>eachRow</code></div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">rowNum = 0
sql.eachRow('SELECT firstname, lastname FROM Author') { row -&gt;
  def first = row[0]
  def last = row.lastname
  assert expected[rowNum++] == "$first $last"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can use Groovy list-style and map-style notations when accessing the row of data.</p>
</div>
<div class="paragraph">
<p>Use the <code>firstRow</code> method if you for similar functionality as <code>eachRow</code> but returning only one row of data as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Reading data using <code>firstRow</code></div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def first = sql.firstRow('SELECT lastname, firstname FROM Author')
assert first.values().sort().join(',') == 'Dierk,Koenig'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>rows</code> method if you want to process a list of map-like data structures as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Reading data using <code>rows</code></div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">List authors = sql.rows('SELECT firstname, lastname FROM Author')
assert authors.size() == 3
assert authors.collect { "$it.FIRSTNAME ${it[-1]}" } == expected</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the map-like abstraction has case-insensitive keys (hence we can use 'FIRSTNAME' or 'firstname' as the key) and
also that -ve indices (a standard Groovy feature) works when using an index value (to count column numbers from the right).</p>
</div>
<div class="paragraph">
<p>You can also use any of the above methods to return scalar values, though typically <code>firstRow</code> is all that is required in such cases. An example returning the count of rows is shown here:</p>
</div>
<div class="listingblock">
<div class="title">Reading scalar values</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert sql.firstRow('SELECT COUNT(*) AS num FROM Author').num == 3</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_updating_rows"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_updating_rows"></a>Updating rows</h5>
<div class="paragraph">
<p>Updating rows can again be done using the <code>execute()</code> method. Just use a SQL update statement as the argument to the method.
You can insert an author with just a lastname and then update the row to also have a firstname as follows:</p>
</div>
<div class="listingblock">
<div class="title">Updating a row</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute "INSERT INTO Author (lastname) VALUES ('Thorvaldsson')"
sql.execute "UPDATE Author SET firstname='Erik' where lastname='Thorvaldsson'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is also a special <code>executeUpdate</code> variant which returns the number of rows updated as a result of executing the SQL.
For example, you can change the lastname of an author as follows:</p>
</div>
<div class="listingblock">
<div class="title">Using executeUpdate</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def updateSql = "UPDATE Author SET lastname='Pragt' where lastname='Thorvaldsson'"
def updateCount = sql.executeUpdate updateSql
assert updateCount == 1

def row = sql.firstRow "SELECT * FROM Author where firstname = 'Erik'"
assert "${row.firstname} ${row.lastname}" == 'Erik Pragt'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleting_rows"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_deleting_rows"></a>Deleting rows</h5>
<div class="paragraph">
<p>The <code>execute</code> method is also used for deleting rows as this example shows:</p>
</div>
<div class="listingblock">
<div class="title">Deleting rows</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert sql.firstRow('SELECT COUNT(*) as num FROM Author').num == 3
sql.execute "DELETE FROM Author WHERE lastname = 'Skeet'"
assert sql.firstRow('SELECT COUNT(*) as num FROM Author').num == 2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_advanced_sql_operations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_sql_operations"></a>3.8.4. Advanced SQL operations</h4>
<div class="sect4">
<h5 id="_working_with_transactions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_transactions"></a>Working with transactions</h5>
<div class="paragraph">
<p>The easiest way to perform database operations within a transaction is to include the database operation within a <code>withTransaction</code> closure as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">A successful transaction</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert sql.firstRow('SELECT COUNT(*) as num FROM Author').num == 0
sql.withTransaction {
  sql.execute "INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')"
  sql.execute "INSERT INTO Author (firstname, lastname) VALUES ('Jon', 'Skeet')"
}
assert sql.firstRow('SELECT COUNT(*) as num FROM Author').num == 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the database starts empty and has two rows after successful completion of the operation. Outside the scope of the
transaction, the database is never seen as having just one row.</p>
</div>
<div class="paragraph">
<p>If something goes wrong, any earlier operations within the <code>withTransaction</code> block are rolled back.
We can see that in operation in the following example where we use database metadata (more details coming up shortly) to find the
maximum allowable size of the <code>firstname</code> column and then attempt to enter a firstname one larger than that maximum value as shown here:</p>
</div>
<div class="listingblock">
<div class="title">A failed transaction will cause a rollback</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def maxFirstnameLength
def metaClosure = { meta -&gt; maxFirstnameLength = meta.getPrecision(1) }
def rowClosure = {}
def rowCountBefore = sql.firstRow('SELECT COUNT(*) as num FROM Author').num
try {
  sql.withTransaction {
    sql.execute "INSERT INTO Author (firstname) VALUES ('Dierk')"
    sql.eachRow "SELECT firstname FROM Author WHERE firstname = 'Dierk'", metaClosure, rowClosure
    sql.execute "INSERT INTO Author (firstname) VALUES (?)", 'X' * (maxFirstnameLength + 1)
  }
} catch(ignore) { println ignore.message }
def rowCountAfter = sql.firstRow('SELECT COUNT(*) as num FROM Author').num
assert rowCountBefore == rowCountAfter</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though the first sql execute succeeds initially, it will be rolled back and the number of rows will remain the same.</p>
</div>
</div>
<div class="sect4">
<h5 id="_using_batches"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_batches"></a>Using batches</h5>
<div class="paragraph">
<p>When dealing with large volumes of data, particularly when inserting such data, it can be more efficient to chunk the data into batches. This is done
using the <code>withBatch</code> statement as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Batching SQL statements</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.withBatch(3) { stmt -&gt;
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Paul', 'King')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Guillaume', 'Laforge')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Hamlet', 'D''Arcy')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Cedric', 'Champeau')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Erik', 'Pragt')"
  stmt.addBatch "INSERT INTO Author (firstname, lastname) VALUES ('Jon', 'Skeet')"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After executing these statements, there will be 7 new rows in the database. In fact, they will have been added in batches
even though you can’t easily tell that after that fact. If you want to confirm what is going on under the covers, you can
add a little bit of extra logging into your program. Add the following lines before the <code>withBatch</code> statement:</p>
</div>
<div class="listingblock">
<div class="title">Logging additional SQL information</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.util.logging.*

// next line will add fine logging
Logger.getLogger('groovy.sql').level = Level.FINE
// also adjust logging.properties file in JRE_HOME/lib to have:
// java.util.logging.ConsoleHandler.level = FINE</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this extra logging turned on, and the changes made as per the above comment for the logging.properties file, you should see
output such as:</p>
</div>
<div class="listingblock">
<div class="title">SQL logging output with batching enable</div>
<div class="content">
<pre class="prettyprint highlight"><code>FINE: Successfully executed batch with 3 command(s)
Apr 19, 2015 8:38:42 PM groovy.sql.BatchingStatementWrapper processResult

FINE: Successfully executed batch with 3 command(s)
Apr 19, 2015 8:38:42 PM groovy.sql.BatchingStatementWrapper processResult

FINE: Successfully executed batch with 1 command(s)
Apr 19, 2015 8:38:42 PM groovy.sql.Sql getStatement</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should also note, that any combination of SQL statements can be added to the batch. They don’t all have to be
inserting a new row to the same table.</p>
</div>
<div class="paragraph">
<p>We noted earlier that to avoid SQL injection, we encourage you to use prepared statements, this is achieved using the
variants of methods which take GStrings or a list of extra parameters. Prepared statements can be used in combination
with batches as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Batching prepared statements</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def qry = 'INSERT INTO Author (firstname, lastname) VALUES (?,?)'
sql.withBatch(3, qry) { ps -&gt;
  ps.addBatch('Dierk', 'Koenig')
  ps.addBatch('Paul', 'King')
  ps.addBatch('Guillaume', 'Laforge')
  ps.addBatch('Hamlet', "D'Arcy")
  ps.addBatch('Cedric', 'Champeau')
  ps.addBatch('Erik', 'Pragt')
  ps.addBatch('Jon', 'Skeet')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This provides a much safer option if the data could come from a user such as via a script or a web form. Of course, given
that a prepared statement is being used, you are limited to a batch of the same SQL operation (insert in our example)
to the one table.</p>
</div>
</div>
<div class="sect4">
<h5 id="_performing_pagination"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_performing_pagination"></a>Performing pagination</h5>
<div class="paragraph">
<p>When presenting large tables of data to a user, it is often convenient to present information a page at
a time. Many of Groovy’s SQL retrieval methods have extra parameters which can be used to select a particular
page of interest. The starting position and page size are specified as integers as shown in the following example
using <code>rows</code>:</p>
</div>
<div class="listingblock">
<div class="title">Retrieving pages of data</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def qry = 'SELECT * FROM Author'
assert sql.rows(qry, 1, 3)*.firstname == ['Dierk', 'Paul', 'Guillaume']
assert sql.rows(qry, 4, 3)*.firstname == ['Hamlet', 'Cedric', 'Erik']
assert sql.rows(qry, 7, 3)*.firstname == ['Jon']</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fetching_metadata"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fetching_metadata"></a>Fetching metadata</h5>
<div class="paragraph">
<p>JDBC metadata can be retrieved in numerous ways. Perhaps the most basic approach is to extract the
metadata from any row as shown in the following example which examines the tablename, column names and column type names:</p>
</div>
<div class="listingblock">
<div class="title">Using row metadata</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.eachRow("SELECT * FROM Author WHERE firstname = 'Dierk'") { row -&gt;
  def md = row.getMetaData()
  assert md.getTableName(1) == 'AUTHOR'
  assert (1..md.columnCount).collect{ md.getColumnName(it) } == ['ID', 'FIRSTNAME', 'LASTNAME']
  assert (1..md.columnCount).collect{ md.getColumnTypeName(it) } == ['INTEGER', 'VARCHAR', 'VARCHAR']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And another slight variant to the previous example, this time also looking at the column label:</p>
</div>
<div class="listingblock">
<div class="title">Also using row metadata</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.eachRow("SELECT firstname AS first FROM Author WHERE firstname = 'Dierk'") { row -&gt;
  def md = row.getMetaData()
  assert md.getColumnName(1) == 'FIRSTNAME'
  assert md.getColumnLabel(1) == 'FIRST'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accessing metadata is quite common, so Groovy also provides variants to many of its methods that let you
supply a closure that will be called once with the row metadata in addition to the normal row closure
which is called for each row. The following example illustrates the two closure variant for <code>eachRow</code>:</p>
</div>
<div class="listingblock">
<div class="title">Using row and metadata closures</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def metaClosure = { meta -&gt; assert meta.getColumnName(1) == 'FIRSTNAME' }
def rowClosure = { row -&gt; assert row.FIRSTNAME == 'Dierk' }
sql.eachRow("SELECT firstname FROM Author WHERE firstname = 'Dierk'", metaClosure, rowClosure)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that our SQL query will only return one row, so we could have equally used <code>firstRow</code> for the previous example.</p>
</div>
<div class="paragraph">
<p>Finally, JDBC also provides metadata per connection (not just for rows). You can also access such metadata from Groovy as shown in this example:</p>
</div>
<div class="listingblock">
<div class="title">Using connection metadata</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def md = sql.connection.metaData
assert md.driverName == 'HSQL Database Engine Driver'
assert md.databaseProductVersion == '2.3.3'
assert ['JDBCMajorVersion', 'JDBCMinorVersion'].collect{ md[it] } == [4, 0]
assert md.stringFunctions.tokenize(',').contains('CONCAT')
def rs = md.getTables(null, null, 'AUTH%', null)
assert rs.next()
assert rs.getString('TABLE_NAME') == 'AUTHOR'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consult the JavaDoc for your driver to find out what metadata information is available for you to access.</p>
</div>
</div>
<div class="sect4">
<h5 id="_named_and_named_ordinal_parameters"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_named_and_named_ordinal_parameters"></a>Named and named-ordinal parameters</h5>
<div class="paragraph">
<p>Groovy supports some additional alternative placeholder syntax variants. The GString variants
are typically preferred over these alternatives but the alternatives are useful for Java integration
purposes and sometimes in templating scenarios where GStrings might already be in heavy use as part
of a template. The named parameter variants are much like the String plus list of parameter variants but
instead of having a list of <code>?</code> placeholders followed by a list of parameters, you have one or more
placeholders having the form <code>:propName</code> or <code>?.propName</code> and a single map, named arguments or a
domain object as the parameter. The map or domain object should have a property named <code>propName</code>
corresponding to each supplied placeholder.</p>
</div>
<div class="paragraph">
<p>Here is an example using the colon form:</p>
</div>
<div class="listingblock">
<div class="title">Named parameters (colon form)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute "INSERT INTO Author (firstname, lastname) VALUES (:first, :last)", first: 'Dierk', last: 'Koenig'</code></pre>
</div>
</div>
<div class="paragraph">
<p>And another example using the question mark form:</p>
</div>
<div class="listingblock">
<div class="title">Named parameters (question mark form)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute "INSERT INTO Author (firstname, lastname) VALUES (?.first, ?.last)", first: 'Jon', last: 'Skeet'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the information you need to supply is spread across multiple maps or domain objects you can
use the question mark form with an additional ordinal index as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Named-ordinal parameters</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Rockstar { String first, last }
def pogo = new Rockstar(first: 'Paul', last: 'McCartney')
def map = [lion: 'King']
sql.execute "INSERT INTO Author (firstname, lastname) VALUES (?1.first, ?2.lion)", pogo, map</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_stored_procedures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_stored_procedures"></a>Stored procedures</h5>
<div class="paragraph">
<p>The exact syntax for creating a stored procedure or function varies slightly between different databases.
For the HSQLDB database we are using, we can create a stored function which returns the initials of all authors in a table
as follows:</p>
</div>
<div class="listingblock">
<div class="title">Creating a stored function</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute """
  CREATE FUNCTION SELECT_AUTHOR_INITIALS()
  RETURNS TABLE (firstInitial VARCHAR(1), lastInitial VARCHAR(1))
  READS SQL DATA
  RETURN TABLE (
    SELECT LEFT(Author.firstname, 1) as firstInitial, LEFT(Author.lastname, 1) as lastInitial
    FROM Author
  )
"""</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use a SQL <code>CALL</code> statement to invoke the function using Groovy’s normal SQL retrieval methods.
Here is an example using <code>eachRow</code>.</p>
</div>
<div class="listingblock">
<div class="title">Creating a stored procedure or function</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def result = []
sql.eachRow('CALL SELECT_AUTHOR_INITIALS()') {
  result &lt;&lt; "$it.firstInitial$it.lastInitial"
}
assert result == ['DK', 'JS', 'GL']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the code for creating another stored function, this one taking the lastname as a parameter:</p>
</div>
<div class="listingblock">
<div class="title">Creating a stored function with a parameter</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute """
  CREATE FUNCTION FULL_NAME (p_lastname VARCHAR(64))
  RETURNS VARCHAR(100)
  READS SQL DATA
  BEGIN ATOMIC
    DECLARE ans VARCHAR(100);
    SELECT CONCAT(firstname, ' ', lastname) INTO ans
    FROM Author WHERE lastname = p_lastname;
    RETURN ans;
  END
"""</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the placeholder syntax to specify where the parameter belongs and note the special placeholder position to indicate the result:</p>
</div>
<div class="listingblock">
<div class="title">Using a stored function with a parameter</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def result = sql.firstRow("{? = call FULL_NAME(?)}", ['Koenig'])
assert result[0] == 'Dierk Koenig'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, here is a stored procedure with input and output parameters:</p>
</div>
<div class="listingblock">
<div class="title">Creating a stored procedure with input and output parameters</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute """
  CREATE PROCEDURE CONCAT_NAME (OUT fullname VARCHAR(100),
    IN first VARCHAR(50), IN last VARCHAR(50))
  BEGIN ATOMIC
    SET fullname = CONCAT(first, ' ', last);
  END
"""</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the <code>CONCAT_NAME</code> stored procedure parameter, we make use of a special <code>call</code> method. Any input parameters are simply provided
as parameters to the method call. For output parameters, the resulting type must be specified as shown here:</p>
</div>
<div class="listingblock">
<div class="title">Using a stored procedure with input and output parameters</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.call("{call CONCAT_NAME(?, ?, ?)}", [Sql.VARCHAR, 'Dierk', 'Koenig']) {
  fullname -&gt; assert fullname == 'Dierk Koenig'
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Creating a stored procedure with an input/output parameter</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">sql.execute """
  CREATE PROCEDURE CHECK_ID_POSITIVE_IN_OUT ( INOUT p_err VARCHAR(64), IN pparam INTEGER, OUT re VARCHAR(15))
  BEGIN ATOMIC
    IF pparam &gt; 0 THEN
      set p_err = p_err || '_OK';
      set re = 'RET_OK';
    ELSE
      set p_err = p_err || '_ERROR';
      set re = 'RET_ERROR';
    END IF;
  END;
"""</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using a stored procedure with an input/output parameter</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def scall = "{call CHECK_ID_POSITIVE_IN_OUT(?, ?, ?)}"
sql.call scall, [Sql.inout(Sql.VARCHAR("MESSAGE")), 1, Sql.VARCHAR], {
  res, p_err -&gt; assert res == 'MESSAGE_OK' &amp;&amp; p_err == 'RET_OK'
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_datasets"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_datasets"></a>3.8.5. Using DataSets</h4>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processing_xml"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_processing_xml"></a>3.9. Processing XML</h3>
<div class="sect3">
<h4 id="_parsing_xml"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parsing_xml"></a>3.9.1. Parsing XML</h4>
<div class="sect4">
<h5 id="_xmlparser_and_xmlslurper"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmlparser_and_xmlslurper"></a>XmlParser and XmlSlurper</h5>
<div class="paragraph">
<p>The most commonly used approach for parsing XML with Groovy is to use
one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>groovy.xml.XmlParser</code></p>
</li>
<li>
<p><code>groovy.xml.XmlSlurper</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both have the same approach to parse an xml. Both come with a bunch of
overloaded parse methods plus some special methods such as <code>parseText</code>,
parseFile and others. For the next example we will use the <code>parseText</code>
method. It parses a XML <code>String</code> and recursively converts it to a list
or map of objects.</p>
</div>
<div class="listingblock">
<div class="title">XmlSlurper</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def text = '''
    &lt;list&gt;
        &lt;technology&gt;
            &lt;name&gt;Groovy&lt;/name&gt;
        &lt;/technology&gt;
    &lt;/list&gt;
'''

def list = new XmlSlurper().parseText(text) <i class="conum" data-value="1"></i><b>(1)</b>

assert list instanceof groovy.xml.slurpersupport.GPathResult <i class="conum" data-value="2"></i><b>(2)</b>
assert list.technology.name == 'Groovy' <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Parsing the XML an returning the root node as a GPathResult</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Checking we’re using a GPathResult</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Traversing the tree in a GPath style</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="title">XmlParser</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def text = '''
    &lt;list&gt;
        &lt;technology&gt;
            &lt;name&gt;Groovy&lt;/name&gt;
        &lt;/technology&gt;
    &lt;/list&gt;
'''

def list = new XmlParser().parseText(text) <i class="conum" data-value="1"></i><b>(1)</b>

assert list instanceof groovy.util.Node <i class="conum" data-value="2"></i><b>(2)</b>
assert list.technology.name.text() == 'Groovy' <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Parsing the XML an returning the root node as a Node</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Checking we’re using a Node</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Traversing the tree in a GPath style</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Let’s see the <strong>similarities</strong> between <code>XMLParser</code> and <code>XMLSlurper</code> first:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both are based on <code>SAX</code> so they both are low memory footprint</p>
</li>
<li>
<p>Both can update/transform the XML</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But they have key <strong>differences</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>XmlSlurper</code> evaluates the structure lazily. So if you update the xml
you’ll have to evaluate the whole tree again.</p>
</li>
<li>
<p><code>XmlSlurper</code> returns <code>GPathResult</code> instances when parsing XML</p>
</li>
<li>
<p><code>XmlParser</code> returns <code>Node</code> objects when parsing XML</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When to use one or the another?</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is a discussion at
<a href="http://stackoverflow.com/questions/7558019/groovy-xmlslurper-vs-xmlparser">StackOverflow</a>. The
conclusions written here are based partially on this entry.
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>If you want to transform an existing document to another</strong> then
<code>XmlSlurper</code> will be the choice</p>
</li>
<li>
<p><strong>If you want to update and read at the same time</strong> then <code>XmlParser</code> is
the choice.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rationale behind this is that every time you create a node with
<code>XmlSlurper</code> it won’t be available until you parse the document again
with another <code>XmlSlurper</code> instance.  Need to read just a few nodes
XmlSlurper is for you ".</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>If you just have to read a few nodes</strong> <code>XmlSlurper</code> should be your
choice, since it will not have to create a complete structure in
memory"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general both classes perform similar way. Even the way of using
GPath expressions with them are the same (both use <code>breadthFirst()</code> and
<code>depthFirst()</code> expressions). So I guess it depends on the write/read
frequency.</p>
</div>
</div>
<div class="sect4">
<h5 id="_domcategory"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domcategory"></a>DOMCategory</h5>
<div class="paragraph">
<p>There is another way of parsing XML documents with Groovy with the
used of <code>groovy.xml.dom.DOMCategory</code> which is a category class which
adds GPath style operations to Java’s DOM classes.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Java has in-built support for DOM processing of XML using classes
representing the various parts of XML documents, e.g. <code>Document</code>,
<code>Element</code>, <code>NodeList</code>, <code>Attr</code> etc. For more information about these classes,
refer to the respective JavaDocs.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Having a XML like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">static def CAR_RECORDS = '''
&lt;records&gt;
  &lt;car name='HSV Maloo' make='Holden' year='2006'&gt;
    &lt;country&gt;Australia&lt;/country&gt;
    &lt;record type='speed'&gt;Production Pickup Truck with speed of 271kph&lt;/record&gt;
  &lt;/car&gt;
  &lt;car name='P50' make='Peel' year='1962'&gt;
    &lt;country&gt;Isle of Man&lt;/country&gt;
    &lt;record type='size'&gt;Smallest Street-Legal Car at 99cm wide and 59 kg in weight&lt;/record&gt;
  &lt;/car&gt;
  &lt;car name='Royale' make='Bugatti' year='1931'&gt;
    &lt;country&gt;France&lt;/country&gt;
    &lt;record type='price'&gt;Most Valuable Car at $15 million&lt;/record&gt;
  &lt;/car&gt;
&lt;/records&gt;
'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can parse it using <code>groovy.xml.DOMBuilder</code> and
<code>groovy.xml.dom.DOMCategory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def reader = new StringReader(CAR_RECORDS)
def doc = DOMBuilder.parse(reader) <i class="conum" data-value="1"></i><b>(1)</b>
def records = doc.documentElement

use(DOMCategory) { <i class="conum" data-value="2"></i><b>(2)</b>
    assert records.car.size() == 3
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Parsing the XML</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Creating <code>DOMCategory</code> scope to be able to use helper method calls</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gpath"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gpath"></a>3.9.2. GPath</h4>
<div class="paragraph">
<p>The most common way of querying XML in Groovy is using <code>GPath</code>:</p>
</div>
<div class="paragraph">
<p><em>GPath is a path expression language integrated into Groovy which
allows parts of nested structured data to be identified. In this
sense, it has similar aims and scope as XPath does for XML. The two
main places where you use GPath expressions is when dealing with
nested POJOs or when dealing with XML</em></p>
</div>
<div class="paragraph">
<p>It is similar to <a href="http://en.wikipedia.org/wiki/XPath">XPath</a>
expressions and you can use it not only with XML but also with POJO
classes. As an example, you can specify a path to an object or element
of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a.b.c</code> → for XML, yields all the <code>&lt;c&gt;</code> elements inside <code>&lt;b&gt;</code> inside <code>&lt;a&gt;</code></p>
</li>
<li>
<p><code>a.b.c</code> → all POJOs, yields the <code>&lt;c&gt;</code> properties for all the <code>&lt;b&gt;</code>
properties of <code>&lt;a&gt;</code> (sort of like a.getB().getC() in JavaBeans)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For XML, you can also specify attributes, e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a["@href"]</code> → the href attribute of all the a elements</p>
</li>
<li>
<p><code>a.'@href'</code> → an alternative way of expressing this</p>
</li>
<li>
<p><code>a.@href</code> → an alternative way of expressing this when using XmlSlurper</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s illustrate this with an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">static final String books = '''
    &lt;response version-api="2.0"&gt;
        &lt;value&gt;
            &lt;books&gt;
                &lt;book available="20" id="1"&gt;
                    &lt;title&gt;Don Quixote&lt;/title&gt;
                    &lt;author id="1"&gt;Miguel de Cervantes&lt;/author&gt;
                &lt;/book&gt;
                &lt;book available="14" id="2"&gt;
                    &lt;title&gt;Catcher in the Rye&lt;/title&gt;
                   &lt;author id="2"&gt;JD Salinger&lt;/author&gt;
               &lt;/book&gt;
               &lt;book available="13" id="3"&gt;
                   &lt;title&gt;Alice in Wonderland&lt;/title&gt;
                   &lt;author id="3"&gt;Lewis Carroll&lt;/author&gt;
               &lt;/book&gt;
               &lt;book available="5" id="4"&gt;
                   &lt;title&gt;Don Quixote&lt;/title&gt;
                   &lt;author id="4"&gt;Miguel de Cervantes&lt;/author&gt;
               &lt;/book&gt;
           &lt;/books&gt;
       &lt;/value&gt;
    &lt;/response&gt;
'''</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_simply_traversing_the_tree"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simply_traversing_the_tree"></a>Simply traversing the tree</h5>
<div class="paragraph">
<p>First thing we could do is to get a value using POJO’s notation. Let’s
get the first book’s author’s name</p>
</div>
<div class="listingblock">
<div class="title">Getting node value</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)
def authorResult = response.value.books.book[0].author

assert authorResult.text() == 'Miguel de Cervantes'</code></pre>
</div>
</div>
<div class="paragraph">
<p>First we parse the document with <code>XmlSlurper</code> and the we have to
consider the returning value as the root of the XML document, so in
this case is "response".</p>
</div>
<div class="paragraph">
<p>That’s why we start traversing the document from response and then
<code>value.books.book[0].author</code>. Note that in <code>XPath</code> the node arrays starts
in [1] instead of [0], but because <code>GPath</code> is Java-based it begins at
index 0.</p>
</div>
<div class="paragraph">
<p>In the end we’ll have the instance of the <code>author</code> node and because we
wanted the text inside that node we should be calling the <code>text()</code>
method.  The <code>author</code> node is an instance of <code>GPathResult</code> type and
<code>text()</code> a method giving us the content of that node as a String.</p>
</div>
<div class="paragraph">
<p>When using <code>GPath</code> with an xml parsed with <code>XmlSlurper</code> we’ll have as a
result a <code>GPathResult</code> object. <code>GPathResult</code> has many other convenient
methods to convert the text inside a node to any other type such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>toInteger()</code></p>
</li>
<li>
<p><code>toFloat()</code></p>
</li>
<li>
<p><code>toBigInteger()</code></p>
</li>
<li>
<p>…​</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All these methods try to convert a <code>String</code> to the appropriate type.</p>
</div>
<div class="paragraph">
<p>If we were using a XML parsed with <code>XmlParser</code> we could be dealing with
instances of type <code>Node</code>. But still all the actions applied to
<code>GPathResult</code> in these examples could be applied to a Node as
well. Creators of both parsers took into account <code>GPath</code> compatibility.</p>
</div>
<div class="paragraph">
<p>Next step is to get the some values from a given node’s attribute. In the following sample
we want to get the first book’s author’s id. We’ll be using two different approaches. Let’s see the code first:</p>
</div>
<div class="listingblock">
<div class="title">Getting an attribute’s value</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

def book = response.value.books.book[0] <i class="conum" data-value="1"></i><b>(1)</b>
def bookAuthorId1 = book.@id <i class="conum" data-value="2"></i><b>(2)</b>
def bookAuthorId2 = book['@id'] <i class="conum" data-value="3"></i><b>(3)</b>

assert bookAuthorId1 == '1' <i class="conum" data-value="4"></i><b>(4)</b>
assert bookAuthorId1.toInteger() == 1 <i class="conum" data-value="5"></i><b>(5)</b>
assert bookAuthorId1 == bookAuthorId2</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Getting the first book node</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Getting the book’s id attribute <code>@id</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Getting the book’s id attribute with <code>map notation</code> <code>['@id']</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Getting the value as a String</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Getting the value of the attribute as an <code>Integer</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see there are two types of notations to get attributes,
the</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>direct notation</em> with <code>@nameoftheattribute</code></p>
</li>
<li>
<p><em>map notation</em> using <code>['@nameoftheattribute']</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both of them are equally valid.</p>
</div>
</div>
<div class="sect4">
<h5 id="_flexible_navigation_with_children_depthfirst_and_breadthfirst"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_flexible_navigation_with_children_depthfirst_and_breadthfirst"></a>Flexible navigation with children (*), depthFirst (**) and breadthFirst</h5>
<div class="paragraph">
<p>If you ever have used XPath, you may have used expressions like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/following-sibling::othernode</code> : Look for a node "othernode" in the same level</p>
</li>
<li>
<p><code>//</code> : Look everywhere</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More or less we have their counterparts in GPath with the shortcuts <code>*</code> (aka <code>children()</code>) and <code>**</code> (aka <code>depthFirst()</code>).</p>
</div>
<div class="paragraph">
<p>The first example shows a simple use of <code>*</code>, which only iterates over the direct children of the node.</p>
</div>
<div class="listingblock">
<div class="title">Using *</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

// .'*' could be replaced by .children()
def catcherInTheRye = response.value.books.'*'.find { node -&gt;
    // node.@id == 2 could be expressed as node['@id'] == 2
    node.name() == 'book' &amp;&amp; node.@id == '2'
}

assert catcherInTheRye.title.text() == 'Catcher in the Rye'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This test searches for any child nodes of the "books" node matching the given
condition. In a bit more detail, the expression says: <em>Look for any node with
a tag name equal to 'book' having an id with a value of '2' directly under
the 'books' node</em>.</p>
</div>
<div class="paragraph">
<p>This operation roughly corresponds to the <code>breadthFirst()</code> method, except that
it only stops at <strong>one level</strong> instead of continuing to the inner levels.</p>
</div>
<div class="paragraph">
<p>What if we would like to look for a given value
without having to know exactly where it is. Let’s say that the
only thing we know is the id of the author "Lewis Carroll" . How are
we going to be able to find that book? Using <code>**</code> is the solution:</p>
</div>
<div class="listingblock">
<div class="title">Using **</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

// .'**' could be replaced by .depthFirst()
def bookId = response.'**'.find { book -&gt;
    book.author.text() == 'Lewis Carroll'
}.@id

assert bookId == 3</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>**</code> is the same as looking for something <em>everywhere in the
tree from this point down</em>. In this case, we’ve used the method
<code>find(Closure cl)</code> to find just the first occurrence.</p>
</div>
<div class="paragraph">
<p>What if we want to collect all book’s titles? That’s easy, just use <code>findAll</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

def titles = response.'**'.findAll { node -&gt; node.name() == 'title' }*.text()

assert titles.size() == 4</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the last two examples, <code>**</code> is used as a shortcut for the <code>depthFirst()</code>
method. It goes as far down the tree as it can while navigating down the
tree from a given node. The <code>breadthFirst()</code> method finishes off all nodes
on a given level before traversing down to the next level.</p>
</div>
<div class="paragraph">
<p>The following example shows the difference between these two methods:</p>
</div>
<div class="listingblock">
<div class="title">depthFirst() vs .breadthFirst</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)
def nodeName = { node -&gt; node.name() }
def withId2or3 = { node -&gt; node.@id in [2, 3] }

assert ['book', 'author', 'book', 'author'] ==
        response.value.books.depthFirst().findAll(withId2or3).collect(nodeName)
assert ['book', 'book', 'author', 'author'] ==
        response.value.books.breadthFirst().findAll(withId2or3).collect(nodeName)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we search for any nodes with an id attribute with value 2 or 3.
There are both <code>book</code> and <code>author</code> nodes that match that criteria. The different
traversal orders will find the same nodes in each case but in different orders
corresponding to how the tree was traversed.</p>
</div>
<div class="paragraph">
<p>It is worth mentioning again that there are some useful methods
converting a node’s value to an integer, float, etc. Those methods
could be convenient when doing comparisons like this:</p>
</div>
<div class="listingblock">
<div class="title">helpers</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

def titles = response.value.books.book.findAll { book -&gt;
    /* You can use toInteger() over the GPathResult object */
    book.@id.toInteger() &gt; 2
}*.title

assert titles.size() == 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case the number 2 has been hardcoded but imagine that value
could have come from any other source (database…​ etc.).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_xml"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_xml"></a>3.9.3. Creating XML</h4>
<div class="paragraph">
<p>The most commonly used approach for creating XML with Groovy is to use
a builder, i.e. one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>groovy.xml.MarkupBuilder</code></p>
</li>
<li>
<p><code>groovy.xml.StreamingMarkupBuilder</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_markupbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder"></a>MarkupBuilder</h5>
<div class="paragraph">
<p>Here is an example of using Groovy’s MarkupBuilder to create a new XML file:</p>
</div>
<div class="listingblock">
<div class="title">Creating Xml with MarkupBuilder</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def writer = new StringWriter()
def xml = new MarkupBuilder(writer) <i class="conum" data-value="1"></i><b>(1)</b>

xml.records() { <i class="conum" data-value="2"></i><b>(2)</b>
    car(name: 'HSV Maloo', make: 'Holden', year: 2006) {
        country('Australia')
        record(type: 'speed', 'Production Pickup Truck with speed of 271kph')
    }
    car(name: 'Royale', make: 'Bugatti', year: 1931) {
        country('France')
        record(type: 'price', 'Most Valuable Car at $15 million')
    }
}

def records = new XmlSlurper().parseText(writer.toString()) <i class="conum" data-value="3"></i><b>(3)</b>

assert records.car.first().name.text() == 'HSV Maloo'
assert records.car.last().name.text() == 'Royale'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create an instance of <code>MarkupBuilder</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Start creating the XML tree</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create an instance of <code>XmlSlurper</code> to traverse and test the
generated XML</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Let’s take a look a little bit closer:</p>
</div>
<div class="listingblock">
<div class="title">Creating XML elements</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlString = "&lt;movie&gt;the godfather&lt;/movie&gt;" <i class="conum" data-value="1"></i><b>(1)</b>

def xmlWriter = new StringWriter() <i class="conum" data-value="2"></i><b>(2)</b>
def xmlMarkup = new MarkupBuilder(xmlWriter)

xmlMarkup.movie("the godfather") <i class="conum" data-value="3"></i><b>(3)</b>

assert xmlString == xmlWriter.toString() <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We’re creating a reference string to compare against</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>xmlWriter</code> instance is used by <code>MarkupBuilder</code> to convert the
xml representation to a String instance eventually</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>xmlMarkup.movie(…​)</code> call will create a XML node with a tag
called <code>movie</code> and with content <code>the godfather</code>.</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="title">Creating XML elements with attributes</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlString = "&lt;movie id='2'&gt;the godfather&lt;/movie&gt;"

def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter)

xmlMarkup.movie(id: "2", "the godfather") <i class="conum" data-value="1"></i><b>(1)</b>

assert xmlString == xmlWriter.toString()</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This time in order to create both attributes and node content you
can create as many map entries as you like and finally add a value
to set the node’s content</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value could be any <code>Object</code>, the value will be serialized to its
<code>String</code> representation.
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="title">Creating XML nested elements</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter)

xmlMarkup.movie(id: 2) { <i class="conum" data-value="1"></i><b>(1)</b>
    name("the godfather")
}

def movie = new XmlSlurper().parseText(xmlWriter.toString())

assert movie.@id == 2
assert movie.name.text() == 'the godfather'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A closure represents the children elements of a given node. Notice
this time instead of using a String for the attribute we’re using a
number.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Sometimes you may want to use a specific namespace in your xml documents:</p>
</div>
<div class="listingblock">
<div class="title">Namespace aware</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter)

xmlMarkup
        .'x:movies'('xmlns:x': 'http://www.groovy-lang.org') { <i class="conum" data-value="1"></i><b>(1)</b>
    'x:movie'(id: 1, 'the godfather')
    'x:movie'(id: 2, 'ronin')
}

def movies =
        new XmlSlurper() <i class="conum" data-value="2"></i><b>(2)</b>
                .parseText(xmlWriter.toString())
                .declareNamespace(x: 'http://www.groovy-lang.org')

assert movies.'x:movie'.last().@id == 2
assert movies.'x:movie'.last().text() == 'ronin'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creating a node with a given namespace <code>xmlns:x</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Creating a <code>XmlSlurper</code> registering the namespace to be able to
test the XML we just created</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>What about having some more meaningful example. We may want to
generate more elements, to have some logic when creating our XML:</p>
</div>
<div class="listingblock">
<div class="title">Mix code</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter)

xmlMarkup
        .'x:movies'('xmlns:x': 'http://www.groovy-lang.org') {
    (1..3).each { n -&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        'x:movie'(id: n, "the godfather $n")
        if (n % 2 == 0) { <i class="conum" data-value="2"></i><b>(2)</b>
            'x:movie'(id: n, "the godfather $n (Extended)")
        }
    }
}

def movies =
        new XmlSlurper()
                .parseText(xmlWriter.toString())
                .declareNamespace(x: 'http://www.groovy-lang.org')

assert movies.'x:movie'.size() == 4
assert movies.'x:movie'*.text().every { name -&gt; name.startsWith('the') }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Generating elements from a range</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Using a conditional for creating a given element</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Of course the instance of a builder can be passed as a parameter to
refactor/modularize your code:</p>
</div>
<div class="listingblock">
<div class="title">Mix code</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter)

<i class="conum" data-value="1"></i><b>(1)</b>
Closure&lt;MarkupBuilder&gt; buildMovieList = { MarkupBuilder builder -&gt;
    (1..3).each { n -&gt;
        builder.'x:movie'(id: n, "the godfather $n")
        if (n % 2 == 0) {
            builder.'x:movie'(id: n, "the godfather $n (Extended)")
        }
    }

    return builder
}

xmlMarkup.'x:movies'('xmlns:x': 'http://www.groovy-lang.org') {
    buildMovieList(xmlMarkup) <i class="conum" data-value="2"></i><b>(2)</b>
}

def movies =
        new XmlSlurper()
                .parseText(xmlWriter.toString())
                .declareNamespace(x: 'http://www.groovy-lang.org')

assert movies.'x:movie'.size() == 4
assert movies.'x:movie'*.text().every { name -&gt; name.startsWith('the') }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this case we’ve created a Closure to handle the creation of a list of movies</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Just using the <code>buildMovieList</code> function when necessary</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_streamingmarkupbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingmarkupbuilder"></a>StreamingMarkupBuilder</h5>
<div class="paragraph">
<p>The class <code>groovy.xml.StreamingMarkupBuilder</code> is a builder class for
creating XML markup. This implementation uses a
<code>groovy.xml.streamingmarkupsupport.StreamingMarkupWriter</code> to handle
output.</p>
</div>
<div class="listingblock">
<div class="title">Using StreamingMarkupBuilder</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xml = new StreamingMarkupBuilder().bind { <i class="conum" data-value="1"></i><b>(1)</b>
    records {
        car(name: 'HSV Maloo', make: 'Holden', year: 2006) { <i class="conum" data-value="2"></i><b>(2)</b>
            country('Australia')
            record(type: 'speed', 'Production Pickup Truck with speed of 271kph')
        }
        car(name: 'P50', make: 'Peel', year: 1962) {
            country('Isle of Man')
            record(type: 'size', 'Smallest Street-Legal Car at 99cm wide and 59 kg in weight')
        }
        car(name: 'Royale', make: 'Bugatti', year: 1931) {
            country('France')
            record(type: 'price', 'Most Valuable Car at $15 million')
        }
    }
}

def records = new XmlSlurper().parseText(xml.toString()) <i class="conum" data-value="3"></i><b>(3)</b>

assert records.car.size() == 3
assert records.car.find { it.@name == 'P50' }.country.text() == 'Isle of Man'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that <code>StreamingMarkupBuilder.bind</code> returns a <code>Writable</code>
instance that may be used to stream the markup to a Writer</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We’re capturing the output in a String to parse it again an check
the structure of the generated XML with <code>XmlSlurper</code>.</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_markupbuilderhelper"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilderhelper"></a>MarkupBuilderHelper</h5>
<div class="paragraph">
<p>The <code>groovy.xml.MarkupBuilderHelper</code> is, as its name reflects, a
helper for <code>groovy.xml.MarkupBuilder</code>.</p>
</div>
<div class="paragraph">
<p>This helper normally can be accessed from within an instance of class
<code>groovy.xml.MarkupBuilder</code> or an instance of
<code>groovy.xml.StreamingMarkupBuilder</code>.</p>
</div>
<div class="paragraph">
<p>This helper could be handy in situations when you may want to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Produce a comment in the output</p>
</li>
<li>
<p>Produce an XML processing instruction in the output</p>
</li>
<li>
<p>Produce an XML declaration in the output</p>
</li>
<li>
<p>Print data in the body of the current tag, escaping XML entities</p>
</li>
<li>
<p>Print data in the body of the current tag</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In both <code>MarkupBuilder</code> and <code>StreamingMarkupBuilder</code> this helper is
accessed by the property <code>mkp</code>:</p>
</div>
<div class="listingblock">
<div class="title">Using MarkupBuilder’s 'mkp'</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xmlWriter = new StringWriter()
def xmlMarkup = new MarkupBuilder(xmlWriter).rules {
    mkp.comment('THIS IS THE MAIN RULE') <i class="conum" data-value="1"></i><b>(1)</b>
    rule(sentence: mkp.yield('3 &gt; n')) <i class="conum" data-value="2"></i><b>(2)</b>
}

<i class="conum" data-value="3"></i><b>(3)</b>
assert xmlWriter.toString().contains('3 &amp;gt; n')
assert xmlWriter.toString().contains('&lt;!-- THIS IS THE MAIN RULE --&gt;')</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using <code>mkp</code> to create a comment in the XML</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Using <code>mkp</code> to generate an escaped value</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Checking both assumptions were true</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Here is another example to show the use of <code>mkp</code> property accessible
from within the <code>bind</code> method scope when using
<code>StreamingMarkupBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="title">Using StreamingMarkupBuilder’s 'mkp'</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xml = new StreamingMarkupBuilder().bind {
    records {
        car(name: mkp.yield('3 &lt; 5')) <i class="conum" data-value="1"></i><b>(1)</b>
        car(name: mkp.yieldUnescaped('1 &lt; 3')) <i class="conum" data-value="2"></i><b>(2)</b>
    }
}

assert xml.toString().contains('3 &amp;lt; 5')
assert xml.toString().contains('1 &lt; 3')</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If we want to generate a escaped value for the name attribute with
<code>mkp.yield</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Checking the values later on with <code>XmlSlurper</code></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_domtogroovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domtogroovy"></a>DOMToGroovy</h5>
<div class="paragraph">
<p>Suppose we have an existing XML document and we want to automate
generation of the markup without having to type it all in? We just
need to use <code>org.codehaus.groovy.tools.xml.DOMToGroovy</code> as shown in
the following example:</p>
</div>
<div class="listingblock">
<div class="title">Building MarkupBuilder from DOMToGroovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def songs = """
    &lt;songs&gt;
      &lt;song&gt;
        &lt;title&gt;Here I go&lt;/title&gt;
        &lt;band&gt;Whitesnake&lt;/band&gt;
      &lt;/song&gt;
    &lt;/songs&gt;
"""

def builder =
        javax.xml.parsers.DocumentBuilderFactory.newInstance().newDocumentBuilder()

def inputStream = new ByteArrayInputStream(songs.bytes)
def document = builder.parse(inputStream)
def output = new StringWriter()
def converter = new DomToGroovy(new PrintWriter(output)) <i class="conum" data-value="1"></i><b>(1)</b>

converter.print(document) <i class="conum" data-value="2"></i><b>(2)</b>

String xmlRecovered =
        new GroovyShell()
                .evaluate("""
           def writer = new StringWriter()
           def builder = new groovy.xml.MarkupBuilder(writer)
           builder.${output}

           return writer.toString()
        """) <i class="conum" data-value="3"></i><b>(3)</b>

assert new XmlSlurper().parseText(xmlRecovered).song.title.text() == 'Here I go' <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creating <code>DOMToGroovy</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Converts the XML to <code>MarkupBuilder</code> calls which are available in the output <code>StringWriter</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Using <code>output</code> variable to create the whole MarkupBuilder</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Back to XML string</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manipulating_xml"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_manipulating_xml"></a>3.9.4. Manipulating XML</h4>
<div class="paragraph">
<p>In this chapter you’ll see the different ways of adding / modifying /
removing nodes using <code>XmlSlurper</code> or <code>XmlParser</code>. The xml we are going
to be handling is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def xml = """
&lt;response version-api="2.0"&gt;
    &lt;value&gt;
        &lt;books&gt;
            &lt;book id="2"&gt;
                &lt;title&gt;Don Quixote&lt;/title&gt;
                &lt;author id="1"&gt;Miguel de Cervantes&lt;/author&gt;
            &lt;/book&gt;
        &lt;/books&gt;
    &lt;/value&gt;
&lt;/response&gt;
"""</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_adding_nodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_nodes"></a>Adding nodes</h5>
<div class="paragraph">
<p>The main difference between <code>XmlSlurper</code> and <code>XmlParser</code> is that when
former creates the nodes they won’t be available until the document’s
been evaluated again, so you should parse the transformed document
again in order to be able to see the new nodes. So keep that in mind
when choosing any of both approaches.</p>
</div>
<div class="paragraph">
<p>If you needed to see a node right after creating it then <code>XmlParser</code>
should be your choice, but if you’re planning to do many changes to
the XML and send the result to another process maybe <code>XmlSlurper</code> would
be more efficient.</p>
</div>
<div class="paragraph">
<p>You can’t create a new node directly using the <code>XmlSlurper</code> instance,
but you can with <code>XmlParser</code>. The way of creating a new node from
XmlParser is through its method <code>createNode(..)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def parser = new XmlParser()
def response = parser.parseText(xml)
def numberOfResults = parser.createNode(
        response,
        new QName("numberOfResults"),
        [:]
)

numberOfResults.value = "1"
assert response.numberOfResults.text() == "1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>createNode()</code> method receives the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>parent node (could be null)</p>
</li>
<li>
<p>The qualified name for the tag (In this case we only use the local
part without any namespace). We’re using an instance of
<code>groovy.namespace.QName</code></p>
</li>
<li>
<p>A map with the tag’s attributes (None in this particular case)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Anyway you won’t normally be creating a node from the parser instance
but from the parsed XML instance. That is from a <code>Node</code> or a
<code>GPathResult</code> instance.</p>
</div>
<div class="paragraph">
<p>Take a look at the next example. We are parsing the xml with <code>XmlParser</code>
and then creating a new node from the parsed document’s instance
(Notice the method here is slightly different in the way it receives
the parameters):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def parser = new XmlParser()
def response = parser.parseText(xml)

response.appendNode(
        new QName("numberOfResults"),
        [:],
        "1"
)

response.numberOfResults.text() == "1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <code>XmlSlurper</code>, <code>GPathResult</code> instances don’t have <code>createNode()</code>
method.</p>
</div>
</div>
<div class="sect4">
<h5 id="_modifying_removing_nodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_modifying_removing_nodes"></a>Modifying / Removing nodes</h5>
<div class="paragraph">
<p>We know how to parse the document, add new nodes, now I want to change
a given node’s content. Let’s start using <code>XmlParser</code> and <code>Node</code>. This
example changes the first book information to actually another book.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlParser().parseText(xml)

/* Use the same syntax as groovy.xml.MarkupBuilder */
response.value.books.book[0].replaceNode { <i class="conum" data-value="1"></i><b>(1)</b>
    book(id: "3") {
        title("To Kill a Mockingbird")
        author(id: "3", "Harper Lee")
    }
}

def newNode = response.value.books.book[0]

assert newNode.name() == "book"
assert newNode.@id == "3"
assert newNode.title.text() == "To Kill a Mockingbird"
assert newNode.author.text() == "Harper Lee"
assert newNode.author.@id.first() == "3"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <code>replaceNode()</code> the closure we pass as parameter should
follow the same rules as if we were using <code>groovy.xml.MarkupBuilder</code>:</p>
</div>
<div class="paragraph">
<p>Here’s the same example using <code>XmlSlurper</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)

/* Use the same syntax as groovy.xml.MarkupBuilder */
response.value.books.book[0].replaceNode {
    book(id: "3") {
        title("To Kill a Mockingbird")
        author(id: "3", "Harper Lee")
    }
}

assert response.value.books.book[0].title.text() == "Don Quixote"

/* That mkp is a special namespace used to escape away from the normal building mode
   of the builder and get access to helper markup methods
   'yield', 'pi', 'comment', 'out', 'namespaces', 'xmlDeclaration' and
   'yieldUnescaped' */
def result = new StreamingMarkupBuilder().bind { mkp.yield response }.toString()
def changedResponse = new XmlSlurper().parseText(result)

assert changedResponse.value.books.book[0].title.text() == "To Kill a Mockingbird"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how using <code>XmlSlurper</code> we have to parse the transformed document
again in order to find the created nodes. In this particular example
could be a little bit annoying isn’t it?</p>
</div>
<div class="paragraph">
<p>Finally both parsers also use the same approach for adding a new
attribute to a given attribute. This time again the difference is
whether you want the new nodes to be available right away or
not. First <code>XmlParser</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def parser = new XmlParser()
def response = parser.parseText(xml)

response.@numberOfResults = "1"

assert response.@numberOfResults == "1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And <code>XmlSlurper</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlSlurper().parseText(books)
response.@numberOfResults = "2"

assert response.@numberOfResults == "2"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <code>XmlSlurper</code>, adding a new attribute does <strong>not</strong> require you to perform a new evaluation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_printing_xml"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_printing_xml"></a>Printing XML</h5>
<div class="sect5">
<h6 id="_xmlutil"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmlutil"></a>XmlUtil</h6>
<div class="paragraph">
<p>Sometimes is useful to get not only the value of a given node but the
node itself (for instance to add this node to another XML).</p>
</div>
<div class="paragraph">
<p>For that you can use <code>groovy.xml.XmlUtil</code> class. It has several static
methods to serialize the xml fragment from several type of sources
(Node, GPathResult, String…​)</p>
</div>
<div class="listingblock">
<div class="title">Getting a node as a string</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def response = new XmlParser().parseText(xml)
def nodeToSerialize = response.'**'.find { it.name() == 'author' }
def nodeAsText = XmlUtil.serialize(nodeToSerialize)

assert nodeAsText ==
        XmlUtil.serialize('&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;author id="1"&gt;Miguel de Cervantes&lt;/author&gt;')</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scripting_ant_tasks"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_scripting_ant_tasks"></a>3.10. Scripting Ant tasks</h3>
<div class="paragraph">
<p>Groovy integrates very well with <a href="http://ant.apache.org/">Apache Ant</a> thanks to <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_antbuilder">AntBuilder</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_groovy_ant_task"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_groovy_ant_task"></a>3.11. The &lt;groovy&gt; Ant Task</h3>
<div class="paragraph">
<p>Executes a series of Groovy statements from <a href="http://ant.apache.org/">Apache Ant</a>.
Statements can either be read in from a text file using the <code>src</code> attribute or from between the enclosing Groovy tags.</p>
</div>
<div class="sect3">
<h4 id="_required_taskdef"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_required_taskdef"></a>3.11.1. Required taskdef</h4>
<div class="paragraph">
<p>Assuming all the groovy jars you need are in <em>my.classpath</em> (this will be <code>groovy-VERSION.jar</code>,
<code>groovy-ant-VERSION.jar</code> plus any modules and transitive dependencies you might be using)
you will need to declare this task at some point in the <code>build.xml</code> prior to
the <code>groovy</code> task being invoked.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;taskdef name="groovy"
         classname="org.codehaus.groovy.ant.Groovy"
         classpathref="my.classpath"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now use the task like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy src="..." otherAttributes="..."&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy&gt;
...
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might need to use the <em>contextClassLoader</em> attribute (see below) if any of your modules load services via the classpath, e.g. <code>groovy-json</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_groovy_attributes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_attributes"></a>3.11.2. &lt;groovy&gt; attributes</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contextClassLoader</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled, the contextClassLoader to be set with the classLoader of the shell used to run the script. Not used if fork is true.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File containing Groovy statements. The directory containing the file is added to the classpath.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes, unless statements enclosed within tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The classpath to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classpathref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The classpath to use, given as reference to a PATH defined elsewhere.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the output file; defaults to the Ant log.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">append</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled and output is to a file, append to existing file rather than overwrite. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fork</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled the script will be executed in a forked JVM process (disabled by default).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scriptBaseClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the base class for scripts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">indy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled the script will be executed with <code>invokedynamic</code> (disabled by default).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates metadata for reflection on method parameter names on JDK 8 and above. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useGroovyShell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled a new GroovyShell is used to run the script. Special variables won’t be available but you don’t need Ant in the classpath. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeAntRuntime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled the system classpath will be included on the classpath when forking. Defaults to true.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stacktrace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled a stacktrace will be reported if an error occurs during compilation. Defaults to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configScript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the configuration script for the groovy compiler configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameters_specified_as_nested_elements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameters_specified_as_nested_elements"></a>3.11.3. Parameters specified as nested elements</h4>
<div class="sect4">
<h5 id="_classpath"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_classpath"></a>&lt;classpath&gt;</h5>
<div class="paragraph">
<p>Groovy’s classpath attribute is a PATH like structure and can also be set via a nested classpath element.</p>
</div>
</div>
<div class="sect4">
<h5 id="_arg"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_arg"></a>&lt;arg&gt;</h5>
<div class="paragraph">
<p>Arguments can be set via one or more nested &lt;arg&gt; elements using the standard Ant <a href="http://ant.apache.org/manual/using.html#arg">command line conventions</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_available_bindings"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_available_bindings"></a>3.11.4. Available bindings</h4>
<div class="paragraph">
<p>A number of bindings are in scope for use within your Groovy statements.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">args</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command line arguments, if any</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an instance of <code>AntBuilder</code> that knows about the current ant project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the current ant project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a <code>Map</code> of ant properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">target</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the owning target that invoked this groovy script</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">task</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the wrapping task, can access anything needed in <code>org.apache.tools.ant.Task</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_examples_2"></a>3.11.5. Examples</h4>
<div class="paragraph">
<p>Hello world, version 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy&gt;
println "Hello World"
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hello world, version 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy&gt;
ant.echo "Hello World"
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>List all xml files in the current directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy&gt;
xmlfiles = new File(".").listFiles().findAll{ it =~ "\.xml$" }
xmlfiles.sort().each { println it.toString() }
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>List all xml files within a jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;zipfileset id="found" src="foobar.jar"
            includes="**/*.xml"/&gt;
&lt;groovy&gt;
    project.references.found.each {
        println it.name
    }
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run a script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy src="/some/directory/some/file.groovy"&gt;
  &lt;classpath&gt;
    &lt;pathelement location="/my/groovy/classes/directory"/&gt;
  &lt;/classpath&gt;
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all <code>Builder</code> classes having an <code>org.*</code> package within a directory of jars:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;property name="local.target" value="C:/Projects/GroovyExamples"/&gt;
&lt;groovy&gt;
import java.util.jar.JarFile
def classes = []
def resourceNamePattern = /org\/.*\/.*Builder.class/
def jarNamePattern = /.*(beta|commons).*jar$/

def libdir = new File("${properties['local.target']}/lib")
libdir.listFiles().grep(~jarNamePattern).each { candidate -&gt;
    new JarFile(candidate).entries().each { entry -&gt;
        if (entry.name ==~ resourceNamePattern) classes += entry.name
    }
}
properties["builder-classes"] = classes.join(' ')
&lt;/groovy&gt;
&lt;echo message='${builder-classes}'/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which might result in something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>org/apache/commons/cli/PatternOptionBuilder.class org/apache/commons/cli/OptionBuilder.class org/codehaus/groovy/tools/groovydoc/GroovyRootDocBuilder.class org/custommonkey/xmlunit/HTMLDocumentBuilder.class org/custommonkey/xmlunit/TolerantSaxDocumentBuilder.class</code></pre>
</div>
</div>
<div class="paragraph">
<p>FileScanner version of above (with a slight variation on collecting the names):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovy&gt;
import java.util.jar.JarFile
def resourceNamePattern = /org\/.*\/.*Builder.class/
def candidates = ant.fileScanner {
    fileset(dir: '${local.target}/lib') {
        include(name: '*beta*.jar')
        include(name: '*commons*.jar')
    }
}
def classes = candidates.collect {
    new JarFile(it).entries().collect { it.name }.findAll {
        it ==~ resourceNamePattern
    }
}.flatten()
properties["builder-classes"] = classes.join(' ')
&lt;/groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling out to a web service from your Ant script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="SOAP example" default="main" basedir="."&gt;
    &lt;property environment="env"/&gt;
    &lt;property name="celsius" value="0"/&gt;
    &lt;target name="main"&gt;
        &lt;taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"&gt;
            &lt;classpath&gt;
                &lt;fileset dir="${env.GROOVY_HOME}" includes="lib/groovy-*.jar,lib/ivy*.jar"/&gt;
            &lt;/classpath&gt;
        &lt;/taskdef&gt;
        &lt;groovy&gt;
            @Grab('org.codehaus.groovy.modules:groovyws:0.5.1')
            import groovyx.net.ws.WSClient
            def url = 'http://www.w3schools.com/webservices/tempconvert.asmx?WSDL'
            def proxy = new WSClient(url, this.class.classLoader)
            proxy.initialize()
            ant.echo "I'm freezing at ${properties.celsius} degrees Celsius"
            properties.result = proxy.CelsiusToFahrenheit(properties.celsius)
        &lt;/groovy&gt;
        &lt;antcall target="results"/&gt;
    &lt;/target&gt;
    &lt;target name="results"&gt;
        &lt;echo message="I'm freezing at ${result} degrees Fahrenheit"/&gt;
    &lt;/target&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will output the following (along with some informational messages):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>main:
     ...
     [echo] I'm freezing at 0 degrees Celsius
results:
     [echo] I'm freezing at 32 degrees Fahrenheit

BUILD SUCCESSFUL</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;target name="run"&gt;
    &lt;groovy&gt;
        &lt;arg line="1 2 3"/&gt;
        &lt;arg value="4 5"/&gt;
        println args.size()
        println args[2]
        args.each{ ant.echo(message:it) }
    &lt;/groovy&gt;
&lt;/target&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>Buildfile: build.xml

run:
   [groovy] 4
   [groovy] 3
     [echo] 1
     [echo] 2
     [echo] 3
     [echo] 4 5

BUILD SUCCESSFUL</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_template_engines"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_engines"></a>3.12. Template engines</h3>
<div class="sect3">
<h4 id="_introduction_4"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_4"></a>3.12.1. Introduction</h4>
<div class="paragraph">
<p>Groovy supports multiple ways to generate text dynamically including <code>GStrings</code>, <code>printf</code> and <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder">MarkupBuilder</a> just to name a few. In addition to these, there is a dedicated template framework which is well-suited to applications where the text to be generated follows the form of a static template.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_framework"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_framework"></a>3.12.2. Template framework</h4>
<div class="paragraph">
<p>The template framework in Groovy consists of a <code>TemplateEngine</code> abstract base class that engines must implement and a <code>Template</code> interface that the resulting templates they generate must implement.</p>
</div>
<div class="paragraph">
<p>Included with Groovy are several template engines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SimpleTemplateEngine</code> - for basic templates</p>
</li>
<li>
<p><code>StreamingTemplateEngine</code> - functionally equivalent to <code>SimpleTemplateEngine</code>, but can handle strings larger than 64k</p>
</li>
<li>
<p><code>GStringTemplateEngine</code> - stores the template as writeable closures (useful for streaming scenarios)</p>
</li>
<li>
<p><code>XmlTemplateEngine</code> - works well when the template and output are valid XML</p>
</li>
<li>
<p><code>MarkupTemplateEngine</code> - a very complete, optimized, template engine</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simpletemplateengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simpletemplateengine"></a>3.12.3. SimpleTemplateEngine</h4>
<div class="paragraph">
<p>Shown here is the <code>SimpleTemplateEngine</code> that allows you to use JSP-like scriptlets (see example below), script, and EL expressions in your template in order to generate parametrized text. Here is an example of using the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def text = 'Dear "$firstname $lastname",\nSo nice to meet you in &lt;% print city %&gt;.\nSee you in ${month},\n${signed}'

def binding = ["firstname":"Sam", "lastname":"Pullara", "city":"San Francisco", "month":"December", "signed":"Groovy-Dev"]

def engine = new groovy.text.SimpleTemplateEngine()
def template = engine.createTemplate(text).make(binding)

def result = 'Dear "Sam Pullara",\nSo nice to meet you in San Francisco.\nSee you in December,\nGroovy-Dev'

assert result == template.toString()</code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is generally not deemed good practice to mix processing logic in your template (or view), sometimes very simple logic can be useful. E.g. in the example above, we could change this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">$firstname</code></pre>
</div>
</div>
<div class="paragraph">
<p>to this (assuming we have set up a static import for capitalize <strong>inside</strong> the template):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">${firstname.capitalize()}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">&lt;% print city %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">&lt;% print city == "New York" ? "The Big Apple" : city %&gt;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_advanced_usage_note"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_usage_note"></a>Advanced Usage Note</h5>
<div class="paragraph">
<p>If you happen to be embedding your template directly in your script (as we did above) you have to be careful about backslash escaping. Because the template string itself will be parsed by Groovy before it is passed to the templating framework, you have to escape any backslashes inside GString expressions or scriptlet 'code' that are entered as part of a Groovy program. E.g. if we wanted quotes around <em>The Big Apple</em> above, we would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">&lt;% print city == "New York" ? "\\"The Big Apple\\"" : city %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, if we wanted a newline, we would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">\\n</code></pre>
</div>
</div>
<div class="paragraph">
<p>in any GString expression or scriptlet 'code' that appears inside a Groovy script. A normal “\n” is fine within the static template text itself or if the entire template itself is in an external template file. Similarly, to represent an actual backslash in your text you would need</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">\\\\</code></pre>
</div>
</div>
<div class="paragraph">
<p>in an external file or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">\\\\</code></pre>
</div>
</div>
<div class="paragraph">
<p>in any GString expression or scriptlet 'code'. (Note: the necessity to have this extra slash may go away in a future version of Groovy if we can find an easy way to support such a change.)</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_streamingtemplateengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingtemplateengine"></a>3.12.4. StreamingTemplateEngine</h4>
<div class="paragraph">
<p>The <code>StreamingTemplateEngine</code> engine is functionally equivalent to the <code>SimpleTemplateEngine</code>, but creates the template using writable closures making it more scalable for large templates. Specifically this template engine can handle strings larger than 64k.</p>
</div>
<div class="paragraph">
<p>It uses JSP style &lt;% %&gt; script and &lt;%= %&gt; expression syntax or GString style expressions. The variable 'out' is bound to the writer that the template is being written to.</p>
</div>
<div class="paragraph">
<p>Frequently, the template source will be a file but here we show a simple example providing the template as a string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def text = '''\
Dear &lt;% out.print firstname %&gt; ${lastname},

We &lt;% if (accepted) out.print 'are pleased' else out.print 'regret' %&gt; \
to inform you that your paper entitled
'$title' was ${ accepted ? 'accepted' : 'rejected' }.

The conference committee.'''

def template = new groovy.text.StreamingTemplateEngine().createTemplate(text)

def binding = [
    firstname : "Grace",
    lastname  : "Hopper",
    accepted  : true,
    title     : 'Groovy for COBOL programmers'
]

String response = template.make(binding)

assert response == '''Dear Grace Hopper,

We are pleased to inform you that your paper entitled
'Groovy for COBOL programmers' was accepted.

The conference committee.'''</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gstringtemplateengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_gstringtemplateengine"></a>3.12.5. GStringTemplateEngine</h4>
<div class="paragraph">
<p>As an example of using the <code>GStringTemplateEngine</code>, here is the example above done again (with a few changes to show some other options). First we will store the template in a file this time:</p>
</div>
<div class="listingblock">
<div class="title">test.template</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Dear "$firstname $lastname",
So nice to meet you in &lt;% out &lt;&lt; (city == "New York" ? "\\"The Big Apple\\"" : city) %&gt;.
See you in ${month},
${signed}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that we used <code>out</code> instead of <code>print</code> to support the streaming nature of <code>GStringTemplateEngine</code>. Because we have the template in a separate file, there is no need to escape the backslashes. Here is how we call it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def f = new File('test.template')
def engine = new groovy.text.GStringTemplateEngine()
def template = engine.createTemplate(f).make(binding)
println template.toString()</code></pre>
</div>
</div>
<div class="paragraph">
<p>and here is the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Dear "Sam Pullara",
So nice to meet you in "The Big Apple".
See you in December,
Groovy-Dev</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_xmltemplateengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_xmltemplateengine"></a>3.12.6. XmlTemplateEngine</h4>
<div class="paragraph">
<p><code>XmlTemplateEngine</code> for use in templating scenarios where both the template source and the expected output are intended to be XML. Templates may use the normal <code>${expression}</code> and <code>$variable</code> notations to insert an arbitrary expression into the template. In addition, support is also provided for special tags: <code>&lt;gsp:scriptlet&gt;</code> (for inserting code fragments) and <code>&lt;gsp:expression&gt;</code> (for code fragments which produce output).</p>
</div>
<div class="paragraph">
<p>Comments and processing instructions will be removed as part of processing and special XML characters such as <code>&lt;</code>, <code>&gt;</code>, <code>"</code> and <code>'</code> will be escaped using the respective XML notation. The output will also be indented using standard XML pretty printing.</p>
</div>
<div class="paragraph">
<p>The xmlns namespace definition for gsp: tags will be removed but other namespace definitions will be preserved (but may change to an equivalent position within the XML tree).</p>
</div>
<div class="paragraph">
<p>Normally, the template source will be in a file but here is a simple example providing the XML template as a string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def binding = [firstname: 'Jochen', lastname: 'Theodorou', nickname: 'blackdrag', salutation: 'Dear']
def engine = new groovy.text.XmlTemplateEngine()
def text = '''\
    &lt;document xmlns:gsp='http://groovy.codehaus.org/2005/gsp' xmlns:foo='baz' type='letter'&gt;
        &lt;gsp:scriptlet&gt;def greeting = "${salutation}est"&lt;/gsp:scriptlet&gt;
        &lt;gsp:expression&gt;greeting&lt;/gsp:expression&gt;
        &lt;foo:to&gt;$firstname "$nickname" $lastname&lt;/foo:to&gt;
        How are you today?
    &lt;/document&gt;
'''
def template = engine.createTemplate(text).make(binding)
println template.toString()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example will produce this output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;document type='letter'&gt;
  Dearest
  &lt;foo:to xmlns:foo='baz'&gt;
    Jochen &amp;quot;blackdrag&amp;quot; Theodorou
  &lt;/foo:to&gt;
  How are you today?
&lt;/document&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_markuptemplateengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_markuptemplateengine"></a>3.12.7. The MarkupTemplateEngine</h4>
<div class="paragraph">
<p>This template engine is a template engine primarily aimed at generating XML-like markup (XML, XHTML, HTML5, …​), but that
can be used to generate any text based content. Unlike traditional template engines, this one relies on a DSL that uses the
builder syntax. Here is a sample template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">xmlDeclaration()
cars {
   cars.each {
       car(make: it.make, model: it.model)
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you feed it with the following model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">model = [cars: [new Car(make: 'Peugeot', model: '508'), new Car(make: 'Toyota', model: 'Prius')]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>It would be rendered as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version='1.0'?&gt;
&lt;cars&gt;&lt;car make='Peugeot' model='508'/&gt;&lt;car make='Toyota' model='Prius'/&gt;&lt;/cars&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The key features of this template engine are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <em>markup builder like</em> syntax</p>
</li>
<li>
<p>templates are compiled into bytecode</p>
</li>
<li>
<p>fast rendering</p>
</li>
<li>
<p>optional type checking of the model</p>
</li>
<li>
<p>includes</p>
</li>
<li>
<p>internationalization support</p>
</li>
<li>
<p>fragments/layouts</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_the_template_format"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_template_format"></a>The template format</h5>
<div class="sect5">
<h6 id="_basics"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_basics"></a>Basics</h6>
<div class="paragraph">
<p>Templates consist of Groovy code. Let’s explore the first example more thoroughly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">xmlDeclaration()                                <i class="conum" data-value="1"></i><b>(1)</b>
cars {                                          <i class="conum" data-value="2"></i><b>(2)</b>
   cars.each {                                  <i class="conum" data-value="3"></i><b>(3)</b>
       car(make: it.make, model: it.model)      <i class="conum" data-value="4"></i><b>(4)</b>
   }                                            <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>renders the XML declaration string.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>opens a <code>cars</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>cars</code> is a variable found in the <em>template model</em>, which is a list of <code>Car</code> instances</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>for each item, we create a <code>car</code> tag with the attributes from the <code>Car</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>closes the <code>cars</code> tag</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see, regular Groovy code can be used in the template. Here, we are calling <code>each</code> on a list (retrieved from the model), allowing us to
render one <code>car</code> tag per entry.</p>
</div>
<div class="paragraph">
<p>In a similar fashion, rendering HTML code is as simple as this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">yieldUnescaped '&lt;!DOCTYPE html&gt;'                                                    <i class="conum" data-value="1"></i><b>(1)</b>
html(lang:'en') {                                                                   <i class="conum" data-value="2"></i><b>(2)</b>
    head {                                                                          <i class="conum" data-value="3"></i><b>(3)</b>
        meta('http-equiv':'"Content-Type" content="text/html; charset=utf-8"')      <i class="conum" data-value="4"></i><b>(4)</b>
        title('My page')                                                            <i class="conum" data-value="5"></i><b>(5)</b>
    }                                                                               <i class="conum" data-value="6"></i><b>(6)</b>
    body {                                                                          <i class="conum" data-value="7"></i><b>(7)</b>
        p('This is an example of HTML contents')                                    <i class="conum" data-value="8"></i><b>(8)</b>
    }                                                                               <i class="conum" data-value="9"></i><b>(9)</b>
}                                                                                   <i class="conum" data-value="10"></i><b>(10)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>renders the HTML doctype special tag</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>opens the <code>html</code> tag with an attribute</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>opens the <code>head</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>renders a <code>meta</code> tag with one <code>http-equiv</code> attribute</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>renders the <code>title</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>closes the <code>head</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>opens the <code>body</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>renders a <code>p</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>closes the <code>body</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>closes the <code>html</code> tag</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The output is straightforward:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!DOCTYPE html&gt;&lt;html lang='en'&gt;&lt;head&gt;&lt;meta http-equiv='"Content-Type" content="text/html; charset=utf-8"'/&gt;&lt;title&gt;My page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;This is an example of HTML contents&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With some <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-config">configuration</a>, you can have the output pretty printed, with newlines and indent automatically added.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_support_methods"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_support_methods"></a>Support methods</h6>
<div class="paragraph">
<p>In the previous example, the doctype declaration was rendered using the <code>yieldUnescaped</code> method. We have also seen the <code>xmlDeclaration</code> method.
The template engine provides several support methods that will help you render contents appropriately:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">yield</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders contents, but escapes it before rendering</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">yield 'Some text with &lt;angle brackets&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Some text with &amp;lt;angle brackets&amp;gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">yieldUnescaped</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders raw contents. The argument is rendered as is, without escaping.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">yieldUnescaped 'Some text with &lt;angle brackets&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Some text with &lt;angle brackets&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xmlDeclaration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders an XML declaration String. If the encoding is specified in the configuration, it is written in the declaration.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">xmlDeclaration()</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;?xml version='1.0'?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>TemplateConfiguration#getDeclarationEncoding</code> is not null:</p>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders raw contents inside an XML comment</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">comment 'This is &lt;a href="foo.html"&gt;commented out&lt;/a&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!--This is &lt;a href="foo.html"&gt;commented out&lt;/a&gt;--&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">newLine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders a new line. See also <code>TemplateConfiguration#setAutoNewLine</code> and <code>TemplateConfiguration#setNewLineString</code>.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p('text')
newLine()
p('text on new line')</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;text&lt;/p&gt;
&lt;p&gt;text on new line&lt;/p&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders an XML processing instruction.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">pi("xml-stylesheet":[href:"mystyle.css", type:"text/css"])</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml-stylesheet href='mystyle.css' type='text/css'?&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tryEscape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an escaped string for an object, if it is a <code>String</code> (or any type derived from <code>CharSequence</code>). Otherwise returns the object itself.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">yieldUnescaped tryEscape('Some text with &lt;angle brackets&gt;')</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Some text with &amp;lt;angle brackets&amp;gt;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_includes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_includes"></a>Includes</h6>
<div class="paragraph">
<p>The <code>MarkupTemplateEngine</code> supports inclusion of contents from another file. Included contents may be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>another template</p>
</li>
<li>
<p>raw contents</p>
</li>
<li>
<p>contents to be escaped</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Including another template can be done using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">include template: 'other_template.tpl'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Including a file as raw contents, without escaping it, can be done like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">include unescaped: 'raw.txt'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eventually, inclusion of text that should be escaped before rendering can be done using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">include escaped: 'to_be_escaped.txt'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use the following helper methods instead:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>includeGroovy(&lt;name&gt;)</code> to include another template</p>
</li>
<li>
<p><code>includeEscaped(&lt;name&gt;)</code> to include another file with escaping</p>
</li>
<li>
<p><code>includeUnescaped(&lt;name&gt;)</code> to include another file without escaping</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Calling those methods instead of the <code>include xxx:</code> syntax can be useful if the name of the file to be included is dynamic (stored in a variable for example).
Files to be included (independently of their type, template or text) are found on <strong>classpath</strong>. This is one of the reasons why the <code>MarkupTemplateEngine</code> takes
an optional <code>ClassLoader</code> as constructor argument (the other reason being that you can include code referencing other classes in a template).</p>
</div>
<div class="paragraph">
<p>If you don’t want your templates to be on classpath, the <code>MarkupTemplateEngine</code> accepts a convenient constructor that lets you define the directory where
templates are to be found.</p>
</div>
</div>
<div class="sect5">
<h6 id="_fragments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_fragments"></a>Fragments</h6>
<div class="paragraph">
<p>Fragments are nested templates. They can be used to provide improved composition in a single template. A fragment consists of
a string, the inner template, and a model, used to render this template. Consider the following template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">ul {
    pages.each {
        fragment "li(line)", line:it
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>fragment</code> element creates a nested template, and renders it with a model which is specific to this template. Here,
we have the <code>li(line)</code> fragment, where <code>line</code> is bound to <code>it</code>. Since <code>it</code> corresponds to the iteration of <code>pages</code>,
we will generate a single <code>li</code> element for each page in our model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;&lt;li&gt;Page 1&lt;/li&gt;&lt;li&gt;Page 2&lt;/li&gt;&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fragments are interesting to factorize template elements. They come at the price of the compilation of a fragment per template, and they cannot
be externalized.</p>
</div>
</div>
<div class="sect5">
<h6 id="_layouts"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_layouts"></a>Layouts</h6>
<div class="paragraph">
<p>Layouts, unlike fragments, refer to other templates. They can be used to compose templates and share common structures. This is often
interesting if you have, for example, a common HTML page setup, and that you only want to replace the body. This can be done easily
with a <em>layout</em>. First of all, you need to create a layout template:</p>
</div>
<div class="listingblock">
<div class="title">layout-main.tpl</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">html {
    head {
        title(title)                <i class="conum" data-value="1"></i><b>(1)</b>
    }
    body {
        bodyContents()              <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>title</code> variable (inside the title tag) is a layout variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>bodyContents</code> call will render the body</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Then what you need is a template that includes the layout:</p>
</div>
<div id="example-layout-simple" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">layout 'layout-main.tpl',                                   <i class="conum" data-value="1"></i><b>(1)</b>
    title: 'Layout example',                                <i class="conum" data-value="2"></i><b>(2)</b>
    bodyContents: contents { p('This is the body') }        <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>use the <code>main-layout.tpl</code> layout file</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>set the <code>title</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>set the <code>bodyContents</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see, <code>bodyContents</code> will be rendered inside the layout, thanks to the <code>bodyContents()</code> call in the layout file. As
a result, the template will be rendered as this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;&lt;head&gt;&lt;title&gt;Layout example&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;This is the body&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The call to the <code>contents</code> method is used to tell the template engine that the block of code is in fact a specification of a
template, instead of a helper function to be rendered directly. If you don’t add <code>contents</code> before your specification, then
the contents would be rendered, but you would also see a random string generated, corresponding to the result value of the block.</p>
</div>
<div class="paragraph">
<p>Layouts are a powerful way to share common elements across multiple
templates, without having to rewrite everything or use includes.</p>
</div>
<div class="paragraph">
<p>Layouts use, by default, a model which is independent from the model of the page where they are used. It is however possible
to make them inherit from the parent model. Imagine that the model is defined like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">model = new HashMap&lt;String,Object&gt;();
model.put('title','Title from main model');</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the following template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">layout 'layout-main.tpl', true,                             <i class="conum" data-value="1"></i><b>(1)</b>
    bodyContents: contents { p('This is the body') }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>note the use of <code>true</code> to enable model inheritance</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>then it is not necessary to pass the <code>title</code> value to the layout as in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#example-layout-simple">previous example</a>. The result will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;&lt;head&gt;&lt;title&gt;Title from main model&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;This is the body&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>But it is also possible to override a value from the parent model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">layout 'layout-main.tpl', true,                             <i class="conum" data-value="1"></i><b>(1)</b>
    title: 'overridden title',                               <i class="conum" data-value="2"></i><b>(2)</b>
    bodyContents: contents { p('This is the body') }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>true</code> means inherit from the parent model</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>but <code>title</code> is overridden</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>then the output will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;&lt;head&gt;&lt;title&gt;overridden title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;This is the body&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rendering_contents"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_rendering_contents"></a>Rendering contents</h5>
<div class="sect5">
<h6 id="_creation_of_a_template_engine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creation_of_a_template_engine"></a>Creation of a template engine</h6>
<div class="paragraph">
<p>On the server side, rendering templates require an instance of <code>groovy.text.markup.MarkupTemplateEngine</code> and a
<code>groovy.text.markup.TemplateConfiguration</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">TemplateConfiguration config = new TemplateConfiguration();         <i class="conum" data-value="1"></i><b>(1)</b>
MarkupTemplateEngine engine = new MarkupTemplateEngine(config);     <i class="conum" data-value="2"></i><b>(2)</b>
Template template = engine.createTemplate("p('test template')");    <i class="conum" data-value="3"></i><b>(3)</b>
Map&lt;String, Object&gt; model = new HashMap&lt;&gt;();                        <i class="conum" data-value="4"></i><b>(4)</b>
Writable output = template.make(model);                             <i class="conum" data-value="5"></i><b>(5)</b>
output.writeTo(writer);                                             <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>creates a template configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>creates a template engine with this configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>creates a template instance from a <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>creates a model to be used in the template</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>bind the model to the template instance</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>render output</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>There are several possible options to parse templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>from a <code>String</code>, using <code>createTemplate(String)</code></p>
</li>
<li>
<p>from a <code>Reader</code>, using <code>createTemplate(Reader)</code></p>
</li>
<li>
<p>from a <code>URL</code>, using <code>createTemplate(URL)</code></p>
</li>
<li>
<p>given a template name, using <code>createTemplateByPath(String)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last version should in general be preferred:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Template template = engine.createTemplateByPath("main.tpl");
Writable output = template.make(model);
output.writeTo(writer);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-config"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-config"></a>Configuration options</h6>
<div class="paragraph">
<p>The behavior of the engine can be tweaked with several configuration options accessible through the <code>TemplateConfiguration</code> class:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">declarationEncoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines the value of the encoding to be written when <code>xmlDeclaration</code> is called. It does <strong>not</strong> influence the writer you are using as output.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">xmlDeclaration()</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;?xml version='1.0'?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>TemplateConfiguration#getDeclarationEncoding</code> is not null:</p>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expandEmptyElements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, empty tags are rendered in their expanded form.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p()</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>expandEmptyElements</code> is true:</p>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;&lt;/p&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useDoubleQuotes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, use double quotes for attributes instead of simple quotes</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">tag(attr:'value')</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;tag attr='value'/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>useDoubleQuotes</code> is true:</p>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;tag attr="value"/&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">newLineString</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System default (system property <code>line.separator</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to choose what string is used when a new line is rendered</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p('foo')
newLine()
p('baz')</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>newLineString='BAR'</code>:</p>
</div>
<div class="paragraph">
<p><strong>Output</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;foo&lt;/p&gt;BAR&lt;p&gt;baz&lt;/p&gt;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoEscape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, variables from models are automatically escaped before rendering.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoescape">the auto escape section</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoIndent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, performs automatic indentation after new lines</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoformat">the auto formatting section</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoIndentString</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">four (4) spaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string to be used as indent.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoformat">the auto formatting section</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoNewLine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, performs automatic insertion of new lines</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoformat">the auto formatting section</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">baseTemplateClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groovy.text.markup.BaseTemplate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the super class of compiled templates. This can be used to provide application specific templates.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-basetemplate">the custom templates section</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the default locale for templates.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-i18n">the internationalization section</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Once the template engine has been created, it is <strong>unsafe</strong> to change the configuration.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-autoformat"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoformat"></a>Automatic formatting</h6>
<div class="paragraph">
<p>By default, the template engine will render output without any specific formatting. Some <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-config">configuration options</a> can improve the situation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>autoIndent</code> is responsible for auto-indenting after a new line is inserted</p>
</li>
<li>
<p><code>autoNewLine</code> is responsible for automatically inserting new lines based on the original formatting of the template source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, it is recommended to set both <code>autoIndent</code> and <code>autoNewLine</code> to true if you want human-readable, pretty printed, output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">config.setAutoNewLine(true);
config.setAutoIndent(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the following template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">html {
    head {
        title('Title')
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will now be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Title&lt;/title&gt;
    &lt;/head&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can slightly change the template so that the <code>title</code> instruction is found on the same line as the <code>head</code> one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">html {
    head { title('Title')
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the output will reflect that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Title&lt;/title&gt;
    &lt;/head&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>New lines are <strong>only</strong> inserted where curly braces for tags are found, and the insertion corresponds to where the nested content is found. This means that
tags in the body of another tag will <strong>not</strong> trigger new lines unless they use curly braces themselves:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">html {
    head {
        meta(attr:'value')          <i class="conum" data-value="1"></i><b>(1)</b>
        title('Title')              <i class="conum" data-value="2"></i><b>(2)</b>
        newLine()                   <i class="conum" data-value="3"></i><b>(3)</b>
        meta(attr:'value2')         <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a new line is inserted because <code>meta</code> is not on the same line as <code>head</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>no new line is inserted, because we’re on the same depth as the previous tag</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>we can force rendering of a new line by explicitly calling <code>newLine</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and this tag will be rendered on a separate line</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This time, the output will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;
    &lt;head&gt;
        &lt;meta attr='value'/&gt;&lt;title&gt;Title&lt;/title&gt;
        &lt;meta attr='value2'/&gt;
    &lt;/head&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the renderer uses four(4) spaces as indent, but you can change it by setting the <code>TemplateConfiguration#autoIndentString</code> property.</p>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-autoescape"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-autoescape"></a>Automatic escaping</h6>
<div class="paragraph">
<p>By default, contents which is read from the model is rendered <strong>as is</strong>. If this contents comes from user input, it can be sensible, and you might
want to escape it by default, for example to avoid XSS injection. For that, the template configuration provides an option which will automatically
escape objects from the model, as long as they inherit from <code>CharSequence</code> (typically, `String`s).</p>
</div>
<div class="paragraph">
<p>Let’s imagine the following setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">config.setAutoEscape(false);
model = new HashMap&lt;String,Object&gt;();
model.put("unsafeContents", "I am an &lt;html&gt; hacker.");</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the following template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">html {
    body {
        div(unsafeContents)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you wouldn’t want the HTML from <code>unsafeContents</code> to be rendered as is, because of potential security issues:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;&lt;body&gt;&lt;div&gt;I am an &lt;html&gt; hacker.&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Automatic escaping will fix this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">config.setAutoEscape(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>And now the output is properly escaped:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;&lt;body&gt;&lt;div&gt;I am an &amp;lt;html&amp;gt; hacker.&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that using automatic escaping doesn’t prevent you from including unescaped contents from the model. To do this, your template should then explicitly
mention that a model variable should not be escaped by prefixing it with <code>unescaped.</code>, like in this example:</p>
</div>
<div class="listingblock">
<div class="title">Explicit bypass of automatic escaping</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">html {
    body {
        div(unescaped.unsafeContents)
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-gotchas"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-gotchas"></a>Common gotchas</h6>
<div class="sect6">
<h7 id="_strings_containing_markup"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strings_containing_markup"></a>Strings containing markup</h7>
<div class="paragraph">
<p>Say that you want to generate a <code>&lt;p&gt;</code> tag which contains a string containing markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p {
    yield "This is a "
    a(href:'target.html', "link")
    yield " to another page"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and generates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;This is a &lt;a href='target.html'&gt;link&lt;/a&gt; to another page&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Can’t this be written shorter? A naive alternative would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p {
    yield "This is a ${a(href:'target.html', "link")} to another page"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>but the result will not look as expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">&lt;p&gt;&lt;a href='target.html'&gt;link&lt;/a&gt;This is a  to another page&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason is that the markup template engine is a <em>streaming</em> engine. In the original version, the first <code>yield</code> call
generates a string which is streamed to the output, then the <code>a</code> link is generated and streamed, and then the last <code>yield</code>
call is streamed, leading in an execution <strong>in order</strong>. But with the string version above, the order of execution is different:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>yield</code> call requires an argument, a <em>string</em></p>
</li>
<li>
<p>that arguments needs to be evaluated <em>before</em> the <em>yield</em> call is generated</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>so evaluating the string leads to an execution of the <code>a(href:…​)</code> call <strong>before</strong> <code>yield</code> is itself called. This is not
what you want to do. Instead, you want to generate a <em>string</em> which contains markup, which is then passed to the <code>yield</code>
call. This can be done this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p("This is a ${stringOf {a(href:'target.html', "link")}} to another page")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>stringOf</code> call, which basically tells the markup template engine that the underlying markup needs to be rendered
separately and exported as a string. Note that for simple expressions, <code>stringOf</code> can be replaced by an alternate tag
notation that starts with a <em>dollar</em> sign:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">p("This is a ${$a(href:'target.html', "link")} to another page")</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is worth noting that using <code>stringOf</code> or the special <code>$tag</code> notation triggers the creation of a distinct string writer
which is then used to render the markup. It is slower than using the version with calls to <code>yield</code> which perform direct
streaming of the markup instead.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-i18n"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-i18n"></a>Internationalization</h6>
<div class="paragraph">
<p>The template engine has native support for internationalization. For that, when you create the <code>TemplateConfiguration</code>, you can provide
a <code>Locale</code> which is the default locale to be used for templates. Each template may have different versions, one for each locale. The
name of the template makes the difference:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>file.tpl</code>: default template file</p>
</li>
<li>
<p><code>file_fr_FR.tpl</code>: french version of the template</p>
</li>
<li>
<p><code>file_en_US.tpl</code>: american english version of the template</p>
</li>
<li>
<p>…​</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a template is rendered or included, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the template name or include name <strong>explicitly</strong> sets a locale, the <strong>specific</strong> version is included, or the default version if not found</p>
</li>
<li>
<p>if the template name doesn’t include a locale, the version for the <code>TemplateConfiguration</code> locale is used, or the default version if not found</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, imagine the default locale is set to <code>Locale.ENGLISH</code> and that the main template includes:</p>
</div>
<div class="listingblock">
<div class="title">Use an explicit locale in include</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">include template: 'locale_include_fr_FR.tpl'</code></pre>
</div>
</div>
<div class="paragraph">
<p>then the template is rendered using the specific template:</p>
</div>
<div class="listingblock">
<div class="title">Bypass the template configuration</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Texte en français</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using an include without specifying a locale will make the template engine look for a template with the configured locale, and if not, fallback to the default, like here:</p>
</div>
<div class="listingblock">
<div class="title">Don’t use a locale in include</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">include template: 'locale_include.tpl'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Fallback to the default template</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Default text</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, changing the default locale of the template engine to <code>Locale.FRANCE</code> will change the output, because the template engine will now look for a file
with the <code>fr_FR</code> locale:</p>
</div>
<div class="listingblock">
<div class="title">Don’t fallback to the default template because a locale specific template was found</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">Texte en français</code></pre>
</div>
</div>
<div class="paragraph">
<p>This strategy lets you translate your templates one by one, by relying on default templates, for which no locale is set in the file name.</p>
</div>
</div>
<div class="sect5">
<h6 id="markuptemplate-basetemplate"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#markuptemplate-basetemplate"></a>Custom template classes</h6>
<div class="paragraph">
<p>By default, templates created inherit the <code>groovy.text.markup.BaseTemplate</code> class. It may be interesting for an application to provide a different
template class, for example to provide additional helper methods which are aware of the application, or customized rendering primitives (for HTML,
for example).</p>
</div>
<div class="paragraph">
<p>The template engine provides this ability by setting an alternative <code>baseTemplateClass</code> in the <code>TemplateConfiguration</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">config.setBaseTemplateClass(MyTemplate.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The custom base class has to extend <code>BaseClass</code> like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public abstract class MyTemplate extends BaseTemplate {
    private List&lt;Module&gt; modules
    public MyTemplate(
            final MarkupTemplateEngine templateEngine,
            final Map model,
            final Map&lt;String, String&gt; modelTypes,
            final TemplateConfiguration configuration) {
        super(templateEngine, model, modelTypes, configuration)
    }

    List&lt;Module&gt; getModules() {
        return modules
    }

    void setModules(final List&lt;Module&gt; modules) {
        this.modules = modules
    }

    boolean hasModule(String name) {
        modules?.any { it.name == name }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example shows a class which provides an additional method named <code>hasModule</code>, which can then be used directly in the template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">if (hasModule('foo')) {
    p 'Found module [foo]'
} else {
    p 'Module [foo] not found'
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_type_checked_templates"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_type_checked_templates"></a>Type checked templates</h5>
<div class="sect5">
<h6 id="_optional_type_checking"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_optional_type_checking"></a>Optional type checking</h6>
<div class="paragraph">
<p>Even if templates are not type checked, they are statically compiled. This means that once the templates are compiled, performance should be very good. For some
applications, it might be good to make sure that templates are valid before they are actually rendered. This means failing template compilation, for example, if
a method on a model variable doesn’t exist.</p>
</div>
<div class="paragraph">
<p>The <code>MarkupTemplateEngine</code> provides such a facility. Templates can be optionally type checked. For that, the developer must provide additional information at
template creation time, which is the types of the variables found in the model. Imagine a model exposing a list of pages, where a page is defined as:</p>
</div>
<div class="listingblock">
<div class="title">Page.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public class Page {

    Long id
    String title
    String body
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then a list of pages can be exposed in the model, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Page p = new Page();
p.setTitle("Sample page");
p.setBody("Page body");
List&lt;Page&gt; pages = new LinkedList&lt;&gt;();
pages.add(p);
model = new HashMap&lt;String,Object&gt;();
model.put("pages", pages);</code></pre>
</div>
</div>
<div class="paragraph">
<p>A template can use it easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">pages.each { page -&gt;                    <i class="conum" data-value="1"></i><b>(1)</b>
    p("Page title: $page.title")        <i class="conum" data-value="2"></i><b>(2)</b>
    p(page.text)                        <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>iterate on pages from the model</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>page.title</code> is valid</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>page.text</code> is <strong>not</strong> (should be <code>page.body</code>)</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Without type checking, the compilation of the template succeeds, because the template engine doesn’t know about the model until a page
is actually rendered. This means that the problem would only surface at runtime, once the page is rendered:</p>
</div>
<div class="listingblock">
<div class="title">Runtime error</div>
<div class="content">
<pre>No such property: text</pre>
</div>
</div>
<div class="paragraph">
<p>In some situations, this can be complicated to sort out or even notice. By declaring the type of the <code>pages</code> to the template engine, we’re now capable of failing at compile time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">modelTypes = new HashMap&lt;String,String&gt;();                                          <i class="conum" data-value="1"></i><b>(1)</b>
modelTypes.put("pages", "List&lt;Page&gt;");                                              <i class="conum" data-value="2"></i><b>(2)</b>
Template template = engine.createTypeCheckedModelTemplate("main.tpl", modelTypes)   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a map which will hold the model types</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declare the type of the <code>pages</code> variables (note the use of a string for the type)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>use <code>createTypeCheckedModelTemplate</code> instead of <code>createTemplate</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This time, when the template is compiled at the last line, an error occurs:</p>
</div>
<div class="listingblock">
<div class="title">Template compilation time error</div>
<div class="content">
<pre>[Static type checking] - No such property: text for class: Page</pre>
</div>
</div>
<div class="paragraph">
<p>This means that you don’t need to wait for the page to be rendered to see an error. The use of <code>createTypeCheckedModelTemplate</code> is mandatory.</p>
</div>
</div>
<div class="sect5">
<h6 id="_alternative_declaration_of_types"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternative_declaration_of_types"></a>Alternative declaration of types</h6>
<div class="paragraph">
<p>Alternatively, if the developer is also the one who writes the templates, it is possible to declare the types of the expected variables
directly in the template. In this case, even if you call <code>createTemplate</code>, it will be type checked:</p>
</div>
<div class="listingblock">
<div class="title">Inline declaration of types</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">modelTypes = {                          <i class="conum" data-value="1"></i><b>(1)</b>
    List&lt;Page&gt; pages                    <i class="conum" data-value="2"></i><b>(2)</b>
}

pages.each { page -&gt;
    p("Page title: $page.title")
    p(page.text)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>types need to be declared in the <code>modelTypes</code> header</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declare one variable per object in the model</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_performance_of_type_checked_templates"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_performance_of_type_checked_templates"></a>Performance of type checked templates</h6>
<div class="paragraph">
<p>An additional interest of using type checked models is that performance should improve. By telling the type checker what are the expected types,
you also let the compiler generate optimized code for that, so if you are looking for the best performance, consider using type checked templates.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_solutions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_solutions"></a>3.12.8. Other solutions</h4>
<div class="paragraph">
<p>Also, there are other templating solutions that can be used along with Groovy, such as <a href="http://freemarker.org/">FreeMarker</a>, <a href="http://velocity.apache.org/">Velocity</a>, <a href="http://stringtemplate.org/">StringTemplate</a> and others.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_servlet_support"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_servlet_support"></a>3.13. Servlet support</h3>
<div class="paragraph">
<p>You can write (Java) Servlets in Groovy (called Groovlets).</p>
</div>
<div class="paragraph">
<p>There is also a <code>GroovyServlet</code>.</p>
</div>
<div class="paragraph">
<p>This feature will automatically compile your .groovy source files, turn them into bytecode, load the Class and cache it until you change the source file.</p>
</div>
<div class="paragraph">
<p>Here’s a simple example to show you the kind of things you can do from a Groovlet.</p>
</div>
<div class="paragraph">
<p>Notice the use of implicit variables to access the session, output and request. Also notice that this is more like a script as it does not have a class wrapper.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">if (!session) {
  session = request.getSession(true)
}

if (!session.counter) {
  session.counter = 1
}

println """
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Groovy Servlet&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;
Hello, ${request.remoteHost}: ${session.counter}! ${new Date()}
        &lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
"""
session.counter = session.counter + 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, do the same thing using MarkupBuilder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">if (!session) {
    session = request.getSession(true)
}

if (!session.counter) {
    session.counter = 1
}

html.html { // html is implicitly bound to new MarkupBuilder(out)
  head {
      title('Groovy Servlet')
  }
  body {
    p("Hello, ${request.remoteHost}: ${session.counter}! ${new Date()}")
  }
}
session.counter = session.counter + 1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_implicit_variables"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_variables"></a>3.13.1. Implicit variables</h4>
<div class="paragraph">
<p>The following variables are ready for use in Groovlets:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">variable name</th>
<th class="tableblock halign-left valign-top">bound to</th>
<th class="tableblock halign-left valign-top">note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServletRequest</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServletResponse</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">context</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServletContext</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServletContext</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">getSession(false)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>can be null! see &lt;1&gt;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">params</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>a Map object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">headers</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>a Map object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">response.getWriter()</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>see &lt;2&gt;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">response.getOutputStream()</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>see &lt;2&gt;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">new MarkupBuilder(out)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>see &lt;2&gt;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">new StreamingJsonBuilder(out)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>see &lt;2&gt;</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The session variable is only set, if there was already a session object. See the <code>if (session == null)</code> checks in the examples above.</p>
</li>
<li>
<p>These variables cannot be re-assigned inside a <code>Groovlet</code>. They are bound on first access, allowing to e.g. calling methods on the <code>response</code> object before using <code>out</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_groovylets"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_setting_up_groovylets"></a>3.13.2. Setting up groovylets</h4>
<div class="paragraph">
<p>Add the following to your <code>web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;Groovy&lt;/servlet-name&gt;
    &lt;servlet-class&gt;groovy.servlet.GroovyServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Groovy&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.groovy&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then put the required groovy jar files into <code>WEB-INF/lib</code>.</p>
</div>
<div class="paragraph">
<p>Now put the .groovy files in, say, the root directory (i.e. where you would put your html files). The <code>GroovyServlet</code> takes care of compiling the .groovy files.</p>
</div>
<div class="paragraph">
<p>So for example using tomcat you could edit <code>tomcat/conf/server.xml</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;Context path="/groovy" docBase="c:/groovy-servlet"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then access it with <a href="http://localhost:8080/groovy/hello.groovy" class="bare">http://localhost:8080/groovy/hello.groovy</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integrating_groovy_in_a_java_application"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integrating_groovy_in_a_java_application"></a>3.14. Integrating Groovy in a Java application</h3>
<div class="sect3">
<h4 id="_groovy_integration_mechanisms"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovy_integration_mechanisms"></a>3.14.1. Groovy integration mechanisms</h4>
<div class="paragraph">
<p>The Groovy language proposes several ways to integrate itself into applications (Java or even Groovy) at runtime, from
the most basic, simple code execution to the most complete, integrating caching and compiler customization.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All the examples written in this section are using Groovy, but the same integration mechanisms can be used from
Java.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="integ-eval"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#integ-eval"></a>Eval</h5>
<div class="paragraph">
<p>The <code>groovy.util.Eval</code> class is the simplest way to execute Groovy dynamically at runtime. This can be done by calling the <code>me</code>
method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.util.Eval

assert Eval.me('33*3') == 99
assert Eval.me('"foo".toUpperCase()') == 'FOO'</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Eval</code> supports multiple variants that accept parameters for simple evaluation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert Eval.x(4, '2*x') == 8                <i class="conum" data-value="1"></i><b>(1)</b>
assert Eval.me('k', 4, '2*k') == 8          <i class="conum" data-value="2"></i><b>(2)</b>
assert Eval.xy(4, 5, 'x*y') == 20           <i class="conum" data-value="3"></i><b>(3)</b>
assert Eval.xyz(4, 5, 6, 'x*y+z') == 26     <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Simple evaluation with one bound parameter named <code>x</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Same evaluation, with a custom bound parameter named <code>k</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Simple evaluation with two bound parameters named <code>x</code> and <code>y</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Simple evaluation with three bound parameters named <code>x</code>, <code>y</code> and <code>z</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>Eval</code> class makes it very easy to evaluate simple scripts, but doesn’t scale: there is no caching of the script, and
it isn’t meant to evaluate more than one liners.</p>
</div>
</div>
<div class="sect4">
<h5 id="integ-groovyshell"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#integ-groovyshell"></a>GroovyShell</h5>
<div class="sect5">
<h6 id="_multiple_sources"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_sources"></a>Multiple sources</h6>
<div class="paragraph">
<p>The <code>groovy.lang.GroovyShell</code> class is the preferred way to evaluate scripts with the ability to cache the resulting
script instance. Although the <code>Eval</code> class returns the result of the execution of the compiled script, the <code>GroovyShell</code>
class offers more options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def shell = new GroovyShell()                           <i class="conum" data-value="1"></i><b>(1)</b>
def result = shell.evaluate '3*5'                       <i class="conum" data-value="2"></i><b>(2)</b>
def result2 = shell.evaluate(new StringReader('3*5'))   <i class="conum" data-value="3"></i><b>(3)</b>
assert result == result2
def script = shell.parse '3*5'                          <i class="conum" data-value="4"></i><b>(4)</b>
assert script instanceof groovy.lang.Script
assert script.run() == 15                               <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a new <code>GroovyShell</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>can be used as <code>Eval</code> with direct execution of the code</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>can read from multiple sources (<code>String</code>, <code>Reader</code>, <code>File</code>, <code>InputStream</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>can defer execution of the script. <code>parse</code> returns a <code>Script</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>Script</code> defines a <code>run</code> method</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_sharing_data_between_a_script_and_the_application"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sharing_data_between_a_script_and_the_application"></a>Sharing data between a script and the application</h6>
<div class="paragraph">
<p>It is possible to share data between the application and the script using a <code>groovy.lang.Binding</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def sharedData = new Binding()                          <i class="conum" data-value="1"></i><b>(1)</b>
def shell = new GroovyShell(sharedData)                 <i class="conum" data-value="2"></i><b>(2)</b>
def now = new Date()
sharedData.setProperty('text', 'I am shared data!')     <i class="conum" data-value="3"></i><b>(3)</b>
sharedData.setProperty('date', now)                     <i class="conum" data-value="4"></i><b>(4)</b>

String result = shell.evaluate('"At $date, $text"')     <i class="conum" data-value="5"></i><b>(5)</b>

assert result == "At $now, I am shared data!"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a new <code>Binding</code> that will contain shared data</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create a <code>GroovyShell</code> using this shared data</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>add a string to the binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>add a date to the binding (you are not limited to simple types)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>evaluate the script</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note that it is also possible to write from the script into the binding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def sharedData = new Binding()                          <i class="conum" data-value="1"></i><b>(1)</b>
def shell = new GroovyShell(sharedData)                 <i class="conum" data-value="2"></i><b>(2)</b>

shell.evaluate('foo=123')                               <i class="conum" data-value="3"></i><b>(3)</b>

assert sharedData.getProperty('foo') == 123             <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a new <code>Binding</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create a new <code>GroovyShell</code> using that shared data</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>use an <strong>undeclared</strong> variable to store the result into the binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>read the result from the caller</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is important to understand that you need to use an undeclared variable if you want to write into the binding. Using
<code>def</code> or an <code>explicit</code> type like in the example below would fail because you would then create a <em>local variable</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def sharedData = new Binding()
def shell = new GroovyShell(sharedData)

shell.evaluate('int foo=123')

try {
    assert sharedData.getProperty('foo')
} catch (MissingPropertyException e) {
    println "foo is defined as a local variable"
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
You must be very careful when using shared data in a multithreaded environment. The <code>Binding</code> instance that
you pass to <code>GroovyShell</code> is <strong>not</strong> thread safe, and shared by all scripts.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>It is possible to work around the shared instance of <code>Binding</code> by leveraging the <code>Script</code> instance which is returned
by <code>parse</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def shell = new GroovyShell()

def b1 = new Binding(x:3)                       <i class="conum" data-value="1"></i><b>(1)</b>
def b2 = new Binding(x:4)                       <i class="conum" data-value="2"></i><b>(2)</b>
def script = shell.parse('x = 2*x')
script.binding = b1
script.run()
script.binding = b2
script.run()
assert b1.getProperty('x') == 6
assert b2.getProperty('x') == 8
assert b1 != b2</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>will store the <code>x</code> variable inside <code>b1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>will store the <code>x</code> variable inside <code>b2</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>However, you must be aware that you are still sharing the <strong>same instance</strong> of a script. So this technique cannot be
used if you have two threads working on the same script. In that case, you must make sure of creating two distinct
script instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def shell = new GroovyShell()

def b1 = new Binding(x:3)
def b2 = new Binding(x:4)
def script1 = shell.parse('x = 2*x')            <i class="conum" data-value="1"></i><b>(1)</b>
def script2 = shell.parse('x = 2*x')            <i class="conum" data-value="2"></i><b>(2)</b>
assert script1 != script2
script1.binding = b1                            <i class="conum" data-value="3"></i><b>(3)</b>
script2.binding = b2                            <i class="conum" data-value="4"></i><b>(4)</b>
def t1 = Thread.start { script1.run() }         <i class="conum" data-value="5"></i><b>(5)</b>
def t2 = Thread.start { script2.run() }         <i class="conum" data-value="6"></i><b>(6)</b>
[t1,t2]*.join()                                 <i class="conum" data-value="7"></i><b>(7)</b>
assert b1.getProperty('x') == 6
assert b2.getProperty('x') == 8
assert b1 != b2</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create an instance of script for thread 1</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create an instance of script for thread 2</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>assign first binding to script 1</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>assign second binding to script 2</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>start first script in a separate thread</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>start second script in a separate thread</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>wait for completion</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In case you need thread safety like here, it is more advisable to use the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovyclassloader">GroovyClassLoader</a>
directly instead.</p>
</div>
</div>
<div class="sect5">
<h6 id="_custom_script_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_script_class"></a>Custom script class</h6>
<div class="paragraph">
<p>We have seen that the <code>parse</code> method returns an instance of <code>groovy.lang.Script</code>, but it is possible to use a custom
class, given that it extends <code>Script</code> itself. It can be used to provide additional behavior to the script like in
the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class MyScript extends Script {
    String name

    String greet() {
        "Hello, $name!"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The custom class defines a property called <code>name</code> and a new method called <code>greet</code>. This class can be used as the script
base class by using a custom configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.CompilerConfiguration

def config = new CompilerConfiguration()                                    <i class="conum" data-value="1"></i><b>(1)</b>
config.scriptBaseClass = 'MyScript'                                         <i class="conum" data-value="2"></i><b>(2)</b>

def shell = new GroovyShell(this.class.classLoader, new Binding(), config)  <i class="conum" data-value="3"></i><b>(3)</b>
def script = shell.parse('greet()')                                         <i class="conum" data-value="4"></i><b>(4)</b>
assert script instanceof MyScript
script.setName('Michel')
assert script.run() == 'Hello, Michel!'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a <code>CompilerConfiguration</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>instruct it to use <code>MyScript</code> as the base class for scripts</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>then use the compiler configuration when you create the shell</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the script now has access to the new method <code>greet</code></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You are not limited to the sole <em>scriptBaseClass</em> configuration. You can use any of the compiler configuration
tweaks, including the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilation-customizers">compilation customizers</a>.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="groovyclassloader"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#groovyclassloader"></a>GroovyClassLoader</h5>
<div class="paragraph">
<p>In the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#integ-groovyshell">previous section</a>, we have shown that <code>GroovyShell</code> was an easy tool to execute scripts, but
it makes it complicated to compile anything but scripts. Internally, it makes use of the <code>groovy.lang.GroovyClassLoader</code>,
which is at the heart of the compilation and loading of classes at runtime.</p>
</div>
<div class="paragraph">
<p>By leveraging the <code>GroovyClassLoader</code> instead of <code>GroovyShell</code>, you will be able to load classes, instead of instances
of scripts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.lang.GroovyClassLoader

def gcl = new GroovyClassLoader()                                           <i class="conum" data-value="1"></i><b>(1)</b>
def clazz = gcl.parseClass('class Foo { void doIt() { println "ok" } }')    <i class="conum" data-value="2"></i><b>(2)</b>
assert clazz.name == 'Foo'                                                  <i class="conum" data-value="3"></i><b>(3)</b>
def o = clazz.newInstance()                                                 <i class="conum" data-value="4"></i><b>(4)</b>
o.doIt()                                                                    <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a new <code>GroovyClassLoader</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>parseClass</code> will return an instance of <code>Class</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>you can check that the class which is returns is really the one defined in the script</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and you can create a new instance of the class, which is not a script</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>then call any method on it</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A GroovyClassLoader keeps a reference of all the classes it created, so it is easy to create a memory leak. In
particular, if you execute the same script twice, if it is a String, then you obtain two distinct classes!
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.lang.GroovyClassLoader

def gcl = new GroovyClassLoader()
def clazz1 = gcl.parseClass('class Foo { }')                                <i class="conum" data-value="1"></i><b>(1)</b>
def clazz2 = gcl.parseClass('class Foo { }')                                <i class="conum" data-value="2"></i><b>(2)</b>
assert clazz1.name == 'Foo'                                                 <i class="conum" data-value="3"></i><b>(3)</b>
assert clazz2.name == 'Foo'
assert clazz1 != clazz2                                                     <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>dynamically create a class named "Foo"</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create an identical looking class, using a separate <code>parseClass</code> call</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>make sure both classes have the same name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>but they are actually different!</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The reason is that a <code>GroovyClassLoader</code> doesn’t keep track of the source text. If you want to have the same instance,
then the source <strong>must</strong> be a file, like in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def gcl = new GroovyClassLoader()
def clazz1 = gcl.parseClass(file)                                           <i class="conum" data-value="1"></i><b>(1)</b>
def clazz2 = gcl.parseClass(new File(file.absolutePath))                    <i class="conum" data-value="2"></i><b>(2)</b>
assert clazz1.name == 'Foo'                                                 <i class="conum" data-value="3"></i><b>(3)</b>
assert clazz2.name == 'Foo'
assert clazz1 == clazz2                                                     <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>parse a class from a <code>File</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>parse a class from a distinct file instance, but pointing to the same physical file</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>make sure our classes have the same name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>but now, they are the same instance</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Using a <code>File</code> as input, the <code>GroovyClassLoader</code> is capable of <strong>caching</strong> the generated class file, which avoids
creating multiple classes at runtime for the same source.</p>
</div>
</div>
<div class="sect4">
<h5 id="_groovyscriptengine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_groovyscriptengine"></a>GroovyScriptEngine</h5>
<div class="paragraph">
<p>The <code>groovy.util.GroovyScriptEngine</code> class provides a flexible foundation for applications which rely on script
reloading and script dependencies. While <code>GroovyShell</code> focuses on standalone <code>Script`s and `GroovyClassLoader</code> handles
dynamic compilation and loading of any Groovy class, the <code>GroovyScriptEngine</code> will add a layer on top of <code>GroovyClassLoader</code>
to handle both script dependencies and reloading.</p>
</div>
<div class="paragraph">
<p>To illustrate this, we will create a script engine and execute code in an infinite loop. First of all, you need to create
a directory with the following script inside:</p>
</div>
<div class="listingblock">
<div class="title">ReloadingTest.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Greeter {
    String sayHello() {
        def greet = "Hello, world!"
        greet
    }
}

new Greeter()</code></pre>
</div>
</div>
<div class="paragraph">
<p>then you can execute this code using a <code>GroovyScriptEngine</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def binding = new Binding()
def engine = new GroovyScriptEngine([tmpDir.toURI().toURL()] as URL[])          <i class="conum" data-value="1"></i><b>(1)</b>

while (true) {
    def greeter = engine.run('ReloadingTest.groovy', binding)                   <i class="conum" data-value="2"></i><b>(2)</b>
    println greeter.sayHello()                                                  <i class="conum" data-value="3"></i><b>(3)</b>
    Thread.sleep(1000)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a script engine which will look for sources into our source directory</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>execute the script, which will return an instance of <code>Greeter</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>print the greeting message</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>At this point, you should see a message printed every second:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world!
Hello, world!
...</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Without</strong> interrupting the script execution, now replace the contents of the <code>ReloadingTest</code> file with:</p>
</div>
<div class="listingblock">
<div class="title">ReloadingTest.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Greeter {
    String sayHello() {
        def greet = "Hello, Groovy!"
        greet
    }
}

new Greeter()</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the message should change to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world!
...
Hello, Groovy!
Hello, Groovy!
...</pre>
</div>
</div>
<div class="paragraph">
<p>But it is also possible to have a dependency on another script. To illustrate this, create the following file into
the same directory, without interrupting the executing script:</p>
</div>
<div class="listingblock">
<div class="title">Depencency.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Dependency {
    String message = 'Hello, dependency 1'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and update the <code>ReloadingTest</code> script like this:</p>
</div>
<div class="listingblock">
<div class="title">ReloadingTest.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import Dependency

class Greeter {
    String sayHello() {
        def greet = new Dependency().message
        greet
    }
}

new Greeter()</code></pre>
</div>
</div>
<div class="paragraph">
<p>And this time, the message should change to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, Groovy!
...
Hello, dependency 1!
Hello, dependency 1!
...</pre>
</div>
</div>
<div class="paragraph">
<p>And as a last test, you can update the <code>Dependency.groovy</code> file without touching the <code>ReloadingTest</code> file:</p>
</div>
<div class="listingblock">
<div class="title">Depencency.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Dependency {
    String message = 'Hello, dependency 2'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you should observe that the dependent file was reloaded:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, dependency 1!
...
Hello, dependency 2!
Hello, dependency 2!</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_compilationunit"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_compilationunit"></a>CompilationUnit</h5>
<div class="paragraph">
<p>Ultimately, it is possible to perform more operations during compilation by relying directly on the
<code>org.codehaus.groovy.control.CompilationUnit</code> class. This class is responsible for determining the various steps of
compilation and would let you introduce new steps or even stop compilation at various phases. This is for example how
stub generation is done, for the joint compiler.</p>
</div>
<div class="paragraph">
<p>However, overriding <code>CompilationUnit</code> is not recommended and should only be done if no other standard solution works.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bean_scripting_framework"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_scripting_framework"></a>3.14.2. Bean Scripting Framework</h4>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <a href="http://commons.apache.org/proper/commons-bsf/">Bean Scripting Framework</a> is an attempt to create an API
to allow calling scripting languages from Java. It hasn’t been updated for long and abandoned in favor of the
standard <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#jsr223">JSR-223</a> API.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The BSF engine for Groovy is implemented by the <code>org.codehaus.groovy.bsf.GroovyEngine</code> class. However, that fact is
normally hidden away by the BSF APIs. You just treat Groovy like any of the other scripting languages via the BSF
API.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Groovy has its own native support for integration with Java, you only need to worry about BSF if you also
want to also be able to call other languages, e.g. <a href="https://www.jruby.org/">JRuby</a> or if you want to remain very
loosely coupled from your scripting language.
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_getting_started_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_getting_started_2"></a>Getting started</h5>
<div class="paragraph">
<p>Provided you have Groovy and BSF jars in your classpath, you can use the
following Java code to run a sample Groovy script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">String myScript = "println('Hello World')\n  return [1, 2, 3]";
BSFManager manager = new BSFManager();
List answer = (List) manager.eval("groovy", "myScript.groovy", 0, 0, myScript);
assertEquals(3, answer.size());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_passing_in_variables"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_passing_in_variables"></a>Passing in variables</h5>
<div class="paragraph">
<p>BSF lets you pass beans between Java and your scripting language. You
can <em>register</em>/<em>unregister</em> beans which makes them known to BSF. You can
then use BSF methods to <em>lookup</em> beans as required. Alternatively, you
can <em>declare</em>/<em>undeclare</em> beans. This will register them but also make
them available for use directly in your scripting language. This second
approach is the normal approach used with Groovy. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">BSFManager manager = new BSFManager();
manager.declareBean("xyz", 4, Integer.class);
Object answer = manager.eval("groovy", "test.groovy", 0, 0, "xyz + 1");
assertEquals(5, answer);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_other_calling_options"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_other_calling_options"></a>Other calling options</h5>
<div class="paragraph">
<p>The previous examples used the <em>eval</em> method. BSF makes multiple methods
available for your use (see the
<a href="http://commons.apache.org/proper/commons-bsf/manual.html">BSF documentation</a> for more
details). One of the other available methods is <em>apply</em>. It allows you
to define an anonymous function in your scripting language and apply
that function to arguments. Groovy supports this function using
closures. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">BSFManager manager = new BSFManager();
Vector&lt;String&gt; ignoreParamNames = null;
Vector&lt;Integer&gt; args = new Vector&lt;Integer&gt;();
args.add(2);
args.add(5);
args.add(1);
Integer actual = (Integer) manager.apply("groovy", "applyTest", 0, 0,
        "def summer = { a, b, c -&gt; a * 100 + b * 10 + c }", ignoreParamNames, args);
assertEquals(251, actual.intValue());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_access_to_the_scripting_engine"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_access_to_the_scripting_engine"></a>Access to the scripting engine</h5>
<div class="paragraph">
<p>Although you don’t normally need it, BSF does provide a hook that lets
you get directly to the scripting engine. One of the functions which the
engine can perform is to invoke a single method call on an object. Here
is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">BSFManager manager = new BSFManager();
BSFEngine bsfEngine = manager.loadScriptingEngine("groovy");
manager.declareBean("myvar", "hello", String.class);
Object myvar = manager.lookupBean("myvar");
String result = (String) bsfEngine.call(myvar, "reverse", new Object[0]);
assertEquals("olleh", result);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jsr223"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#jsr223"></a>3.14.3. JSR 223 javax.script API</h4>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
JSR-223 is a standard API for calling scripting frameworks in Java. It is available since Java 6 and aims at
providing a common framework for calling multiple languages from Java. Groovy provides its own richer integration mechanisms,
and if you don’t plan to use multiple languages in the same application, it is recommended that you use the Groovy
integration mechanisms instead of the limited JSR-223 API.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Here is how you need to initialize the JSR-223 engine to talk to Groovy from Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
...
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("groovy");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can execute Groovy scripts easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Integer sum = (Integer) engine.eval("(1..10).sum()");
assertEquals(new Integer(55), sum);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to share variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">engine.put("first", "HELLO");
engine.put("second", "world");
String result = (String) engine.eval("first.toLowerCase() + ' ' + second.toUpperCase()");
assertEquals("hello WORLD", result);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This next example illustrates calling an invokable function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import javax.script.Invocable;
...
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("groovy");
String fact = "def factorial(n) { n == 1 ? 1 : n * factorial(n - 1) }";
engine.eval(fact);
Invocable inv = (Invocable) engine;
Object[] params = {5};
Object result = inv.invokeFunction("factorial", params);
assertEquals(new Integer(120), result);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The engine keeps per default hard references to the script functions. To
change this you should set a engine level scoped attribute to the script
context of the name <code>#jsr223.groovy.engine.keep.globals</code> with a
String being <code>phantom</code> to use phantom references, <code>weak</code> to use weak
references or <code>soft</code> to use soft references - casing is ignored. Any
other string will cause the use of hard references.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_domain_specific_languages"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domain_specific_languages"></a>3.15. Domain-Specific Languages</h3>
<div class="sect3">
<h4 id="_command_chains"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_command_chains"></a>3.15.1. Command chains</h4>
<div class="paragraph">
<p>Groovy lets you omit parentheses around the arguments of a
method call for top-level statements. "command chain" feature extends this by allowing us to chain such
parentheses-free method calls, requiring neither parentheses around arguments, nor dots between the chained calls.
The general idea is that a call like <code>a b c d</code> will actually be equivalent to <code>a(b).c(d)</code>. This
also works with multiple arguments, closure arguments, and even named arguments. Furthermore, such command chains can
also appear on the right-hand side of assignments. Let’s have a look at some examples
supported by this new syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// equivalent to: turn(left).then(right)
turn left then right

// equivalent to: take(2.pills).of(chloroquinine).after(6.hours)
take 2.pills of chloroquinine after 6.hours

// equivalent to: paint(wall).with(red, green).and(yellow)
paint wall with red, green and yellow

// with named parameters too
// equivalent to: check(that: margarita).tastes(good)
check that: margarita tastes good

// with closures as parameters
// equivalent to: given({}).when({}).then({})
given { } when { } then { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to use methods in the chain which take no arguments,
but in that case, the parentheses are needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// equivalent to: select(all).unique().from(names)
select all unique() from names</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your command chain contains an odd number of elements, the chain will
be composed of method / arguments, and will finish by a final property
access:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// equivalent to: take(3).cookies
// and also this: take(3).getCookies()
take 3 cookies</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command chain approach opens up interesting possibilities in terms of the much wider range of DSLs which
can now be written in Groovy.</p>
</div>
<div class="paragraph">
<p>The above examples illustrate using a command chain based DSL but not how to create one. There are various strategies
that you can use, but to illustrate creating such a DSL, we will show a couple of examples - first using maps and Closures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">show = { println it }
square_root = { Math.sqrt(it) }

def please(action) {
  [the: { what -&gt;
    [of: { n -&gt; action(what(n)) }]
  }]
}

// equivalent to: please(show).the(square_root).of(100)
please show the square_root of 100
// ==&gt; 10.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a second example, consider how you might write a DSL for simplifying
one of your existing APIs. Maybe you need to put this code in front of
customers, business analysts or testers who might be not hard-core Java
developers. We’ll use the <code>Splitter</code> from the Google
<a href="https://github.com/google/guava">Guava libraries</a> project as it
already has a nice Fluent API. Here is how we might use it out of the
box:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('com.google.guava:guava:r09')
import com.google.common.base.*
def result = Splitter.on(',').trimResults(CharMatcher.is('_' as char)).split("_a ,_b_ ,c__").iterator().toList()</code></pre>
</div>
</div>
<div class="paragraph">
<p>It reads fairly well for a Java developer but if that is not your target
audience or you have many such statements to write, it could be
considered a little verbose. Again, there are many options for writing a
DSL. We’ll keep it simple with Maps and Closures. We’ll first write a
helper method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('com.google.guava:guava:r09')
import com.google.common.base.*
def split(string) {
  [on: { sep -&gt;
    [trimming: { trimChar -&gt;
      Splitter.on(sep).trimResults(CharMatcher.is(trimChar as char)).split(string).iterator().toList()
    }]
  }]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>now instead of this line from our original example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def result = Splitter.on(',').trimResults(CharMatcher.is('_' as char)).split("_a ,_b_ ,c__").iterator().toList()</code></pre>
</div>
</div>
<div class="paragraph">
<p>we can write this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def result = split "_a ,_b_ ,c__" on ',' trimming '_\'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_operator_overloading"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operator_overloading"></a>3.15.2. Operator overloading</h4>
<div class="paragraph">
<p>Various operators in Groovy are mapped onto regular method calls on objects.</p>
</div>
<div class="paragraph">
<p>This allows you to provide your own Java or Groovy objects which can take advantage of operator overloading. The following table describes the operators supported in Groovy and the methods they map to.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a + b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.plus(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a - b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.minus(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a * b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.multiply(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a ** b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.power(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a / b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.div(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a % b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.mod(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a | b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.or(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &amp; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.and(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a ^ b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.xor(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a++</code> or <code>++a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.next()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a--</code> or <code>--a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.previous()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a[b]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.getAt(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a[b] = c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.putAt(b, c)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt;&lt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.leftShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt;&gt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt;&gt;&gt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShiftUnsigned(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>switch(a) { case(b) : }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b.isCase(a)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if(a)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.asBoolean()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.bitwiseNegate()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.negative()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.positive()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a as b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.asType(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a == b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.equals(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a != b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">! a.equals(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt;=&gt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.compareTo(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.compareTo(b) &gt; 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt;= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.compareTo(b) &gt;= 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.compareTo(b) &lt; 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt;= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.compareTo(b) &lt;= 0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_script_base_classes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_script_base_classes"></a>3.15.3. Script base classes</h4>
<div class="sect4">
<h5 id="_the_script_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_script_class"></a>The Script class</h5>
<div class="paragraph">
<p>Groovy scripts are always compiled to classes. For example, a script as simple as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">println 'Hello from Groovy'</code></pre>
</div>
</div>
<div class="paragraph">
<p>is compiled to a class extending the abstract <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/Script.html">groovy.lang.Script</a> class. This class contains a single abstract
method called <em>run</em>. When a script is compiled, then its body will become the <em>run</em> method, while the other methods
found in the script are found in the implementing class. The <code>Script</code> class provides base support for integration
with your application through the <code>Binding</code> object, as illustrated in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def binding = new Binding()             <i class="conum" data-value="1"></i><b>(1)</b>
def shell = new GroovyShell(binding)    <i class="conum" data-value="2"></i><b>(2)</b>
binding.setVariable('x',1)              <i class="conum" data-value="3"></i><b>(3)</b>
binding.setVariable('y',3)
shell.evaluate 'z=2*x+y'                <i class="conum" data-value="4"></i><b>(4)</b>
assert binding.getVariable('z') == 5    <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a binding is used to share data between the script and the calling class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a <code>GroovyShell</code> can be used with this binding</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>input variables are set from the calling class inside the binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>then the script is evaluated</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>and the <code>z</code> variable has been "exported" into the binding</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This is a very practical way to share data between the caller and the script, however it may be insufficient or not
practical in some cases. For that purpose, Groovy allows you to set your own base script class. A base script class
has to extend <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/Script.html">groovy.lang.Script</a> and be a single abstract method type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class MyBaseClass extends Script {
    String name
    public void greet() { println "Hello, $name!" }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the custom script base class can be declared in the compiler configuration, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def config = new CompilerConfiguration()                                <i class="conum" data-value="1"></i><b>(1)</b>
config.scriptBaseClass = 'MyBaseClass'                                  <i class="conum" data-value="2"></i><b>(2)</b>
def shell = new GroovyShell(this.class.classLoader, config)             <i class="conum" data-value="3"></i><b>(3)</b>
shell.evaluate """
    setName 'Judith'                                                    <i class="conum" data-value="4"></i><b>(4)</b>
    greet()
"""</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create a custom compiler configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>set the base script class to our custom base script class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>then create a <code>GroovyShell</code> using that configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the script will then extend the base script class, giving direct access to the <code>name</code> property and <code>greet</code> method</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="dsl-basescript"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#dsl-basescript"></a>The @BaseScript annotation</h5>
<div class="paragraph">
<p>As an alternative, it is also possible to use the <code>@BaseScript</code> annotation directly into a script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.BaseScript

@BaseScript MyBaseClass baseScript
setName 'Judith'
greet()</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>@BaseScript</code> should annotate a variable which type is the class of the base script. Alternatively, you can set
the base script class as a member of the <code>@BaseScript</code> annotation itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@BaseScript(MyBaseClass)
import groovy.transform.BaseScript

setName 'Judith'
greet()</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_alternate_abstract_method"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_alternate_abstract_method"></a>Alternate abstract method</h5>
<div class="paragraph">
<p>We have seen that the base script class is a single abstract method type that needs to implement the <code>run</code> method. The
<code>run</code> method is executed by the script engine automatically. In some circumstances it may be interesting to have a base
class which implements the <code>run</code> method, but provides an alternative abstract method to be used for the script body.
For example, the base script <code>run</code> method might perform some initialization before the <code>run</code> method is executed. This
is possible by doing this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class MyBaseClass extends Script {
    int count
    abstract void scriptBody()                              <i class="conum" data-value="1"></i><b>(1)</b>
    def run() {
        count++                                             <i class="conum" data-value="2"></i><b>(2)</b>
        scriptBody()                                        <i class="conum" data-value="3"></i><b>(3)</b>
        count                                               <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the base script class should define one (and only one) abstract method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>run</code> method can be overridden and perform a task before executing the script body</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>run</code> calls the abstract <code>scriptBody</code> method which will delegate to the user script</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>then it can return something else than the value from the script</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you execute this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def result = shell.evaluate """
    println 'Ok'
"""
assert result == 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you will see that the script is executed, but the result of the evaluation is <code>1</code> as returned by the <code>run</code>
method of the base class. It is even clearer if you use <code>parse</code> instead of <code>evaluate</code>, because it would allow you to
execute the <code>run</code> method several times on the same script instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def script = shell.parse("println 'Ok'")
assert script.run() == 1
assert script.run() == 2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_properties_to_numbers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adding_properties_to_numbers"></a>3.15.4. Adding properties to numbers</h4>
<div class="paragraph">
<p>In Groovy number types are considered equal to any other types. As such, it is possible to enhance numbers by adding
properties or methods to them. This can be very handy when dealing with measurable quantities for example. Details about
how existing classes can be enhanced in Groovy are found in the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-metaprogramming.html#_extension_modules">extension
modules</a> section or the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/core-metaprogramming.html#categories">categories</a> section.</p>
</div>
<div class="paragraph">
<p>An illustration of this can be found in Groovy using the <code>TimeCategory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">use(TimeCategory)  {
    println 1.minute.from.now       <i class="conum" data-value="1"></i><b>(1)</b>
    println 10.hours.ago

    def someDate = new Date()       <i class="conum" data-value="2"></i><b>(2)</b>
    println someDate - 3.months
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>using the <code>TimeCategory</code>, a property <code>minute</code> is added to the <code>Integer</code> class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>similarily, the <code>months</code> method returns a <code>groovy.time.DatumDependentDuration</code> which can be used in calculus</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Categories are lexically bound, making them a great fit for internal DSLs.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-delegatesto"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#section-delegatesto"></a>3.15.5. @DelegatesTo</h4>
<div class="sect4">
<h5 id="TheDelegatesToannotation-DSLsmadeeasy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DSLsmadeeasy"></a>Explaining delegation strategy at compile time</h5>
<div class="paragraph">
<p><code>@groovy.lang.DelegatesTo</code> is a documentation and compile-time annotation aimed at:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>documenting APIs that use closures as arguments</p>
</li>
<li>
<p>providing type information for the static type checker and compiler</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Groovy language is a platform of choice for building DSLs. Using
closures, it’s quite easy to create custom control structures, as well
as it is simple to create builders. Imagine that you have the following
code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">email {
    from 'dsl-guru@mycompany.com'
    to 'john.doe@waitaminute.com'
    subject 'The pope has resigned!'
    body {
        p 'Really, the pope has resigned!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One way of implementing this is using the builder strategy, which
implies a method, named <code>email</code>&nbsp;which accepts a closure as an argument.
The method may delegate subsequent calls to an object that implements
the&nbsp;<code>from</code>,&nbsp;<code>to</code>,&nbsp;<code>subject</code> and&nbsp;<code>body</code> methods. Again,&nbsp;<code>body</code> is a
method which accepts a closure as an argument and that uses the builder
strategy.</p>
</div>
<div class="paragraph">
<p>Implementing such a builder is usually done the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def email(Closure cl) {
    def email = new EmailSpec()
    def code = cl.rehydrate(email, this, this)
    code.resolveStrategy = Closure.DELEGATE_ONLY
    code()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the <code>EmailSpec</code> class implements the&nbsp;<code>from</code>,&nbsp;<code>to</code>, … methods. By
calling&nbsp;<code>rehydrate</code>, we’re creating a copy of the closure for which we
set the&nbsp;<code>delegate</code>,&nbsp;<code>owner</code> and&nbsp;<code>thisObject</code> values. Setting the owner
and the <code>this</code> object is not very important here since we will use the
<code>DELEGATE_ONLY</code> strategy which says that the method calls will be
resolved only against the delegate of the closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class EmailSpec {
    void from(String from) { println "From: $from"}
    void to(String... to) { println "To: $to"}
    void subject(String subject) { println "Subject: $subject"}
    void body(Closure body) {
        def bodySpec = new BodySpec()
        def code = body.rehydrate(bodySpec, this, this)
        code.resolveStrategy = Closure.DELEGATE_ONLY
        code()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>EmailSpec</code> class has itself a <code>body</code> method accepting a closure that is cloned and executed. This is what
we call the builder pattern in Groovy.</p>
</div>
<div class="paragraph">
<p>One of the problems with the code that we’ve shown is that the user of
the <code>email</code> method doesn’t have any information about the methods that
he’s allowed to call inside the closure. The only possible information
is from the method documentation. There are two issues with this: first
of all, documentation is not always written, and if it is, it’s not
always available (javadoc not downloaded, for example). Second, it
doesn’t help IDEs. What would be really interesting, here, is for IDEs
to help the developer by suggesting, once they are in the closure body,
methods that exist on the <code>email</code> class.</p>
</div>
<div class="paragraph">
<p>Moreover, if the user calls a method in the closure which is not defined
by the&nbsp;<code>EmailSpec</code> class, the IDE should at least issue a warning (because
it’s very likely that it will break at runtime).</p>
</div>
<div class="paragraph">
<p>One more problem with the code above is that it is not compatible with static type checking. Type checking would let
the user know if a method call is authorized at compile time instead of runtime, but if you try to perform type
checking on this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">email {
    from 'dsl-guru@mycompany.com'
    to 'john.doe@waitaminute.com'
    subject 'The pope has resigned!'
    body {
        p 'Really, the pope has resigned!'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the type checker will know that there’s an&nbsp;<code>email</code> method accepting
a&nbsp;<code>Closure</code>, but it will complain for every method call&nbsp;<strong>inside</strong> the
closure, because&nbsp;<code>from</code>, for example, is not a method which is defined
in the class. Indeed, it’s defined in the&nbsp;<code>EmailSpec</code> class and it has
absolutely no hint to help it knowing that the closure delegate will, at
runtime, be of type&nbsp;<code>EmailSpec</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.transform.TypeChecked
void sendEmail() {
    email {
        from 'dsl-guru@mycompany.com'
        to 'john.doe@waitaminute.com'
        subject 'The pope has resigned!'
        body {
            p 'Really, the pope has resigned!'
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will fail compilation with errors like this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Static type checking] - Cannot find matching method MyScript#from(java.lang.String). Please check if the declared type is correct and if the method exists.
 @ line 31, column 21.
                       from 'dsl-guru@mycompany.com'</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="TheDelegatesToannotation-DelegatesTo"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DelegatesTo"></a>@DelegatesTo</h5>
<div class="paragraph">
<p>For those reasons, Groovy 2.1 introduced a new annotation
named&nbsp;<code>@DelegatesTo</code>. The goal of this annotation is to solve both the
documentation issue, that will let your IDE know about the expected
methods in the closure body, and it will also solve the type checking
issue, by giving hints to the compiler about what are the potential
receivers of method calls in the closure body.</p>
</div>
<div class="paragraph">
<p>The idea is to annotate the&nbsp;<code>Closure</code> parameter of the&nbsp;<code>email</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def email(@DelegatesTo(EmailSpec) Closure cl) {
    def email = new EmailSpec()
    def code = cl.rehydrate(email, this, this)
    code.resolveStrategy = Closure.DELEGATE_ONLY
    code()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What we’ve done here is telling the compiler (or the IDE) that when the
method will be called with a closure, the delegate of this closure will
be set to an object of type&nbsp;<code>email</code>. But there is still a problem: the
default delegation strategy is not the one which is used in our method.
So we will give more information and tell the compiler (or the IDE) that
the delegation strategy is also changed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def email(@DelegatesTo(strategy=Closure.DELEGATE_ONLY, value=EmailSpec) Closure cl) {
    def email = new EmailSpec()
    def code = cl.rehydrate(email, this, this)
    code.resolveStrategy = Closure.DELEGATE_ONLY
    code()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, both the IDE and the type checker (if you are using <code>@TypeChecked</code>)
will be aware of the delegate and the delegation strategy. This is very
nice because it will both allow the IDE to provide smart completion, but
it will also remove errors at compile time that exist only because the
behaviour of the program is normally only known at runtime!</p>
</div>
<div class="paragraph">
<p>The following code will now pass compilation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TypeChecked
void doEmail() {
    email {
        from 'dsl-guru@mycompany.com'
        to 'john.doe@waitaminute.com'
        subject 'The pope has resigned!'
        body {
            p 'Really, the pope has resigned!'
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="TheDelegatesToannotation-DelegatesTomodes"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-DelegatesTomodes"></a>DelegatesTo modes</h5>
<div class="paragraph">
<p><code>@DelegatesTo</code> supports multiple modes that we will describe with examples
in this section.</p>
</div>
<div class="sect5">
<h6 id="TheDelegatesToannotation-Simpledelegation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Simpledelegation"></a>Simple delegation</h6>
<div class="paragraph">
<p>In this mode, the only mandatory parameter is the&nbsp;<em>value</em> which says to
which class we delegate calls. Nothing more. We’re telling the compiler
that the type of the delegate will&nbsp;<strong>always</strong> be of the type documented
by&nbsp;<code>@DelegatesTo</code> (note that it can be a subclass, but if it is, the
methods defined by the subclass will not be visible to the type
checker).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void body(@DelegatesTo(BodySpec) Closure cl) {
    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="TheDelegatesToannotation-Delegationstrategy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Delegationstrategy"></a>Delegation strategy</h6>
<div class="paragraph">
<p>In this mode, you must specify both the delegate class&nbsp;<strong>and</strong> a
delegation strategy. This must be used if the closure will not be called
with the default delegation strategy, which is&nbsp;<code>Closure.OWNER_FIRST</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void body(@DelegatesTo(strategy=Closure.DELEGATE_ONLY, value=BodySpec) Closure cl) {
    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="TheDelegatesToannotation-Delegatetoparameter"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Delegatetoparameter"></a>Delegate to parameter</h6>
<div class="paragraph">
<p>In this variant, we will tell the compiler that we are delegating to
another parameter of the method. Take the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def exec(Object target, Closure code) {
   def clone = code.rehydrate(target, this, this)
   clone()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the delegate which will be used is&nbsp;<strong>not</strong> created inside the&nbsp;<code>exec</code>
method. In fact, we take an argument of the method and delegate to it.
Usage may look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def email = new Email()
exec(email) {
   from '...'
   to '...'
   send()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each of the method calls are delegated to the&nbsp;<code>email</code> parameter. This is
a widely used pattern which is also supported by&nbsp;<code>@DelegatesTo</code> using a
companion annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def exec(@DelegatesTo.Target Object target, @DelegatesTo Closure code) {
   def clone = code.rehydrate(target, this, this)
   clone()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A closure is annotated with&nbsp;<code>@DelegatesTo</code>, but this time, without
specifying any class. Instead, we’re annotating another parameter
with&nbsp;<code>@DelegatesTo.Target</code>. The type of the delegate is then determined
at compile time. One could think that we are using the parameter type,
which in this case is&nbsp;<code>Object</code> but this is not true. Take this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Greeter {
   void sayHello() { println 'Hello' }
}
def greeter = new Greeter()
exec(greeter) {
   sayHello()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember that this works out of the box&nbsp;<strong>without</strong> having to annotate
with&nbsp;<code>@DelegatesTo</code>. However, to make the IDE aware of the delegate
type, or the&nbsp;<strong>type checker</strong> aware of it, we need to add&nbsp;<code>@DelegatesTo</code>.
And in this case, it will know that the&nbsp;<code>Greeter</code> variable is of
type&nbsp;<code>Greeter</code>, so it will not report errors on the&nbsp;<em>sayHello</em>
method&nbsp;<strong>even if the exec method doesn’t explicitly define the target as
of type Greeter</strong>. This is a very powerful feature, because it prevents
you from writing multiple versions of the same&nbsp;<code>exec</code> method for
different receiver types!</p>
</div>
<div class="paragraph">
<p>In this mode, the&nbsp;<code>@DelegatesTo</code> annotation also supports the&nbsp;<code>strategy</code>
parameter that we’ve described upper.</p>
</div>
</div>
<div class="sect5">
<h6 id="TheDelegatesToannotation-Multipleclosures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#TheDelegatesToannotation-Multipleclosures"></a>Multiple closures</h6>
<div class="paragraph">
<p>In the previous example, the&nbsp;<code>exec</code> method accepted only one closure,
but you may have methods that take multiple closures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void fooBarBaz(Closure foo, Closure bar, Closure baz) {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then nothing prevents you from annotating each closure
with&nbsp;<code>@DelegatesTo</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Foo { void foo(String msg) { println "Foo ${msg}!" } }
class Bar { void bar(int x) { println "Bar ${x}!" } }
class Baz { void baz(Date d) { println "Baz ${d}!" } }

void fooBarBaz(@DelegatesTo(Foo) Closure foo, @DelegatesTo(Bar) Closure bar, @DelegatesTo(Baz) Closure baz) {
   ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>But more importantly, if you have multiple closures&nbsp;<strong>and</strong> multiple
arguments, you can use several targets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void fooBarBaz(
    @DelegatesTo.Target('foo') foo,
    @DelegatesTo.Target('bar') bar,
    @DelegatesTo.Target('baz') baz,

    @DelegatesTo(target='foo') Closure cl1,
    @DelegatesTo(target='bar') Closure cl2,
    @DelegatesTo(target='baz') Closure cl3) {
    cl1.rehydrate(foo, this, this).call()
    cl2.rehydrate(bar, this, this).call()
    cl3.rehydrate(baz, this, this).call()
}

def a = new Foo()
def b = new Bar()
def c = new Baz()
fooBarBaz(
    a, b, c,
    { foo('Hello') },
    { bar(123) },
    { baz(new Date()) }
)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
At this point, you may wonder why we don’t use the parameter names as
references. The reason is that the information (the parameter name) is
not always available (it’s a debug-only information), so it’s a
limitation of the JVM.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_delegating_to_a_generic_type"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_to_a_generic_type"></a>Delegating to a generic type</h6>
<div class="paragraph">
<p>In some situations, it is interesting to instruct the IDE or the compiler that the delegate type will not be a parameter
but a generic type. Imagine a configurator that runs on a list of elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public &lt;T&gt; void configure(List&lt;T&gt; elements, Closure configuration) {
   elements.each { e-&gt;
      def clone = configuration.rehydrate(e, this, this)
      clone.resolveStrategy = Closure.DELEGATE_FIRST
      clone.call()
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then this method can be called with any list like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@groovy.transform.ToString
class Realm {
   String name
}
List&lt;Realm&gt; list = []
3.times { list &lt;&lt; new Realm() }
configure(list) {
   name = 'My Realm'
}
assert list.every { it.name == 'My Realm' }</code></pre>
</div>
</div>
<div class="paragraph">
<p>To let the type checker and the IDE know that the <code>configure</code> method calls the closure on each element of the list, you
 need to use <code>@DelegatesTo</code> differently:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">public &lt;T&gt; void configure(
    @DelegatesTo.Target List&lt;T&gt; elements,
    @DelegatesTo(strategy=Closure.DELEGATE_FIRST, genericTypeIndex=0) Closure configuration) {
   def clone = configuration.rehydrate(e, this, this)
   clone.resolveStrategy = Closure.DELEGATE_FIRST
   clone.call()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@DelegatesTo</code> takes an optional <code>genericTypeIndex</code> argument that tells what is the index of the generic type that will
be used as the delegate type. This <strong>must</strong> be used in conjunction with <code>@DelegatesTo.Target</code> and the index starts at 0. In
the example above, that means that the delegate type is resolved against <code>List&lt;T&gt;</code>, and since the generic type at index
0 is <code>T</code> and inferred as a <code>Realm</code>, the type checker infers that the delegate type will be of type <code>Realm</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We’re using a <code>genericTypeIndex</code> instead of a placeholder (<code>T</code>) because of JVM limitations.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_delegating_to_an_arbitrary_type"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegating_to_an_arbitrary_type"></a>Delegating to an arbitrary type</h6>
<div class="paragraph">
<p>It is possible that none of the options above can represent the type you want to delegate to. For example, let’s define
a mapper class which is parametrized with an object and defines a map method which returns an object of another type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Mapper&lt;T,U&gt; {                             <i class="conum" data-value="1"></i><b>(1)</b>
    final T value                               <i class="conum" data-value="2"></i><b>(2)</b>
    Mapper(T value) { this.value = value }
    U map(Closure&lt;U&gt; producer) {                <i class="conum" data-value="3"></i><b>(3)</b>
        producer.delegate = value
        producer()
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The mapper class takes two generic type arguments: the source type and the target type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The source object is stored in a final field</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>map</code> method asks to convert the source object to a target object</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As you can see, the method signature from <code>map</code> does not give any information about what object will
be manipulated by the closure. Reading the method body, we know that it will be the <code>value</code> which is
of type <code>T</code>, but <code>T</code> is not found in the method signature, so we are facing a case where none of the
available options for <code>@DelegatesTo</code> is suitable. For example, if we try to statically compile this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def mapper = new Mapper&lt;String,Integer&gt;('Hello')
assert mapper.map { length() } == 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the compiler will fail with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Static type checking] - Cannot find matching method TestScript0#length()</pre>
</div>
</div>
<div class="paragraph">
<p>In that case, you can use the <code>type</code> member of the <code>@DelegatesTo</code> annotation to reference <code>T</code> as a type token:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Mapper&lt;T,U&gt; {
    final T value
    Mapper(T value) { this.value = value }
    U map(@DelegatesTo(type="T") Closure&lt;U&gt; producer) {  <i class="conum" data-value="1"></i><b>(1)</b>
        producer.delegate = value
        producer()
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@DelegatesTo</code> annotation references a generic type which is not found in the method signature</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note that you are not limited to generic type tokens. The <code>type</code> member can be used to represent complex types, such
as <code>List&lt;T&gt;</code> or <code>Map&lt;T,List&lt;U&gt;&gt;</code>. The reason why you should use that in last resort is that the type is only checked
when the type checker finds usage of <code>@DelegatesTo</code>, not when the annotated method itself is compiled. This means that
type safety is only ensured at the call site. Additionally, compilation will be slower (though probably unnoticeable for
most cases).</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="compilation-customizers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#compilation-customizers"></a>3.15.6. Compilation customizers</h4>
<div class="sect4">
<h5 id="_introduction_5"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_5"></a>Introduction</h5>
<div class="paragraph">
<p>Whether you are using&nbsp;<code>groovyc</code> to compile classes or a&nbsp;<code>GroovyShell</code>,
for example, to execute scripts, under the hood, a <em>compiler configuration</em> is used. This configuration holds information
like the source encoding or the classpath but it can also be used to perform more operations like adding imports by
default, applying AST transformations transparently or disabling global AST transformations.</p>
</div>
<div class="paragraph">
<p>The goal of compilation customizers is to make those common tasks easy to implement. For that, the&nbsp;<code>CompilerConfiguration</code>
class is the entry point. The general schema will always be based on the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.CompilerConfiguration
// create a configuration
def config = new CompilerConfiguration()
// tweak the configuration
config.addCompilationCustomizers(...)
// run your script
def shell = new GroovyShell(config)
shell.evaluate(script)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Compilation customizers must extend the&nbsp;<em>org.codehaus.groovy.control.customizers.CompilationCustomizer</em> class. A customizer works:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on a specific compilation phase</p>
</li>
<li>
<p>on&nbsp;<em>every</em> class node being compiled</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can implement your own compilation customizer but Groovy includes some of the most common operations.</p>
</div>
</div>
<div class="sect4">
<h5 id="_import_customizer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_customizer"></a>Import customizer</h5>
<div class="paragraph">
<p>Using this compilation customizer, your code will have imports added
transparently. This is in particular useful for scripts implementing a
DSL where you want to avoid users from having to write imports. The
import customizer will let you add all the variants of imports the
Groovy language allows, that is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>class imports, optionally aliased</p>
</li>
<li>
<p>star imports</p>
</li>
<li>
<p>static imports, optionally aliased</p>
</li>
<li>
<p>static star imports</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.customizers.ImportCustomizer

def icz = new ImportCustomizer()
// "normal" import
icz.addImports('java.util.concurrent.atomic.AtomicInteger', 'java.util.concurrent.ConcurrentHashMap')
// "aliases" import
icz.addImport('CHM', 'java.util.concurrent.ConcurrentHashMap')
// "static" import
icz.addStaticImport('java.lang.Math', 'PI') // import static java.lang.Math.PI
// "aliased static" import
icz.addStaticImport('pi', 'java.lang.Math', 'PI') // import static java.lang.Math.PI as pi
// "star" import
icz.addStarImports 'java.util.concurrent' // import java.util.concurrent.*
// "static star" import
icz.addStaticStars 'java.lang.Math' // import static java.lang.Math.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>A detailed description of all shortcuts can be found in <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/customizers/ImportCustomizer.html">org.codehaus.groovy.control.customizers.ImportCustomizer</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_ast_transformation_customizer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformation_customizer"></a>AST transformation customizer</h5>
<div class="paragraph">
<p>The AST transformation customizer is meant to apply AST transformations
transparently. Unlike global AST transformations that apply on every
class being compiled as long as the transform is found on classpath
(which has drawbacks like increasing the compilation time or side
effects due to transformations applied where they should not), the
customizer will allow you to selectively apply a transform only for
specific scripts or classes.</p>
</div>
<div class="paragraph">
<p>As an example, let’s say you want to be able to use&nbsp;<code>@Log</code> in a script.
The problem is that&nbsp;<code>@Log</code> is normally applied on a class node and a
script, by definition, doesn’t require one. But implementation wise,
scripts are classes, it’s just that you cannot annotate this implicit
class node with&nbsp;<code>@Log</code>. Using the AST customizer, you have a workaround
to do it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.customizers.ASTTransformationCustomizer
import groovy.util.logging.Log

def acz = new ASTTransformationCustomizer(Log)
config.addCompilationCustomizers(acz)</code></pre>
</div>
</div>
<div class="paragraph">
<p>That’s all! Internally, the&nbsp;<code>@Log</code> AST transformation is applied to
every class node in the compilation unit. This means that it will be
applied to the script, but also to classes defined within the script.</p>
</div>
<div class="paragraph">
<p>If the AST transformation that you are using accepts parameters, you can
use parameters in the constructor too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def acz = new ASTTransformationCustomizer(Log, value: 'LOGGER')
// use name 'LOGGER' instead of the default 'log'
config.addCompilationCustomizers(acz)</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the AST transformation customizers works with objects instead of AST
nodes, not all values can be converted to AST transformation parameters.
For example, primitive types are converted to&nbsp;<code>ConstantExpression</code> (that
is <code>LOGGER</code> is converted to&nbsp;<code>new ConstantExpression('LOGGER')</code>, but if
your AST transformation takes a closure as an argument, then you have to
give it a&nbsp;<code>ClosureExpression</code>, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def configuration = new CompilerConfiguration()
def expression = new AstBuilder().buildFromCode(CompilePhase.CONVERSION) { -&gt; true }.expression[0]
def customizer = new ASTTransformationCustomizer(ConditionalInterrupt, value: expression, thrown: SecurityException)
configuration.addCompilationCustomizers(customizer)
def shell = new GroovyShell(configuration)
shouldFail(SecurityException) {
    shell.evaluate("""
        // equivalent to adding @ConditionalInterrupt(value={true}, thrown: SecurityException)
        class MyClass {
            void doIt() { }
        }
        new MyClass().doIt()
    """)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a complete list of options, please refer to <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/customizers/ASTTransformationCustomizer.html">org.codehaus.groovy.control.customizers.ASTTransformationCustomizer</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_secure_ast_customizer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_secure_ast_customizer"></a>Secure AST customizer</h5>
<div class="paragraph">
<p>This customizer will allow the developer of a DSL to restrict the
<strong>grammar</strong> of the language, to prevent users from using some constructs,
for example. It is only ``secure'' in that sense only and it is very
important to understand that it does&nbsp;<strong>not</strong> replace a security manager.
The only reason for it to exist is to limit the expressiveness of the
language. This customizer only works at the AST (abstract syntax tree)
level, not at runtime! It can be strange at first glance, but it makes
much more sense if you think of Groovy as a platform to build DSLs. You
may not want a user to have a complete language at hand. In the example
below, we will demonstrate it using an example of language that only
allows arithmetic operations, but this customizer allows you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>allow/disallow creation of closures</p>
</li>
<li>
<p>allow/disallow imports</p>
</li>
<li>
<p>allow/disallow package definition</p>
</li>
<li>
<p>allow/disallow definition of methods</p>
</li>
<li>
<p>restrict the receivers of method calls</p>
</li>
<li>
<p>restrict the kind of AST expressions a user can use</p>
</li>
<li>
<p>restrict the tokens (grammar-wise) a user can use</p>
</li>
<li>
<p>restrict the types of the constants that can be used in code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For all those features, the secure AST customizer works using either a
whitelist (list of elements that are allowed)&nbsp;<strong>or</strong> a blacklist (list of
elements that are disallowed). For each type of feature (imports,
tokens, …) you have the choice to use either a whitelist or a blacklist,
but you can mix whitelists and blacklists for distinct features. In
general, you will choose whitelists (disallow all, allow selected).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.customizers.SecureASTCustomizer
import static org.codehaus.groovy.syntax.Types.* <i class="conum" data-value="1"></i><b>(1)</b>

def scz = new SecureASTCustomizer()
scz.with {
    closuresAllowed = false // user will not be able to write closures
    methodDefinitionAllowed = false // user will not be able to define methods
    importsWhitelist = [] // empty whitelist means imports are disallowed
    staticImportsWhitelist = [] // same for static imports
    staticStarImportsWhitelist = ['java.lang.Math'] // only java.lang.Math is allowed
    // the list of tokens the user can find
    // constants are defined in org.codehaus.groovy.syntax.Types
    tokensWhitelist = [ <i class="conum" data-value="1"></i><b>(1)</b>
            PLUS,
            MINUS,
            MULTIPLY,
            DIVIDE,
            MOD,
            POWER,
            PLUS_PLUS,
            MINUS_MINUS,
            COMPARE_EQUAL,
            COMPARE_NOT_EQUAL,
            COMPARE_LESS_THAN,
            COMPARE_LESS_THAN_EQUAL,
            COMPARE_GREATER_THAN,
            COMPARE_GREATER_THAN_EQUAL,
    ].asImmutable()
    // limit the types of constants that a user can define to number types only
    constantTypesClassesWhiteList = [ <i class="conum" data-value="2"></i><b>(2)</b>
            Integer,
            Float,
            Long,
            Double,
            BigDecimal,
            Integer.TYPE,
            Long.TYPE,
            Float.TYPE,
            Double.TYPE
    ].asImmutable()
    // method calls are only allowed if the receiver is of one of those types
    // be careful, it's not a runtime type!
    receiversClassesWhiteList = [ <i class="conum" data-value="2"></i><b>(2)</b>
            Math,
            Integer,
            Float,
            Double,
            Long,
            BigDecimal
    ].asImmutable()
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>use for token types from <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/syntax/Types.html">org.codehaus.groovy.syntax.Types</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>you can use class literals here</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If what the secure AST customizer provides out of the box isn’t enough
for your needs, before creating your own compilation customizer, you
might be interested in the expression and statement checkers that the
AST customizer supports. Basically, it allows you to add custom checks
on the AST tree, on expressions (expression checkers) or statements
(statement checkers). For this, you must
implement&nbsp;<code>org.codehaus.groovy.control.customizers.SecureASTCustomizer.StatementChecker</code>
or&nbsp;<code>org.codehaus.groovy.control.customizers.SecureASTCustomizer.ExpressionChecker</code>.</p>
</div>
<div class="paragraph">
<p>Those interfaces define a single method called&nbsp;<code>isAuthorized</code>, returning
a boolean, and taking a&nbsp;<code>Statement</code> (or&nbsp;<code>Expression</code>) as a parameter. It
allows you to perform complex logic over expressions or statements to
tell if a user is allowed to do it or not.</p>
</div>
<div class="paragraph">
<p>For example, there’s no predefined configuration flag in the customizer which
will let you prevent people from using an attribute expression. Using a custom
checker, it is trivial:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def scz = new SecureASTCustomizer()
def checker = { expr -&gt;
    !(expr instanceof AttributeExpression)
} as SecureASTCustomizer.ExpressionChecker
scz.addExpressionCheckers(checker)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we can make sure that this works by evaluating a simple script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">new GroovyShell(config).evaluate '''
    class A {
        int val
    }

    def a = new A(val: 123)
    a.@val <i class="conum" data-value="1"></i><b>(1)</b>
'''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>will fail compilation</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Statements can be checked using <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/customizers/SecureASTCustomizer/StatementChecker.html">org.codehaus.groovy.control.customizers.SecureASTCustomizer.StatementChecker</a>
Expressions can be checked using <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/control/customizers/SecureASTCustomizer/ExpressionChecker.html">org.codehaus.groovy.control.customizers.SecureASTCustomizer.ExpressionChecker</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_source_aware_customizer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_aware_customizer"></a>Source aware customizer</h5>
<div class="paragraph">
<p>This customizer may be used as a filter on other customizers. The
filter, in that case, is the&nbsp;<code>org.codehaus.groovy.control.SourceUnit</code>.
For this, the source aware customizer takes another customizer as a
delegate, and it will apply customization of that delegate only and only
if predicates on the source unit match.</p>
</div>
<div class="paragraph">
<p><code>SourceUnit</code> gives you access to multiple things but in particular the
file being compiled (if compiling from a file, of course). It gives
you the potential to perform operation based on the file name, for
example. Here is how you would create a source aware customizer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.customizers.SourceAwareCustomizer
import org.codehaus.groovy.control.customizers.ImportCustomizer

def delegate = new ImportCustomizer()
def sac = new SourceAwareCustomizer(delegate)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can use predicates on the source aware customizer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// the customizer will only be applied to classes contained in a file name ending with 'Bean'
sac.baseNameValidator = { baseName -&gt;
    baseName.endsWith 'Bean'
}

// the customizer will only be applied to files which extension is '.spec'
sac.extensionValidator = { ext -&gt; ext == 'spec' }

// source unit validation
// allow compilation only if the file contains at most 1 class
sac.sourceUnitValidator = { SourceUnit sourceUnit -&gt; sourceUnit.AST.classes.size() == 1 }

// class validation
// the customizer will only be applied to classes ending with 'Bean'
sac.classValidator = { ClassNode cn -&gt; cn.endsWith('Bean') }</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_customizer_builder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_customizer_builder"></a>Customizer builder</h5>
<div class="paragraph">
<p>If you are using compilation customizers in Groovy code (like the
examples above) then you can use an alternative syntax to customize compilation.
A builder&nbsp;(<code>org.codehaus.groovy.control.customizers.builder.CompilerCustomizationBuilder</code>)
simplifies the creation of customizers using a hierarchical DSL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.control.CompilerConfiguration
import static org.codehaus.groovy.control.customizers.builder.CompilerCustomizationBuilder.withConfig <i class="conum" data-value="1"></i><b>(1)</b>

def conf = new CompilerConfiguration()
withConfig(conf) {
    // ... <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>static import of the builder method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>configuration goes here</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The code sample above shows how to use the builder. A static
method,&nbsp;<em>withConfig</em>, takes a closure corresponding to the builder code,
and automatically registers compilation customizers to the
configuration. Every compilation customizer available in the distribution
can be configured this way:</p>
</div>
<div class="sect5">
<h6 id="_import_customizer_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_import_customizer_2"></a>Import customizer</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(configuration) {
   imports { // imports customizer
      normal 'my.package.MyClass' // a normal import
      alias 'AI', 'java.util.concurrent.atomic.AtomicInteger' // an aliased import
      star 'java.util.concurrent' // star imports
      staticMember 'java.lang.Math', 'PI' // static import
      staticMember 'pi', 'java.lang.Math', 'PI' // aliased static import
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_ast_transformation_customizer_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformation_customizer_2"></a>AST transformation customizer</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(conf) {
   ast(Log) <i class="conum" data-value="1"></i><b>(1)</b>
}

withConfig(conf) {
   ast(Log, value: 'LOGGER') <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>apply @Log transparently</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>apply @Log with a different name for the logger</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_secure_ast_customizer_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_secure_ast_customizer_2"></a>Secure AST customizer</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(conf) {
   secureAst {
       closuresAllowed = false
       methodDefinitionAllowed = false
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_source_aware_customizer_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_source_aware_customizer_2"></a>Source aware customizer</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(configuration){
    source(extension: 'sgroovy') {
        ast(CompileStatic) <i class="conum" data-value="1"></i><b>(1)</b>
    }
}

withConfig(configuration){
    source(extensions: ['sgroovy','sg']) {
        ast(CompileStatic) <i class="conum" data-value="2"></i><b>(2)</b>
    }
}

withConfig(configuration) {
    source(extensionValidator: { it.name in ['sgroovy','sg']}) {
        ast(CompileStatic) <i class="conum" data-value="2"></i><b>(2)</b>
    }
}

withConfig(configuration) {
    source(basename: 'foo') {
        ast(CompileStatic) <i class="conum" data-value="3"></i><b>(3)</b>
    }
}

withConfig(configuration) {
    source(basenames: ['foo', 'bar']) {
        ast(CompileStatic) <i class="conum" data-value="4"></i><b>(4)</b>
    }
}

withConfig(configuration) {
    source(basenameValidator: { it in ['foo', 'bar'] }) {
        ast(CompileStatic) <i class="conum" data-value="4"></i><b>(4)</b>
    }
}

withConfig(configuration) {
    source(unitValidator: { unit -&gt; !unit.AST.classes.any { it.name == 'Baz' } }) {
        ast(CompileStatic) <i class="conum" data-value="5"></i><b>(5)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>apply CompileStatic AST annotation on .sgroovy files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>apply CompileStatic AST annotation on .sgroovy or .sg files</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>apply CompileStatic AST annotation on files whose name is 'foo'</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>apply CompileStatic AST annotation on files whose name is 'foo' or 'bar'</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>apply CompileStatic AST annotation on files that do not contain a class named 'Baz'</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_inlining_a_customizer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inlining_a_customizer"></a>Inlining a customizer</h6>
<div class="paragraph">
<p>Inlined customizer allows you to write a compilation customizer
directly, without having to create a class for it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(configuration) {
    inline(phase:'CONVERSION') { source, context, classNode -&gt;  <i class="conum" data-value="1"></i><b>(1)</b>
        println "visiting $classNode"                           <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define an inlined customizer which will execute at the CONVERSION phase</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>prints the name of the class node being compiled</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_multiple_customizers"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_multiple_customizers"></a>Multiple customizers</h6>
<div class="paragraph">
<p>Of course, the builder allows you to define multiple customizers at
once:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(configuration) {
   ast(ToString)
   ast(EqualsAndHashCode)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_config_script_flag"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_config_script_flag"></a>Config script flag</h5>
<div class="paragraph">
<p>So far, we have described how you can customize compilation using
a&nbsp;<code>CompilationConfiguration</code> class, but this is only possible if you
embed Groovy and that you create your own instances
of&nbsp;<code>CompilerConfiguration</code> (then use it to create a
<code>GroovyShell</code>,&nbsp;<code>GroovyScriptEngine</code>, …).</p>
</div>
<div class="paragraph">
<p>If you want it to be applied on the classes you compile with the normal
Groovy compiler (that is to say with &nbsp;<code>groovyc</code>,&nbsp;<code>ant</code> or&nbsp;<code>gradle</code>,
for example), it is possible to use a compilation flag named&nbsp;<code>configscript</code>
that takes a Groovy configuration script as argument.</p>
</div>
<div class="paragraph">
<p>This script gives you access to the&nbsp;<code>CompilerConfiguration</code> instance&nbsp;<strong>before</strong>
the files are compiled (exposed into the configuration script as a variable named <code>configuration</code>),
so that you can tweak it.</p>
</div>
<div class="paragraph">
<p>It also transparently integrates the compiler configuration builder above. As an example, let’s see
how you would activate static compilation by default on all classes.</p>
</div>
<div class="sect5">
<h6 id="_static_compilation_by_default"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_static_compilation_by_default"></a>Static compilation by default</h6>
<div class="paragraph">
<p>Normally, classes in Groovy are compiled with a dynamic runtime. You can activate static compilation
by placing an annotation named <code>@CompileStatic</code> on any class. Some people would like to have this
mode activated by default, that is to say not having to annotated classes. Using <code>configscript</code>,
this is possible. First of all, you need to create a file named <code>config.groovy</code> into <code>src/conf</code> with
the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withConfig(configuration) { <i class="conum" data-value="1"></i><b>(1)</b>
   ast(groovy.transform.CompileStatic)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>configuration</em> references a <code>CompilerConfiguration</code> instance</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>That is actually all you need. You don’t have to import the builder, it’s automatically
exposed in the script. Then, compile your files using the following command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovyc -configscript src/conf/config.groovy src/main/groovy/MyClass.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>We strongly recommend you to separate configuration files from classes,
hence why we suggest using the <code>src/main</code> and <code>src/conf</code> directories above.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ast_transformations"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_ast_transformations"></a>AST transformations</h5>
<div class="paragraph">
<p>If:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>runtime metaprogramming doesn’t allow you do do what you want</p>
</li>
<li>
<p>you need to improve the performance of the execution of your DSLs</p>
</li>
<li>
<p>you want to leverage the same syntax as Groovy but with different semantics</p>
</li>
<li>
<p>you want to improve support for type checking in your DSLs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then AST transformations are the way to go. Unlike the techniques used so far, AST transformations are meant to
change or generate code before it is compiled to bytecode. AST transformations are capable of adding new methods at
compile time for example, or totally changing the body of a method based on your needs. They are a very powerful tool
but also come at the price of not being easy to write. For more information about AST transformations, please take
a look at the <a href="http://docs.groovy-lang.org/latest/html/documentation/index.html#_compile_time_metaprogramming">compile-time
metaprogramming</a> section of this manual.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_custom_type_checking_extensions"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_type_checking_extensions"></a>3.15.7. Custom type checking extensions</h4>
<div class="paragraph">
<p>It may be interesting, in some circumstances, to provide feedback about wrong code to the user as soon as possible,
that is to say when the DSL script is compiled, rather than having to wait for the execution of the script. However,
this is not often possible with dynamic code. Groovy actually provides a practical answer to this known as
<a href="https://docs.groovy-lang.org/docs/next/html/documentation/type-checking-extensions.html">type checking extensions</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_builders_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_builders_2"></a>3.15.8. Builders</h4>
<div class="paragraph">
<p>(TBD)</p>
</div>
<div class="sect4">
<h5 id="_creating_a_builder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_a_builder"></a>Creating a builder</h5>
<div class="paragraph">
<p>(TBD)</p>
</div>
<div class="sect5">
<h6 id="_buildersupport"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_buildersupport"></a>BuilderSupport</h6>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
<div class="sect5">
<h6 id="_factorybuildersupport"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_factorybuildersupport"></a>FactoryBuilderSupport</h6>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_existing_builders"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_existing_builders"></a>Existing builders</h5>
<div class="paragraph">
<p>(TBD)</p>
</div>
<div class="sect5">
<h6 id="_markupbuilder_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder_2"></a>MarkupBuilder</h6>
<div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_markupbuilder">Creating Xml - MarkupBuilder</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_streamingmarkupbuilder_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingmarkupbuilder_2"></a>StreamingMarkupBuilder</h6>
<div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingmarkupbuilder">Creating Xml - StreamingMarkupBuilder</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_saxbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_saxbuilder"></a>SaxBuilder</h6>
<div class="paragraph">
<p>A builder for generating <a href="https://en.wikipedia.org/wiki/Simple_API_for_XML">Simple API for XML (SAX)</a> events.</p>
</div>
<div class="paragraph">
<p>If you have the following SAX handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class LogHandler extends org.xml.sax.helpers.DefaultHandler {

    String log = ''

    void startElement(String uri, String localName, String qName, org.xml.sax.Attributes attributes) {
        log += "Start Element: $localName, "
    }

    void endElement(String uri, String localName, String qName) {
        log += "End Element: $localName, "
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>SaxBuilder</code> to generate SAX events for the handler like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def handler = new LogHandler()
def builder = new groovy.xml.SAXBuilder(handler)

builder.root() {
    helloWorld()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then check that everything worked as expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert handler.log == 'Start Element: root, Start Element: helloWorld, End Element: helloWorld, End Element: root, '</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_staxbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_staxbuilder"></a>StaxBuilder</h6>
<div class="paragraph">
<p>A Groovy builder that works with <a href="http://en.wikipedia.org/wiki/StAX">Streaming API for XML (StAX)</a> processors.</p>
</div>
<div class="paragraph">
<p>Here is a simple example using the StAX implementation of Java to generate XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def factory = javax.xml.stream.XMLOutputFactory.newInstance()
def writer = new StringWriter()
def builder = new groovy.xml.StaxBuilder(factory.createXMLStreamWriter(writer))

builder.root(attribute:1) {
    elem1('hello')
    elem2('world')
}

assert writer.toString() == '&lt;?xml version="1.0" ?&gt;&lt;root attribute="1"&gt;&lt;elem1&gt;hello&lt;/elem1&gt;&lt;elem2&gt;world&lt;/elem2&gt;&lt;/root&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p>An external library such as <a href="https://github.com/jettison-json/jettison">Jettison</a> can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.codehaus.jettison:jettison:1.3.3')
@GrabExclude('stax:stax-api') // part of Java 6 and later
import org.codehaus.jettison.mapped.*

def writer = new StringWriter()
def mappedWriter = new MappedXMLStreamWriter(new MappedNamespaceConvention(), writer)
def builder = new groovy.xml.StaxBuilder(mappedWriter)

builder.root(attribute:1) {
     elem1('hello')
     elem2('world')
}

assert writer.toString() == '{"root":{"@attribute":"1","elem1":"hello","elem2":"world"}}'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_dombuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dombuilder"></a>DOMBuilder</h6>
<div class="paragraph">
<p>A builder for parsing HTML, XHTML and XML into a <a href="https://en.wikipedia.org/wiki/Document_Object_Model">W3C DOM</a> tree.</p>
</div>
<div class="paragraph">
<p>For example this XML <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String recordsXML = '''
    &lt;records&gt;
      &lt;car name='HSV Maloo' make='Holden' year='2006'&gt;
        &lt;country&gt;Australia&lt;/country&gt;
        &lt;record type='speed'&gt;Production Pickup Truck with speed of 271kph&lt;/record&gt;
      &lt;/car&gt;
      &lt;car name='P50' make='Peel' year='1962'&gt;
        &lt;country&gt;Isle of Man&lt;/country&gt;
        &lt;record type='size'&gt;Smallest Street-Legal Car at 99cm wide and 59 kg in weight&lt;/record&gt;
      &lt;/car&gt;
      &lt;car name='Royale' make='Bugatti' year='1931'&gt;
        &lt;country&gt;France&lt;/country&gt;
        &lt;record type='price'&gt;Most Valuable Car at $15 million&lt;/record&gt;
      &lt;/car&gt;
    &lt;/records&gt;'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>Can be parsed into a DOM tree with a <code>DOMBuilder</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def reader = new StringReader(recordsXML)
def doc = groovy.xml.DOMBuilder.parse(reader)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then processed further e.g. by using <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_domcategory">DOMCategory</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def records = doc.documentElement
use(groovy.xml.dom.DOMCategory) {
    assert records.car.size() == 3
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nodebuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_nodebuilder"></a>NodeBuilder</h6>
<div class="paragraph">
<p><code>NodeBuilder</code> is used for creating nested trees of <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/util/Node.html">Node</a> objects for handling arbitrary data.
To create a simple user list you use a <code>NodeBuilder</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def nodeBuilder = new NodeBuilder()
def userlist = nodeBuilder.userlist {
    user(id: '1', firstname: 'John', lastname: 'Smith') {
        address(type: 'home', street: '1 Main St.', city: 'Springfield', state: 'MA', zip: '12345')
        address(type: 'work', street: '2 South St.', city: 'Boston', state: 'MA', zip: '98765')
    }
    user(id: '2', firstname: 'Alice', lastname: 'Doe')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can process the data further, e.g. by using <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#gpath_expressions">GPath expressions</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert userlist.user.@firstname.join(', ') == 'John, Alice'
assert userlist.user.find { it.@lastname == 'Smith' }.address.size() == 2</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_jsonbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jsonbuilder"></a>JsonBuilder</h6>
<div class="paragraph">
<p>Groovy’s <code>JsonBuilder</code> makes it easy to create Json. For example to create this Json string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String carRecords = '''
    {
        "records": {
        "car": {
            "name": "HSV Maloo",
            "make": "Holden",
            "year": 2006,
            "country": "Australia",
            "record": {
              "type": "speed",
              "description": "production pickup truck with speed of 271kph"
            }
          }
      }
    }
'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>you can use a <code>JsonBuilder</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">JsonBuilder builder = new JsonBuilder()
builder.records {
  car {
        name 'HSV Maloo'
        make 'Holden'
        year 2006
        country 'Australia'
        record {
            type 'speed'
            description 'production pickup truck with speed of 271kph'
        }
  }
}
String json = JsonOutput.prettyPrint(builder.toString())</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use <a href="https://github.com/lukas-krecan/JsonUnit">JsonUnit</a> to check that the builder produced the expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">JsonAssert.assertJsonEquals(json, carRecords)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to customize the generated output you can pass a <code>JsonGenerator</code> instance when creating a <code>JsonBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.json.*

def generator = new JsonGenerator.Options()
        .excludeNulls()
        .excludeFieldsByName('make', 'country', 'record')
        .excludeFieldsByType(Number)
        .addConverter(URL) { url -&gt; "http://groovy-lang.org" }
        .build()

JsonBuilder builder = new JsonBuilder(generator)
builder.records {
  car {
        name 'HSV Maloo'
        make 'Holden'
        year 2006
        country 'Australia'
        homepage new URL('http://example.org')
        record {
            type 'speed'
            description 'production pickup truck with speed of 271kph'
        }
  }
}

assert builder.toString() == '{"records":{"car":{"name":"HSV Maloo","homepage":"http://groovy-lang.org"}}}'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_streamingjsonbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_streamingjsonbuilder"></a>StreamingJsonBuilder</h6>
<div class="paragraph">
<p>Unlike <code>JsonBuilder</code> which creates a data structure in memory, which is handy in those situations where you want to alter the structure programmatically before output,
<code>StreamingJsonBuilder</code> directly streams to a writer without any intermediate memory data structure.
If you do not need to modify the structure and want a more memory-efficient approach, use <code>StreamingJsonBuilder</code>.</p>
</div>
<div class="paragraph">
<p>The usage of <code>StreamingJsonBuilder</code> is similar to <code>JsonBuilder</code>. In order to create this Json string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String carRecords = '''
    {
        "records": {
        "car": {
            "name": "HSV Maloo",
            "make": "Holden",
            "year": 2006,
            "country": "Australia",
            "record": {
              "type": "speed",
              "description": "production pickup truck with speed of 271kph"
            }
          }
      }
    }
'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>you use a <code>StreamingJsonBuilder</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">StringWriter writer = new StringWriter()
StreamingJsonBuilder builder = new StreamingJsonBuilder(writer)
builder.records {
  car {
        name 'HSV Maloo'
        make 'Holden'
        year 2006
        country 'Australia'
        record {
            type 'speed'
            description 'production pickup truck with speed of 271kph'
        }
  }
}
String json = JsonOutput.prettyPrint(writer.toString())</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use <a href="https://github.com/lukas-krecan/JsonUnit">JsonUnit</a> to check the expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">JsonAssert.assertJsonEquals(json, carRecords)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to customize the generated output you can pass a <code>JsonGenerator</code> instance when creating a <code>StreamingJsonBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def generator = new JsonGenerator.Options()
        .excludeNulls()
        .excludeFieldsByName('make', 'country', 'record')
        .excludeFieldsByType(Number)
        .addConverter(URL) { url -&gt; "http://groovy-lang.org" }
        .build()

StringWriter writer = new StringWriter()
StreamingJsonBuilder builder = new StreamingJsonBuilder(writer, generator)

builder.records {
  car {
        name 'HSV Maloo'
        make 'Holden'
        year 2006
        country 'Australia'
        homepage new URL('http://example.org')
        record {
            type 'speed'
            description 'production pickup truck with speed of 271kph'
        }
  }
}

assert writer.toString() == '{"records":{"car":{"name":"HSV Maloo","homepage":"http://groovy-lang.org"}}}'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="swingbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#swingbuilder"></a>SwingBuilder</h6>
<div class="paragraph">
<p><code>SwingBuilder</code> allows you to create full-fledged Swing GUIs in a declarative and concise fashion. It accomplishes this by employing a common idiom in Groovy, builders.
Builders handle the busywork of creating complex objects for you, such as instantiating children, calling Swing methods, and attaching these children to their parents.
As a consequence, your code is much more readable and maintainable, while still allowing you access to the full range of Swing components.</p>
</div>
<div class="paragraph">
<p>Here’s a simple example of using <code>SwingBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.swing.SwingBuilder
import java.awt.BorderLayout as BL

count = 0
new SwingBuilder().edt {
  frame(title: 'Frame', size: [300, 300], show: true) {
    borderLayout()
    textlabel = label(text: 'Click the button!', constraints: BL.NORTH)
    button(text:'Click Me',
         actionPerformed: {count++; textlabel.text = "Clicked ${count} time(s)."; println "clicked"}, constraints:BL.SOUTH)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is what it will look like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRlwDAABXRUJQVlA4TE8DAAAvcoAQAN/iuLZtpbm429ChB1qgUgqgEopgqHHPjUsPbmPbVpVzvzsOmUe//woogNDTT+Su5/KeE0m2Ved8ZloAue+DOjoui2dUccxwYf4VAgiAADQcAD6tAu6AE4D1OHvgT0TrcH45m6eLfTv9b67mZa0Ha7MBy0Sop8BDlCCWp8DTGp6OEOcjj2mBJFf+kYQkJCEJlfxwV/6RhEpI8vfhlcTJl5z+mJ8kMAHT84XXPaU2UTyASszYp/oOxbcpvk3xbYpvU32H/QkI6uIT7t7b5Sn2O/ZQ6H4nrTkSqhe/+OEmFlSJaj9lzEu3z1AJQA8gAAdmBzCDZgt1u0MUU1Y2BDFAtgCwaRtJO2bKMYyOKc5BjhnHvNL/f8jFothWd48R/XcgSZKUVGPLTe+IA29Al9rwpiaCvtQSnM36prbo+bOnTx4/evjg/r27iwvzc7N3bt+6eeP6tXdv33/4+Onzl6+ZZKPyyDAlqKnRc1iSGTk7rM8lRL831ByGZCrCZ1JlBbgScnFYXx4JC2uIiEdfZCdmIMdZGV45P7wgsp7BWAjZAMiuZqrhpXGlsrp95O+hN7uIeCoXpOQbRpaWBnU1GVb1YKkOgS+c+cexnUOv5+dW9meu5oJsNBKWBpudBoOlEOIk2OFXiwu/EbGjOAtc0K2tRY68XPyDp2e/d5S3Ogw2EYnFUiv8wNNx4Ree/IknvuFxAfa/0El3WBAUPwrLWziz14d8/YB+bcbvpeCl6y11S3FtvECdiFZRo+cwJNMg28gIaYI0NL1lSGbqB3zL0lLJD03nrwaedFADhgBCjGQCFjQNpFd13g9gAVkIeUSGWqVAiN8LAGmEbDBZYeUjRsvMEtCHnlhz5TJAj2PppEBkSgdbxWdYDg15gdVEzZgHdl5WaMP5DIgZyS2W1zYUhDEYTB5fqoUNUDD8SPLoegBqPkh4IuFXVHYR7kwxhoRws8p7go+up9TeTaMV7rYp1dsbN5JBH9LwsVc7JYCyHaaJJW8xaZXBeryusFZcqIFsBoo08+sKCSKEyWOpYENk5ZZmNiCLpUW4HFliz1IfJlHkYaAjXGBjgy0UZtbXFWF4aXaZNl2vXMF/9ROs9SAVN/KOJzmm9SVC4054UAoBAA==" alt="SwingBuilder001">
</div>
</div>
<div class="paragraph">
<p>This hierarchy of components would normally be created through a series of repetitive instantiations, setters, and finally attaching this child to its respective parent.
Using <code>SwingBuilder</code>, however, allows you to define this hierarchy in its native form, which makes the interface design understandable simply by reading the code.</p>
</div>
<div class="paragraph">
<p>The flexibility shown here is made possible by leveraging the many programming features built-in to Groovy, such as closures, implicit constructor calling, import aliasing, and string interpolation.
Of course, these do not have to be fully understood in order to use <code>SwingBuilder</code>; as you can see from the code above, their uses are intuitive.</p>
</div>
<div class="paragraph">
<p>Here is a slightly more involved example, with an example of <code>SwingBuilder</code> code re-use via a closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.swing.SwingBuilder
import javax.swing.*
import java.awt.*

def swing = new SwingBuilder()

def sharedPanel = {
     swing.panel() {
        label("Shared Panel")
    }
}

count = 0
swing.edt {
    frame(title: 'Frame', defaultCloseOperation: JFrame.EXIT_ON_CLOSE, pack: true, show: true) {
        vbox {
            textlabel = label('Click the button!')
            button(
                text: 'Click Me',
                actionPerformed: {
                    count++
                    textlabel.text = "Clicked ${count} time(s)."
                    println "Clicked!"
                }
            )
            widget(sharedPanel())
            widget(sharedPanel())
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here’s another variation that relies on observable beans and binding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.swing.SwingBuilder
import groovy.beans.Bindable

class MyModel {
   @Bindable int count = 0
}

def model = new MyModel()
new SwingBuilder().edt {
  frame(title: 'Java Frame', size: [100, 100], locationRelativeTo: null, show: true) {
    gridLayout(cols: 1, rows: 2)
    label(text: bind(source: model, sourceProperty: 'count', converter: { v -&gt;  v? "Clicked $v times": ''}))
    button('Click me!', actionPerformed: { model.count++ })
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#xform-Bindable">@Bindable</a> is one of the core AST Transformations. It generates all the required boilerplate code to turn a simple bean into an observable one. The <code>bind()</code> node creates appropriate <code>PropertyChangeListeners</code> that will update the interested parties whenever a <code>PropertyChangeEvent</code> is fired.</p>
</div>
</div>
<div class="sect5">
<h6 id="_antbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_antbuilder"></a>AntBuilder</h6>
<div class="paragraph">
<p>Despite being primarily a build tool, <a href="http://ant.apache.org/">Apache Ant</a> is
a very practical tool for manipulating files including zip files, copy, resource processing, …​
But if ever you’ve been working with a <code>build.xml</code> file or some <em>Jelly script</em>
and found yourself a little restricted by all those pointy brackets, or
found it a bit weird using XML as a scripting language and wanted
something a little cleaner and more straight forward, then maybe Ant
scripting with Groovy might be what you’re after.</p>
</div>
<div class="paragraph">
<p>Groovy has a helper class called <code>AntBuilder</code> which makes the scripting
of Ant tasks really easy; allowing a real scripting language to be used
for programming constructs (variables, methods, loops, logical
branching, classes etc). It still looks like a neat concise version of
Ant’s XML without all those pointy brackets; though you can mix and
match this markup inside your script. Ant itself is a collection of jar
files. By adding them to your classpath, you can easily use them within
Groovy as is. We believe using <code>AntBuilder</code> leads to more concise and
readily understood syntax.</p>
</div>
<div class="paragraph">
<p><code>AntBuilder</code> exposes Ant tasks directly using the convenient builder notation that
we are used to in Groovy. Here is the most basic example, which is printing a message
on the standard output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ant = new groovy.ant.AntBuilder()          <i class="conum" data-value="1"></i><b>(1)</b>
ant.echo('hello from Ant!')         <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>creates an instance of <code>AntBuilder</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>executes the <code>echo</code> task with the message in parameter</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Imagine that you need to create a ZIP file. It can be as simple as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ant = new AntBuilder()
ant.zip(destfile: 'sources.zip', basedir: 'src')</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the next example, we demonstrate the use of <code>AntBuilder</code> to copy a list of files
using a classical Ant pattern directly in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// let's just call one task
ant.echo("hello")

// here is an example of a block of Ant inside GroovyMarkup
ant.sequential {
    echo("inside sequential")
    def myDir = "target/AntTest/"
    mkdir(dir: myDir)
    copy(todir: myDir) {
        fileset(dir: "src/test") {
            include(name: "**/*.groovy")
        }
    }
    echo("done")
}

// now let's do some normal Groovy again
def file = new File(ant.project.baseDir,"target/AntTest/some/pkg/MyTest.groovy")
assert file.exists()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example would be iterating over a list of files matching a specific pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// let's create a scanner of filesets
def scanner = ant.fileScanner {
    fileset(dir:"src/test") {
        include(name:"**/My*.groovy")
    }
}

// now let's iterate over
def found = false
for (f in scanner) {
    println("Found file $f")
    found = true
    assert f instanceof File
    assert f.name.endsWith(".groovy")
}
assert found</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or executing a JUnit test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">ant.junit {
    classpath { pathelement(path: '.') }
    test(name:'some.pkg.MyTest')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can even go further by compiling and executing a Java file directly from Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">ant.echo(file:'Temp.java', '''
    class Temp {
        public static void main(String[] args) {
            System.out.println("Hello");
        }
    }
''')
ant.javac(srcdir:'.', includes:'Temp.java', fork:'true')
ant.java(classpath:'.', classname:'Temp', fork:'true')
ant.echo('Done')</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is worth mentioning that <code>AntBuilder</code> is included in <a href="http://gradle.org/">Gradle</a>, so you can use it in Gradle
just like you would in Groovy. Additional documentation can be found in the
<a href="http://gradle.org/docs/current/userguide/ant.html">Gradle manual</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_clibuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_clibuilder"></a>CliBuilder</h6>
<div class="paragraph">
<p><code>CliBuilder</code> provides a compact way to specify the available options for a commandline application and then
automatically parse the application’s commandline parameters according to that specification. By convention,
a distinction is made between <em>option</em> commandline parameters and any remaining parameters which are passed
to an application as its arguments. Typically, several types of options might be supported such as <code>-V</code> or
<code>--tabsize=4</code>. <code>CliBuilder</code> removes the burden of developing lots of code for commandline processing.
Instead, it supports a somewhat declarative approach to declaring your options and then provides a single call
to parse the commandline parameters with a simple mechanism to interrogate the options (you can think of this
as a simple model for your options).</p>
</div>
<div class="paragraph">
<p>Even though the details of each commandline you create could be quite different, the same main steps are
followed each time. First, a <code>CliBuilder</code> instance is created. Then, allowed commandline options are defined.
This can be done using a <em>dynamic api</em> style or an <em>annotation</em> style.
The commandline parameters are then parsed according to the options specification resulting in a
collection of options which are then interrogated.</p>
</div>
<div class="paragraph">
<p>Here is a simple example <code>Greeter.groovy</code> script illustrating usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import of CliBuilder not shown                          <i class="conum" data-value="1"></i><b>(1)</b>
// specify parameters
def cli = new CliBuilder(usage: 'groovy Greeter [option]') <i class="conum" data-value="2"></i><b>(2)</b>
cli.a(longOpt: 'audience', args: 1, 'greeting audience')   <i class="conum" data-value="3"></i><b>(3)</b>
cli.h(longOpt: 'help', 'display usage')                    <i class="conum" data-value="4"></i><b>(4)</b>

// parse and process parameters
def options = cli.parse(args)                              <i class="conum" data-value="5"></i><b>(5)</b>
if (options.h) cli.usage()                                 <i class="conum" data-value="6"></i><b>(6)</b>
else println "Hello ${options.a ? options.a : 'World'}"    <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Earlier versions of Groovy had a CliBuilder in the groovy.util package and no import was necessary.
While still supported, this approach is now deprecated and you should instead choose the groovy.cli.picocli
or groovy.cli.commons version. The groovy.util version points to the commons-cli version for backwards compatibility
but will be removed in a future version of Groovy.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>define a new <code>CliBuilder</code> instance specifying an optional usage string</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>specify a <code>-a</code> option taking a single argument with an optional long variant <code>--audience</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>specify a <code>-h</code> option taking no arguments with an optional long variant <code>--help</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>parse the commandline parameters supplied to the script</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>if the <code>h</code> option is found display a usage message</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>display a standard greeting or, if the <code>a</code> option is found, a customized greeting</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Running this script with no commandline parameters, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">&gt; groovy Greeter</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello World</pre>
</div>
</div>
<div class="paragraph">
<p>Running this script with <code>-h</code> as the single commandline parameter, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">&gt; groovy Greeter -h</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>usage: groovy Greeter [option]
 -a,--audience &lt;arg&gt;   greeting audience
 -h,--help             display usage</pre>
</div>
</div>
<div class="paragraph">
<p>Running this script with <code>--audience Groovologist</code> as the commandline parameters, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">&gt; groovy Greeter --audience Groovologist</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello Groovologist</pre>
</div>
</div>
<div class="paragraph">
<p>When creating the <code>CliBuilder</code> instance in the above example, we set the optional <code>usage</code> property
within the constructor call. This follows Groovy’s normal ability to set additional properties
of the instance during construction. There are numerous other properties which can be set
such as <code>header</code> and <code>footer</code>. For the complete set of available properties, see the
available properties for the <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/util/CliBuilder.html">CliBuilder</a> class.</p>
</div>
<div class="paragraph">
<p>When defining an allowed commandline option, both a short name (e.g. "h" for the <code>help</code> option shown previously)
and a short description (e.g. "display usage" for the <code>help</code> option) must be supplied.
In our example above, we also set some
additional properties such as <code>longOpt</code> and <code>args</code>. The following additional
properties are supported when specifying an allowed commandline option:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">argName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the name of the argument for this option used in output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">longOpt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the long representation or long name of the option</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">args</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the number of argument values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code> or <code>String</code> &lt;1&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">optionalArg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether the argument value is optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether the option is mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the type of this option</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">valueSeparator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the character that is the value separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>char</code> &lt;2&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a default value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">convert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">converts the incoming String to the required type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Closure</code> &lt;1&gt;</p></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>More details later</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Single character Strings are coerced to chars in special cases in Groovy</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If you have an option with only a <code>longOpt</code> variant, you can use the special shortname of '_'
to specify the option, e.g. : <code>cli._(longOpt: 'verbose', 'enable verbose logging')</code>.
Some of the remaining named parameters should be fairly self-explanatory while others deserve
a bit more explanation. But before further explanations, let’s look at ways of using
<code>CliBuilder</code> with annotations.</p>
</div>
<div class="sect6">
<h7 id="_using_annotations_and_an_interface"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_an_interface"></a>Using Annotations and an interface</h7>
<div class="paragraph">
<p>Rather than making a series of method calls (albeit in a very declarative mini-DSL form)
to specify the allowable options, you can provide an interface specification of the allowable options where
annotations are used to indicate and provide details for those options and for how unprocessed
parameters are handled. Two annotations are used: <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/cli/Option.html">groovy.cli.Option</a> and <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/cli/Unparsed.html">groovy.cli.Unparsed</a>.</p>
</div>
<div class="paragraph">
<p>Here is how such a specification can be defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface GreeterI {
    @Option(shortName='h', description='display usage') Boolean help()        <i class="conum" data-value="1"></i><b>(1)</b>
    @Option(shortName='a', description='greeting audience') String audience() <i class="conum" data-value="2"></i><b>(2)</b>
    @Unparsed(description = "positional parameters") List remaining()         <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify a Boolean option set using <code>-h</code> or <code>--help</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify a String option set using <code>-a</code> or <code>--audience</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify where any remaining parameters will be stored</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note how the long name is automatically determined from the interface method name.
You can use the <code>longName</code> annotation attribute to override that behavior and specify
a custom long name if you wish or use a longName of '_' to indicate that no long name
is to be provided. You will need to specify a shortName in such a case.</p>
</div>
<div class="paragraph">
<p>Here is how you could use the interface specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import CliBuilder not shown
def cli = new CliBuilder(usage: 'groovy Greeter')  <i class="conum" data-value="1"></i><b>(1)</b>
def argz = '--audience Groovologist'.split()
def options = cli.parseFromSpec(GreeterI, argz)             <i class="conum" data-value="2"></i><b>(2)</b>
assert options.audience() == 'Groovologist'                 <i class="conum" data-value="3"></i><b>(3)</b>

argz = '-h Some Other Args'.split()
options = cli.parseFromSpec(GreeterI, argz)                 <i class="conum" data-value="4"></i><b>(4)</b>
assert options.help()
assert options.remaining() == ['Some', 'Other', 'Args']     <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a <code>CliBuilder</code> instance as before with optional properties</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Parse parameters using the interface specification</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Interrogate options using the methods from the interface</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Parse a different set of parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Interrogate the remaining parameters</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When <code>parseFromSpec</code> is called, <code>CliBuilder</code> automatically creates an instance implementing the interface
and populates it. You simply call the interface methods to interrogate the option values.</p>
</div>
</div>
<div class="sect6">
<h7 id="_using_annotations_and_an_instance"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_an_instance"></a>Using Annotations and an instance</h7>
<div class="paragraph">
<p>Alternatively, perhaps you already have a domain class containing the option information.
You can simply annotate properties or setters from that class to enable <code>CliBuilder</code> to appropriately
populate your domain object. Each annotation both describes that option’s properties through the annotation
attributes and indicates the setter the <code>CliBuilder</code> will use to populate that option in your domain object.</p>
</div>
<div class="paragraph">
<p>Here is how such a specification can be defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class GreeterC {
    @Option(shortName='h', description='display usage')
    Boolean help                        <i class="conum" data-value="1"></i><b>(1)</b>

    private String audience
    @Option(shortName='a', description='greeting audience')
    void setAudience(String audience) { <i class="conum" data-value="2"></i><b>(2)</b>
        this.audience = audience
    }
    String getAudience() { audience }

    @Unparsed(description = "positional parameters")
    List remaining                      <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Indicate that a Boolean property is an option</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Indicate that a String property (with explicit setter) is an option</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify where any remaining args will be stored</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>And here is how you could use the specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import CliBuilder not shown
def cli = new CliBuilder(usage: 'groovy Greeter [option]') <i class="conum" data-value="1"></i><b>(1)</b>
def options = new GreeterC()                               <i class="conum" data-value="2"></i><b>(2)</b>
def argz = '--audience Groovologist foo'.split()
cli.parseFromInstance(options, argz)                       <i class="conum" data-value="3"></i><b>(3)</b>
assert options.audience == 'Groovologist'                  <i class="conum" data-value="4"></i><b>(4)</b>
assert options.remaining == ['foo']                        <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a <code>CliBuilder</code> instance as before with optional parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create an instance for <code>CliBuilder</code> to populate</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Parse arguments populating the supplied instance</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Interrogate the String option property</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Interrogate the remaining arguments property</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When <code>parseFromInstance</code> is called, <code>CliBuilder</code> automatically populates your instance.
You simply interrogate the instance properties (or whatever accessor methods you have provided
in your domain object) to access the option values.</p>
</div>
</div>
<div class="sect6">
<h7 id="_using_annotations_and_a_script"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using_annotations_and_a_script"></a>Using Annotations and a script</h7>
<div class="paragraph">
<p>Finally, there are two additional convenience annotation aliases specifically for scripts. They
simply combine the previously mentioned annotations and <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/transform/Field.html">groovy.transform.Field</a>.
The groovydoc for those annotations reveals the details: <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/cli/OptionField.html">groovy.cli.OptionField</a> and
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/cli/UnparsedField.html">groovy.cli.UnparsedField</a>.</p>
</div>
<div class="paragraph">
<p>Here is an example using those annotations in a self-contained script that would be called
with the same arguments as shown for the instance example earlier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import CliBuilder not shown
import groovy.cli.OptionField
import groovy.cli.UnparsedField

@OptionField String audience
@OptionField Boolean help
@UnparsedField List remaining
new CliBuilder().parseFromInstance(this, args)
assert audience == 'Groovologist'
assert remaining == ['foo']</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_options_with_arguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_options_with_arguments"></a>Options with arguments</h7>
<div class="paragraph">
<p>We saw in our initial example that some options act like flags, e.g. <code>Greeter -h</code> but
others take an argument, e.g. <code>Greeter --audience Groovologist</code>. The simplest cases
involve options which act like flags or have a single (potentially optional) argument.
Here is an example involving those cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import CliBuilder not shown
def cli = new CliBuilder()
cli.a(args: 0, 'a arg') <i class="conum" data-value="1"></i><b>(1)</b>
cli.b(args: 1, 'b arg') <i class="conum" data-value="2"></i><b>(2)</b>
cli.c(args: 1, optionalArg: true, 'c arg') <i class="conum" data-value="3"></i><b>(3)</b>
def options = cli.parse('-a -b foo -c bar baz'.split()) <i class="conum" data-value="4"></i><b>(4)</b>

assert options.a == true
assert options.b == 'foo'
assert options.c == 'bar'
assert options.arguments() == ['baz']

options = cli.parse('-a -c -b foo bar baz'.split()) <i class="conum" data-value="5"></i><b>(5)</b>

assert options.a == true
assert options.c == true
assert options.b == 'foo'
assert options.arguments() == ['bar', 'baz']</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>An option that is simply a flag - the default; setting args to 0 is allowed but not needed.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>An option with exactly one argument</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>An option with an optional argument; it acts like a flag if the option is left out</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>An example using this spec where an argument is supplied to the 'c' option</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>An example using this spec where no argument is supplied to the 'c' option; it’s just a flag</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note: when an option with an optional argument is encountered, it will (somewhat) greedily consume the
next parameter from the supplied commandline parameters. If however, the next parameter matches a known long or short
option (with leading single or double hyphens), that will take precedence, e.g. <code>-b</code> in the above example.</p>
</div>
<div class="paragraph">
<p>Option arguments may also be specified using the annotation style. Here is an interface option specification
illustrating such a definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface WithArgsI {
    @Option boolean a()
    @Option String b()
    @Option(optionalArg=true) String[] c()
    @Unparsed List remaining()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is how it is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()
def options = cli.parseFromSpec(WithArgsI, '-a -b foo -c bar baz'.split())
assert options.a()
assert options.b() == 'foo'
assert options.c() == ['bar']
assert options.remaining() == ['baz']

options = cli.parseFromSpec(WithArgsI, '-a -c -b foo bar baz'.split())
assert options.a()
assert options.c() == []
assert options.b() == 'foo'
assert options.remaining() == ['bar', 'baz']</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example makes use of an array-typed option specification. We cover this in more detail shortly when we discuss
multiple arguments.</p>
</div>
</div>
<div class="sect6">
<h7 id="_specifying_a_type"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_specifying_a_type"></a>Specifying a type</h7>
<div class="paragraph">
<p>Arguments on the commandline are by nature Strings (or arguably can be considered Booleans for flags) but can be
converted to richer types automatically by supplying additional typing information. For the
annotation-based argument definition style, these types are supplied using the field types for annotation
properties or return types of annotated methods (or the setter argument type for setter methods).
For the dynamic method style of argument definition a special 'type' property is supported
which allows you to specify a Class name.</p>
</div>
<div class="paragraph">
<p>When an explicit type is defined, the <code>args</code> named-parameter is assumed to be 1 (except for Boolean-typed
options where it is 0 by default). An explicit <code>args</code> parameter can still be provided if needed.
Here is an example using types with the dynamic api argument definition style:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def argz = '''-a John -b -d 21 -e 1980 -f 3.5 -g 3.14159
    -h cv.txt -i DOWN and some more'''.split()
def cli = new CliBuilder()
cli.a(type: String, 'a-arg')
cli.b(type: boolean, 'b-arg')
cli.c(type: Boolean, 'c-arg')
cli.d(type: int, 'd-arg')
cli.e(type: Long, 'e-arg')
cli.f(type: Float, 'f-arg')
cli.g(type: BigDecimal, 'g-arg')
cli.h(type: File, 'h-arg')
cli.i(type: RoundingMode, 'i-arg')
def options = cli.parse(argz)
assert options.a == 'John'
assert options.b
assert !options.c
assert options.d == 21
assert options.e == 1980L
assert options.f == 3.5f
assert options.g == 3.14159
assert options.h == new File('cv.txt')
assert options.i == RoundingMode.DOWN
assert options.arguments() == ['and', 'some', 'more']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Primitives, numeric types, files, enums and arrays thereof, are supported (they are converted using
<a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?org/codehaus/groovy/runtime/StringGroovyMethods.html#asType">StringGroovyMethods#asType(String, Class)</a>).</p>
</div>
</div>
<div class="sect6">
<h7 id="_custom_parsing_of_the_argument_string"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_custom_parsing_of_the_argument_string"></a>Custom parsing of the argument String</h7>
<div class="paragraph">
<p>If the supported types aren’t sufficient, you can supply a closure to handle the String to rich type conversion
for you. Here is a sample using the dynamic api style:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def argz = '''-a John -b Mary -d 2016-01-01 and some more'''.split()
def cli = new CliBuilder()
def lower = { it.toLowerCase() }
cli.a(convert: lower, 'a-arg')
cli.b(convert: { it.toUpperCase() }, 'b-arg')
cli.d(convert: { Date.parse('yyyy-MM-dd', it) }, 'd-arg')
def options = cli.parse(argz)
assert options.a == 'john'
assert options.b == 'MARY'
assert options.d.format('dd-MM-yyyy') == '01-01-2016'
assert options.arguments() == ['and', 'some', 'more']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use the annotation style by supplying the conversion closure as an annotation parameter.
Here is an example specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface WithConvertI {
    @Option(convert={ it.toLowerCase() }) String a()
    @Option(convert={ it.toUpperCase() }) String b()
    @Option(convert={ Date.parse("yyyy-MM-dd", it) }) Date d()
    @Unparsed List remaining()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And an example using that specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Date newYears = Date.parse("yyyy-MM-dd", "2016-01-01")
def argz = '''-a John -b Mary -d 2016-01-01 and some more'''.split()
def cli = new CliBuilder()
def options = cli.parseFromSpec(WithConvertI, argz)
assert options.a() == 'john'
assert options.b() == 'MARY'
assert options.d() == newYears
assert options.remaining() == ['and', 'some', 'more']</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_options_with_multiple_arguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_options_with_multiple_arguments"></a>Options with multiple arguments</h7>
<div class="paragraph">
<p>Multiple arguments are also supported using an <code>args</code> value greater than 1. There is a special named parameter,
<code>valueSeparator</code>, which can also be optionally used when processing multiple arguments. It allows some additional
flexibility in the syntax supported when supplying such argument lists on the commandline. For example,
supplying a value separator of ',' allows a comma-delimited list of values to be passed on the commandline.</p>
</div>
<div class="paragraph">
<p>The <code>args</code> value is normally an integer. It can be optionally supplied as a String. There are two special
String symbols: <code>+</code> and <code>*</code>.
The <code>*</code> value means 0 or more. The <code>+</code> value means 1 or more.
The <code>*</code> value is the same as using <code>+</code> and also setting the <code>optionalArg</code> value to true.</p>
</div>
<div class="paragraph">
<p>Accessing the multiple arguments follows a special convention. Simply add an 's' to the normal property
you would use to access the argument option and you will retrieve all the supplied arguments as a list.
So, for a short option named 'a', you access the first 'a' argument using <code>options.a</code> and the list of
all arguments using <code>options.as</code>. It’s fine to have a shortname or longname ending in 's' so long as you
don’t also have the singular variant without the 's'. So, if <code>name</code> is one of your options with multiple arguments
and <code>guess</code> is another with a single argument, there will be no confusion using <code>options.names</code> and <code>options.guess</code>.</p>
</div>
<div class="paragraph">
<p>Here is an excerpt highlighting the use of multiple arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// import CliBuilder not shown
def cli = new CliBuilder()
cli.a(args: 2, 'a-arg')
cli.b(args: '2', valueSeparator: ',', 'b-arg') <i class="conum" data-value="1"></i><b>(1)</b>
cli.c(args: '+', valueSeparator: ',', 'c-arg') <i class="conum" data-value="2"></i><b>(2)</b>

def options = cli.parse('-a 1 2 3 4'.split()) <i class="conum" data-value="3"></i><b>(3)</b>
assert options.a == '1' <i class="conum" data-value="4"></i><b>(4)</b>
assert options.as == ['1', '2'] <i class="conum" data-value="5"></i><b>(5)</b>
assert options.arguments() == ['3', '4']

options = cli.parse('-a1 -a2 3'.split()) <i class="conum" data-value="6"></i><b>(6)</b>
assert options.as == ['1', '2']
assert options.arguments() == ['3']

options = cli.parse(['-b1,2']) <i class="conum" data-value="7"></i><b>(7)</b>
assert options.bs == ['1', '2']

options = cli.parse(['-c', '1'])
assert options.cs == ['1']

options = cli.parse(['-c1'])
assert options.cs == ['1']

options = cli.parse(['-c1,2,3'])
assert options.cs == ['1', '2', '3']</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Args value supplied as a String and comma value separator specified</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>One or more arguments are allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Two commandline parameters will be supplied as the 'b' option’s list of arguments</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Access the 'a' option’s first argument</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Access the 'a' option’s list of arguments</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>An alternative syntax for specifying two arguments for the 'a' option</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The arguments to the 'b' option supplied as a comma-separated value</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As an alternative to accessing multiple arguments using the <em>plural name</em> approach, you can use an
array-based type for the option. In this case, all options will always be returned via the array
which is accessed via the normal singular name. We’ll see an example of this next when discussing
types.</p>
</div>
<div class="paragraph">
<p>Multiple arguments are also supported using the annotation style of option definition by using an
array type for the annotated class member (method or property) as this example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface ValSepI {
    @Option(numberOfArguments=2) String[] a()
    @Option(numberOfArgumentsString='2', valueSeparator=',') String[] b()
    @Option(numberOfArgumentsString='+', valueSeparator=',') String[] c()
    @Unparsed remaining()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()

def options = cli.parseFromSpec(ValSepI, '-a 1 2 3 4'.split())
assert options.a() == ['1', '2']
assert options.remaining() == ['3', '4']

options = cli.parseFromSpec(ValSepI, '-a1 -a2 3'.split())
assert options.a() == ['1', '2']
assert options.remaining() == ['3']

options = cli.parseFromSpec(ValSepI, ['-b1,2'] as String[])
assert options.b() == ['1', '2']

options = cli.parseFromSpec(ValSepI, ['-c', '1'] as String[])
assert options.c() == ['1']

options = cli.parseFromSpec(ValSepI, ['-c1'] as String[])
assert options.c() == ['1']

options = cli.parseFromSpec(ValSepI, ['-c1,2,3'] as String[])
assert options.c() == ['1', '2', '3']</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_types_and_multiple_arguments"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_types_and_multiple_arguments"></a>Types and multiple arguments</h7>
<div class="paragraph">
<p>Here is an example using types and multiple arguments with the dynamic api argument definition style:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def argz = '''-j 3 4 5 -k1.5,2.5,3.5 and some more'''.split()
def cli = new CliBuilder()
cli.j(args: 3, type: int[], 'j-arg')
cli.k(args: '+', valueSeparator: ',', type: BigDecimal[], 'k-arg')
def options = cli.parse(argz)
assert options.js == [3, 4, 5] <i class="conum" data-value="1"></i><b>(1)</b>
assert options.j == [3, 4, 5]  <i class="conum" data-value="1"></i><b>(1)</b>
assert options.k == [1.5, 2.5, 3.5]
assert options.arguments() == ['and', 'some', 'more']</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>For an array type, the trailing 's' can be used but isn’t needed</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect6">
<h7 id="_setting_a_default_value"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_setting_a_default_value"></a>Setting a default value</h7>
<div class="paragraph">
<p>Groovy makes it easy using the Elvis operator to provide a default value at the point of usage of some variable,
e.g. <code>String x = someVariable ?: 'some default'</code>. But sometimes you wish to make such a default part of the
options specification to minimise the interrogators work in later stages. <code>CliBuilder</code> supports the <code>defaultValue</code>
property to cater for this scenario.</p>
</div>
<div class="paragraph">
<p>Here is how you could use it using the dynamic api style:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()
cli.f longOpt: 'from', type: String, args: 1, defaultValue: 'one', 'f option'
cli.t longOpt: 'to', type: int, defaultValue: '35', 't option'

def options = cli.parse('-f two'.split())
assert options.hasOption('f')
assert options.f == 'two'
assert !options.hasOption('t')
assert options.t == 35

options = cli.parse('-t 45'.split())
assert !options.hasOption('from')
assert options.from == 'one'
assert options.hasOption('to')
assert options.to == 45</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, you might want such a specification using the annotation style. Here is an example using an interface
specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface WithDefaultValueI {
    @Option(shortName='f', defaultValue='one') String from()
    @Option(shortName='t', defaultValue='35') int to()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which would be used like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()

def options = cli.parseFromSpec(WithDefaultValueI, '-f two'.split())
assert options.from() == 'two'
assert options.to() == 35

options = cli.parseFromSpec(WithDefaultValueI, '-t 45'.split())
assert options.from() == 'one'
assert options.to() == 45</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>defaultValue</code> annotation attribute when using annotations with an instance,
though it’s probably just as easy to provide an initial value for the property (or backing field).</p>
</div>
</div>
<div class="sect6">
<h7 id="_use_with_code_typechecked_code"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_use_with_code_typechecked_code"></a>Use with <code>TypeChecked</code></h7>
<div class="paragraph">
<p>The dynamic api style of using <code>CliBuilder</code> is inherently dynamic but you have a few options
should you want to make use of Groovy’s static type checking capabilities. Firstly, consider using the
annotation style, for example, here is an interface option specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface TypeCheckedI{
    @Option String name()
    @Option int age()
    @Unparsed List remaining()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And it can be used in combination with <code>@TypeChecked</code> as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@TypeChecked
void testTypeCheckedInterface() {
    def argz = "--name John --age 21 and some more".split()
    def cli = new CliBuilder()
    def options = cli.parseFromSpec(TypeCheckedI, argz)
    String n = options.name()
    int a = options.age()
    assert n == 'John' &amp;&amp; a == 21
    assert options.remaining() == ['and', 'some', 'more']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Secondly, there is a feature of the dynamic api style which offers some support. The definition statements
are inherently dynamic but actually return a value which we have ignored in earlier examples.
The returned value is in fact a <code>TypedOption&lt;Type&gt;</code> and special <code>getAt</code> support allows the options
to be interrogated using the typed option, e.g. <code>options[savedTypeOption]</code>. So, if you have statements
similar to these in a non type checked part of your code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()
TypedOption&lt;Integer&gt; age = cli.a(longOpt: 'age', type: Integer, 'some age option')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, the following statements can be in a separate part of your code which is type checked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def args = '--age 21'.split()
def options = cli.parse(args)
int a = options[age]
assert a == 21</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, there is one additional convenience method offered by <code>CliBuilder</code> to even allow the
definition part to be type checked. It is a slightly more verbose method call. Instead of using
the short name (the <em>opt</em> name) in the method call, you use a fixed name of <code>option</code> and
supply the <code>opt</code> value as a property. You must also specify the type directly as shown in
the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.cli.TypedOption
import groovy.transform.TypeChecked

@TypeChecked
void testTypeChecked() {
    def cli = new CliBuilder()
    TypedOption&lt;String&gt; name = cli.option(String, opt: 'n', longOpt: 'name', 'name option')
    TypedOption&lt;Integer&gt; age = cli.option(Integer, longOpt: 'age', 'age option')
    def argz = "--name John --age 21 and some more".split()
    def options = cli.parse(argz)
    String n = options[name]
    int a = options[age]
    assert n == 'John' &amp;&amp; a == 21
    assert options.arguments() == ['and', 'some', 'more']
}</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_advanced_cli_usage"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_cli_usage"></a>Advanced CLI Usage</h7>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>NOTE</strong> Advanced CLI features</p>
</div>
<div class="paragraph">
<p><code>CliBuilder</code> can be thought of as a Groovy friendly wrapper on top of either
<a href="https://github.com/remkop/picocli">picocli</a> or <a href="https://commons.apache.org/proper/commons-cli/">Apache Commons CLI</a>.
If there is a feature not provided by <code>CliBuilder</code> that you know is supported in the underlying
library, the current <code>CliBuilder</code> implementation (and various Groovy language features) make it easy for you
to call the underlying library methods directly. Doing so is a pragmatic way to leverage the Groovy-friendly
syntax offered by <code>CliBuilder</code> and yet still access some of the underlying library’s advanced features.
A word of caution however; future versions of <code>CliBuilder</code> could potentially use another underlying library
and in that event, some porting work may be required for your Groovy classes and/or scripts.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect7">
<h8 id="_apache_commons_cli"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_apache_commons_cli"></a>Apache Commons CLI</h8>
<div class="paragraph">
<p>As an example, here is some code for making use of Apache Commons CLI’s grouping mechanism:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.apache.commons.cli.*

def cli = new CliBuilder()
cli.f longOpt: 'from', 'f option'
cli.u longOpt: 'until', 'u option'
def optionGroup = new OptionGroup()
optionGroup.with {
  addOption cli.option('o', [longOpt: 'output'], 'o option')
  addOption cli.option('d', [longOpt: 'directory'], 'd option')
}
cli.options.addOptionGroup optionGroup
assert !cli.parse('-d -o'.split()) <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The parse will fail since only one option from a group can be used at a time.</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect7">
<h8 id="_picocli"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_picocli"></a>Picocli</h8>
<div class="paragraph">
<p>Below are some features available in the picocli version of <code>CliBuilder</code>.</p>
</div>
<div class="paragraph">
<p><strong>New property: errorWriter</strong></p>
</div>
<div class="paragraph">
<p>When users of your application give invalid command line arguments,
CliBuilder writes an error message and the usage help message to the <code>stderr</code> output stream.
It doesn’t use the <code>stdout</code> stream to prevent the error message from being parsed when your program’s
output is used as input for another process.
You can customize the destination by setting the <code>errorWriter</code> to a different value.</p>
</div>
<div class="paragraph">
<p>On the other hand, <code>CliBuilder.usage()</code> prints the usage help message to the <code>stdout</code> stream.
This way, when users request help (e.g. with a <code>--help</code> parameter),
they can pipe the output to a utility like <code>less</code> or <code>grep</code>.</p>
</div>
<div class="paragraph">
<p>You can specify different writers for testing.
<em>Be aware that for backwards compatibility, setting the <code>writer</code> property to a different value
will set <strong>both</strong> the <code>writer</code> and the <code>errorWriter</code> to the specified writer.</em></p>
</div>
<div class="paragraph">
<p><strong>ANSI colors</strong></p>
</div>
<div class="paragraph">
<p>The picocli version of CliBuilder renders the usage help message in ANSI colors on supported platforms automatically.
If desired you can <a href="http://picocli.info/#_usage_help_with_styles_and_colors">customize</a> this.
(An example follows below.)</p>
</div>
<div class="paragraph">
<p><strong>New property: name</strong></p>
</div>
<div class="paragraph">
<p>As before, you can set the synopsis of the usage help message with the <code>usage</code> property.
You may be interested in a small improvement:
if you only set the command <code>name</code>, a synopsis will be generated automatically,
with repeating elements followed by <code>…​</code> and optional elements surrounded with <code>[</code> and <code>]</code>.
(An example follows below.)</p>
</div>
<div class="paragraph">
<p><strong>New property: usageMessage</strong></p>
</div>
<div class="paragraph">
<p>This property exposes a <code>UsageMessageSpec</code> object from the underlying picocli library,
which gives fine-grained control over various sections of the usage help message. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def cli = new CliBuilder()
cli.name = "myapp"
cli.usageMessage.with {
    headerHeading("@|bold,underline Header heading:|@%n")
    header("Header 1", "Header 2")                     // before the synopsis
    synopsisHeading("%n@|bold,underline Usage:|@ ")
    descriptionHeading("%n@|bold,underline Description heading:|@%n")
    description("Description 1", "Description 2")      // after the synopsis
    optionListHeading("%n@|bold,underline Options heading:|@%n")
    footerHeading("%n@|bold,underline Footer heading:|@%n")
    footer("Footer 1", "Footer 2")
}
cli.a('option a description')
cli.b('option b description')
cli.c(args: '*', 'option c description')
cli.usage()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gives this output:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Groovy Language Documentation_files/xusageMessageSpec.png.pagespeed.ic.9UOFRg0w44.webp" alt="usageMessageSpec">
</div>
</div>
<div class="paragraph">
<p><strong>New property: parser</strong></p>
</div>
<div class="paragraph">
<p>The <code>parser</code> property gives access to the picocli <code>ParserSpec</code> object that can be used to customize the parser behavior.
See the <a href="http://picocli.info/apidocs/picocli/CommandLine.Model.ParserSpec.html">documentation</a> for details.</p>
</div>
<div class="paragraph">
<p><strong>Map options</strong></p>
</div>
<div class="paragraph">
<p>Finally, if your application has options that are key-value pairs, you may be interested in picocli’s support for maps. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.util.concurrent.TimeUnit
import static java.util.concurrent.TimeUnit.DAYS
import static java.util.concurrent.TimeUnit.HOURS

def cli = new CliBuilder()
cli.D(args: 2,   valueSeparator: '=', 'the old way')                          <i class="conum" data-value="1"></i><b>(1)</b>
cli.X(type: Map, 'the new way')                                               <i class="conum" data-value="2"></i><b>(2)</b>
cli.Z(type: Map, auxiliaryTypes: [TimeUnit, Integer].toArray(), 'typed map')  <i class="conum" data-value="3"></i><b>(3)</b>

def options = cli.parse('-Da=b -Dc=d -Xx=y -Xi=j -ZDAYS=2 -ZHOURS=23'.split())<i class="conum" data-value="4"></i><b>(4)</b>
assert options.Ds == ['a', 'b', 'c', 'd']                                     <i class="conum" data-value="5"></i><b>(5)</b>
assert options.Xs == [ 'x':'y', 'i':'j' ]                                     <i class="conum" data-value="6"></i><b>(6)</b>
assert options.Zs == [ (DAYS as TimeUnit):2, (HOURS as TimeUnit):23 ]         <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Previously, <code>key=value</code> pairs were split up into parts and added to a list</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Picocli map support: simply specify <code>Map</code> as the type of the option</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can even specify the type of the map elements</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>To compare, let’s specify two key-value pairs for each option</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Previously, all key-value pairs end up in a list and it is up to the application to work with this list</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Picocli returns the key-value pairs as a <code>Map</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Both keys and values of the map can be strongly typed</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_objectgraphbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_objectgraphbuilder"></a>ObjectGraphBuilder</h6>
<div class="paragraph">
<p><code>ObjectGraphBuilder</code> is a builder for an arbitrary graph of beans that
follow the JavaBean convention. It is in particular useful for creating test data.</p>
</div>
<div class="paragraph">
<p>Let’s start with a list of classes that belong to your domain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">package com.acme

class Company {
    String name
    Address address
    List employees = []
}

class Address {
    String line1
    String line2
    int zip
    String state
}

class Employee {
    String name
    int employeeId
    Address address
    Company company
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then using <code>ObjectGraphBuilder</code> building a <code>Company</code> with three employees is as
easy as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def builder = new ObjectGraphBuilder()                          <i class="conum" data-value="1"></i><b>(1)</b>
builder.classLoader = this.class.classLoader                    <i class="conum" data-value="2"></i><b>(2)</b>
builder.classNameResolver = "com.acme"                          <i class="conum" data-value="3"></i><b>(3)</b>

def acme = builder.company(name: 'ACME') {                      <i class="conum" data-value="4"></i><b>(4)</b>
    3.times {
        employee(id: it.toString(), name: "Drone $it") {        <i class="conum" data-value="5"></i><b>(5)</b>
            address(line1:"Post street")                        <i class="conum" data-value="6"></i><b>(6)</b>
        }
    }
}

assert acme != null
assert acme instanceof Company
assert acme.name == 'ACME'
assert acme.employees.size() == 3
def employee = acme.employees[0]
assert employee instanceof Employee
assert employee.name == 'Drone 0'
assert employee.address instanceof Address</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>creates a new object graph builder</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>sets the classloader where the classes will be resolved</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>sets the base package name for classes to be resolved</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>creates a <code>Company</code> instance</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>with 3 <code>Employee</code> instances</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>each of them having a distinct <code>Address</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Behind the scenes, the object graph builder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>will try to match a node name into a <code>Class</code>, using a default <code>ClassNameResolver</code> strategy that requires a package name</p>
</li>
<li>
<p>then will create an instance of the appropriate class using a default <code>NewInstanceResolver</code> strategy that calls a no-arg constructor</p>
</li>
<li>
<p>resolves the parent/child relationship for nested nodes, involving two other strategies:</p>
<div class="ulist">
<ul>
<li>
<p><code>RelationNameResolver</code> will yield the name of the child property in the parent, and the name of the parent property
in the child (if any, in this case, <code>Employee</code> has a parent property aptly named <code>company</code>)</p>
</li>
<li>
<p><code>ChildPropertySetter</code> will insert the child into the parent taking into account if the child belongs to a <code>Collection</code>
or not (in this case <code>employees</code> should be a list of <code>Employee</code> instances in <code>Company</code>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>All 4 strategies have a default implementation that work as expected if
the code follows the usual conventions for writing JavaBeans. In case any of your beans or objects do not follow the convention
you may plug your own implementation of each strategy. For example imagine that you need to build a class which is
immutable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Immutable
class Person {
    String name
    int age
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then if you try to create a <code>Person</code> with the builder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def person = builder.person(name:'Jon', age:17)</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will fail at runtime with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Cannot set readonly property: name for class: com.acme.Person</pre>
</div>
</div>
<div class="paragraph">
<p>Fixing this can be done by changing the new instance strategy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">builder.newInstanceResolver = { Class klazz, Map attributes -&gt;
    if (klazz.getConstructor(Map)) {
        def o = klazz.newInstance(attributes)
        attributes.clear()
        return o
    }
    klazz.newInstance()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ObjectGraphBuilder</code> supports ids per node, meaning
that you can store a reference to a node in the builder. This is
useful when multiple objects reference the same instance. Because a
property named <code>id</code> may be of business meaning in some domain models
<code>ObjectGraphBuilder</code> has a strategy named <code>IdentifierResolver</code> that you
may configure to change the default name value. The same may
happen with the property used for referencing a previously saved
instance, a strategy named <code>ReferenceResolver</code> will yield the
appropriate value (default is `refId'):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def company = builder.company(name: 'ACME') {
    address(id: 'a1', line1: '123 Groovy Rd', zip: 12345, state: 'JV')          <i class="conum" data-value="1"></i><b>(1)</b>
    employee(name: 'Duke', employeeId: 1, address: a1)                          <i class="conum" data-value="2"></i><b>(2)</b>
    employee(name: 'John', employeeId: 2 ){
      address( refId: 'a1' )                                                    <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>an address can be created with an <code>id</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>an employee can reference the address directly with its id</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>or use the <code>refId</code> attribute corresponding to the <code>id</code> of the corresponding address</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Its worth mentioning that you cannot modify the properties of a
referenced bean.</p>
</div>
</div>
<div class="sect5">
<h6 id="_jmxbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder"></a>JmxBuilder</h6>
<div class="paragraph">
<p>See <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#jmx_jmxbuilder">Working with JMX - JmxBuilder</a> for details.</p>
</div>
</div>
<div class="sect5">
<h6 id="_filetreebuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_filetreebuilder"></a>FileTreeBuilder</h6>
<div class="paragraph">
<p><a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/util/FileTreeBuilder.html">FileTreeBuilder</a> is a builder for generating a file directory structure from a specification. For example, to create the following tree:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> src/
  |--- main
  |     |--- groovy
  |            |--- Foo.groovy
  |--- test
        |--- groovy
               |--- FooTest.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>You can use a <code>FileTreeBuilder</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">tmpDir = File.createTempDir()
def fileTreeBuilder = new FileTreeBuilder(tmpDir)
fileTreeBuilder.dir('src') {
    dir('main') {
       dir('groovy') {
          file('Foo.groovy', 'println "Hello"')
       }
    }
    dir('test') {
       dir('groovy') {
          file('FooTest.groovy', 'class FooTest extends GroovyTestCase {}')
       }
    }
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check that everything worked as expected we use the following `assert`s:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert new File(tmpDir, '/src/main/groovy/Foo.groovy').text == 'println "Hello"'
assert new File(tmpDir, '/src/test/groovy/FooTest.groovy').text == 'class FooTest extends GroovyTestCase {}'</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FileTreeBuilder</code> also supports a shorthand syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">tmpDir = File.createTempDir()
def fileTreeBuilder = new FileTreeBuilder(tmpDir)
fileTreeBuilder.src {
    main {
       groovy {
          'Foo.groovy'('println "Hello"')
       }
    }
    test {
       groovy {
          'FooTest.groovy'('class FooTest extends GroovyTestCase {}')
       }
    }
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces the same directory structure as above, as shown by these `assert`s:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert new File(tmpDir, '/src/main/groovy/Foo.groovy').text == 'println "Hello"'
assert new File(tmpDir, '/src/test/groovy/FooTest.groovy').text == 'class FooTest extends GroovyTestCase {}'</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_jmx"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_working_with_jmx"></a>3.16. Working with JMX</h3>
<div class="sect3">
<h4 id="_introduction_6"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_introduction_6"></a>3.16.1. Introduction</h4>
<div class="paragraph">
<p>Given that Groovy sits directly on top of Java, Groovy can leverage the tremendous amount of work already done for <a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html">JMX</a> with Java. In addition, Groovy provides a <code>GroovyMBean</code> class which makes an MBean look like a normal Groovy object. This simplifies Groovy code for interacting with <em>MBeans</em>. For example, the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">println server.getAttribute(beanName, 'Age')
server.setAttribute(beanName, new Attribute('Name', 'New name'))
Object[] params = [5, 20]
String[] signature = [Integer.TYPE, Integer.TYPE]
println server.invoke(beanName, 'add', params, signature)</code></pre>
</div>
</div>
<div class="paragraph">
<p>can be simplified to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def mbean = new GroovyMBean(server, beanName)
println mbean.Age
mbean.Name = 'New name'
println mbean.add(5, 20)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The remainder of this page shows you how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Monitor the JVM using MXBeans</p>
</li>
<li>
<p>Monitor Apache Tomcat and display statistics</p>
</li>
<li>
<p>Monitor Oracle OC4J and display information</p>
</li>
<li>
<p>Monitor BEA WebLogic and display information</p>
</li>
<li>
<p>Leverage Spring’s MBean annotation support to export your Groovy beans as MBeans</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_the_jvm"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_monitoring_the_jvm"></a>3.16.2. Monitoring the JVM</h4>
<div class="paragraph">
<p>MBeans are not accessed directly by an application but are managed by a repository called an <em>MBean server</em>. Java includes a special MBean server called the <em>platform MBean server</em>, which is built into the JVM. Platform MBeans are registered in this server using unique names.</p>
</div>
<div class="paragraph">
<p>You can monitor the JVM through its platform MBeans with the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.lang.management.*

def os = ManagementFactory.operatingSystemMXBean
println """OPERATING SYSTEM:
\tarchitecture = $os.arch
\tname = $os.name
\tversion = $os.version
\tprocessors = $os.availableProcessors
"""

def rt = ManagementFactory.runtimeMXBean
println """RUNTIME:
\tname = $rt.name
\tspec name = $rt.specName
\tvendor = $rt.specVendor
\tspec version = $rt.specVersion
\tmanagement spec version = $rt.managementSpecVersion
"""

def cl = ManagementFactory.classLoadingMXBean
println """CLASS LOADING SYSTEM:
\tisVerbose = ${cl.isVerbose()}
\tloadedClassCount = $cl.loadedClassCount
\ttotalLoadedClassCount = $cl.totalLoadedClassCount
\tunloadedClassCount = $cl.unloadedClassCount
"""

def comp = ManagementFactory.compilationMXBean
println """COMPILATION:
\ttotalCompilationTime = $comp.totalCompilationTime
"""

def mem = ManagementFactory.memoryMXBean
def heapUsage = mem.heapMemoryUsage
def nonHeapUsage = mem.nonHeapMemoryUsage
println """MEMORY:
HEAP STORAGE:
\tcommitted = $heapUsage.committed
\tinit = $heapUsage.init
\tmax = $heapUsage.max
\tused = $heapUsage.used
NON-HEAP STORAGE:
\tcommitted = $nonHeapUsage.committed
\tinit = $nonHeapUsage.init
\tmax = $nonHeapUsage.max
\tused = $nonHeapUsage.used
"""

ManagementFactory.memoryPoolMXBeans.each { mp -&gt;
    println "\tname: " + mp.name
    String[] mmnames = mp.memoryManagerNames
    mmnames.each{ mmname -&gt;
        println "\t\tManager Name: $mmname"
    }
    println "\t\tmtype = $mp.type"
    println "\t\tUsage threshold supported = " + mp.isUsageThresholdSupported()
}
println()

def td = ManagementFactory.threadMXBean
println "THREADS:"
td.allThreadIds.each { tid -&gt;
    println "\tThread name = ${td.getThreadInfo(tid).threadName}"
}
println()

println "GARBAGE COLLECTION:"
ManagementFactory.garbageCollectorMXBeans.each { gc -&gt;
    println "\tname = $gc.name"
    println "\t\tcollection count = $gc.collectionCount"
    println "\t\tcollection time = $gc.collectionTime"
    String[] mpoolNames = gc.memoryPoolNames
    mpoolNames.each { mpoolName -&gt;
        println "\t\tmpool name = $mpoolName"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When run, you will see something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OPERATING SYSTEM:
	architecture = x86
	name = Windows XP
	version = 5.1
	processors = 2

RUNTIME:
	name = 620@LYREBIRD
	spec name = Java Virtual Machine Specification
	vendor = Sun Microsystems Inc.
	spec version = 1.0
	management spec version = 1.0

CLASS LOADING SYSTEM:
	isVerbose = false
	loadedClassCount = 919
	totalLoadedClassCount = 919
	unloadedClassCount = 0

COMPILATION:
	totalCompilationTime = 91

MEMORY:
HEAP STORAGE:
	committed = 3108864
	init = 0
	max = 66650112
	used = 1994728
NON-HEAP STORAGE:
	committed = 9240576
	init = 8585216
	max = 100663296
	used = 5897880

	name: Code Cache
		Manager Name: CodeCacheManager
		mtype = Non-heap memory
		Usage threshold supported = true
	name: Eden Space
		Manager Name: MarkSweepCompact
		Manager Name: Copy
		mtype = Heap memory
		Usage threshold supported = false
	name: Survivor Space
		Manager Name: MarkSweepCompact
		Manager Name: Copy
		mtype = Heap memory
		Usage threshold supported = false
	name: Tenured Gen
		Manager Name: MarkSweepCompact
		mtype = Heap memory
		Usage threshold supported = true
	name: Perm Gen
		Manager Name: MarkSweepCompact
		mtype = Non-heap memory
		Usage threshold supported = true

THREADS:
	Thread name = Monitor Ctrl-Break
	Thread name = Signal Dispatcher
	Thread name = Finalizer
	Thread name = Reference Handler
	Thread name = main

GARBAGE COLLECTION:
	name = Copy
		collection count = 60
		collection time = 141
		mpool name = Eden Space
		mpool name = Survivor Space
	name = MarkSweepCompact
		collection count = 0
		collection time = 0
		mpool name = Eden Space
		mpool name = Survivor Space
		mpool name = Tenured Gen
		mpool name = Perm Gen</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_tomcat"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_monitoring_tomcat"></a>3.16.3. Monitoring Tomcat</h4>
<div class="paragraph">
<p>First start up <a href="http://tomcat.apache.org/">Tomcat</a> with JMX monitoring enabled by setting the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">set JAVA_OPTS=-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9004\
 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can do this in your startup script and may choose any available port, we used 9004.</p>
</div>
<div class="paragraph">
<p>The following code uses JMX to discover the available MBeans in the running Tomcat, determine which are web modules, extract the processing time for each web module and displays the result in a graph using JFreeChart:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import groovy.swing.SwingBuilder

import javax.management.ObjectName
import javax.management.remote.JMXConnectorFactory as JmxFactory
import javax.management.remote.JMXServiceURL as JmxUrl
import javax.swing.WindowConstants as WC

import org.jfree.chart.ChartFactory
import org.jfree.data.category.DefaultCategoryDataset as Dataset
import org.jfree.chart.plot.PlotOrientation as Orientation

def serverUrl = 'service:jmx:rmi:///jndi/rmi://localhost:9004/jmxrmi'
def server = JmxFactory.connect(new JmxUrl(serverUrl)).MBeanServerConnection
def serverInfo = new GroovyMBean(server, 'Catalina:type=Server').serverInfo
println "Connected to: $serverInfo"

def query = new ObjectName('Catalina:*')
String[] allNames = server.queryNames(query, null)
def modules = allNames.findAll { name -&gt;
    name.contains('j2eeType=WebModule')
}.collect{ new GroovyMBean(server, it) }

println "Found ${modules.size()} web modules. Processing ..."
def dataset = new Dataset()

modules.each { m -&gt;
    println m.name()
    dataset.addValue m.processingTime, 0, m.path
}

def labels = ['Time per Module', 'Module', 'Time']
def options = [false, true, true]
def chart = ChartFactory.createBarChart(*labels, dataset,
                Orientation.VERTICAL, *options)
def swing = new SwingBuilder()
def frame = swing.frame(title:'Catalina Module Processing Time', defaultCloseOperation:WC.EXIT_ON_CLOSE) {
    panel(id:'canvas') { rigidArea(width:600, height:250) }
}
frame.pack()
frame.show()
chart.draw(swing.canvas.graphics, swing.canvas.bounds)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When run, we will see a trace of progress being made:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Connected to: Apache Tomcat/6.0.13
Found 5 web modules. Processing ...
Catalina:j2eeType=WebModule,name=//localhost/,J2EEApplication=none,J2EEServer=none
Catalina:j2eeType=WebModule,name=//localhost/host-manager,J2EEApplication=none,J2EEServer=none
Catalina:j2eeType=WebModule,name=//localhost/docs,J2EEApplication=none,J2EEServer=none
Catalina:j2eeType=WebModule,name=//localhost/examples,J2EEApplication=none,J2EEServer=none
Catalina:j2eeType=WebModule,name=//localhost/manager,J2EEApplication=none,J2EEServer=none</pre>
</div>
</div>
<div class="paragraph">
<p>The output will look like this:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/webp;base64,UklGRuYHAABXRUJQVlA4TNkHAAAvacJCAL+joG0j5/8myOeP41bvMSho24bpevkjnoK2USC4VyT+dTD/ity2bZBTl8p3HMz4JxYiEOHeIgIRiEAEFnUJPqjSf8SCGBat0gBrhaWGbvCwxoEARLCoOVuzS2j1lcZeDizu//+obfOB3zG0I5D30vQE7Zkd7dGwFUTqrUpoV9x92vz/1u/udxIngb8eRPRfEttGkiTJPYWtPu3IuWcTgfhSwBRyqZUP8BIBBCjLG5Jv4TOJj3wARIdfSf4mGAQqS7if5EC4uaH2SY33agBeLwDg/VAkOnFeeRxpm7JJHo21q87xY0+X23fUnTINlgBsRB56OLuvbNrqvp7odKpbdc+ekWT5jrq7487nGdUQr1Fq75NqtUZPDAD6FQBMkUc9AIAfTkiSHsZiuwZLACIY9nA2gxzzmNaSnN3S3N0/J/djAKL+MMRrkKp80sWlsfPKzgF4UfsXECengBnOAfNeLtP2KDBqsARgwnnn4SyPSU4ipyWZB1L2K83dPJB2xvxhiNcglclkLi4Nnn06AHbpAIpMAv+lDTz0crnPfaDHYAnAO88cdvgWbylbS3Ib+MhdoJt87PLsA+94DVOLi4vapbFDw+MUdEUNLgFlsATA8c7xBP/GE5dxl9EwGQF85PMRr2Fqbm5uMdNkEHa96ymDS8AyWAJgyLGAAczrbqzL4iNew1Q63XzQBzhGlx9YBXoNlsz8BWCbhpNe8uHFyZ77PdrhEQDveI1Vg00I88CvTt5w9QtnDJgwWDLjKFiO7mYOeEmPu4w6Kc1NJ7DqpAH4iPeZjucvR6KvvVy2XVxfNVgywxEMuxycJDR3D8/J4w4Acc3NJFwBfMT7jIcnU73hyFPvn2jf3FP339BgyQe/4VcP49M9qmvunCRf31N3y/p79HPLGnwHwEe8z1quWgDYHOprfSzLEjOaR303j1/+Fg8FiZCAaEcGaenPm2BJOvgnSPr8oaU//+kkASDMAwCQLH6+r79T/7bOrQmSksWqo1FMkalHkb43kgV5gd13TCYqrPbp//rljxOG2GxeHzBuhDrWi1X3oyz5OgyVSCZ2We2XLyI2yUqfelQVHeqir9Zo+c+laPnPVwX7TPUdptm4SmbFa5+pvsO0P8ONYenaZ+raYRp16MSka6eMa4dpmKSSr32mJC1GJOzg2mE6kGWuX7pw7TD9M4q2nOhQF33/hpb/XHafaav/faY7d1SiKGN9RZkos9gpZn1Fedaj9xWVsN1/qYLeV1S+evDVRvNC1leU5f6PYtZXtEd7oS85fUVb+nMy2Rnmg/cixlCWFjO3RAxLO1Mydqh+otovY1ePtyM+evTN5hMVFABAxIjktfuKGN2Or91/Wp9Heer2WPrRNu/+c/V5lKduj9kHpqtXHVDv8yhP3R47ir72L4RJKnnq9thh+yKiPT4iTYe18TMfaH0eBarbo6XdAgOuPo/fQHZ7tNwnX5kdvvEELn337Gq2IEXKprkkaZjmUsAopihh3R5pmOZSuA6CNs0lBW2aS36HZ5rLlv9cmpb+iNmMjSTFbMZGkoI2YyMFbcZGCtqMjRS0GRv5lcOMjS3/CRot/XkTMIVuAAWwjM0k/wRqqW4GglXGL4gYZmwULgwzNsoWVz5jY9BoPLvympzdf4YZG6XrYJixUbgwzNgoXBhmbJQc6qFvdmj5z5XQ8h+t26OE4dHtUcbQuj0KGd7dHlfWVxZ9X/9nwHRt8q00o/kW60lEO0iK6onW7VHIcHV7lBT5+D2eeOnrZqp3CKOVuesVmiSCnOmyQrASNkEsT/tYaFyv0CQR5EyXFYKVsAlipESMWQWy2NlVZF5FRgGQJGbUbymrQOa6rN9IDHl5yMRegdzu6i6TeFLv0JnYS7hCs9TTV9GiMxAaKemVSW9ybdJVPI9aIhXPkK7i1T/qSOkqF6mR48QcolxQZGKnnGRyzHZ/isH2odopKNKuHkZJeHjQLILse/fuLomjeodOVMpwhWbyr7e9WnQP1TuTVpnze8sDruJ51RLb5V7SVby6R3VizlUuUiOn9JyEdqZIxf3bsQpBgPQ4yz9LGD0o3SigSAQpNMMk9egu1T2TXpnt8K6peCANxat71NLzK12kRs7ksns9EuVyguRUO2GTnosWLf1t9JAsa5//3pIadQ6dLO94hE6U3/fq0YOgyWVXZZyBn/q14hnYKd8iXcWre9TJ5StbpEZPskqC1L9FK3DcUnk+tEjPRUupSaOHfOylIotd1qxGnUMX2l64Q7PU3e6KHgQlq67KjG1ydVwrnjcj7UUSLmv1jpqsXtkiNXrqpNjuThdveOFaL1JzRTbZmeENL+vaLZKk/W2iVT93l0gu3/P9W1yIEkjYtLshY7zMMf8C5FG/6j++eKbIGvTn05/pZFANnAgR69OcWQY5usb1NDm26UwaGKsyOylEfLzPB29BtjmsxckOh6cG2kl2ChHsOIy63pld//2SBgAgLEU8Sz0lyLhDO0Z22jzTn6+mP1OcTYSaP/5o/5UgUznt6sllToNUBfdrjO1z64EU8Rplej3sZLBzDWRBxVZ1jgfU7Q9f3v420VKblv+E3KrtVbJLCxNpiZIZ5+BNYeP3hTmRkpH/ne5WchtLizKlTMWbkHP0vlLIZmRKprfQ/2tHu28qUqW92gVeF+f0YE+q5PHm8QCnJlUKiZpCIQA=" alt="catalina"></span></p>
</div>
<div class="paragraph">
<p>Note: if you get errors running this script, see the <strong>Troubleshooting</strong> section below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_oc4j_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_oc4j_example"></a>3.16.4. OC4J Example</h4>
<div class="paragraph">
<p>Here is a script to access OC4J and print out some information about the server, its runtime and (as an example) the configured JMS destinations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import javax.management.remote.*
import oracle.oc4j.admin.jmx.remote.api.JMXConnectorConstant

def serverUrl = new JMXServiceURL('service:jmx:rmi://localhost:23791')
def serverPath = 'oc4j:j2eeType=J2EEServer,name=standalone'
def jvmPath = 'oc4j:j2eeType=JVM,name=single,J2EEServer=standalone'
def provider = 'oracle.oc4j.admin.jmx.remote'
def credentials = [
    (JMXConnectorConstant.CREDENTIALS_LOGIN_KEY): 'oc4jadmin',
    (JMXConnectorConstant.CREDENTIALS_PASSWORD_KEY): 'admin'
]
def env = [
    (JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES): provider,
    (JMXConnector.CREDENTIALS): credentials
]
def server = JmxFactory.connect(serverUrl, env).MBeanServerConnection
def serverInfo = new GroovyMBean(server, serverPath)
def jvmInfo = new GroovyMBean(server, jvmPath)
println """Connected to $serverInfo.node. \
Server started ${new Date(serverInfo.startTime)}.
OC4J version:  $serverInfo.serverVersion from $serverInfo.serverVendor
JVM version:   $jvmInfo.javaVersion from $jvmInfo.javaVendor
Memory usage:  $jvmInfo.freeMemory bytes free, \
$jvmInfo.totalMemory bytes total
"""

def query = new javax.management.ObjectName('oc4j:*')
String[] allNames = server.queryNames(query, null)
def dests = allNames.findAll { name -&gt;
    name.contains('j2eeType=JMSDestinationResource')
}.collect { new GroovyMBean(server, it) }

println "Found ${dests.size()} JMS destinations. Listing ..."
dests.each { d -&gt; println "$d.name: $d.location" }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result of running this script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Connected to LYREBIRD. Server started Thu May 31 21:04:54 EST 2007.
OC4J version:  11.1.1.0.0 from Oracle Corp.
JVM version:   1.6.0_01 from Sun Microsystems Inc.
Memory usage:  8709976 bytes free, 25153536 bytes total

Found 5 JMS destinations. Listing ...
Demo Queue: jms/demoQueue
Demo Topic: jms/demoTopic
jms/Oc4jJmsExceptionQueue: jms/Oc4jJmsExceptionQueue
jms/RAExceptionQueue: jms/RAExceptionQueue
OracleASRouter_store: OracleASRouter_store</pre>
</div>
</div>
<div class="paragraph">
<p>As a slight variation, this script displays a pie chart of memory usage using JFreeChart:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.jfree.chart.ChartFactory
import javax.swing.WindowConstants as WC
import javax.management.remote.*
import oracle.oc4j.admin.jmx.remote.api.JMXConnectorConstant

def url = 'service:jmx:rmi://localhost:23791'
def credentials = [:]
credentials[JMXConnectorConstant.CREDENTIALS_LOGIN_KEY] = "oc4jadmin"
credentials[JMXConnectorConstant.CREDENTIALS_PASSWORD_KEY] = "password"
def env = [:]
env[JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES] = "oracle.oc4j.admin.jmx.remote"
env[JMXConnector.CREDENTIALS] = credentials
def server = JMXConnectorFactory.connect(new JMXServiceURL(url), env).MBeanServerConnection
def jvmInfo = new GroovyMBean(server, 'oc4j:j2eeType=JVM,name=single,J2EEServer=standalone')

def piedata = new org.jfree.data.general.DefaultPieDataset()
piedata.setValue "Free", jvmInfo.freeMemory
piedata.setValue "Used", jvmInfo.totalMemory - jvmInfo.freeMemory

def options = [true, true, true]
def chart = ChartFactory.createPieChart('OC4J Memory Usage', piedata, *options)
chart.backgroundPaint = java.awt.Color.white
def swing = new groovy.swing.SwingBuilder()
def frame = swing.frame(title:'OC4J Memory Usage', defaultCloseOperation:WC.EXIT_ON_CLOSE) {
    panel(id:'canvas') { rigidArea(width:350, height:250) }
}
frame.pack()
frame.show()
chart.draw(swing.canvas.graphics, swing.canvas.bounds)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which looks like:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xoc4jpie.gif.pagespeed.ic.pqBk_XB39J.webp" alt="oc4jpie"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_weblogic_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_weblogic_example"></a>3.16.5. WebLogic Example</h4>
<div class="paragraph">
<p>This script prints out information about the server followed by information about JMS Destinations (as an example). Many other mbeans are <a href="http://docs.oracle.com/cd/E13222_01/wls/docs90/wlsmbeanref/core/index.html">available</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import javax.management.remote.*
import javax.management.*
import javax.naming.Context

def urlRuntime = '/jndi/weblogic.management.mbeanservers.runtime'
def urlBase = 'service:jmx:t3://localhost:7001'

def serviceURL = new JMXServiceURL(urlBase + urlRuntime)
def h = new Hashtable()
h.put(Context.SECURITY_PRINCIPAL, 'weblogic')
h.put(Context.SECURITY_CREDENTIALS, 'weblogic')
h.put(JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES, 'weblogic.management.remote')
def server = JMXConnectorFactory.connect(serviceURL, h).MBeanServerConnection
def domainName = new ObjectName('com.bea:Name=RuntimeService,Type=weblogic.management.mbeanservers.runtime.RuntimeServiceMBean')
def rtName = server.getAttribute(domainName, 'ServerRuntime')
def rt = new GroovyMBean(server, rtName)
println "Server: name=$rt.Name, state=$rt.State, version=$rt.WeblogicVersion"
def destFilter = Query.match(Query.attr('Type'), Query.value('JMSDestinationRuntime'))
server.queryNames(new ObjectName('com.bea:*'), destFilter).each { name -&gt;
    def jms = new GroovyMBean(server, name)
    println "JMS Destination: name=$jms.Name, type=$jms.DestinationType, messages=$jms.MessagesReceivedCount"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Server: name=examplesServer, state=RUNNING, version=WebLogic Server 10.0  Wed May 9 18:10:27 EDT 2007 933139
JMS Destination: name=examples-jms!exampleTopic, type=Topic, messages=0
JMS Destination: name=examples-jms!exampleQueue, type=Queue, messages=0
JMS Destination: name=examples-jms!jms/MULTIDATASOURCE_MDB_QUEUE, type=Queue, messages=0
JMS Destination: name=examplesJMSServer!examplesJMSServer.TemporaryQueue0, type=Queue, messages=68
JMS Destination: name=examples-jms!quotes, type=Topic, messages=0
JMS Destination: name=examples-jms!weblogic.wsee.wseeExamplesDestinationQueue, type=Queue, messages=0
JMS Destination: name=examples-jms!weblogic.examples.ejb30.ExampleQueue, type=Queue, messages=0</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spring_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spring_example"></a>3.16.6. Spring Example</h4>
<div class="paragraph">
<p>You can also use Spring to automatically register beans as JMX aware.</p>
</div>
<div class="paragraph">
<p>Here is an example class (Calculator.groovy):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.springframework.jmx.export.annotation.*

@ManagedResource(objectName="bean:name=calcMBean", description="Calculator MBean")
public class Calculator {

    private int invocations

    @ManagedAttribute(description="The Invocation Attribute")
    public int getInvocations() {
        return invocations
    }

    private int base = 10

    @ManagedAttribute(description="The Base to use when adding strings")
    public int getBase() {
        return base
    }

    @ManagedAttribute(description="The Base to use when adding strings")
    public void setBase(int base) {
        this.base = base
    }

    @ManagedOperation(description="Add two numbers")
    @ManagedOperationParameters([
        @ManagedOperationParameter(name="x", description="The first number"),
        @ManagedOperationParameter(name="y", description="The second number")])
    public int add(int x, int y) {
        invocations++
        return x + y
    }

    @ManagedOperation(description="Add two strings representing numbers of a particular base")
    @ManagedOperationParameters([
        @ManagedOperationParameter(name="x", description="The first number"),
        @ManagedOperationParameter(name="y", description="The second number")])
    public String addStrings(String x, String y) {
        invocations++
        def result = Integer.valueOf(x, base) + Integer.valueOf(y, base)
        return Integer.toString(result, base)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the Spring configuration file (beans.xml):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
    &lt;bean id="mbeanServer"
          class="org.springframework.jmx.support.MBeanServerFactoryBean"&gt;
        &lt;property name="locateExistingServerIfPossible" value="true"/&gt;
    &lt;/bean&gt;

    &lt;bean id="exporter"
          class="org.springframework.jmx.export.MBeanExporter"&gt;
        &lt;property name="assembler" ref="assembler"/&gt;
        &lt;property name="namingStrategy" ref="namingStrategy"/&gt;
        &lt;property name="beans"&gt;
            &lt;map&gt;
                &lt;entry key="bean:name=defaultCalcName" value-ref="calcBean"/&gt;
            &lt;/map&gt;
        &lt;/property&gt;
        &lt;property name="server" ref="mbeanServer"/&gt;
        &lt;property name="autodetect" value="true"/&gt;
    &lt;/bean&gt;

    &lt;bean id="jmxAttributeSource"
          class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/&gt;

    &lt;!-- will create management interface using annotation metadata --&gt;
    &lt;bean id="assembler"
          class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler"&gt;
        &lt;property name="attributeSource" ref="jmxAttributeSource"/&gt;
    &lt;/bean&gt;

    &lt;!-- will pick up the ObjectName from the annotation --&gt;
    &lt;bean id="namingStrategy"
          class="org.springframework.jmx.export.naming.MetadataNamingStrategy"&gt;
        &lt;property name="attributeSource" ref="jmxAttributeSource"/&gt;
    &lt;/bean&gt;

    &lt;bean id="calcBean"
          class="Calculator"&gt;
        &lt;property name="base" value="10"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a script which uses this bean and configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.springframework.context.support.ClassPathXmlApplicationContext
import java.lang.management.ManagementFactory
import javax.management.ObjectName
import javax.management.Attribute

// get normal bean
def ctx = new ClassPathXmlApplicationContext("beans.xml")
def calc = ctx.getBean("calcBean")

Thread.start {
    // access bean via JMX, use a separate thread just to
    // show that we could access remotely if we wanted
    def server = ManagementFactory.platformMBeanServer
    def mbean = new GroovyMBean(server, 'bean:name=calcMBean')
    sleep 1000
    assert 8 == mbean.add(7, 1)
    mbean.Base = 8
    assert '10' == mbean.addStrings('7', '1')
    mbean.Base = 16
    sleep 2000
    println "Number of invocations: $mbean.Invocations"
    println mbean
}

assert 15 == calc.add(9, 6)
assert '11' == calc.addStrings('10', '1')
sleep 2000
assert '20' == calc.addStrings('1f', '1')</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the resulting output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Number of invocations: 5
MBean Name:
  bean:name=calcMBean

Attributes:
  (rw) int Base
  (r) int Invocations
Operations:
  int add(int x, int y)
  java.lang.String addStrings(java.lang.String x, java.lang.String y)
  int getInvocations()
  int getBase()
  void setBase(int p1)</pre>
</div>
</div>
<div class="paragraph">
<p>You can even attach to the process while it is running with <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html">jconsole</a>. It will look something like:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xjconsole.gif.pagespeed.ic.T9--woYYPm.webp" alt="jconsole"></span></p>
</div>
<div class="paragraph">
<p>We started the Groovy application with the <code>-Dcom.sun.management.jmxremote</code> JVM argument.</p>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_dynamic-language-beans-in-spring">Dynamic language beans in Spring</a></p>
</li>
<li>
<p><a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_using-spring-factories-with-groovy">Using Spring Factories with Groovy</a></p>
</li>
<li>
<p><a href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jmx.html">Spring JMX Documentation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_troubleshooting"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_troubleshooting"></a>3.16.7. Troubleshooting</h4>
<div class="sect4">
<h5 id="_java_lang_securityexception"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_java_lang_securityexception"></a>java.lang.SecurityException</h5>
<div class="paragraph">
<p>If you get the following error, your container’s JMX access is password protected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.lang.SecurityException: Authentication failed! Credentials required</pre>
</div>
</div>
<div class="paragraph">
<p>To fix that, add an environment with the credentials when connecting, like this (password has to be set before that):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jmxEnv = null
if (password != null) {
    jmxEnv = [(JMXConnector.CREDENTIALS): (String[])["monitor", password]]
}
def connector = JMXConnectorFactory.connect(new JMXServiceURL(serverUrl), jmxEnv)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Details for the software you are trying to monitor/manage may differ slightly. Check out the other examples using credentials above if appropriate (e.g. OC4J and WebLogic). If you still have troubles, you will have to consult the documentation for the software you are trying to monitor/manage for details on how to provide credentials.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jmx_jmxbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#jmx_jmxbuilder"></a>3.16.8. JmxBuilder</h4>
<div class="paragraph">
<p><strong>JmxBuilder is a Groovy-based domain specific language for the Java Management Extension (JMX) API</strong>. It uses the builder pattern (FactoryBuilder) to create an internal DSL that facilitates the exposure of POJO’s and Groovy beans as management components via the MBean server. JmxBuilder hides the complexity of creating and exporting management beans via the JMX API and provides a set of natural Groovy constructs to interact with the JMX infrastructure.</p>
</div>
<div class="sect4">
<h5 id="_instantiating_jmxbuilder"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_instantiating_jmxbuilder"></a>Instantiating JmxBuilder</h5>
<div class="paragraph">
<p>To start using JmxBuilder, simply make sure the jar file is on your class path. Then you can do the following in your code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def jmx = new JmxBuilder()</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>That’s it!</strong> You are now ready to use the JmxBuilder.</p>
</div>
<div class="paragraph">
<p><strong>NOTE</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can pass in an instance of <strong>your own MBeanServer</strong> to the builder (<strong>JmxBuilder(MBeanServer)</strong>)</p>
</li>
<li>
<p>If no MBeanServer is specified, the builder instance will default to the underlying platform MBeanServer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you have an instance of JmxBuilder, you are now ready to invoke any of its builder nodes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_jmx_connectors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmx_connectors"></a>JMX Connectors</h5>
<div class="paragraph">
<p>Remote connectivity is a crucial part of the JMX architecture. JmxBuilder facilitates the creation of connector servers and connector clients with a minimal amount of coding.</p>
</div>
<div class="sect5">
<h6 id="_connector_server"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connector_server"></a>Connector Server</h6>
<div class="paragraph">
<p>JmxBuilder.connectorServer() supports the full Connector api syntax and will let you specify properties, override the URL, specify your own host, etc.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>jmx.connectorServer(
    protocol:"rmi",
    host:"...",
    port:1099,
    url:"...",
    properties:[
        "authenticate":true|false,
        "passwordFile":"...",
        "accessFile":"...",
        "sslEnabled" : true | false
        // any valid connector property
    ]
)</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the serverConnector node will accept four ServerConnector property aliases (authenticate, passwordFile,accessFile, and sslEnabled). You can use these aliases or provided any of the RMI-supported properties.</p>
</div>
<div class="paragraph">
<p><strong>Example - Connector Server (see correction below)</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">jmx.connectorServer(port: 9000).start()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The snippet above returns an RMI connector that will start listening on port 9000. By default, the builder will internally generate URL <strong>"service:jmx:rmi:///jndi/rmi://localhost:9000/jmxrmi"</strong>.</p>
</div>
<div class="paragraph">
<p><em>NOTE: Sadly you are as likely to get something like the following when attempting to run the previous snippet of code (example is incomplete, see below):</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre>Caught: java.io.IOException: Cannot bind to URL [rmi://localhost:9000/jmxrmi]: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:
?????? java.net.ConnectException: Connection refused]
??</pre>
</div>
</div>
<div class="paragraph">
<p><em>This occurs on Mac and Linux (CentOS 5) with Groovy 1.6 installed. Perhaps there were assumptions made about the configuration of the /etc/hosts file?</em></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>The correct example is shown below.</em>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><strong>Connector Example (Corrected) - Connector Server</strong></p>
</div>
<div class="paragraph">
<p>The example above does not create the RMI registry. So, in order to export, you have to first export the RMI object registry (make sure to import <code>java.rmi.registry.LocateRegistry</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import java.rmi.registry.LocateRegistry
//...

LocateRegistry.createRegistry(9000)
jmx.connectorServer(port: 9000).start()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_connector_client"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_connector_client"></a>Connector Client</h6>
<div class="paragraph">
<p>JmxBuilder.connectorClient() node lets you create JMX connector client object to connect to a JMX MBean Server.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>jmx.connectorClient (
    protocol:"rmi",
    host:"...",
    port:1099,
    url:"...",
)</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example - Client Connector</strong></p>
</div>
<div class="paragraph">
<p>Creating a connector client can be done just as easily. With one line of code, you can create an instance of a JMX Connector Client as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def client = jmx.connectorClient(port: 9000)
client.connect()</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then access the MBeanServerConnection associated with the connector using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">client.getMBeanServerConnection()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_jmxbuilder_mbean_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_mbean_export"></a>JmxBuilder MBean Export</h5>
<div class="paragraph">
<p>You can <strong>export a Java object or a Groovy object</strong> with minimal coding. JmxBuilder will even find and <strong>export dynamic Groovy methods</strong> injected at runtime.</p>
</div>
<div class="sect5">
<h6 id="_implicit_vs_explicit_descriptors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_vs_explicit_descriptors"></a>Implicit vs Explicit Descriptors</h6>
<div class="paragraph">
<p>When using the builder, you can <strong>let JmxBuilder implicitly generate</strong> all of your MBean descriptor info. This is useful when you want to write minimal code to quickly export your beans. You can also explicitly declare all descriptor info for the bean. This gives you total control on how you want to describe every piece of information that you want to export for the underlying bean.</p>
</div>
</div>
<div class="sect5">
<h6 id="_the_jmxbuilder_export_node"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_the_jmxbuilder_export_node"></a>The JmxBuilder.export() Node</h6>
<div class="paragraph">
<p>The <strong>JmxBuilder.export() node provides a container</strong> where all management entities to be exported to the MBeanServer are placed. You can place one or more bean() or timer() nodes as children of the export() node. JmxBuilder will <strong>automatically batch export the entities described</strong> by the nodes to the MBean server for management (see example below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def beans = jmx.export {
    bean(new Foo())
    bean(new Bar())
    bean(new SomeBar())
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the code snippet above, <strong>JmxBuilder.export() will export three management beans</strong> to the MBean server.</p>
</div>
</div>
<div class="sect5">
<h6 id="_jmxbuilder_export_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_export_syntax"></a>JmxBuilder.export() Syntax</h6>
<div class="paragraph">
<p>JmxBuilder.export() node supports the <strong>registrationPolicy</strong> parameter to specify how JmxBuilder will behave to resolve bean name collision during MBean registration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jmx.export(policy:"replace|ignore|error")
or
jmx.export(regPolicy:"replace|ignore|error")</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>replace</strong> - JmxBuilder.export() will replace any bean already registered with the MBean during export.</p>
</li>
<li>
<p><strong>ignore</strong> - The bean being exported will be ignored if the same bean is already registered.</p>
</li>
<li>
<p><strong>error</strong> - JmxBuilder.export() throws an error upon bean name collision during registration.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_integration_with_groovymbean_class"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_integration_with_groovymbean_class"></a>Integration with GroovyMBean Class</h6>
<div class="paragraph">
<p>When you export an MBean to the MBeanServer, <strong>JmxBuilder will return an instance of GroovyMBean</strong> representing the management bean that have been exported by the builder. Nodes such as <strong>bean()</strong> and <strong>timer()</strong> will return an instances of GroovyMBean when they are invoked. The <strong>export()</strong> node returns an <strong>array of all of GroovyMBean[]</strong> representing all managed objects exported to the MBean server.</p>
</div>
</div>
<div class="sect5">
<h6 id="_mbean_registration_with_jmxbuilder_bean"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_mbean_registration_with_jmxbuilder_bean"></a>MBean Registration with JmxBuilder.bean()</h6>
<div class="paragraph">
<p>This portion of this reference uses class <strong>RequestController</strong> to illustrate how to use JmxBuilder to export runtime management beans. The class is for illustration purpose and can be a POJO or a Groovy bean.</p>
</div>
<div class="paragraph">
<p><strong>RequestController</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class RequestController {
    // constructors
    RequestController() { super() }
    RequestController(Map resource) { }

    // attributes
    boolean isStarted() { true }
    int getRequestCount() { 0 }
    int getResourceCount() { 0 }
    void setRequestLimit(int limit) { }
    int getRequestLimit() { 0 }

    // operations
    void start() { }
    void stop() { }
    void putResource(String name, Object resource) { }
    void makeRequest(String res) { }
    void makeRequest() { }
}</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="_implicit_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implicit_export"></a>Implicit Export</h7>
<div class="paragraph">
<p>As mentioned earlier, you can use JmxBuilder’s flexible syntax to export any POJO/POGO with no descriptor. The builder can automatically describe all aspects of the management beans using implicit defaults. These default values can easily be overridden as we’ll see in this in the next section.</p>
</div>
<div class="paragraph">
<p>The simplest way to export a POJO or POGO is listed below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">jmx.export {
    bean(new RequestController(resource: "Hello World"))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>What this does:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, the <strong>JmxBuilder.export() node will export</strong> an MBean to the MBeanServer representing <strong>the declared POJO</strong> instance.</p>
</li>
<li>
<p>The builder will <strong>generate a default ObjectName</strong> for the MBean and all other MBean descriptor information.</p>
</li>
<li>
<p><strong>JmxBuilder will automatically export</strong> all declared <strong>attributes</strong> (MBean getter/setters), <strong>constructors</strong>, and <strong>operations</strong> on the instance.</p>
</li>
<li>
<p>The exported <strong>attributes</strong> will have <strong>read-only</strong> visibility.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remember, <strong>JmxBuilder.export() returns an array of GroovyMBean[] objects</strong> for all exported instances. So, once you call JmxBuilder.export(), <strong>you have immediate access to the underlying MBean proxy</strong> (via GroovyMBean).</p>
</div>
<div class="sect7">
<h8 id="_jconsole_view_of_exported_bean"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jconsole_view_of_exported_bean"></a>JConsole view of Exported Bean</h8>
<div class="paragraph">
<p><span class="image"><img src="./Groovy Language Documentation_files/xjconsole-implicit-export.png.pagespeed.ic.6yuaPHMXHE.webp" alt="jconsole implicit export"></span></p>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_jmxbuilder_bean_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_bean_syntax"></a>JmxBuilder.bean() Syntax</h6>
<div class="paragraph">
<p>The JmxBuilder.bean() node supports an extensive set of descriptors to describe your bean for management. The JMX MBeanServer uses these descriptors to expose meta data about the bean exposed for management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jmx.export {
    bean(
        target:bean instance,
        name:ObjectName,
        desc:"...",
        attributes:"*",
        attributes:[]
        attributes:[ "AttrubuteName1","AttributeName2",...,"AttributeName_n" ]
        attributes:[
            "AttributeName":"*",
            "AttributeName":[
                desc:"...",
                defaultValue:value,
                writable:true|false,
                editable:true|false,
                onChange:{event-&gt; // event handler}
            ]
        ],

        constructors:"*",
        constructors:[
            "Constructor Name":[],
            "Constructor Name":[ "ParamType1","ParamType2,...,ParamType_n" ],
            "Constructor Name":[
                desc:"...",
                params:[
                    "ParamType1":"*",
                    "ParamType2":[desc:"...", name:"..."],...,
                    "ParamType_n":[desc:"...", name:"..."]
                ]
            ]
        ],

        operations:"*",
        operations:[ "OperationName1", "OperationName2",...,"OperationNameN" ],
        operations:[
            "OperationName1":"*",
            "OperationName2":[ "type1","type2,"type3" ]
            "OperationName3":[
                desc:"...",
                params:[
                    "ParamType1":"*"
                    "ParamType2":[desc:"...", name:"..."],...,
                    "ParamType_n":[desc:"...", name:"..."]
                ],
                onInvoked:{event-&gt; JmxBuilder.send(event:"", to:"")}
            ]
        ],

        listeners:[
            "ListenerName1":[event: "...", from:ObjectName, call:{event-&gt;}],
            "ListenerName2":[event: "...", from:ObjectName, call:&amp;methodPointer]
        ]

    )
}</pre>
</div>
</div>
<div class="paragraph">
<p>Instead of describing the entire node, the following section explore each attribute separately.</p>
</div>
</div>
<div class="sect5">
<h6 id="_bean_node_specifying_mbean_objectname"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_specifying_mbean_objectname"></a>Bean() Node - Specifying MBean ObjectName</h6>
<div class="paragraph">
<p>Using the bean() node descriptors, you can specify your own MBean ObjectName.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def ctrl = new RequestController(resource:"Hello World")
def beans = jmx.export {
    bean(target: ctrl, name: "jmx.tutorial:type=Object")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ObjectName can be specified as a String or an instance of the ObjectName.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bean_node_attribute_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_attribute_export"></a>Bean() Node - Attribute Export</h5>
<div class="paragraph">
<p>JMX attributes are the setters and getters on the underlying bean. The JmxBuilder.bean() node provides several ways to flexibly describe and export MBean attributes. You can combine them however you want to achieve any level of attribute visibility. Let’s take a look.</p>
</div>
<div class="sect5">
<h6 id="_export_all_attributes_with_wildcard"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_attributes_with_wildcard"></a>Export All Attributes with Wildcard "*"</h6>
<div class="paragraph">
<p>The following code snippet <strong>will describe and export all attributes</strong> on the bean as read-only. <strong>JmxBuilder will use default values</strong> to describe the attributes that exported for management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(target: new RequestController(),
    name: objName,
    attributes: "*")
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_export_attribute_list"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_attribute_list"></a>Export Attribute List</h6>
<div class="paragraph">
<p>JmxBuilder will let you specify a list of attributes to export.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        attributes: ["Resource", "RequestCount"]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the snippet above, <strong>only the "Resource" and "RequestCount" attributes will be exported</strong>. Again, since no descriptors are provided, <strong>JmxBuilder will use sensible defaults</strong> to describe the exported attributes.</p>
</div>
</div>
<div class="sect5">
<h6 id="_export_attribute_with_explicit_descriptors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_attribute_with_explicit_descriptors"></a>Export Attribute with Explicit Descriptors</h6>
<div class="paragraph">
<p>One of the strengths of JmxBuilder is its flexibility in describing MBean. With the builder you can describe all aspects of the MBeans attribute that you want to export to the MBeanServer (see syntax above).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        attributes: [
            "Resource": [desc: "The resource to request.", readable: true, writable: true, defaultValue: "Hello"],
            "RequestCount": "*"
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the snippet above, attribute <strong>"Resource" is fully-described</strong> using all supported descriptors (i.e. desc, readable, writable, defaultValue) for a JMX attribute. However, we use the wildcard to describe attribute <strong>RequestCount</strong> and it will be exported and described using defaults.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bean_node_constructor_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_constructor_export"></a>Bean() Node - Constructor Export</h5>
<div class="paragraph">
<p>JmxBuilder <strong>supports the explicit description and export of constructors</strong> defined in the underlying bean. There are several options available when exporting constructors. You can combine them however you want to achieve the desired level of manageability.</p>
</div>
<div class="sect5">
<h6 id="_export_all_constructors_with"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_constructors_with"></a>Export all Constructors with "*"</h6>
<div class="paragraph">
<p>You can use the builder’s special "*" <strong>notation to export all constructors</strong> declared on the underlying bean. The builder will use default values to describe the MBean constructors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        constructors: "*"
    )
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_export_constructors_using_parameter_descriptor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_constructors_using_parameter_descriptor"></a>Export Constructors using Parameter Descriptor</h6>
<div class="paragraph">
<p>JmxBuilder lets you <strong>target specific constructor</strong> to export <strong>by describing the parameter signature</strong>. This is useful when you have several constructors with different parameter signature and you want to export specific constructors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        constructors: [
            "RequestController": ["Object"]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, JmxBuilder will <strong>export a constructor that takes one parameter of type "Object"</strong>. Again, JmxBuilder will use default values to fill in the description of the constructor and the parameters.</p>
</div>
</div>
<div class="sect5">
<h6 id="_export_constructor_with_explicit_descriptors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_constructor_with_explicit_descriptors"></a>Export Constructor with Explicit Descriptors</h6>
<div class="paragraph">
<p>JmxBuilder allows you to <strong>fully-describe</strong> the constructor that you want to target for export (see syntax above).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(target: new RequestController(), name: objName,
        constructors: [
            "RequestController": [
                desc: "Constructor takes param",
                params: ["Object" : [name: "Resource", desc: "Resource for controller"]]
            ]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the code above, JmxBuilder will target a constructor that takes one parameter for export to the MBeanServer. Notice how the constructor can be fully-described using all optional descriptor keys including parameter descriptors.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bean_node_operation_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bean_node_operation_export"></a>Bean() Node - Operation Export</h5>
<div class="paragraph">
<p>Similar to constructors, JmxBuilder supports the description and export of MBean operations using a flexible notation (see above for syntax). You can combine these notations however you want to achieve the level of operation manageability desired.</p>
</div>
<div class="sect5">
<h6 id="_export_all_operations_with"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_all_operations_with"></a>Export All Operations with "*"</h6>
<div class="paragraph">
<p>You can use the builder’s special "*" <strong>notation to export all operations</strong> defined on the bean to be exposed for management. The builder will use default descriptor values for the operations being exported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        operations: "*"
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this snippet, JmxBuilder will <strong>export all bean operations</strong> and will use default values to describe them in the MBeanServer.</p>
</div>
</div>
<div class="sect5">
<h6 id="_export_operation_list"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operation_list"></a>Export Operation List</h6>
<div class="paragraph">
<p>JmxBuilder has a shorthand notation that lets you quickly target operations to be exported by providing a list of methods to export.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        operations: ["start", "stop"]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the snippet above, the <strong>builder will only export methods start() and stop()</strong>. All other methods will be ignored. JmxBuilder will use default descriptor values to describe the operations being exported.</p>
</div>
</div>
<div class="sect5">
<h6 id="_export_operations_by_signature"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operations_by_signature"></a>Export Operations by Signature</h6>
<div class="paragraph">
<p>Using JmxBuilder, you can target methods to export for management using the methods’s parameter signature. This is useful when you want to distinguish methods with the same name that you want to export (i.e. stop() instead of stop(boolean)).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(
        target: new RequestController(),
        name: objName,
        operations: [
            "makeRequest": ["String"]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the snippet above, JmxBuilder would <strong>select method makeRequest(String)</strong> to be exported instead of the other version makeRequest() which takes no parameter. In this shorthand context, the signature is specified as a list of type (i.e. "String").</p>
</div>
</div>
<div class="sect5">
<h6 id="_export_operations_with_explicit_descriptors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_export_operations_with_explicit_descriptors"></a>Export Operations with Explicit Descriptors</h6>
<div class="paragraph">
<p>JmxBuilder supports detailed descriptors for bean operations. You can supply deep descriptor info about any operation on your bean including a name, description, method parameters, parameter type, and parameter description.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def objName = new ObjectName("jmx.tutorial:type=Object")
def beans = jmx.export {
    bean(target: new RequestController(), name: objName,
        operations: [
            "start": [desc: "Starts request controller"],
            "stop": [desc: "Stops the request controller"],
            "setResource": [params: ["Object"]],
            "makeRequest": [
                desc: "Executes the request.",
                params: [
                    "String": [name: "Resource", desc: "The resource to request"]
                ]
            ]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The snippet above shows all of the ways JmxBuilder allows you to describe an operation targeted for management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Operations <strong>start() and stop()</strong> are described by the "desc" key (this is enough since there are no params).</p>
</li>
<li>
<p>In operation <strong>setResource()</strong> uses of a shorthand version of <strong>params</strong>: to describe the parameters for the method.</p>
</li>
<li>
<p><strong>makeRequest()</strong> uses the extended descriptor syntax to describe all aspects of the operation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_embedding_descriptor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_embedding_descriptor"></a>Embedding Descriptor</h5>
<div class="paragraph">
<p>JmxBuilder supports the ability to <strong>embed descriptors directly in your Groovy class</strong>. So, instead of wrapping your description around the declared object (as we’ve seen here), you can embed your JMX descriptors directly in your class.</p>
</div>
<div class="paragraph">
<p><strong>RequestControllerGroovy</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class RequestControllerGroovy {
    // attributes
    boolean started
    int requestCount
    int resourceCount
    int requestLimit
    Map resources

    // operations
    void start() { }
    void stop(){ }
    void putResource(String name, Object resource) { }
    void makeRequest(String res) { }
    void makeRequest() { }

    static descriptor = [
        name: "jmx.builder:type=EmbeddedObject",
        operations: ["start", "stop", "putResource"],
        attributes: "*"
    ]
}

// export
jmx.export(
    bean(new RequestControllerGroovy())
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two things going on in the code above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Groovy class RequestControllerGroovy is defined and includes a <strong>static descriptor</strong> member. That member is used to declare a JmxBuilder descriptor to describe member of the class targeted for JMX export.</p>
</li>
<li>
<p>The second part of the code shows how to use JmxBuilder to export that class for management.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_timer_export"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_export"></a>Timer Export</h5>
<div class="paragraph">
<p>JMX standards mandate that the implementation of the API makes available a timer service. Since JMX is a component-based architecture, timers provide an excellent signalling mechanism to communicate to registered listener components in the MBeanServer. JmxBuilder supports the creation and export of timers using the same easy syntax we’ve seen so far.</p>
</div>
<div class="sect5">
<h6 id="_timer_node_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_node_syntax"></a>Timer Node Syntax</h6>
<div class="listingblock">
<div class="content">
<pre>timer(
    name:ObjectName,
    event:"...",
    message:"...",
    data:dataValue
    startDate:"now"|dateValue
    period:"99d"|"99h"|"99m"|"99s"|99
    occurrences:long
)</pre>
</div>
</div>
<div class="paragraph">
<p>The timer() node supports several attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong>: - Required The qualified JMX ObjectName instance (or String) for the timer.</p>
</li>
<li>
<p><strong>event</strong>: - The JMX event type string that will be broadcast with every timing signal (default <strong>"jmx.builder.event"</strong>).</p>
</li>
<li>
<p><strong>message</strong>: - An optional string value that can be sent to listeners.</p>
</li>
<li>
<p><strong>data</strong>: - An optional object that can be sent to listeners of timing signal.</p>
</li>
<li>
<p><strong>startDate</strong>: - When to start timer. Set of valid values [ "now", date object ]. Default is "now"</p>
</li>
<li>
<p><strong>period</strong>: - A timer’s period expressed as either a number of millisecond or time unit (day, hour, minute, second). See description below.</p>
</li>
<li>
<p><strong>occurrences</strong>: - A number indicating the number of time to repeat timer. Default is forever.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_exporting_a_timer"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_exporting_a_timer"></a>Exporting a Timer</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def timer = jmx.timer(name: "jmx.builder:type=Timer", event: "heartbeat", period: "1s")
timer.start()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This snippet above <strong>describes, creates, and exports a standard JMX Timer</strong> component. Here, the <strong>timer()</strong> node <strong>returns a GroovyMBean</strong> that represents the registered timer MBean in the MBeanServer.</p>
</div>
<div class="paragraph">
<p>An <strong>alternative way of exporting timers</strong> is within the JmxBuilder.export() node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def beans = jmx.export {
    timer(name: "jmx.builder:type=Timer1", event: "event.signal", period: "1s")
    timer(name: "jmx.builder:type=Timer2", event: "event.log", period: "1s")
}
beans[0].start()
beans[1].start()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_timer_period"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_timer_period"></a>Timer Period</h6>
<div class="paragraph">
<p>The <strong>timer() node supports a flexible notation</strong> for specifying the <strong>timer period values</strong>. You can specify the time in second, minutes, hour, and day. The default is millisecond.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>timer(<strong>period: 100</strong>) = 100 millisecond</p>
</li>
<li>
<p>timer(<strong>period: "1s"</strong>) = 1 second</p>
</li>
<li>
<p>timer(<strong>period: "1m"</strong>) = 1 minute</p>
</li>
<li>
<p>timer(<strong>period: "1h"</strong>) = 1 hour</p>
</li>
<li>
<p>timer(<strong>period: "1d"</strong>) = 1 day</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The node will automatically translate.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_jmxbuilder_and_events"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_jmxbuilder_and_events"></a>JmxBuilder and Events</h5>
<div class="paragraph">
<p>An integral part of <strong>JMX</strong> is its <strong>event model</strong>. Registered management beans can <strong>communicate with each other by broadcasting events</strong> on the MBeanServer’s event bus. <strong>JmxBuilder provides several ways to easily listen and react to events</strong> broadcasted on the MBeanServer’s event bus. Developers can <strong>capture any event on the bus or throw their own</strong> to be consumed by other components registered on the MBeanServer.</p>
</div>
<div class="sect5">
<h6 id="_event_handling_closures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_event_handling_closures"></a>Event Handling Closures</h6>
<div class="paragraph">
<p>JmxBuilder leverages Groovy’s use of closures to provide simple, yet elegant, mean of reacting to JMX events. JmxBuilder supports two closure signatures:</p>
</div>
<div class="sect6">
<h7 id="_parameterless"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_parameterless"></a>Parameterless</h7>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">callback = { -&gt;
    // event handling code here.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JmxBuilder executes the closure and passes no information about the event that was captured on the bus.</p>
</div>
</div>
<div class="sect6">
<h7 id="_with_event_parameter"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_with_event_parameter"></a>With Event Parameter</h7>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">callback = { event -&gt;
    // event handling code
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JmxBuilder will pass an <strong>"event" object to the closure</strong> using this format. The event object contains information about the event was intercepted so that it can be handled by the handler. The parameter will contain different set of info depending on the event that was captured.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_handling_attribute_onchange_event"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handling_attribute_onchange_event"></a>Handling Attribute onChange Event</h6>
<div class="paragraph">
<p>When describing attributes (see bean() node section above), you can <strong>provide a closure (or method pointer) for callback to be executed when the value of the attribute is updated</strong> on the exported MBean. This gives developers an opportunity to listen to and react to state changes on the MBean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">jmx.export {
    bean(
        target: new RequestController(), name: "jmx.tutorial:type=Object",
        attributes: [
            "Resource": [
                readable: true, writable: true,
                onChange: { e -&gt;
                    println e.oldValue
                    println e.newValue
                }
            ]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sample snippet above shows how to <strong>specify an "onChange" callback closure</strong> when describing MBean attributes. In this sample code, whenever attribute "Resource" is updated via the exported MBean, the <strong>onChange event will be executed</strong>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_attribute_onchange_event_object"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_attribute_onchange_event_object"></a>Attribute onChange Event Object</h6>
<div class="paragraph">
<p>When handling the attribute onChange event, the handler closure will receive an event object with the following info:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>event.<strong>oldValue</strong> - the previous attribute value before the change event.</p>
</li>
<li>
<p>event.<strong>newValue</strong> - the new value of the attribute after the change.</p>
</li>
<li>
<p>event.<strong>attribute</strong> - the name of the attribute on which the event occurred.</p>
</li>
<li>
<p>event.<strong>attributeType</strong> - the data type of the attribute that causes the event.</p>
</li>
<li>
<p>event.<strong>sequenceNumber</strong> - a numeric value representing the sequence number of event.</p>
</li>
<li>
<p>event.<strong>timeStamp</strong> - a time stamp for the event occurrence.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_handling_operation_oncall_event"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_handling_operation_oncall_event"></a>Handling Operation onCall Event</h6>
<div class="paragraph">
<p>Similar to mbean attributes, JmxBuilder affords developers the <strong>ability to listen for operation invocation</strong> on an MBean registered in the MBeaServer. JmxBuilder accepts a <strong>callback closure that will be executed after the MBean method has invoked</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class EventHandler {
    void handleStart(e){
        println e
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def handler = new EventHandler()

def beans = jmx.export {
    bean(target: new RequestController(), name: "jmx.tutorial:type=Object",
        operations: [
            "start": [
                desc:"Starts request controller",
                onCall:handler.&amp;handleStart
            ]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The snippet above <strong>shows how to declare an "onCall" closure to be used as listener</strong> when operation "start()" is invoked on the MBean. This sample <strong>uses the method pointer syntax</strong> to illustrate the versatility of JmxBuilder.</p>
</div>
</div>
<div class="sect5">
<h6 id="_operation_oncall_event_object"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_operation_oncall_event_object"></a>Operation onCall Event Object</h6>
<div class="paragraph">
<p>When handling the operation onCall event, the callback closure will receive an event object with the following info:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>event.<strong>event</strong> - the event type string that was broadcasted.</p>
</li>
<li>
<p>event.<strong>source</strong> - The object on which the method was invoked.</p>
</li>
<li>
<p>event.<strong>data</strong> - the data type of the attribute that causes the event.</p>
</li>
<li>
<p>event.<strong>sequenceNumber</strong> - a numeric value representing the sequence number of event.</p>
</li>
<li>
<p>event.<strong>timeStamp</strong> - a time stamp for the event occurrence.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listener_mbean"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listener_mbean"></a>Listener MBean</h5>
<div class="paragraph">
<p>When you export an MBean with the bean() node, you can define events the MBean can listen and react to. The bean() node provides a "listeners:" attribute that lets you define event listeners that your bean can react to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def beans = jmx.export {
    timer(name: "jmx.builder:type=Timer", event: "heartbeat", period: "1s").start()
    bean(target: new RequestController(), name: "jmx.tutorial:type=Object",
        operations: "*",
        listeners: [
            heartbeat: [
                from: "jmx.builder:type=Timer",
                call: { e -&gt;
                    println e
                }
            ]
        ]
    )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the sample above, we see the <strong>syntax for adding listeners to an exported MBean</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fist, a <strong>timer is exported</strong> and started.</p>
</li>
<li>
<p>Then an <strong>MBean is declared that will listen to the timer</strong> event and do something meaningful.</p>
</li>
<li>
<p>The <strong>"heartbeat:"</strong> name is arbitrary and has no correlation to the timer declared above.</p>
</li>
<li>
<p>The <strong>source</strong> of the event <strong>is specified using the "from:" attribute</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also specify an <strong>event type</strong> you are interested in receiving from a broadcaster (since a broadcaster can be emitting multiple events).</p>
</div>
<div class="sect5">
<h6 id="_listening_to_jmx_events"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listening_to_jmx_events"></a>Listening to JMX Events</h6>
<div class="paragraph">
<p>In some cases, you will want to create stand-alone event listeners (not attached to exported MBeans). JmxBuilder provides the Listener() node to let you create JMX listeners that can listen to MBeanServer events. This is useful when creating JMX client applications to monitor/manage JMX agents on remote JMX MBeanServers.</p>
</div>
</div>
<div class="sect5">
<h6 id="_listener_node_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_listener_node_syntax"></a>Listener Node Syntax</h6>
<div class="listingblock">
<div class="content">
<pre>jmx.listener(
    event: "...",
    from: "object name" | ObjectName,
    call: { event-&gt; }
)</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the description of the <strong>listener()</strong> node attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>event: An optional string that identifies the JMX event type to listen for.</p>
</li>
<li>
<p>from (required): The JMX ObjectName of the component to listen to. This can be specified as a string or an instance of ObjectName</p>
</li>
<li>
<p>call: The closure to execute when the event is captured. This can also be specified as a Groovy method pointer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example of JmxBuilder’s listener node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">jmx.timer(name: "jmx.builder:type=Timer", period: "1s").start()

jmx.listener(
    from: "jmx.builder:type=Timer",
    call: { e -&gt;
        println "beep..."
    }
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example shows how you can use a stand alone listener (outside of an MBean export). Here, we <strong>export a timer with a 1 second</strong> resolution. Then, we specify a listener to that timer that will print "beep" every second.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_emitting_jmx_events"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_emitting_jmx_events"></a>Emitting JMX Events</h5>
<div class="paragraph">
<p>JmxBuilder provides the <strong>tools needed to broadcast your own events</strong> on the MBeanServer’s event bus. There are no restrictions on the event type you can broadcast. You simply <strong>declare your emitter</strong> and the event type that you want to send, then <strong>broadcast your event</strong> at any time. Any registered component in the MBeanServer can register themselves to listen to your events.</p>
</div>
<div class="sect5">
<h6 id="_emitter_syntax"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_emitter_syntax"></a>Emitter Syntax</h6>
<div class="listingblock">
<div class="content">
<pre>jmx.emitter(name:"Object:Name", event:"type")</pre>
</div>
</div>
<div class="paragraph">
<p>The attributes for the node Emitter() can be summarized as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: an optional JMX ObjectName used to register your emitter in the MBeanServer. Default is jmx.builder:type=Emitter,name=Emitter@OBJECT_HASH_VALUE</p>
</li>
<li>
<p>event: an option string value that describes the JMX event type. Default is <strong>"jmx.builder.event.emitter"</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_declare_the_emitter"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_declare_the_emitter"></a>Declare the Emitter</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def emitter = jmx.emitter()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The snippet <strong>declares the emitter using implicit descriptor syntax</strong>. JmxBuilder will do the followings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create and register an emitter MBean with a default ObjectName.</p>
</li>
<li>
<p>Setup a <strong>default event type</strong> with value <strong>"jmx.builder.event.emitter"</strong>.</p>
</li>
<li>
<p>Return a GroovyMBean representing the emitter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As with other nodes in the builder, <strong>you can override all keys in the emitter() node</strong>. You can specify the <strong>ObjectName</strong> and the <strong>event type</strong>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_broadcast_event"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_broadcast_event"></a>Broadcast Event</h6>
<div class="paragraph">
<p>Once you have declared your emitter, you can broadcast your event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">emitter.send()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sample above shows the <strong>emitter sending an event</strong>, once it has been declared. Any JMX component registered in the MBeanServer can register to receive message from this emitter.</p>
</div>
</div>
<div class="sect5">
<h6 id="_sending_event_objects"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_sending_event_objects"></a>Sending Event Objects</h6>
<div class="paragraph">
<p>You can optionally pass data to the receiver when you send the message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">emitter.send("Hello!")</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use an <strong>event listener closure (see above) that accepts a parameter</strong>, you can access that value.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_further_jmx_information"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_jmx_information"></a>3.16.9. Further JMX Information</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ddj.com/dept/java/184406481?pgno=1">Monitoring the Java Virtual Machine</a></p>
</li>
<li>
<p><a href="http://buttso.blogspot.com/2006/05/using-groovy-for-system-management.html">Using Groovy for System Management</a></p>
</li>
<li>
<p><a href="https://blogs.oracle.com/sundararajan/entry/groovier_jconsole">Groovier jconsole!</a></p>
</li>
<li>
<p><a href="http://jmesnil.net/weblog/2007/05/23/jmx-scripts-with-eclipse-monkey">JMX Scripts with Eclipse Monkey</a></p>
</li>
<li>
<p><a href="http://activemq.apache.org/jmx.html">Using JMX to monitor Apache ActiveMQ</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_swing_uis"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_creating_swing_uis"></a>3.17. Creating Swing UIs</h3>
<div class="paragraph">
<p>Creating Swing UIs is made easy thanks to the use of <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#swingbuilder">SwingBuilder</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_security"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_security"></a>3.18. Security</h3>
<div class="paragraph">
<p>(TBD)</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_patterns_in_groovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_design_patterns_in_groovy"></a>3.19. Design patterns in Groovy</h3>
<div class="paragraph">
<p>Using <a href="http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29">design patterns</a> with Java is a well-established topic. Design patterns also apply to Groovy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>some patterns carry over directly (and can make use of normal Groovy syntax improvements for greater readability)</p>
</li>
<li>
<p>some patterns are no longer required because they are built right into the language or because Groovy supports a better way of achieving the intent of the pattern</p>
</li>
<li>
<p>some patterns that have to be expressed at the design level in other languages can be implemented directly in Groovy (due to the way Groovy can blur the distinction between design and implementation)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_patterns"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_patterns"></a>3.19.1. Patterns</h4>
<div class="sect4">
<h5 id="_abstract_factory_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_abstract_factory_pattern"></a>Abstract Factory Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Abstract_factory_pattern">Abstract Factory Pattern</a> provides a way to encapsulate a group of individual factories that have a common theme. It embodies the intent of a normal factory, i.e. remove the need for code using an interface to know the concrete implementation behind the interface, but applies to a set of interfaces and selects an entire family of concrete classes which implement those interfaces.</p>
</div>
<div class="paragraph">
<p>As an example, I might have interfaces Button, TextField and Scrollbar. I might have WindowsButton, MacButton, FlashButton as concrete classes for Button. I might have WindowsScrollBar, MacScrollBar and FlashScrollBar as concrete implementations for ScrollBar. Using the Abstract Factory Pattern should allow me to select which windowing system (i.e. Windows, Mac, Flash) I want to use once and from then on should be able to write code that references the interfaces but is always using the appropriate concrete classes (all from the one windowing system) under the covers.</p>
</div>
<div class="sect5">
<h6 id="_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example"></a>Example</h6>
<div class="paragraph">
<p>Suppose we want to write a game system. We might note that many games have very similar features and control.</p>
</div>
<div class="paragraph">
<p>We decide to try to split the common and game-specific code into separate classes.</p>
</div>
<div class="paragraph">
<p>First let’s look at the game-specific code for a <a href="http://en.wikipedia.org/wiki/Two-Up">Two-up</a> game:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TwoupMessages {
    def welcome = 'Welcome to the twoup game, you start with $1000'
    def done = 'Sorry, you have no money left, goodbye'
}

class TwoupInputConverter {
    def convert(input) { input.toInteger() }
}

class TwoupControl {
    private money = 1000
    private random = new Random()
    private tossWasHead() {
        def next = random.nextInt()
        return next % 2 == 0
    }
    def moreTurns() {
        if (money &gt; 0) {
            println "You have $money, how much would you like to bet?"
            return true
        }

        false
    }
    def play(amount) {
        def coin1 = tossWasHead()
        def coin2 = tossWasHead()
        if (coin1 &amp;&amp; coin2) {
            money += amount
            println 'You win'
        } else if (!coin1 &amp;&amp; !coin2) {
            money -= amount
            println 'You lose'
        } else {
            println 'Draw'
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let’s look at the game-specific code for a number guessing game:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class GuessGameMessages {
    def welcome = 'Welcome to the guessing game, my secret number is between 1 and 100'
    def done = 'Correct'
}

class GuessGameInputConverter {
    def convert(input) { input.toInteger() }
}

class GuessGameControl {
    private lower = 1
    private upper = 100
    private guess = new Random().nextInt(upper - lower) + lower
    def moreTurns() {
        def done = (lower == guess || upper == guess)
        if (!done) {
            println "Enter a number between $lower and $upper"
        }

        !done
    }
    def play(nextGuess) {
        if (nextGuess &lt;= guess) {
            lower = [lower, nextGuess].max()
        }
        if (nextGuess &gt;= guess) {
            upper = [upper, nextGuess].min()
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let’s write our factory code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def guessFactory = [messages: GuessGameMessages, control: GuessGameControl, converter: GuessGameInputConverter]
def twoupFactory = [messages: TwoupMessages, control: TwoupControl, converter: TwoupInputConverter]

class GameFactory {
    def static factory
    def static getMessages() { return factory.messages.newInstance() }
    def static getControl() { return factory.control.newInstance() }
    def static getConverter() { return factory.converter.newInstance() }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The important aspect of this factory is that it allows selection of an entire family of concrete classes.</p>
</div>
<div class="paragraph">
<p>Here is how we would use the factory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">GameFactory.factory = twoupFactory
def messages = GameFactory.messages
def control = GameFactory.control
def converter = GameFactory.converter
println messages.welcome
def reader = new BufferedReader(new InputStreamReader(System.in))
while (control.moreTurns()) {
    def input = reader.readLine().trim()
    control.play(converter.convert(input))
}
println messages.done</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the first line configures which family of concrete game classes we will use. It’s not important that we selected which family to use by using the factory property as shown in the first line. Other ways would be equally valid examples of this pattern. For example, we may have asked the user which game they wanted to play or determined which game from an environment setting.</p>
</div>
<div class="paragraph">
<p>With the code as shown, the game might look like this when run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Welcome to the twoup game, you start with $1000
You have 1000, how much would you like to bet?
300
Draw
You have 1000, how much would you like to bet?
700
You win
You have 1700, how much would you like to bet?
1700
You lose
Sorry, you have no money left, goodbye</pre>
</div>
</div>
<div class="paragraph">
<p>If we change the first line of the script to GameFactory.factory = guessFactory, then the sample run might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Welcome to the guessing game, my secret number is between 1 and 100
Enter a number between 1 and 100
75
Enter a number between 1 and 75
35
Enter a number between 1 and 35
15
Enter a number between 1 and 15
5
Enter a number between 5 and 15
10
Correct</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_adapter_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapter_pattern"></a>Adapter Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Adapter_pattern">Adapter Pattern</a> (sometimes called the wrapper pattern) allows objects satisfying one interface to be used where another type of interface is expected. There are two typical flavours of the pattern: the <em>delegation</em> flavour and the <em>inheritance</em> flavour.</p>
</div>
<div class="sect5">
<h6 id="_delegation_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_example"></a>Delegation Example</h6>
<div class="paragraph">
<p>Suppose we have the following classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SquarePeg {
    def width
}

class RoundPeg {
    def radius
}

class RoundHole {
    def radius
    def pegFits(peg) {
        peg.radius &lt;= radius
    }
    String toString() { "RoundHole with radius $radius" }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can ask the <code>RoundHole</code> class if a <code>RoundPeg</code> fits in it, but if we ask the same question for a <code>SquarePeg</code>, then it will fail because the <code>SquarePeg</code> class doesn’t have a <code>radius</code> property (i.e. doesn’t satisfy the required interface).</p>
</div>
<div class="paragraph">
<p>To get around this problem, we can create an adapter to make it appear to have the correct interface. It would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SquarePegAdapter {
    def peg
    def getRadius() {
        Math.sqrt(((peg.width / 2) ** 2) * 2)
    }
    String toString() {
        "SquarePegAdapter with peg width $peg.width (and notional radius $radius)"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the adapter like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def hole = new RoundHole(radius: 4.0)
(4..7).each { w -&gt;
    def peg = new SquarePegAdapter(peg: new SquarePeg(width: w))
    if (hole.pegFits(peg)) {
        println "peg $peg fits in hole $hole"
    } else {
        println "peg $peg does not fit in hole $hole"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which results in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>peg SquarePegAdapter with peg width 4 (and notional radius 2.8284271247461903) fits in hole RoundHole with radius 4.0
peg SquarePegAdapter with peg width 5 (and notional radius 3.5355339059327378) fits in hole RoundHole with radius 4.0
peg SquarePegAdapter with peg width 6 (and notional radius 4.242640687119285) does not fit in hole RoundHole with radius 4.0
peg SquarePegAdapter with peg width 7 (and notional radius 4.949747468305833) does not fit in hole RoundHole with radius 4.0</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_inheritance_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_inheritance_example"></a>Inheritance Example</h6>
<div class="paragraph">
<p>Let’s consider the same example again using inheritance. First, here are the original classes (unchanged):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SquarePeg {
    def width
}

class RoundPeg {
    def radius
}

class RoundHole {
    def radius
    def pegFits(peg) {
        peg.radius &lt;= radius
    }
    String toString() { "RoundHole with radius $radius" }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An adapter using inheritance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class SquarePegAdapter extends SquarePeg {
    def getRadius() {
        Math.sqrt(((width / 2) ** 2) * 2)
    }
    String toString() {
        "SquarePegAdapter with width $width (and notional radius $radius)"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the adapter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def hole = new RoundHole(radius: 4.0)
(4..7).each { w -&gt;
    def peg = new SquarePegAdapter(width: w)
    if (hole.pegFits(peg)) {
        println "peg $peg fits in hole $hole"
    } else {
        println "peg $peg does not fit in hole $hole"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>peg SquarePegAdapter with width 4 (and notional radius 2.8284271247461903) fits in hole RoundHole with radius 4.0
peg SquarePegAdapter with width 5 (and notional radius 3.5355339059327378) fits in hole RoundHole with radius 4.0
peg SquarePegAdapter with width 6 (and notional radius 4.242640687119285) does not fit in hole RoundHole with radius 4.0
peg SquarePegAdapter with width 7 (and notional radius 4.949747468305833) does not fit in hole RoundHole with radius 4.0</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_adapting_using_closures"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapting_using_closures"></a>Adapting using Closures</h6>
<div class="paragraph">
<p>As a variation of the previous examples, we could instead define the following interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface RoundThing {
    def getRadius()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can then define an adapter as a closure as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def adapter = {
    p -&gt; [getRadius: { Math.sqrt(((p.width / 2) ** 2) * 2) }] as RoundThing
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And use it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def peg = new SquarePeg(width: 4)
if (hole.pegFits(adapter(peg))) {
    // ... as before
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_adapting_using_the_expandometaclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_adapting_using_the_expandometaclass"></a>Adapting using the ExpandoMetaClass</h6>
<div class="paragraph">
<p>As of Groovy 1.1, there is a built-in MetaClass which can automatically add properties and methods dynamically.</p>
</div>
<div class="paragraph">
<p>Here is how the example would work using that feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def peg = new SquarePeg(width: 4)
peg.metaClass.radius = Math.sqrt(((peg.width / 2) ** 2) * 2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you create a peg object, you can simply add a property to it on the fly. No need to change the original class and no need for an adapter class.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_bouncer_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_bouncer_pattern"></a>Bouncer Pattern</h5>
<div class="paragraph">
<p>The <a href="http://www.c2.com/cgi/wiki?BouncerPattern">Bouncer Pattern</a> describes usage of a method whose sole purpose is to either throw an exception (when particular conditions hold) or do nothing. Such methods are often used to defensively guard pre-conditions of a method.</p>
</div>
<div class="paragraph">
<p>When writing utility methods, you should always guard against faulty input arguments. When writing internal methods, you may be able to ensure that certain pre-conditions always hold by having sufficient unit tests in place. Under such circumstances, you may reduce the desirability to have guards on your methods.</p>
</div>
<div class="paragraph">
<p>Groovy differs from other languages in that you frequently use the <code>assert</code> method within your methods rather than having a large number of utility checker methods or classes.</p>
</div>
<div class="sect5">
<h6 id="_null_checking_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_null_checking_example"></a>Null Checking Example</h6>
<div class="paragraph">
<p>We might have a utility method such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class NullChecker {
    static check(name, arg) {
        if (arg == null) {
            throw new IllegalArgumentException(name + ' is null')
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we would use it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void doStuff(String name, Object value) {
    NullChecker.check('name', name)
    NullChecker.check('value', value)
    // do stuff
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>But a more Groovy way to do this would simply be like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">void doStuff(String name, Object value) {
    assert name != null, 'name should not be null'
    assert value != null, 'value should not be null'
    // do stuff
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_validation_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_validation_example"></a>Validation Example</h6>
<div class="paragraph">
<p>As an alternative example, we might have this utility method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class NumberChecker {
    static final String NUMBER_PATTERN = "\\\\d+(\\\\.\\\\d+(E-?\\\\d+)?)?"
    static isNumber(str) {
        if (!str ==~ NUMBER_PATTERN) {
            throw new IllegalArgumentException("Argument '$str' must be a number")
        }
    }
    static isNotZero(number) {
        if (number == 0) {
            throw new IllegalArgumentException('Argument must not be 0')
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we would use it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def stringDivide(String dividendStr, String divisorStr) {
    NumberChecker.isNumber(dividendStr)
    NumberChecker.isNumber(divisorStr)
    def dividend = dividendStr.toDouble()
    def divisor = divisorStr.toDouble()
    NumberChecker.isNotZero(divisor)
    dividend / divisor
}

println stringDivide('1.2E2', '3.0')
// =&gt; 40.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>But with Groovy we could just as easily use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def stringDivide(String dividendStr, String divisorStr) {
    assert dividendStr =~ NumberChecker.NUMBER_PATTERN
    assert divisorStr =~ NumberChecker.NUMBER_PATTERN
    def dividend = dividendStr.toDouble()
    def divisor = divisorStr.toDouble()
    assert divisor != 0, 'Divisor must not be 0'
    dividend / divisor
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_chain_of_responsibility_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_chain_of_responsibility_pattern"></a>Chain of Responsibility Pattern</h5>
<div class="paragraph">
<p>In the Chain of Responsibility Pattern, objects using and implementing an interface (one or more methods) are intentionally loosely coupled. A set of objects that <em>implement</em> the interface are organised in a list (or in rare cases a tree). Objects using the interface make requests from the first <em>implementor</em> object. It will decide whether to perform any action itself and whether to pass the request further down the line in the list (or tree). Sometimes a default implementation for some request is also coded into the pattern if none of the implementors respond to the request.</p>
</div>
<div class="sect5">
<h6 id="_example_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_2"></a>Example</h6>
<div class="paragraph">
<p>In this example, the script sends requests to the <code>lister</code> object. The <code>lister</code> points to a <code>UnixLister</code> object. If it can’t handle the request, it sends the request to the <code>WindowsLister</code>. If it can’t handle the request, it sends the request to the <code>DefaultLister</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class UnixLister {
    private nextInLine
    UnixLister(next) { nextInLine = next }
    def listFiles(dir) {
        if (System.getProperty('os.name') == 'Linux') {
            println "ls $dir".execute().text
        } else {
            nextInLine.listFiles(dir)
        }
    }
}

class WindowsLister {
    private nextInLine
    WindowsLister(next) { nextInLine = next }
    def listFiles(dir) {
        if (System.getProperty('os.name') == 'Windows XP') {
            println "cmd.exe /c dir $dir".execute().text
        } else {
            nextInLine.listFiles(dir)
        }
    }
}

class DefaultLister {
    def listFiles(dir) {
        new File(dir).eachFile { f -&gt; println f }
    }
}

def lister = new UnixLister(new WindowsLister(new DefaultLister()))

lister.listFiles('Downloads')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will be a list of files (with slightly different format depending on the operating system).</p>
</div>
<div class="paragraph">
<p>Here is a UML representation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRs4HAABXRUJQVlA4TMEHAAAvusFQAE/CKJIkRXXkgkrK6DtVKKRV3ItsMIokKUxjg9dKQRpSeEXHSVknQchGkoo2CIf6CIfwKk/w8x/w/7/HM6zBASkIgQQMIlbAQKEIIQhBQBBCUBBKQNhAQQICIaCkIISCEJQgYMAK6kERSBAYChQSISiCgUtZ63fc+xpxXUDR2ra4bfTz23EmtetE6b6p2RM83evIbocxtJGQuP87in6Q1MgKRGkc0X9ZjCTZbdNLrHRrnTIR70i9QHCgP/aQVUBXhSeB3RS9HXme3y47LR+mvRuv3o48zx9UQqYFqZNQQ20J4LFbBv7Q4QMiOqgQNwgaZHoMaaGGWkJ83XKlU4AxnsJAJwBjlABpER4MtOKxGmoU0xPjapQtXSaRFngaS4gRbw0SAIOOqNgrdSYDTVNhofjUXU7K+S3JJcBYDvTtgRrquo+iHHQmah6jcJOMk3HFTRSPrYR4uzAn1x37n1/lEPoOaVHulbryjgQAxOhApIWaG8UBwFjlKao5uUiLWwUUANZUIfsf+vwCT8kWLYBeT6q5EVOkGzFCWmASRAjSnyRDsJIJokR2QVbZTsfWXim83oBzviXSr4GIPTwdFWH36Xy/TnvjHu8dwQ09TCtUv5GG2iP9fmPtOOP8ClEeEHW7lep9LwHADTxMareCZgrPNaK8ItRS74ENAGj4MKkPFzxCvOT8CC/L1iU/uobIcaQKdY7RQIeKOJDPzi05RBcKzqOEH/lhGQAasYf4U4sDRKHx8uWRlagcBxXq7BCadr0u4qVWu0h0EbHi2W2fWlcgD9Nl9SxUh4j/6UvOOT9A9a+2oHIcVKjD6nRQalC7SHXJg9u9Qedn6/rVTXQwCDoQfr7Za4Y4qFs+ciYkWwa575mpGWSi5mcHKCJ1Hrm44Jzscp3qtNqt7vaBu8pcl+Wr4jzyznKbo8am2R+7rQOy+qmsF76eDLd3cQLvvdO+CbXD2FJLAM0WAJNgAmfvZpqy1KwQhjGh1davLR0+4Af9QVtJzcEsAAAMUyM1Ch/U8O3wmhHDmWZMjf43Tjlh1MBTSD/rhVUG2rgv/63rB/CIirJVxmtU37IsM5YUV6j3iIivNFUjTYP/AFHnsdRY467BsY9qx1ZTwYuqwfCi/jEUvJyokFkWL7MJxUrLLJtgKUjtIH7MHj8v02p7WqxiMsCsAaK2qUKMCqLOY1llWZY5rjjGx/WqL3CfNKakEhUrg7iKS0HS4MqgGhEm6NwmoJzgKpYTxGVMpaqRfyf1LTNlw5mWZHCVglYxLmOrvDIVYFREZPZLU0qNvbyBqLaLKlaWPrVdpnJDTCFT3BGrJwYdiajzWirCObVj/Pq4upzFS6u8zKZPbJxlsmF2lIk6r6ZZVD6V/TPdEAMD9R6dIU3YvYtzL5/2hg/DGMvbGvfZaHX0x3RUeBLtfUoA+c1HP0MOfkxrd94s4CLoCL2Lv8ZiMdDNZC01Xmm2GLydQ93jbOGVrhTKPDUarPGm4BU54BZ+qDscvJ0FpJoct058G4w0zjRGzNKRFqcw/VRWFpD+siCakAhSO9aIEt9S7dLj10lOGFtoMWFCy29aGrXD8APRYZga2ok26DHuiCAnFXr8GqEZk6Zc3TurtztLzQTAoFz9C13RwIgxeow7IsiJqdDj48kw/PAPPn/ChCHJMDFhOHOWJZ3VjCibaXLkO4qlhwj17JvQfaohq3xhmJrD4LMWhuyAPzthCzqtNRFEj3xn4dTj0dxgLDULtwg6/nb7tBAeUmkGXFfo6WAQZkDIwSDksJZQK0PIwSDwYBBsdwQhB1nC7R1UCDkYhBxhkKBrgnlVdM0BBHs78jzfjMypQQkGxVQNdX3TTohY34eV35OMUTx9VN4TYi0a+7Dye1BOi70iKk5jy1NIWuApZPOYmg05HaOEGJNpQYxXNfRh5d+g2iqi6yszTV0sKR4TB0GkHzcyLZL9seKGGK9q6sPKx5m9fYQ/3m4V1D+P4nEyRtoPk7Hi8Yd3kdoqqPGqRj6s/Lxbsm9Q7I/RpiJhsj0qPnwhO2DF4/o+rHwdFBCjmhsX7jKq+Zgos4xX1fZh5e20JjZt0TXxUPvrydb4r/JyWuW/yntpuf8q76Xd/qs8kzXxX+WjjTXzX+XRtNN/lT++nlxX/1WhhORHd6nv4mz8p2vigfTXk+30X+WttNp/lZfTPv9Vvso6+K/ygtTd/qv8m1b5r/Ja2u+/yqtpp/+qkOCP+a+6J/Ot603/37p2WKPrED9I4UAO/QVrcNqv/dwp2/Z5Fw9klv4yi42Efg17sNhg/r00CD8Czk8X6RdqS293EXL/JvRugHWjQEuBt0DAYf0l2G4IIQeDwHNKGXZLYAAdEMzfogOO+t/bkef55mUkADgM/Cle4+dA+6FrGqUMBNLC+fPeDSuGg2XosIZRyqAATw0mlgnKdxxg6vg9zd4RJY2MUoYAY+p9kvoydJgBtFIzo5RBkKj3STXUKAAGFTQ0ShkEZep9Ug11MrV3rXOL+kYpQwCrWwL2DyMI05NYccgIaj54V9soZQBww7HJiw6IO8/vf278p52nyO+ttPoU+b2c9p0iv6+yDqfI76lpXU6R379p1Snyey3tP0V+r6adp8gfEtQ4Rf6gexfn7peN/6x/+ByMsXzt4x4Wdz3BAAA=" alt="ChainOfResponsibilityClasses">
</div>
</div>
<div class="paragraph">
<p>Variations to this pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>we could have an explicit interface, e.g. <code>Lister</code>, to statically type the implementations but because of <em>duck-typing</em> this is optional</p>
</li>
<li>
<p>we could use a chain tree instead of a list, e.g. <code>if (animal.hasBackbone())</code> delegate to <code>VertebrateHandler</code> else delegate to <code>InvertebrateHandler</code></p>
</li>
<li>
<p>we could always pass down the chain even if we processed a request</p>
</li>
<li>
<p>we could decide at some point to not respond and not pass down the chain</p>
</li>
<li>
<p>we could use Groovy’s meta-programming capabilities to pass unknown methods down the chain</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_composite_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_composite_pattern"></a>Composite Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Composite_pattern">Composite Pattern</a> allows you to treat single instances of an object the same way as a group of objects. The pattern is often used with hierarchies of objects. Typically, one or more methods should be callable in the same way for either <em>leaf</em> or <em>composite</em> nodes within the hierarchy. In such a case, composite nodes typically invoke the same named method for each of their children nodes.</p>
</div>
<div class="sect5">
<h6 id="_example_3"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_3"></a>Example</h6>
<div class="paragraph">
<p>Consider this usage of the composite pattern where we want to call <code>toString()</code> on either <code>Leaf</code> or <code>Composite</code> objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRiwIAABXRUJQVlA4TB8IAAAvA0I+AOfBKJIkRbUHLqilrNSTsu9TUQcyyAZjSJIE5Zr0azkW7dAapU0OIRtJKtogHMohntIT/PwH/P/v8Yxn8EAqggARlEBHNDgYDocQghAEhIAQsEy4h2AElk2ED6QiIBCCgGBhtIATEAKLoKG0L/tdoGhte5y4+fRDZmPGKEmbFeG2VmHaZOp2KGnD6P4vDP2yia3VZInoPyzIVus2B4dGtOpcYyx71Lf6J76HbAjBSgjy36ZN4LFlCev1OrEZP8fidaK/X4sC0NDQtjKFiZoZFh/W1LIuTHba7T4zcgvMXmygac8GpQ4x0CS3HRoUsChL5Kbh70nTvjr2k9uq3mnaLbgMp99Oy62mlmtgrfgiN4Cmoe2jceTKuTm2+jWlhLlxryptxXMst42tyLbiYtTMKlEA4Gg4tuKLTSQ7zQY1NTOOXBbp15QUtgsbZ0Wlj8V2bMm5UWjkVneI6Tj/uKrTb1sQoA2Y8bbiqdnby2c7+x13O1SkjgKWNRejlv/1athh9ieT67heTSYhYWdwdg5KRS0LtNX/qLrEsIEIgOYaFKqTCPJQDMmeZcpmVW51O2Mn16ZRaGi34GL40Noua9o1zpA7M/tuejTF3A1nu8UQImPB0G6/sHF7fs2MxQ44Cy5G2a7NHgCYBlZfbTcdmhKJ3DbxZOiw4xy4045b1o4jcuqrO+w4onRCRMmh51Lb6f5zL7VOTVkN7GaM3ZDPTE+3Xk35gogUXzbHNqadkyGiTEWZCYAWuC1/5HVrioYAbCIIT5v4a1EE04ADMA00WGAKCLPAFPAmAIL5eGXhdENpAcC3fhnrAPhZJ7EPrwut2/uOr1s7HA6Nq+NV3SNO/qb0CbI7Bb4zBcNp8xL9RfSzW16XRPTGMB0n2Jvatk610gFMxZfycLg9xg+3JC+Mo2N1WdWvann5+XBH9OFQ/WTkNdGqsbJ+dipNXjK1zH043L01hdRNwL3QHHqe/EzqluihIfqDFdPPtLolstjhaKWJXhlbr/ZVjqlbWjWO2lf1SrO6LSlOa6yaDjUP2urQjGs70Dw0tt+q6YFe1a9qR+2rmkkrNE5w6o7YgNJDp1O3XVpXP2nqcGy4ykbktRAPRgFGfBr6E8FGPgJ/3LE7Cn550lbH+05ODLNrTlf4wUrLQOj+l3vDeTCibrUQrZHPnj8zA+2K10eAj0UDdCPKP+jRPBrHyQ308SWghbyQFwPtjN9H4MPhoJ15icxFzl/Mj1wIujdCyIu/dIccf14EMD+Ziw3aYfmP+eSE4Vuj9Oaov2PBD//xgh/+E4CVEEdbn25Yf5kNKLbswFgA0cRfSwqgsSBCBBhu5PXXIszJZydhLMV265dcaIBoVNiT8gM0OkQImjw0kA8QUHaMPoKA3Cei3AwgL3CD+W9+jB4j0iG+xAzUQyydvGbfJ+LJHFtWwYMRWWfwY+jouYiFBAtkIez1XhBStAUqebVF5TjaofrbtJ+Xhn3/OPl5gyrPnvhAQA95cQxcPTP0aDitFnJu2lvhfP+4C0GPWTYcwQsQzPyA0kI43zSO88lYDccI//5xTFKOARYct3LAowjGqUMXtj/dW6wTIuOw1TMyznsKJrx83on4hOU/Fuf7x2UaXhVOvs9KeFUwxbXFq1ww2ZGB9Q4/C6G0gK+VUPwIFBcQUxUChQW8LYazK/C8GgoJeF8OxY9AKQExeSFQRsD/ijiXglBKomxAODVR/AgUDhDTGQJFQ0i3iWdOwps7LBIQ4E4WPwJlAsQEh0CJEOKRQnkAMdEhUBqEepwwCSBQFEBMeQgUBAh+l4sABL7TZ0QQgd2eABAoASAmQQTyH8Ri3z3fG3rKnO+SjXjsvdc7o7AsfgT9Sq/zBsRk//1uFBICGQ/EtIhAtoPIJCGb5iUSd3BwtgORSkTxI5DfQEyUCOQ2iFU28hrELR8TEsgfkMKMIH82JDAlyB8gEknmbEhgUpA/IIVpQfZsSGFiMBmQNxtSmBoUIQI+kDcbYpkdj1y5kz3heB4N5Gy3mB4NH7YJgLx5xNR82EoQgUz9eGV0j8b42wRAch4Ix1KVTaShDEGhWHBQQHZ+Yb1ep4r1ep0b/NAfuW1OUAIdZQZbmUo5N/TRZBBzQzFm0JWpVLNcYQ8sbH9UbE0mY8wQK1NJO5bb+S82sUxJbsDXZNLKmJtYuyFWptKm1BBfe00nz5nBHmDnLTCLNkOsTCVfb0aOk+f8cOwcjrkbYmUqeZK7HFFOAEA7azIJVP83seYLV6ayI8xPrg17sayLc15ipFWJPKdDRN8bJhwLjZDsK79uP/RnhP+GgnwVRUbLZqpRy5rkUz1o4pWOIeNlM70obVuPxv1835mRnzfVv2ho/3IzM46ULTuR5QbLmmuQGzRRY9RsptadMPTKe0NqoZb1ttk3tKtI3nApctNQ28inukMDfTRDu8hmM9Fc2Le7Udr2a7W8qB+NfNUlRS2I9o0CgAXXIF9RDBkrm+kO7xp7mqqFVbBv1EI+1aqyIrgUe6weDb9Icw3yZvBDFNVsphe1sC3+X89gX91jr972XKX2cgPtSGk1u6fbATPDNSg0UWPcbObFvMS+8WxeIq7ZzAfkU50kbDangfnJby7xaoGjo4JX2UwSni5wdATwNJvpxKsFjo4KXmUzRfi9wNEh43M2k9Pwe4Gj+xtJyWYq8WeBo2ODH9lMF/4ucHRPt2RkM50MucDRA89LxDSbEZybisoCRw89NxXPbE4E85NZwg/9CceKBiHEOhT7SpokGYKyciGsUfWraCZAEwIA" alt="CompositeClasses">
</div>
</div>
<div class="paragraph">
<p>In Java, the <code>Component</code> class is essential as it provides the type used for both leaf and composite nodes. In Groovy, because of duck-typing, we don’t need it for that purpose, however, it can still serve as a useful place to place common behaviour between the leaf and composite nodes.</p>
</div>
<div class="paragraph">
<p>For our purposes, we will assemble the following hierarchy of components.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRpYFAABXRUJQVlA4TIoFAAAvmkFUAOegKJKkZkguogreJxUpSFkFKEg20DSSlMHJSzkpSEUH1VXYACEbSSrCoRzCIDzyKz3Bz3/A/7/jSesgIBxUBAqFhpCx3xp3GDoIiA1rInSxMEXowr5IAoGk/bGXiIgJIFWwUoKSDkFy20iSJM05///m6a7ICMesEf2fAIq2bcWNnMOVmqcOBlUIEWpF//+jVXbammwyRvR/AvxjI4Un6KPsbxvnnP8k/ZbaxdA1hAF8zFClDFUrXWoIQcVHG+fio43z0CW1gy4pVynXXKVcm0Px0ca5+Gjj3ByUoUoZqmzpUjPY69c/fmY72Ou///73338CKzxA6ik8VzyDZ8E778aTbjfeRp+Neyru6WCwcTtzjtg5NiCkCg9AyRTWIETOsQ0lT1iHECasRIkSFiOkTd5IiREWJGQIS1KiJm8m5AfLUtKDlQkxk/dTkoPVCbHB+pSMyTOEyOAdFPKC11DyJc8RsoJXUZKCtxGyJY9SUoI3EiKCd1ICgtcSYiXPU8KBVxOSgZdTMiU1CKnABiiZwB4IeZIylDxgH4QwYCeUMEkpQhCwG0oMsCFCkKQaJQLYFGF+2BZletgZIUNSkjI57I4wNuyPEiApSxgZ9kgZGLZJCI9UpgwLWyVMCpulJEeqE6aEDVNmhD0TUiMXUOaDfROGg51TIiOXEAaD3VPGggMQZoIjUNIiNxHmgWNQGAZOQkmK3EYYBE5DGQMOREiJXEgZAQ5F6B+ORYmI46SE3uFolM7hdIR4OM5L6RpOSGgZzkjJhuPchHbhnJRm4aiETuGwlFg4LoDQJRyY0iOcmRAJxzVQrg/OTbg4ODUKv3iOS/BR9kMc+FM48Cumw36ODvs63W63tnfOacbtdvuvdNanx2xklmQLzO2hT5JsCbIlHIf16TEbmT+tf9TLMQBM1yJDlY0wxZUuSWXSFvfUJ0myb999vBw+ysZwJYqPWoMk65P1SVI+ogxVNsIUV7okqUxxDCeUoUoZqkr3g99XJg3dD3y8t1yKDFBVoLtTDqj4qDVIsj5ZnyRpnbXW8xl8tDEUH22cS5cGgi1hIGitnwCqrkTxUVKeZP0dW4JsCYeSAaoKdHdsAXy8TpkkKVcp1+Lj0KVPPip/4aO0zldCGXwcYPoIX8kWmHUoxUdJeZL1d4qPGgjXGXy0cS4+2jg/QtA6X5A9b0wZfBxg+ghfrVWysV5HGaqUoeoR/yuTPgH4+FLtuaKfO/iorZ4MT3377XlLPPU6bPOl2nNBu//ff//77785FP4GUk/h9wrfTeENU0/hu1BP4SnjRVzhjiM5TKHp+GrMPb6ezZDNkM2QzZDNkMTh27IZshmyGbIZshmyGZI0fHs2QzZDNkM2QzZDNkMSho9lM2QzZDNkM2QzJFr4dDZDNkM2QzZDNkM2QyKFVbIZshmyGfJNQ8KEtbIZshmyGbIZshmyGRIirJnNkM2QzZDNkM2QzZDwYO1shmyGo2U4WoajZTjeNbhTpGU4WoajZThahqNlOFqG492CO1VahqNlOFqGo2U4WoajZTjeJbhTpmU4WoajZThahqMZcOCvDO4sdNh/27jdbleJA0+QDvvbxjnnrwvWp8dsZJYGgElaobaEPkkafJSNofhoY3jzZaiyEaa40qU7S5D09is+ag2SrE/WJ0kDQJWkteoFsj49ZiOzNABMkqxPZ5YBqgp093yU1lk2znrF+iRp8FE2BtnSnVrxUVKeZP2fsXHWy5ShykaY4kqX7izB+l/6U1MGHweYPsIdAB8zQHiNio9agyTrk/VJ0gBQJdmJ7fyFyABVBbp7Pkrr3AKKj5LyJOuvBBt8jZTBxwGmj3AHwMdz2/mrsPMvfGzwjbfzf//9++/HpcIDpJ7Cv7kVXkAET+E/dnzNBg==" alt="CompositeComponents">
</div>
</div>
<div class="paragraph">
<p>Here is the code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class Component {
    def name
    def toString(indent) {
        ("-" * indent) + name
    }
}

class Composite extends Component {
    private children = []
    def toString(indent) {
        def s = super.toString(indent)
        children.each { child -&gt;
            s += "\\n" + child.toString(indent + 1)
        }
        s
    }
    def leftShift(component) {
        children &lt;&lt; component
    }
}

class Leaf extends Component { }

def root = new Composite(name: "root")
root &lt;&lt; new Leaf(name: "leaf A")
def comp = new Composite(name: "comp B")
root &lt;&lt; comp
root &lt;&lt; new Leaf(name: "leaf C")
comp &lt;&lt; new Leaf(name: "leaf B1")
comp &lt;&lt; new Leaf(name: "leaf B2")
println root.toString(0)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the resulting output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root
-leaf A
-comp B
--leaf B1
--leaf B2
-leaf C</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_decorator_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorator_pattern"></a>Decorator Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Decorator_pattern">Decorator Pattern</a> provides a mechanism to embellish the behaviour of an object without changing its essential interface. A decorated object should be able to be substituted wherever the original (non-decorated) object was expected. Decoration typically does not involve modifying the source code of the original object and decorators should be able to be combined in flexible ways to produce objects with several embellishments.</p>
</div>
<div class="sect5">
<h6 id="_traditional_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_traditional_example"></a>Traditional Example</h6>
<div class="paragraph">
<p>Suppose we have the following <code>Logger</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Logger {
    def log(String message) {
        println message
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There might be times when it is useful to timestamp a log message, or times when we might want to change the case of the message. We could try to build all of this functionality into our <code>Logger</code> class. If we did that, the <code>Logger</code> class would start to be very complex. Also, everyone would obtain all of features even when they might not want a small subset of the features. Finally, feature interaction would become quite difficult to control.</p>
</div>
<div class="paragraph">
<p>To overcome these drawbacks, we instead define two decorator classes. Uses of the <code>Logger</code> class are free to embellish their base logger with zero or more decorator classes in whatever order they desire. The classes look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TimeStampingLogger extends Logger {
    private Logger logger
    TimeStampingLogger(logger) {
        this.logger = logger
    }
    def log(String message) {
        def now = Calendar.instance
        logger.log("$now.time: $message")
    }
}

class UpperLogger extends Logger {
    private Logger logger
    UpperLogger(logger) {
        this.logger = logger
    }
    def log(String message) {
        logger.log(message.toUpperCase())
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the decorators like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def logger = new UpperLogger(new TimeStampingLogger(new Logger()))
logger.log("G'day Mate")
// =&gt; Tue May 22 07:13:50 EST 2007: G'DAY MATE</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see that we embellish the logger behaviour with both decorators. Because of the order we chose to apply the decorators, our log message comes out capitalised and the timestamp is in normal case. If we swap the order around, let’s see what happens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">logger = new TimeStampingLogger(new UpperLogger(new Logger()))
logger.log('Hi There')
// =&gt; TUE MAY 22 07:13:50 EST 2007: HI THERE</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the timestamp itself has also been changed to be uppercase.</p>
</div>
</div>
<div class="sect5">
<h6 id="_a_touch_of_dynamic_behaviour"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_a_touch_of_dynamic_behaviour"></a>A touch of dynamic behaviour</h6>
<div class="paragraph">
<p>Our previous decorators were specific to <code>Logger</code> objects. We can use Groovy’s Meta-Object Programming capabilities to create a decorator which is far more general purpose in nature. Consider this class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class GenericLowerDecorator {
    private delegate
    GenericLowerDecorator(delegate) {
        this.delegate = delegate
    }
    def invokeMethod(String name, args) {
        def newargs = args.collect { arg -&gt;
            if (arg instanceof String) {
                return arg.toLowerCase()
            } else {
                return arg
            }
        }
        delegate.invokeMethod(name, newargs)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It takes any class and decorates it so that any <code>String</code> method parameter will automatically be changed to lower case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">logger = new GenericLowerDecorator(new TimeStampingLogger(new Logger()))
logger.log('IMPORTANT Message')
// =&gt; Tue May 22 07:27:18 EST 2007: important message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just be careful with ordering here. The original decorators were restricted to decorating <code>Logger</code> objects. This decorator works with any object type, so we can’t swap the ordering around, i.e. this won’t work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Can't mix and match Interface-Oriented and Generic decorators
// logger = new TimeStampingLogger(new GenericLowerDecorator(new Logger()))</pre>
</div>
</div>
<div class="paragraph">
<p>We could overcome this limitation be generating an appropriate Proxy type at runtime but we won’t complicate the example here.</p>
</div>
</div>
<div class="sect5">
<h6 id="_runtime_behaviour_embellishment"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_runtime_behaviour_embellishment"></a>Runtime behaviour embellishment</h6>
<div class="paragraph">
<p>You can also consider using the <code>ExpandoMetaClass</code> from Groovy 1.1 to dynamically embellish a class with behaviour. This isn’t the normal style of usage of the decorator pattern (it certainly isn’t nearly as flexible) but may help you to achieve similar results in some cases without creating a new class.</p>
</div>
<div class="paragraph">
<p>Here’s what the code looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// current mechanism to enable ExpandoMetaClass
GroovySystem.metaClassRegistry.metaClassCreationHandle = new ExpandoMetaClassCreationHandle()

def logger = new Logger()
logger.metaClass.log = { String m -&gt; println 'message: ' + m.toUpperCase() }
logger.log('x')
// =&gt; message: X</code></pre>
</div>
</div>
<div class="paragraph">
<p>This achieves a similar result to applying a single decorator but we have no way to easily apply and remove embellishments on the fly.</p>
</div>
</div>
<div class="sect5">
<h6 id="_more_dynamic_decorating"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_more_dynamic_decorating"></a>More dynamic decorating</h6>
<div class="paragraph">
<p>Suppose we have a calculator class (Actually any class would do).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Calc {
    def add(a, b) { a + b }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We might be interested in observing usage of the class over time. If it is buried deep within our codebase, it might be hard to determine when it is being called and with what parameters. Also, it might be hard to know if it is performing well. We can easily make a generic tracing decorator that prints out tracing information whenever any method on the <code>Calc</code> class is called and also provide timing information about how long it took to execute. Here is the code for the tracing decorator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TracingDecorator {
    private delegate
    TracingDecorator(delegate) {
        this.delegate = delegate
    }
    def invokeMethod(String name, args) {
        println "Calling $name$args"
        def before = System.currentTimeMillis()
        def result = delegate.invokeMethod(name, args)
        println "Got $result in ${System.currentTimeMillis()-before} ms"
        result
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is how to use the class in a script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def tracedCalc = new TracingDecorator(new Calc())
assert 15 == tracedCalc.add(3, 12)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is what you would see after running this script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Calling add{3, 12}
Got 15 in 31 ms</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_decorating_with_an_interceptor"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_an_interceptor"></a>Decorating with an Interceptor</h6>
<div class="paragraph">
<p>The above timing example hooks into the lifecycle of Groovy objects (via <code>invokeMethod</code>). This is such an important style performing meta-programming that Groovy has special support for this style of decorating using <em>interceptors</em>.</p>
</div>
<div class="paragraph">
<p>Groovy even comes with a built-in <code>TracingInterceptor</code>. We can extend the built-in class like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class TimingInterceptor extends TracingInterceptor {
    private beforeTime
    def beforeInvoke(object, String methodName, Object[] arguments) {
        super.beforeInvoke(object, methodName, arguments)
        beforeTime = System.currentTimeMillis()
    }
    Object afterInvoke(Object object, String methodName, Object[] arguments, Object result) {
        super.afterInvoke(object, methodName, arguments, result)
        def duration = System.currentTimeMillis() - beforeTime
        writer.write("Duration: $duration ms\\n")
        writer.flush()
        result
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of using this new class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def proxy = ProxyMetaClass.getInstance(Calc)
proxy.interceptor = new TimingInterceptor()
proxy.use {
    assert 7 == new Calc().add(1, 6)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>before Calc.ctor()
after  Calc.ctor()
Duration: 0 ms
before Calc.add(java.lang.Integer, java.lang.Integer)
after  Calc.add(java.lang.Integer, java.lang.Integer)
Duration: 2 ms</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_decorating_with_java_lang_reflect_proxy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_java_lang_reflect_proxy"></a>Decorating with java.lang.reflect.Proxy</h6>
<div class="paragraph">
<p>If you are trying to decorate an object (i.e. just a particular instance of the class, not the class generally), then you can use Java’s <code>java.lang.reflect.Proxy</code>. Groovy makes working with this easier than just Java. Below is a code sample taken out of a grails project that wraps a <code>java.sql.Connection</code> so that it’s close method is a no-op:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">protected Sql getGroovySql() {
    final Connection con = session.connection()
    def invoker = { object, method, args -&gt;
        if (method.name == "close") {
            log.debug("ignoring call to Connection.close() for use by groovy.sql.Sql")
        } else {
            log.trace("delegating $method")
            return con.invokeMethod(method.name, args)
        }
    } as InvocationHandler;
    def proxy = Proxy.newProxyInstance( getClass().getClassLoader(), [Connection] as Class[], invoker )
    return new Sql(proxy)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there were many methods to intercept, then this approach could be modified to look up closure in a map by method name and invoke it.</p>
</div>
</div>
<div class="sect5">
<h6 id="_decorating_with_spring"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_decorating_with_spring"></a>Decorating with Spring</h6>
<div class="paragraph">
<p>The <a href="http://www.springframework.org/">Spring Framework</a> allows decorators to be applied with <em>interceptors</em> (you may have heard the terms <em>advice</em> or <em>aspect</em>). You can leverage this mechanism from Groovy as well.</p>
</div>
<div class="paragraph">
<p>First define a class that you want to decorate (we’ll also use an interface as is normal Spring practice):</p>
</div>
<div class="paragraph">
<p>Here’s the interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface Calc {
    def add(a, b)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here’s the class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class CalcImpl implements Calc {
    def add(a, b) { a + b }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we define our wiring in a file called <code>beans.xml</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd"&gt;

    &lt;bean id="performanceInterceptor" autowire="no"
          class="org.springframework.aop.interceptor.PerformanceMonitorInterceptor"&gt;
        &lt;property name="loggerName" value="performance"/&gt;
    &lt;/bean&gt;
    &lt;bean id="calc" class="util.CalcImpl"/&gt;
    &lt;bean class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"&gt;
        &lt;property name="beanNames" value="calc"/&gt;
        &lt;property name="interceptorNames" value="performanceInterceptor"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, our script looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.springframework:spring-context:3.2.2.RELEASE')
import org.springframework.context.support.ClassPathXmlApplicationContext

def ctx = new ClassPathXmlApplicationContext('beans.xml')
def calc = ctx.getBean('calc')
println calc.add(3, 25)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And when we run it, we see the results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>21/05/2007 23:02:35 org.springframework.aop.interceptor.PerformanceMonitorInterceptor invokeUnderTrace
FINEST: StopWatch 'util.Calc.add': running time (millis) = 16</pre>
</div>
</div>
<div class="paragraph">
<p>You may have to adjust your <code>logging.properties</code> file for messages at log level <code>FINEST</code> to be displayed.</p>
</div>
</div>
<div class="sect5">
<h6 id="_asynchronous_decorators_using_gpars"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_asynchronous_decorators_using_gpars"></a>Asynchronous Decorators using GPars</h6>
<div class="paragraph">
<p>Using the example code in <a href="http://www.cs.iastate.edu/~design/projects/panini/docs/starting.shtml">Panini</a> for inspiration. Here is a Groovy version that avoids using an <code>@AddedBehavior</code> annotation at the expense of not having as general an algorithm for selecting the methods to decorate. This isn’t a limitation of the particular approach chosen but just a simplification for illustrative purposes (but don’t assume below is an exact equivalent).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab('org.codehaus.gpars:gpars:0.10')
import static groovyx.gpars.GParsPool.withPool

interface Document {
    void print()
    String getText()
}

class DocumentImpl implements Document {
    def document
    void print() { println document }
    String getText() { document }
}

def words(String text) {
    text.replaceAll('[^a-zA-Z]', ' ').trim().split("\\\\s+")*.toLowerCase()
}

def avgWordLength = {
    def words = words(it.text)
    sprintf "Avg Word Length: %4.2f", words*.size().sum() / words.size()
}
def modeWord = {
    def wordGroups = words(it.text).groupBy {it}.collectEntries { k, v -&gt; [k, v.size()] }
    def maxSize = wordGroups*.value.max()
    def maxWords = wordGroups.findAll { it.value == maxSize }
    "Mode Word(s): ${maxWords*.key.join(', ')} ($maxSize occurrences)"
}
def wordCount = { d -&gt; "Word Count: " + words(d.text).size() }

def asyncDecorator(Document d, Closure c) {
    ProxyGenerator.INSTANCE.instantiateDelegate([print: {
        withPool {
            def result = c.callAsync(d)
            d.print()
            println result.get()
        }
    }], [Document], d)
}

Document d = asyncDecorator(asyncDecorator(asyncDecorator(
        new DocumentImpl(document:"This is the file with the words in it\\n\\t\\nDo you see the words?\\n"),
//        new DocumentImpl(document: new File('AsyncDecorator.groovy').text),
        wordCount), modeWord), avgWordLength)
d.print()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delegation_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_delegation_pattern"></a>Delegation Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Delegation_pattern">Delegation Pattern</a> is a technique where an object’s behavior (public methods) is implemented by delegating responsibility to one or more associated objects.</p>
</div>
<div class="paragraph">
<p>Groovy allows the traditional style of applying the delegation pattern, e.g. see <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_replace_inheritance_with_delegation">Replace Inheritance with Delegation</a>.</p>
</div>
<div class="sect5">
<h6 id="_implement_delegation_pattern_using_expandometaclass"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implement_delegation_pattern_using_expandometaclass"></a>Implement Delegation Pattern using ExpandoMetaClass</h6>
<div class="paragraph">
<p>The <a href="https://docs.groovy-lang.org/3.0.0-SNAPSHOT/html/gapi/index.html?groovy/lang/ExpandoMetaClass.html">groovy.lang.ExpandoMetaClass</a> allows usage of this pattern to be encapsulated in a library. This allows Groovy to emulate similar libraries available for the Ruby language.</p>
</div>
<div class="paragraph">
<p>Consider the following library class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Delegator {
    private targetClass
    private delegate
    Delegator(targetClass, delegate) {
        this.targetClass = targetClass
        this.delegate = delegate
    }
    def delegate(String methodName) {
        delegate(methodName, methodName)
    }
    def delegate(String methodName, String asMethodName) {
        targetClass.metaClass."$asMethodName" = delegate.&amp;"$methodName"
    }
    def delegateAll(String[] names) {
        names.each { delegate(it) }
    }
    def delegateAll(Map names) {
        names.each { k, v -&gt; delegate(k, v) }
    }
    def delegateAll() {
        delegate.class.methods*.name.each { delegate(it) }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this in your classpath, you can now apply the delegation pattern dynamically as shown in the following examples. First, consider we have the following classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
}

class MortgageLender {
    def borrowAmount(amount) {
       "borrow \\$$amount"
    }
    def borrowFor(thing) {
       "buy \\$thing"
    }
}

def lender = new MortgageLender()

def delegator = new Delegator(Person, lender)</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can now use the <em>delegator</em> to automatically borrow methods from the <em>lender</em> object to extend the <em>Person</em> class. We can borrow the methods as is or with a rename:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">delegator.delegate 'borrowFor'
delegator.delegate 'borrowAmount', 'getMoney'

def p = new Person()

println p.borrowFor('present')   // =&gt; buy present
println p.getMoney(50)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first line above, adds the <em>borrowFor</em> method to the <em>Person</em> class by delegating to the <em>lender</em> object. The second line adds a <em>getMoney</em> method to the <em>Person</em> class by delegating to the <em>lender</em> object’s <em>borrowAmount</em> method.</p>
</div>
<div class="paragraph">
<p>Alternatively, we could borrow multiple methods like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">delegator.delegateAll 'borrowFor', 'borrowAmount'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which adds these two methods to the <em>Person</em> class.</p>
</div>
<div class="paragraph">
<p>Or if we want all the methods, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">delegator.delegateAll()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will make all the methods in the delegate object available in the <em>Person</em> class.</p>
</div>
<div class="paragraph">
<p>Alternatively, we can use a map notation to rename multiple methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">delegator.delegateAll borrowAmount:'getMoney', borrowFor:'getThing'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_implement_delegation_pattern_using_delegate_annotation"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_implement_delegation_pattern_using_delegate_annotation"></a>Implement Delegation Pattern using @Delegate annotation</h6>
<div class="paragraph">
<p>Since version 1.6 you can use the built-in delegation mechanism which is based on AST transformation.</p>
</div>
<div class="paragraph">
<p>This make delegation even easier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Person {
    def name
    @Delegate MortgageLender mortgageLender = new MortgageLender()
}

class MortgageLender {
    def borrowAmount(amount) {
       "borrow \\$$amount"
    }
    def borrowFor(thing) {
       "buy $thing"
    }
}

def p = new Person()

assert "buy present" == p.borrowFor('present')
assert "borrow \\$50" == p.borrowAmount(50)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_flyweight_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_flyweight_pattern"></a>Flyweight Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Flyweight_pattern">Flyweight Pattern</a> is a pattern for greatly reducing memory requirements by not requiring that heavy-weight objects be created in large numbers when dealing with systems that contain many things that are mostly the same. If for instance, a document was modelled using a complex character class that knew about unicode, fonts, positioning, etc., then the memory requirements could be quite large for large documents if each physical character in the document required its own character class instance. Instead, characters themselves might be kept within Strings and we might have one character class (or a small number such as one character class for each font type) that knew the specifics of how to deal with characters.</p>
</div>
<div class="paragraph">
<p>In such circumstances, we call the state that is shared with many other things (e.g. the character type) <em>instrinsic</em> state. It is captured within the heavy-weight class. The state which distinguishes the physical character (maybe just its ASCII code or Unicode) is called its <em>extrinsic</em> state.</p>
</div>
<div class="sect5">
<h6 id="_example_4"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_4"></a>Example</h6>
<div class="paragraph">
<p>First we are going to model some complex aircraft (the first being a hoax competitor of the second - not that is relevant to the example).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Boeing797 {
    def wingspan = '80.8 m'
    def capacity = 1000
    def speed = '1046 km/h'
    def range = '14400 km'
    // ...
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Groovy Language Documentation_files/xb797-hoax.jpg.pagespeed.ic.XiAkQPmrbh.webp" alt="b797 hoax">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Airbus380 {
    def wingspan = '79.8 m'
    def capacity = 555
    def speed = '912 km/h'
    def range = '10370 km'
    // ...
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Groovy Language Documentation_files/xa380.jpg.pagespeed.ic.EJTvtVEC-6.webp" alt="a380">
</div>
</div>
<div class="paragraph">
<p>If we want to model our fleet, our first attempt might involve using many instances of these heavy-weight objects. It turns out though that only a few small pieces of state (our extrinsic state) change for each aircraft, so we will have singletons for the heavy-weight objects and capture the extrinsic state (bought date and asset number in the code below) separately.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class FlyweightFactory {
    static instances = [797: new Boeing797(), 380: new Airbus380()]
}

class Aircraft {
    private type         // instrinsic state
    private assetNumber  // extrinsic state
    private bought       // extrinsic state
    Aircraft(typeCode, assetNumber, bought) {
        type = FlyweightFactory.instances[typeCode]
        this.assetNumber = assetNumber
        this.bought = bought
    }
    def describe() {
        println """
        Asset Number: $assetNumber
        Capacity: $type.capacity people
        Speed: $type.speed
        Range: $type.range
        Bought: $bought
        """
    }
}

def fleet = [
    new Aircraft(380, 1001, '10-May-2007'),
    new Aircraft(380, 1002, '10-Nov-2007'),
    new Aircraft(797, 1003, '10-May-2008'),
    new Aircraft(797, 1004, '10-Nov-2008')
]

fleet.each { p -&gt; p.describe() }</code></pre>
</div>
</div>
<div class="paragraph">
<p>So here, even if our fleet contained hundreds of planes, we would only have one heavy-weight object for each type of aircraft.</p>
</div>
<div class="paragraph">
<p>As a further efficiency measure, we might use lazy creation of the flyweight objects rather than create the initial map up front as in the above example.</p>
</div>
<div class="paragraph">
<p>Running this script results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Asset Number: 1001
Capacity: 555 people
Speed: 912 km/h
Range: 10370 km
Bought: 10-May-2007

Asset Number: 1002
Capacity: 555 people
Speed: 912 km/h
Range: 10370 km
Bought: 10-Nov-2007

Asset Number: 1003
Capacity: 1000 people
Speed: 1046 km/h
Range: 14400 km
Bought: 10-May-2008

Asset Number: 1004
Capacity: 1000 people
Speed: 1046 km/h
Range: 14400 km
Bought: 10-Nov-2008</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_iterator_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_iterator_pattern"></a>Iterator Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Iterator_pattern">Iterator Pattern</a> allows sequential access to the elements of an aggregate object without exposing its underlying representation.</p>
</div>
<div class="paragraph">
<p>Groovy has the iterator pattern built right in to many of its closure operators, e.g. <code>each</code> and <code>eachWithIndex</code> as well as the <code>for .. in</code> loop.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def printAll(container) {
    for (item in container) { println item }
}

def numbers = [ 1,2,3,4 ]
def months = [ Mar:31, Apr:30, May:31 ]
def colors = [ java.awt.Color.BLACK, java.awt.Color.WHITE ]
printAll numbers
printAll months
printAll colors</code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1
2
3
4
May=31
Mar=31
Apr=30
java.awt.Color[r=0,g=0,b=0]
java.awt.Color[r=255,g=255,b=255]</pre>
</div>
</div>
<div class="paragraph">
<p>Another example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">colors.eachWithIndex { item, pos -&gt;
    println "Position $pos contains '$item'"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Position 0 contains 'java.awt.Color[r=0,g=0,b=0]'
Position 1 contains 'java.awt.Color[r=255,g=255,b=255]'</pre>
</div>
</div>
<div class="paragraph">
<p>The iterator pattern is also built in to other special operators such as the <code>eachByte</code>, <code>eachFile</code>, <code>eachDir</code>, <code>eachLine</code>, <code>eachObject</code>, <code>eachMatch</code> operators for working with streams, URLs, files, directories and regular expressions matches.</p>
</div>
</div>
<div class="sect4">
<h5 id="_loan_my_resource_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_loan_my_resource_pattern"></a>Loan my Resource Pattern</h5>
<div class="paragraph">
<p>The <a href="https://wiki.scala-lang.org/display/SYGN/Loan">Loan my Resource</a> pattern ensures that a resource is deterministically disposed of once it goes out of scope.</p>
</div>
<div class="paragraph">
<p>This pattern is built in to many Groovy helper methods. You should consider using it yourself if you need to work with resources in ways beyond what Groovy supports.</p>
</div>
<div class="sect5">
<h6 id="_example_5"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_5"></a>Example</h6>
<div class="paragraph">
<p>Consider the following code which works with a file. First we might write some line to the file and then print its size:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def f = new File('junk.txt')
f.withPrintWriter { pw -&gt;
    pw.println(new Date())
    pw.println(this.class.name)
}
println f.size()
// =&gt; 42</code></pre>
</div>
</div>
<div class="paragraph">
<p>We could also read back the contents of the file a line at a time and print each line out:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">f.eachLine { line -&gt;
    println line
}
// =&gt;
// Mon Jun 18 22:38:17 EST 2007
// RunPattern</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that normal Java <code>Reader</code> and <code>PrintWriter</code> objects were used under the covers by Groovy but the code writer did not have to worry about explicitly creating or closing those resources. The built-in Groovy methods loan the respective reader or writer to the closure code and then tidy up after themselves. So, you are using this pattern without having to do any work.</p>
</div>
<div class="paragraph">
<p>Sometimes however, you wish to do things slightly differently to what you can get for free using Groovy’s built-in mechanisms. You should consider utilising this pattern within your own resource-handling operations.</p>
</div>
<div class="paragraph">
<p>Consider how you might process the list of words on each line within the file. We could actually do this one too using Groovy’s built-in functions, but bear with us and assume we have to do some resource handling ourselves. Here is how we might write the code without using this pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def reader = f.newReader()
reader.splitEachLine(' ') { wordList -&gt;
    println wordList
}
reader.close()
// =&gt;
// [ "Mon", "Jun", "18", "22:38:17", "EST", "2007" ]
// [ "RunPattern" ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we now have an explicit call to <code>close()</code> in our code. If we didn’t code it just right (here we didn’t surround the code in a <code>try …​ finally</code> block, we run the risk of leaving the file handle open.</p>
</div>
<div class="paragraph">
<p>Let’s now apply the loan pattern. First, we’ll write a helper method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def withListOfWordsForEachLine(File f, Closure c) {
    def r = f.newReader()
    try {
        r.splitEachLine(' ', c)
    } finally {
        r?.close()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we can re-write our code as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">withListOfWordsForEachLine(f) { wordList -&gt;
    println wordList
}
// =&gt;
// [ "Mon", "Jun", "18", "22:38:17", "EST", "2007" ]
// [ "RunPattern" ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is much simpler and has removed the explicit <code>close()</code>. This is now catered for in one spot so we can apply the appropriate level of testing or reviewing in just one spot to be sure we have no problems.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_null_object_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_null_object_pattern"></a>Null Object Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Null_Object_pattern">Null Object Pattern</a> involves using a special object place-marker object representing null. Typically, if you have a reference to null, you can’t invoke <code>reference.field</code> or <code>reference.method()</code> You receive the dreaded <code>NullPointerException</code>. The null object pattern uses a special object representing null, instead of using an actual <code>null</code>. This allows you to invoke field and method references on the null object. The result of using the null object should semantically be equivalent to <em>doing nothing</em>.</p>
</div>
<div class="sect5">
<h6 id="_simple_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_example"></a>Simple Example</h6>
<div class="paragraph">
<p>Suppose we have the following system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Job {
    def salary
}

class Person {
    def name
    def Job job
}

def people = [
    new Person(name: 'Tom', job: new Job(salary: 1000)),
    new Person(name: 'Dick', job: new Job(salary: 1200)),
]

def biggestSalary = people.collect { p -&gt; p.job.salary }.max()
println biggestSalary</code></pre>
</div>
</div>
<div class="paragraph">
<p>When run, this prints out <code>1200</code>. Suppose now that we now invoke:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">people &lt;&lt; new Person(name: 'Harry')</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we now try to calculate <code>biggestSalary</code> again, we receive a null pointer exception.</p>
</div>
<div class="paragraph">
<p>To overcome this problem, we can introduce a <code>NullJob</code> class and change the above statement to become:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class NullJob extends Job { def salary = 0 }

people &lt;&lt; new Person(name: 'Harry', job: new NullJob())
biggestSalary = people.collect { p -&gt; p.job.salary }.max()
println biggestSalary</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works as we require but it’s not always the best way to do this with Groovy. Groovy’s safe-dereference operator (<code>?.</code>) operator and null aware closures often allow Groovy to avoid the need to create a special null object or null class. This is illustrated by examining a groovier way to write the above example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">people &lt;&lt; new Person(name:'Harry')
biggestSalary = people.collect { p -&gt; p.job?.salary }.max()
println biggestSalary</code></pre>
</div>
</div>
<div class="paragraph">
<p>Two things are going on here to allow this to work. First of all, <code>max()</code> is <em>'null aware'</em> so that [300, null, 400].max() == 400. Secondly, with the <code>?.</code> operator, an expression like <code>p?.job?.salary</code> will be equal to null if <code>salary</code> is equal to null, or if <code>job</code> is equal ` null or if <code>p</code> is equal to null. You don’t need to code a complex nested if ... then ... else to avoid a <code>NullPointerException</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_tree_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_tree_example"></a>Tree Example</h6>
<div class="paragraph">
<p>Consider the following example where we want to calculate size, cumulative sum and cumulative product of all the values in a tree structure.</p>
</div>
<div class="paragraph">
<p>Our first attempt has special logic within the calculation methods to handle null values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class NullHandlingTree {
    def left, right, value

    def size() {
        1 + (left ? left.size() : 0) + (right ? right.size() : 0)
    }

    def sum() {
       value + (left ? left.sum() : 0) + (right ? right.sum() : 0)
    }

    def product() {
       value * (left ? left.product() : 1) * (right ? right.product() : 1)
    }
}

def root = new NullHandlingTree(
    value: 2,
    left: new NullHandlingTree(
        value: 3,
        right: new NullHandlingTree(value: 4),
        left: new NullHandlingTree(value: 5)
    )
)

println root.size()
println root.sum()
println root.product()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we introduce the null object pattern (here by defining the <code>NullTree</code> class), we can now simplify the logic in the <code>size()</code>, <code>sum()</code> and`product()` methods. These methods now much more clearly represent the logic for the normal (and now universal) case. Each of the methods within <code>NullTree</code> returns a value which represents doing nothing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Tree {
    def left = new NullTree(), right = new NullTree(), value

    def size() {
        1 + left.size() + right.size()
    }

    def sum() {
       value + left.sum() + right.sum()
    }

    def product() {
       value * left.product() * right.product()
    }
}

class NullTree {
    def size() { 0 }
    def sum() { 0 }
    def product() { 1 }
}

def root = new Tree(
    value: 2,
    left: new Tree(
        value: 3,
        right: new Tree(value: 4),
        left: new Tree(value: 5)
    )
)

println root.size()
println root.sum()
println root.product()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of running either of these examples is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>4
14
120</pre>
</div>
</div>
<div class="paragraph">
<p>Note: a slight variation with the null object pattern is to combine it with the singleton pattern. So, we wouldn’t write new NullTree() wherever we needed a null object as shown above. Instead we would have a single null object instance which we would place within our data structures as needed.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pimp_my_library_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_pimp_my_library_pattern"></a>Pimp my Library Pattern</h5>
<div class="paragraph">
<p>The <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=179766">Pimp my Library</a> Pattern suggests an approach for extending a library that nearly does everything that you need but just needs a little more. It assumes that you do not have source code for the library of interest.</p>
</div>
<div class="sect5">
<h6 id="_example_6"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_6"></a>Example</h6>
<div class="paragraph">
<p>Suppose we want to make use of the built-in Integer facilities in Groovy (which build upon the features already in Java). Those libraries have nearly all of the features we want but not quite everything. We may not have all of the source code to the Groovy and Java libraries so we can’t just change the library. Instead we augment the library. Groovy has a number of ways to do this. One way is to use a Category.</p>
</div>
<div class="paragraph">
<p>First, we’ll define a suitable category.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class EnhancedInteger {
    static boolean greaterThanAll(Integer self, Object[] others) {
        greaterThanAll(self, others)
    }
    static boolean greaterThanAll(Integer self, others) {
        others.every { self &gt; it }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We have added two methods which augment the Integer methods by providing the <code>greaterThanAll</code> method. Categories follow conventions where they are defined as static methods with a special first parameter representing the class we wish to extend. The greaterThanAll(Integer self, others) static method becomes the <code>greaterThanAll(other)</code> instance method.</p>
</div>
<div class="paragraph">
<p>We defined two versions of <code>greaterThanAll</code>. One which works for collections, ranges etc. The other which works with a variable number of <code>Integer</code> arguments.</p>
</div>
<div class="paragraph">
<p>Here is how you would use the category.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">use(EnhancedInteger) {
    assert 4.greaterThanAll(1, 2, 3)
    assert !5.greaterThanAll(2, 4, 6)
    assert 5.greaterThanAll(-4..4)
    assert 5.greaterThanAll([])
    assert !5.greaterThanAll([4, 5])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, using this technique you can effectively enrich an original class without having access to its source code. Moreover, you can apply different enrichments in different parts of the system as well as work with un-enriched objects if we need to.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_proxy_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_proxy_pattern"></a>Proxy Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Proxy_pattern">Proxy Pattern</a> allows one object to act as a pretend replacement for some other object. In general, whoever is using the proxy, doesn’t realise that they are not using the real thing. The pattern is useful when the real object is hard to create or use: it may exist over a network connection, or be a large object in memory, or be a file, database or some other resource that is expensive or impossible to duplicate.</p>
</div>
<div class="sect5">
<h6 id="_example_7"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_7"></a>Example</h6>
<div class="paragraph">
<p>One common use of the proxy pattern is when talking to remote objects in a different JVM. Here is the client code for creating a proxy that talks via sockets to a server object as well as an example usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class AccumulatorProxy {
    def accumulate(args) {
        def result
        def s = new Socket("localhost", 54321)
        s.withObjectStreams { ois, oos -&gt;
            oos &lt;&lt; args
            result = ois.readObject()
        }
        s.close()
        return result
    }
}

println new AccumulatorProxy().accumulate([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
// =&gt; 55</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is what your server code might look like (start this first):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Accumulator {
    def accumulate(args) {
        args.inject(0) { total, arg -&gt; total += arg }
    }
}

def port = 54321
def accumulator = new Accumulator()
def server = new ServerSocket(port)
println "Starting server on port $port"
while(true) {
    server.accept() { socket -&gt;
        socket.withObjectStreams { ois, oos -&gt;
            def args = ois.readObject()
            oos &lt;&lt; accumulator.accumulate(args)
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_singleton_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_singleton_pattern"></a>Singleton Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Singleton_pattern">Singleton Pattern</a> is used to make sure only one object of a particular class is ever created. This can be useful when when exactly one object is needed to coordinate actions across a system; perhaps for efficiency where creating lots of identical objects would be wasteful, perhaps because a particular algorithm needing a single point of control is required or perhaps when an object is used to interact with a non-shareable resource.</p>
</div>
<div class="paragraph">
<p>Weaknesses of the Singleton pattern include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It can reduce reuse. For instance, there are issues if you want to use inheritance with Singletons. If <code>SingletonB</code> extends <code>SingletonA</code>, should there be exactly (at most) one instance of each or should the creation of an object from one of the classes prohibit creation from the other. Also, if you decide both classes can have an instance, how do you override the <code>getInstance()</code> method which is static?</p>
</li>
<li>
<p>It is also hard to test singletons in general because of the static methods but Groovy can support that if required.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_example_the_classic_java_singleton"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_the_classic_java_singleton"></a>Example: The Classic Java Singleton</h6>
<div class="paragraph">
<p>Suppose we wish to create a class for collecting votes. Because getting the right number of votes may be very important, we decide to use the singleton pattern. There will only ever be one <code>VoteCollector</code> object, so it makes it easier for us to reason about that objects creation and use.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class VoteCollector {
    def votes = 0
    private static final INSTANCE = new VoteCollector()
    static getInstance() { return INSTANCE }
    private VoteCollector() { }
    def display() { println "Collector:${hashCode()}, Votes:$votes" }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some points of interest about this code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it has a private constructor, so no <code>VoteCollector</code> objects can be created in our system (except for the <code>INSTANCE</code> we create)</p>
</li>
<li>
<p>the <code>INSTANCE</code> is also private, so it can’t be changed once set</p>
</li>
<li>
<p>we haven’t made the updating of votes thread-safe at this point (it doesn’t add to this example)</p>
</li>
<li>
<p>the vote collector instance is not lazily created (if we never reference the class, the instance won’t be created; however, as soon as we reference the class, the instance will be created even if not needed initially)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can use this singleton class in some script code as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def collector = VoteCollector.instance
collector.display()
collector.votes++
collector = null

Thread.start{
    def collector2 = VoteCollector.instance
    collector2.display()
    collector2.votes++
    collector2 = null
}.join()

def collector3 = VoteCollector.instance
collector3.display()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we used the instance 3 times. The second usage was even in a different thread (but don’t try this in a scenario with a new class loader).</p>
</div>
<div class="paragraph">
<p>Running this script yields (your hashcode value will vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Collector:15959960, Votes:0
Collector:15959960, Votes:1
Collector:15959960, Votes:2</pre>
</div>
</div>
<div class="paragraph">
<p>Variations to this pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To support lazy-loading and multi-threading, we could just use the <code>synchronized</code> keyword with the <code>getInstance()</code> method. This has a performance hit but will work.</p>
</li>
<li>
<p>We can consider variations involving double-checked locking and the <code>volatile</code> keyword, but see the limitations of this approach <a href="http://www.ibm.com/developerworks/java/library/j-dcl/index.html">here</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_example_singleton_via_metaprogramming"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_singleton_via_metaprogramming"></a>Example: Singleton via MetaProgramming</h6>
<div class="paragraph">
<p>Groovy’s meta-programming capabilities allow concepts like the singleton pattern to be enacted in a far more fundamental way. This example illustrates a simple way to use Groovy’s meta-programming capabilities to achieve the singleton pattern but not necessarily the most efficient way.</p>
</div>
<div class="paragraph">
<p>Suppose we want to keep track of the total number of calculations that a calculator performs. One way to do that is to use a singleton for the calculator class and keep a variable in the class with the count.</p>
</div>
<div class="paragraph">
<p>First we define some base classes. A <code>Calculator</code> class which performs calculations and records how many such calculations it performs and a <code>Client</code> class which acts as a facade to the calculator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Calculator {
    private total = 0
    def add(a, b) { total++; a + b }
    def getTotalCalculations() { 'Total Calculations: ' + total }
    String toString() { 'Calc: ' + hashCode() }
}

class Client {
    def calc = new Calculator()
    def executeCalc(a, b) { calc.add(a, b) }
    String toString() { 'Client: ' + hashCode() }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can define and register a <em>MetaClass</em> which intercepts all attempts to create a <code>Calculator</code> object and always provides a pre-created instance instead. We also register this MetaClass with the Groovy system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class CalculatorMetaClass extends MetaClassImpl {
    private static final INSTANCE = new Calculator()
    CalculatorMetaClass() { super(Calculator) }
    def invokeConstructor(Object[] arguments) { return INSTANCE }
}

def registry = GroovySystem.metaClassRegistry
registry.setMetaClass(Calculator, new CalculatorMetaClass())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we use instances of our <code>Client</code> class from within a script. The client class will attempt to create new instances of the calculator but will always get the singleton.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def client = new Client()
assert 3 == client.executeCalc(1, 2)
println "$client, $client.calc, $client.calc.totalCalculations"

client = new Client()
assert 4 == client.executeCalc(2, 2)
println "$client, $client.calc, $client.calc.totalCalculations"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result of running this script (your hashcode values may vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Client: 7306473, Calc: 24230857, Total Calculations: 1
Client: 31436753, Calc: 24230857, Total Calculations: 2</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_guice_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_guice_example"></a>Guice Example</h6>
<div class="paragraph">
<p>We can also implement the Singleton Pattern using <a href="https://github.com/google/guice">Guice</a>.</p>
</div>
<div class="paragraph">
<p>Consider the Calculator example again.</p>
</div>
<div class="paragraph">
<p>Guice is a Java-oriented framework that supports Interface-Oriented design. Hence we create a <code>Calculator</code> interface first. We can then create our <code>CalculatorImpl</code> implementation and a <code>Client</code> object which our script will interact with. The <code>Client</code> class isn’t strictly needed for this example but allows us to show that non-singleton instances are the default. Here is the code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grapes([@Grab('aopalliance:aopalliance:1.0'), @Grab('com.google.code.guice:guice:1.0')])
import com.google.inject.*

interface Calculator {
    def add(a, b)
}

class CalculatorImpl implements Calculator {
    private total = 0
    def add(a, b) { total++; a + b }
    def getTotalCalculations() { 'Total Calculations: ' + total }
    String toString() { 'Calc: ' + hashCode() }
}

class Client {
    @Inject Calculator calc
    def executeCalc(a, b) { calc.add(a, b) }
    String toString() { 'Client: ' + hashCode() }
}

def injector = Guice.createInjector (
    [configure: { binding -&gt;
        binding.bind(Calculator)
               .to(CalculatorImpl)
               .asEagerSingleton() } ] as Module
)

def client = injector.getInstance(Client)
assert 3 == client.executeCalc(1, 2)
println "$client, $client.calc, $client.calc.totalCalculations"

client = injector.getInstance(Client)
assert 4 == client.executeCalc(2, 2)
println "$client, $client.calc, $client.calc.totalCalculations"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>@Inject</code> annotation in the <code>Client</code> class. We can always tell right in the source code which fields will be injected.</p>
</div>
<div class="paragraph">
<p>In this example we chose to use an <em>explicit</em> binding. All of our dependencies (ok, only one in this example at the moment) are configured in the binding. The Guide injector knows about the binding and injects the dependencies as required when we create objects. For the singleton pattern to hold, you must always use Guice to create your instances. Nothing shown so far would stop you creating another instance of the calculator manually using new CalculatorImpl() which would of course violate the desired singleton behaviour.</p>
</div>
<div class="paragraph">
<p>In other scenarios (though probably not in large systems), we could choose to express dependencies using annotations, such as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grapes([@Grab('aopalliance:aopalliance:1.0'), @Grab('com.google.code.guice:guice:1.0')])
import com.google.inject.*

@ImplementedBy(CalculatorImpl)
interface Calculator {
    // as before ...
}

@Singleton
class CalculatorImpl implements Calculator {
    // as before ...
}

class Client {
    // as before ...
}

def injector = Guice.createInjector()

// ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>@Singleton</code> annotation on the <code>CalculatorImpl</code> class and the <code>@ImplementedBy</code> annotation in the <code>Calculator</code> interface.</p>
</div>
<div class="paragraph">
<p>When run, the above example (using either approach) yields (your hashcode values will vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Client: 8897128, Calc: 17431955, Total Calculations: 1
Client: 21145613, Calc: 17431955, Total Calculations: 2</pre>
</div>
</div>
<div class="paragraph">
<p>You can see that we obtained a new client object whenever we asked for an instance but it was injected with the same calculator object.</p>
</div>
</div>
<div class="sect5">
<h6 id="_spring_example_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_spring_example_2"></a>Spring Example</h6>
<div class="paragraph">
<p>We can do the Calculator example again using Spring as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grapes([@Grab('org.springframework:spring-core:3.2.2.RELEASE'), @Grab('org.springframework:spring-beans:3.2.2.RELEASE')])
import org.springframework.beans.factory.support.*

interface Calculator {
    def add(a, b)
}

class CalculatorImpl implements Calculator {
    private total = 0
    def add(a, b) { total++; a + b }
    def getTotalCalculations() { 'Total Calculations: ' + total }
    String toString() { 'Calc: ' + hashCode() }
}

class Client {
    Client(Calculator calc) { this.calc = calc }
    def calc
    def executeCalc(a, b) { calc.add(a, b) }
    String toString() { 'Client: ' + hashCode() }
}

// Here we 'wire' up our dependencies through the API. Alternatively,
// we could use XML-based configuration or the Grails Bean Builder DSL.
def factory = new DefaultListableBeanFactory()
factory.registerBeanDefinition('calc', new RootBeanDefinition(CalculatorImpl))
def beanDef = new RootBeanDefinition(Client, false)
beanDef.setAutowireMode(AbstractBeanDefinition.AUTOWIRE_AUTODETECT)
factory.registerBeanDefinition('client', beanDef)

def client = factory.getBean('client')
assert 3 == client.executeCalc(1, 2)
println "$client, $client.calc, $client.calc.totalCalculations"

client = factory.getBean('client')
assert 4 == client.executeCalc(2, 2)
println "$client, $client.calc, $client.calc.totalCalculations"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the result (your hashcode values will vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Client: 29418586, Calc: 10580099, Total Calculations: 1
Client: 14800362, Calc: 10580099, Total Calculations: 2</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_further_information"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_information"></a>Further information</h6>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html?page=1">Simply Singleton</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/webservices/library/co-single/index.html">Use your singletons wisely</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/java/library/j-dcl/index.html">Double-checked locking and the Singleton pattern</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20160807234810/http://blog.crazybob.org/2007/01/lazy-loading-singletons.html">Lazy Loading Singletons</a></p>
</li>
<li>
<p><a href="https://csharpindepth.com/Articles/Singleton">Implementing the Singleton Pattern in C#</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_state_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_state_pattern"></a>State Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/State_pattern">State Pattern</a> provides a structured approach to partitioning the behaviour within complex systems. The overall behaviour of a system is partitioned into well-defined states. Typically, each state is implemented by a class. The overall system behaviour can be determined firstly by knowing the <em>current state</em> of the system; secondly, by understanding the behaviour possible while in that state (as embodied in the methods of the class corresponding to that state).</p>
</div>
<div class="sect5">
<h6 id="_example_8"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_8"></a>Example</h6>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Client {
    def context = new Context()
    def connect() {
        context.state.connect()
    }
    def disconnect() {
        context.state.disconnect()
    }
    def send_message(message) {
        context.state.send_message(message)
    }
    def receive_message() {
        context.state.receive_message()
    }
}

class Context {
    def state = new Offline(this)
}

class ClientState {
    def context
    ClientState(context) {
        this.context = context
        inform()
    }
}

class Offline extends ClientState {
    Offline(context) {
        super(context)
    }
    def inform() {
        println "offline"
    }
    def connect() {
        context.state = new Online(context)
    }
    def disconnect() {
        println "error: not connected"
    }
    def send_message(message) {
        println "error: not connected"
    }
    def receive_message() {
        println "error: not connected"
    }
}

class Online extends ClientState {
    Online(context) {
        super(context)
    }
    def inform() {
        println "connected"
    }
    def connect() {
        println "error: already connected"
    }
    def disconnect() {
        context.state = new Offline(context)
    }
    def send_message(message) {
        println "\"$message\" sent"
    }
    def receive_message() {
        println "message received"
    }
}

client = new Client()
client.send_message("Hello")
client.connect()
client.send_message("Hello")
client.connect()
client.receive_message()
client.disconnect()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>offline
error: not connected
connected
"Hello" sent
error: already connected
message received
offline</pre>
</div>
</div>
<div class="paragraph">
<p>One of the great things about a dynamic language like Groovy though is that we can take this example and express it in many different ways depending on our particular needs. Some potential variations for this example are shown below.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variation_1_leveraging_interface_oriented_design"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_1_leveraging_interface_oriented_design"></a>Variation 1: Leveraging Interface-Oriented Design</h6>
<div class="paragraph">
<p>One approach we could take is to leverage <a href="http://www.pragmaticprogrammer.com/titles/kpiod/index.html">Interface-Oriented Design</a>. To do this, we could introduce the following interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface State {
    def connect()
    def disconnect()
    def send_message(message)
    def receive_message()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then our <code>Client</code>, <code>Online</code> and 'Offline` classes could be modified to implement that interface, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Client implements State {
  // ... as before ...
}

class Online implements State {
  // ... as before ...
}

class Offline implements State {
  // ... as before ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might ask: Haven’t we just introduced additional boilerplate code? Can’t we rely on duck-typing for this? The answer is 'yes' and 'no'. We can get away with duck-typing but one of the key intentions of the state pattern is to partition complexity. If we know that the <em>client</em> class and each <em>state</em> class all satisfy one interface, then we have placed some key boundaries around the complexity. We can look at any state class in isolation and know the bounds of behaviour possible for that state.</p>
</div>
<div class="paragraph">
<p>We don’t have to use interfaces for this, but it helps express the intent of this particular style of partitioning and it helps reduce the size of our unit tests (we would have to have additional tests in place to express this intent in languages which have less support for interface-oriented design).</p>
</div>
</div>
<div class="sect5">
<h6 id="_variation_2_extract_state_pattern_logic"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_2_extract_state_pattern_logic"></a>Variation 2: Extract State Pattern Logic</h6>
<div class="paragraph">
<p>Alternatively, or in combination with other variations, we might decide to extract some of our State Pattern logic into helper classes. For example, we could define the following classes in a state pattern package/jar/script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class InstanceProvider {
    static def registry = GroovySystem.metaClassRegistry
    static def create(objectClass, param) {
        registry.getMetaClass(objectClass).invokeConstructor([param] as Object[])
    }
}

abstract class Context {
    private context
    protected setContext(context) {
        this.context = context
    }
    def invokeMethod(String name, Object arg) {
        context.invokeMethod(name, arg)
    }
    def startFrom(initialState) {
        setContext(InstanceProvider.create(initialState, this))
    }
}

abstract class State {
    private client

    State(client) { this.client = client }

    def transitionTo(nextState) {
        client.setContext(InstanceProvider.create(nextState, client))
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is all quite generic and can be used wherever we want to introduce the state pattern. Here is what our code would look like now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Client extends Context {
    Client() {
        startFrom(Offline)
    }
}

class Offline extends State {
    Offline(client) {
        super(client)
        println "offline"
    }
    def connect() {
        transitionTo(Online)
    }
    def disconnect() {
        println "error: not connected"
    }
    def send_message(message) {
        println "error: not connected"
    }
    def receive_message() {
        println "error: not connected"
    }
}

class Online extends State {
    Online(client) {
        super(client)
        println "connected"
    }
    def connect() {
        println "error: already connected"
    }
    def disconnect() {
        transitionTo(Offline)
    }
    def send_message(message) {
        println "\"$message\" sent"
    }
    def receive_message() {
        println "message received"
    }
}

client = new Client()
client.send_message("Hello")
client.connect()
client.send_message("Hello")
client.connect()
client.receive_message()
client.disconnect()</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see here the <code>startFrom</code> and <code>transitionTo</code> methods begin to give our example code a DSL feel.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variation_3_bring_on_the_dsl"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_variation_3_bring_on_the_dsl"></a>Variation 3: Bring on the DSL</h6>
<div class="paragraph">
<p>Alternatively, or in combination with other variations, we might decide to fully embrace a Domain Specific Language (DSL) approach to this example.</p>
</div>
<div class="paragraph">
<p>We can define the following generic helper functions (first discussed <a href="http://www.bytemycode.com/snippets/snippet/640/">here</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Grammar {
    def fsm

    def event
    def fromState
    def toState

    Grammar(a_fsm) {
        fsm = a_fsm
    }

    def on(a_event) {
        event = a_event
        this
    }

    def on(a_event, a_transitioner) {
        on(a_event)
        a_transitioner.delegate = this
        a_transitioner.call()
        this
    }

    def from(a_fromState) {
        fromState = a_fromState
        this
    }

    def to(a_toState) {
        assert a_toState, "Invalid toState: $a_toState"
        toState = a_toState
        fsm.registerTransition(this)
        this
    }

    def isValid() {
        event &amp;&amp; fromState &amp;&amp; toState
    }

    public String toString() {
        "$event: $fromState=&gt;$toState"
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class FiniteStateMachine {
    def transitions = [:]

    def initialState
    def currentState

    FiniteStateMachine(a_initialState) {
        assert a_initialState, "You need to provide an initial state"
        initialState = a_initialState
        currentState = a_initialState
    }

    def record() {
        Grammar.newInstance(this)
    }

    def reset() {
        currentState = initialState
    }

    def isState(a_state) {
        currentState == a_state
    }

    def registerTransition(a_grammar) {
        assert a_grammar.isValid(), "Invalid transition ($a_grammar)"
        def transition
        def event = a_grammar.event
        def fromState = a_grammar.fromState
        def toState = a_grammar.toState

        if (!transitions[event]) {
            transitions[event] = [:]
        }

        transition = transitions[event]
        assert !transition[fromState], "Duplicate fromState $fromState for transition $a_grammar"
        transition[fromState] = toState
    }

    def fire(a_event) {
        assert currentState, "Invalid current state '$currentState': passed into constructor"
        assert transitions.containsKey(a_event), "Invalid event '$a_event', should be one of ${transitions.keySet()}"
        def transition = transitions[a_event]
        def nextState = transition[currentState]
        assert nextState, "There is no transition from '$currentState' to any other state"
        currentState = nextState
        currentState
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can define and test our state machine like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class StatePatternDslTest extends GroovyTestCase {
    private fsm

    protected void setUp() {
        fsm = FiniteStateMachine.newInstance('offline')
        def recorder = fsm.record()
        recorder.on('connect').from('offline').to('online')
        recorder.on('disconnect').from('online').to('offline')
        recorder.on('send_message').from('online').to('online')
        recorder.on('receive_message').from('online').to('online')
    }

    void testInitialState() {
        assert fsm.isState('offline')
    }

    void testOfflineState() {
        shouldFail{
            fsm.fire('send_message')
        }
        shouldFail{
            fsm.fire('receive_message')
        }
        shouldFail{
            fsm.fire('disconnect')
        }
        assert 'online' == fsm.fire('connect')
    }

    void testOnlineState() {
        fsm.fire('connect')
        fsm.fire('send_message')
        fsm.fire('receive_message')
        shouldFail{
            fsm.fire('connect')
        }
        assert 'offline' == fsm.fire('disconnect')
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example isn’t an exact equivalent of the others. It doesn’t use predefined <code>Online</code> and <code>Offline</code> classes. Instead it defines the entire state machine on the fly as needed. See the <a href="http://www.bytemycode.com/snippets/snippet/640/">previous reference</a> for more elaborate examples of this style.</p>
</div>
<div class="paragraph">
<p>See also: <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_model_based_testing_using_modeljunit">Model-based testing using ModelJUnit</a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_strategy_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strategy_pattern"></a>Strategy Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Strategy_pattern">Strategy Pattern</a> allows you to abstract away particular algorithms from their usage. This allows you to easily swap the algorithm being used without having to change the calling code. The general form of the pattern is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRkQLAABXRUJQVlA4TDgLAAAv7wJEAM/BKJJsJ0NykUbKl4LUL2UVcOSUwQSbtpEE+ZgMjqsO+kCZ6mk8Q0aSBBXSITTCoR3SKD3Bzz/ZAEVhdge8/9/hM5yLB1IghEACSoARFRUZjODfIMAYhCAEAYYSEOpASsEENutA/kMuQhAII7bv2O9DMpC2TeNf9n4PETEB5C3dzitkp+mRJNt220aXXEHnnIdp5rj/pRl0AP5/+Hi2WxH9h8S2jSTJUS2yd89E1bNHP+dF0dq2uHFDf09HCZZUTDbLyuK4sTs11jhKaID7vzPxgbAmxco6Ef2XRNtW3TYXh0Sq6DrS4z0k9TO6oz8eZ20sF23uc89Su2pxpjy0qYey1H5G0cXFxVoEpsGvkHrUXzvGFpaos1GWzs5TySNjnEbaezuKMYPlVoZOK+N/pxGWOSp51LA/2tzCJmDMX7EKxrH68Ooo3jHGtGOskge/2ji2+LeiPR/mB5+BOonIQl6RW/3NVmbPFhYxfLS1x5i9G3CsINpzeRBEZpgGFUDwYV7II5eHinbDlqAZqCB2p5WRB+4WVh70MO60MrTXdBIfOHSz+BBIJy1vLNQ8xv0EYIwx4WBK0KmC5X82drvK74eQagff/TeocnNYEFoMePAAIY8eApKOPA3T5MS7ak7uDjpQ0JHPvF01k7uTX0nIMfFO4JsLn1siwNkzdWNJ3rZ2Vg6D3Sh5hG8rAwWOe4zZ/97flz3Hqln93n/Wa88Y08M48TP1n+s+6q9MtKknT+2X0t2A1cPN3QA2T9PtTWPxHLtDY+8cutsbb+cea9+ZZH3Db9xpHBj8Q5pmvh/4TaJ7ok4ppYnuR2iS/kntZ8cjGOm0lwS2aab7pS6MuywSUDaGmjEeeWuJqNUBRpNAe7bkyrOJo94pVYan5co4ZHMt5RL/A6yRyPWWmpGApLTeUB+J53S0tw62aWb7j64L4+7KNBhO3Vg108NxwqZSEfmp8Ik6PZqZW552Wo5fa71WYm1p68vPVpVYujxBVwgT0gBWgLjVJJdySRDPIJ0mo71zsGyTreS4d0oJSx33S0Dd2GGcsNSvxUsu75TeFkpxWdzVb4Zf2645yaIxns1EqAhQ/binDfzIY6fXW5wb3RrOxgIxOaXgpK6i/A2PGqlVnGhj/bhOQ9K0SpUQmhIyA1YLxEJEuaROO06QN9imo53/dTtpcScDObHV/r7J1Wbjb4WoBZKzpdecHHfCtHqrqX/2mc4vCuMJywgVIerG+qA3Y4nc4DjzugQ0JJa3/qbgbK90t9VEZ7vF8DcBC4csCWteQ4iFiNSbjel0XNPRFuA6tbSuVUr5PZ7HlVjAZBGUKnlroFTJwngO80kuHXc+niVSRWqeH9dxWO/H5TD9SlkgMYI1dKUV6+DauxpyDzOm45EVIoZI3RqqWfRedDramiRYdgsIY6v9uNewFje+kLnSx3CrYVEYjvvYGEwsilEhqiv93azjUNTitY+cMMMWnI0LZ0JXyuUVHZa8W2lqa+pwnW/re7whXQMNYCEiZM3o7qloq3IdcqtEgbniAYZxCg5zJTmFCTcc73+kjvu86YFN2JCKABXGCePK2FoSzColDHVP7uBskJhaVZNT+koL6poZR7oMURbBsMlpK3TdvavpwVvweJbaejvCcsU7xZOILkDshMX3/tPTlif4tPXwrX+ePh3kXfkd/t9VPbKoR//VIY/+K2RO/kdETT2ianIaXEioief+c29kf3BxMaLodLBuy82ZfSfGlrnvBvZimvft+94j996KPQ5379RsDqvj+5rV5RdsBv5mDmz2q/Z9XdfY7PtuwKb/ajL2BoJRwz46JmzovZoM29EubOi4ImWzXnGUv+vhjcZ+76bbChAT9hz+uhnlt4tOv2c7r7ZWejqsSKG5rbarRvlD+jTDHxZoDxvffVgrfDfzIUKaozYd97C9X0OMm4rl3jpi3TTjf801DVlF57A9PQtDD9WxwKCN4TQ0GM7mWhi4PIYQudlCYvZ181cmezUw+CHArm/cGHvEhgXG7ga/sqFrM2DK5VZg+E5wKwTYB14FAmwDr0KITWBVCLEHnArE2AJGhSgbwKZAFP9tCnHsdykolp/1bCQr26hv0DcSSnyHAqG8dyiIt94wEEx6fwITUN4rEM54dwLxhDcnTER3k0BE260JTMZ1f0BM1Y0JzEh0a0BUz30JYTV3JaRb7rsQf2NyJ3U/ANMT3A0wQ7+x2RJSRgBiy21IiO62HYGpmu0AyCC2FYH5ar34kMFqL0IKqZ0ITFvpVYckRvsQmLvPCw7T1xlMtaTVUgN5VDYhZDLZgkAhPF5jqIXGuGkprOUFkjnsPyiJwSsLpBPYfVAXf7HRElpLCmSU13pQHnVXE8hprvGgRt6uJFRJW1axgUKdptcQaqXsAgKJjfUcFMzXxYPUujoOyG2r4aBuri4akF1Vu0HxRF0wyO+p2YACWrpWoEBSqwESHHUaFNLQRYJSCsoCNVDN8/HygAw5XQaUVM2VASVmegyUiGkxoLJaLglosdJgQHmdXA1Qo6S/oMZCLgQgx0d3gSAdvQWUWsYVAEkuWgvqbSK1b6DkZ97Kw3I1Db9bfRib75Ow6LB8zcHvVR8282dgvWEsaxPwG/WDsJrL02++sMsqlvUSUZ8zaFGS+0uWonSPpSz58uXLj1M1d1mOUj6Wp5Q5+Z8kY9MQUbKzaXbA+N5ebnsaeWO/WypmbJoLmlvYWPq4hd8ag0po8riYSFkqEXvGqskuWfoi41SaJyTLy0vtSTI2TcDA2MoAQcToNIGTbPZs8dJDHRgTJga1Z+qo95x2lbx5MVWXoxIBhmjRU12y9EXGqVzzQn+SjE0T2N+FaQJ/00SNTkMnn1+B82AwPBEotCfMSZiDnnAjRyWCiK6GYk7l+uW3M4EvBjyxaU4irCvob5qY0WkIIoIVCJJuYSNQu8rPUPnPiz/NhMpTiaB9TjfyTeX65eUn+UkzNk0YGggHUWB0mshdRqCdiIaDCMNBu7uKJuyyVCLkgRPls8s3leuXl//eqU+SsWmQAa44+JsmYnQaeIoU/in45cKCl34+6BjUntUHTY7pKZWjEhF8ZXN3tqkcvJSfr6rJQ/S1wTTDclQioJRmdHe6qTRS/SpDHPOhOkVevU3z3j/3JSJ9kXAq6/h/3QcrEemLhFPx+3UMJzKiq77Td3kvERlK9lgM/+b/GeTkfzYmieR+3A0p8o4TkYs4giMBjM42asKOuJlDHE/yg8z9dzHd7xkBkmymkSZBRWOIzkWoJk2jJhtpNZj1JPF0m4gyXyIylOKx6EpgR5qNiVuepiuE2ZitKuUTcNXJ01bp16oedK+Hq90HzqiJgEU8TVN/tKMmSgnNqOLZS6ImZOyUqt+oMlTmS0SGUjwWGbnHM20m8CXNxoCjUcCiKlvdQeYF3oLprROGNpbOVhZySd1/feCMmghYQMsDM7bEYwQph26diXjlhToti2Hc01g0Ml8iMpTqsYh60SklvNCRNP46Ot7xQP7SniF1GgKZ3nw0fcwZNXIZo42RBxqJBgeG0P80jo9tZL5EZCjJY5GVjqdF4wJR9+ozYTSIImDRGFpIqDJltS0pFg0iHw33V6zLb4lI94rgsSjJnRX4kmZ0tcVotHWK5K0lXG2VjoAFK+hWiXV8tR15mipUbLVVGiaBaetQGS4RCpN8LMKSYHmaB28Xm6CmGWcJhuW9RHSvV7/h6raP63TYmsei7/9cr5Xi9BW0C01Q41S622ayXSLyRONYqvV/3WyWiP+tRI7F79cx/Ncvj/6rCDn5n5A5+R9h5ao0z4QXXSX7FCEjuqpukXeXZSjhY3lsi7p6ZMgTqto2" alt="StrategyClasses">
</div>
</div>
<div class="paragraph">
<p>In Groovy, because of its ability to treat code as a first class object using anonymous methods (which we loosely call <em>Closures</em>), the need for the strategy pattern is greatly reduced. You can simply place algorithms inside Closures.</p>
</div>
<div class="sect5">
<h6 id="_example_9"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_9"></a>Example</h6>
<div class="paragraph">
<p>First let’s look at the traditional way of encapsulating the Strategy Pattern.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface Calc {
    def execute(n, m)
}

class CalcByMult implements Calc {
    def execute(n, m) { n * m }
}

class CalcByManyAdds implements Calc {
    def execute(n, m) {
        def result = 0
        n.times{
            result += m
        }

        result
    }
}

def sampleData = [
    [3, 4, 12],
    [5, -5, -25]
]

Calc[] multiplicationStrategies = [
    new CalcByMult(),
    new CalcByManyAdds()
]

sampleData.each{ data -&gt;
    multiplicationStrategies.each { calc -&gt;
        assert data[2] == calc.execute(data[0], data[1])
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have defined an interface <code>Calc</code> which our concrete strategy classes will implement (we could also have used an abstract class). We then defined two algorithms for doing simple multiplication: <code>CalcByMult</code> the normal way, and CalcByManyAdds using only addition (don’t try this one using negative numbers - yes we could fix this but it would just make the example longer). We then use normal <a href="http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming">polymorphism</a> to invoke the algorithms.</p>
</div>
<div class="paragraph">
<p>Here is the Groovier way to achieve the same thing using Closures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def multiplicationStrategies = [
    { n, m -&gt; n * m },
    { n, m -&gt; def result = 0; n.times{ result += m }; result }
]

def sampleData = [
    [3, 4, 12],
    [5, -5, -25]
]

sampleData.each{ data -&gt;
    multiplicationStrategies.each { calc -&gt;
        assert data[2] == calc(data[0], data[1])
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_template_method_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_template_method_pattern"></a>Template Method Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Template_method_pattern">Template Method Pattern</a> abstracts away the details of several algorithms. The generic part of an algorithm is contained within a base class. Particular implementation details are captured within base classes. The generic pattern of classes involved looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/webp;base64,UklGRvIKAABXRUJQVlA4TOYKAAAvFwJCAO/BKpJkJ/MILtJIedKfCr5XAQoymGANSZKlXJNBGdRFGZT+Woh7MmQkSVAhHUIjHPIgnMoT/PwTTNJU2zHw/n+Hz7guGqRCCIEEDAFGNDQkEIL/gwAjBEUQYAiCRiBBBQVCCBJMhKCgmLCfY7see+oGg3EQCAOJINum88f+ISJiAtzSua2CISJv27bnbRtt28FDqtXAlEohb3pp66hV2YixOshCDPIm/v//RewHSBk0bXCWcSP6TwsA27ptBHpqrVkpZNOMI2z3wKfjAGjjBjqS9x+vzwAW6hHRf0hu2wiSZF1nZleVV2QvdAeNY9w5PIbxgcE553n89Ud/V8zHJYeistwdlWVHRIaPRTrjeFkyHxQHwq1r7gy3rt3Mctt/XI476LHFuMOt3xSsv/kiBKVo2R63+vb+e/GRiAwwMp4KZCwk7inEUYwbUzwyoWHcob8pt679Uceihpxrx+lvBXMN72qHJZ/Wnsp3gzSNICQ5MnOawhedmfVvWafCV52ZbVNOzy3zkYgUMGBJhdm/EhBCjjjuCcNT8gBHEcYYn20nn4ZQcg7KifT01cunoa9kntaS2363rpEQcsRxSYpDARl1Wn2jJRQgf3jxsfCZCiXoiE8vBfBQkKVACDniuCTFMOJfn3Ag0A96hZ7LpcG/BQH9fWbhuACfTtFKfzNuXYOUlXyNSLseESbkZhLzXxWfFiE+CQxYJzzNftDqQEWbaD9oXcOiMlFRH3DBcMl6/m7Jx/dzsa54oNm79Z+0rpEGH6j5HsABqIj1R1rXY4NxDAucfAJ52cGR0W1OkeHDUohQc+tmFonp+ecv9ZfXc0HDNyBc+eXmbwqUCAFIZjEfmEaiNSAc0PIEf5xF5NQRcCKCpENiLT68vdFzQQN3Whx9RVoel7Azs9AcfXEK8Es2nOBBREA0yuddEWyA4vGy1NAEujsb/d2IaSAhZk45YFUJNn8SjiUq/mhTDL7Am5IjIwqbz77ZO0C4W/z5KN9diPmkGvoEfI4ZWvyvG8z8ohV2dS8mn1jf9iOo/+MUB+OuaYqaBZcth+NTQsGpBwKkVg84n3h8rv1eIPaG2RV1zwltny1//3EMUTZNDrhrio1FGtWiqHd12eT6532zYvdq35i7ZsX83/b1IEkrg9kWmEil3Ku9n8FWTqVqmtXvTZ4kDXWfcEiSpgl+A8l1ti0qxbyzLmcuTQUZ6pubms/WFTXvLN9bZg+nOFjARGo65YqaS8Nb9jOojF4wV6+2ibJDRFc3kKGFR2m4zTifXE5BbtZi5946BeVHojIBdDQKOGy5hJxHOqkC0XEdKtWvuRKQeHmf7pxDDbNv3C8JA9FxxQnXl6bYmM5ugf2qFzq6O4YtmlB3Y6AA1vtV4gzzHVefcJGDDxM4rHd0VqYEeiG6/oTfwYPww0THukn3B+j8uQR88xiBcdA8zkih7qkBYtjUALFuMj2ABqjX3TXNapLQ63DJLIJel2h4YL2OmSsTQ69LIQxAr3N5Euh1+jbLSuuIbPYXUR5nAoPT68qcn/t6HX/9/NUiSpvVJ5VlJ6t/ev2TjTGNIel1d4b5ma/X8Qf7wYpGfyfVfiVSmb7RN3GmMRi9DivQ816v0/O38xY37Y+xWaZvPqoAnXhfHq9e9yzd4QOtf7N/iW6Kv/No9Lrp4u8nvFyAwGhYM+n+VKQvzTXPsts+n6Fcgcuy93Uf8noBzDqmsU0Bve7q6MlO31jmUj0YS2Y+/2aY+R+uTB/yrk9iO5Ueet37S2H5vCneKb24rH73K2FKXxrTjlv47PErbl6dYWbeCpqCy6Z451fvkSWQsbyHxTSuYBH/3op5wrgA+WrT+LlapO+aBiaaGHod3638KvtecWlcUe9Nabg0PpFKv/qqb/0bk8vFMtm2vltxgMtecQ2pJlhadrm+GChNW3YrP64j/wPkc3Y572qgD5pgfW+To9lym2C+Ip2tr0z12RcQ3rIfd/58ts5nsAD+FH2LXPSCRVUClijvojoDS/BFDSv1YQTI+zxcIP1KCHuJAagmdyDQbf23eUCnA4FlowRPeA1X1EhTSreMIh+ydDlSgtzMGdQ//E2IMPmihrmG6Of6NjmGVT9fGn+YTyf8Fv5oR9OmJuQOqnFWiHKCJnIpjW+KhXWNgZ6mERla7ywzpnegNjFzF/nSiCntm5WfaGqgNNecwQHQ1Lcwsm+cLXdEauA66XYINM9v+n8a15f8ZUq9Tl9gGX5q0OtErunbCUKvg2U1p6YIve4OxJwpQq/bQaKOrF6ntqdar4MH2kqNq15H8ojtadbrRHGLoNelBMZGr0sJjJJe9+yOEVpnfTkPoxjPc0RbGPAp8rj4JhMoIoiSFsQRwUzphBiPQkxxn68pS9Qg5thgoixFg3gAYKYsPYN4CEibzujpNIQFPMpSMoh4QGDK0iMeeSoRM6fmUcRDAzNlSRg0mDyiBG0oiInhQKJhIE1figaCFP0FnSKXYkszablBEhHFB1GWmhA5FB/4Sol4yABTKC0BGTRJbJRNFBtlEwUgeyaJjbKJYqNsUkMKbpRNbEi/jbJsmtgom+DwHN58nwz2mbeDqYRgKQRLgcaxYJN5O5VKCJZCsH2MS5CdEGwgF2iwC8H6IngfWF4kr2NIgqUQLAWylzEgwVII1pHpqH0U2FjUT2IwgqVkLjo4B+wqHo5hJoKlECwFPg5hHoKlEOwnwxBsKKPQzgXMQbCljEFLr4/VxNTbYzGx9fL3r7F3x1Ji7dUvX7AUgpXl5vX34NcuWFtuXbC43Lkunxr7AWwuVUpnw8vkkCjldnHOyZRyDvz9B12MvzL+th0ce7vtrOc2BsylPBAt45xKW6MHt0cf+q8KN7MdHPtePP19FgPmUoKVwybGqdTbQC/eqYAfINyPDlok7YTJyUsOeCotOEqzpcWNjOP0/G2kxlpKZn7KcSxC96RCi6TR+GRHRngiHfBUWnAMmC2NxknDuIg75lLy4QnfETcq2iItrHAuZIkPeCItTJcWF0+aLY0WKOO4UcGDUupvimOcSskN+SEAb2pxO8sbXJgjLTyVDjwEBMyWFgUexo0KnpMSfsU4lZIb9IcG8RAQsEgaHgkD3klbcePCh4aA2dJonDSMizjMWkqoZGbKWDf5F26MZQDipPzE/thff3Z1B4dPQbuDwnYn9Y0+LFnf1BzDXWhAppTG1tvBsaudtu1h3O8D+nJbbhRzBHehAZlSGltv561e7QMWQYecgQa7oNtx95b1Alz+7TYGumwEXSCALJGMXlyaFRjytas5hrvQgEgpja2vg2OuqAMWQYecgd7VaO6bay+QQQegu4yBFlxy4Th0gCWXBl3/8pesMjHchQZkSim46De1ClgEDSV4y+GLB+6bCQegO4yBRi5w6pumEBcP7YZG15DB27FVDHehocmUUnDRL96KuTRXXLxqo7hSHe/fgmjAw7EeNzW6yewrd2ke3F1ogUwpBRf7Q4MDN8V6Xbz9Ct7Eb6xwAFo87yNRwaVSwnFoYCkeAuDifT5byIwHdxdaDMuUUnDRL57iK+J6osN0FxqQKaXkHu3FG4S70CONa0/ly1t6XW/rMyPpdZlSCm6sxC29YLiekfS6TCkFN1biFly8f6LpdZlSCm6sxC0o9qtoel2mlIIbK3ELbuqzjaXXZUopuPERtzouXiy9LlNKwY2UuIXFXnE8vc5ayv931+v++uNygEgpve3YXJ6Un2es5Eg=" alt="TemplateMethodClasses">
</div>
</div>
<div class="sect5">
<h6 id="_example_10"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_example_10"></a>Example</h6>
<div class="paragraph">
<p>In this example, <code>Accumulator</code> captures the essence of the accumulation algorithm. The base classes <code>Sum</code> and <code>Product</code> provide particular customised ways to use the generic accumulation algorithm.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class Accumulator {
    protected initial
    abstract doAccumulate(total, v)
    def accumulate(values) {
        def total = initial
        values.each { v -&gt; total = doAccumulate(total, v) }
        total
    }
}

class Sum extends Accumulator {
    def Sum() { initial = 0 }
    def doAccumulate(total, v) { total + v }
}

class Product extends Accumulator {
    def Product() { initial = 1 }
    def doAccumulate(total, v) { total * v }
}

println new Sum().accumulate([1,2,3,4])
println new Product().accumulate([1,2,3,4])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting output is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>10
24</pre>
</div>
</div>
<div class="paragraph">
<p>In this particular case, you could use Groovy’s inject method to achieve a similar result using Closures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Closure addAll = { total, item -&gt; total += item }
def accumulated = [1, 2, 3, 4].inject(0, addAll)
println accumulated    // =&gt; 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to duck-typing, this would also work with other objects which support an add (plus() in Groovy) method, e.g.:</p>
</div>
<div class="paragraph">
<p>In this particular case, you could use Groovy’s inject method to achieve a similar result using Closures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">accumulated = [ "1", "2", "3", "4" ].inject("", addAll)
println accumulated    // =&gt; "1234"</code></pre>
</div>
</div>
<div class="paragraph">
<p>We could also do the multiplication case as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">Closure multAll = { total, item -&gt; total *= item }
accumulated = [1, 2, 3, 4].inject(1, multAll)
println accumulated    // =&gt; 24</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using closures this way looks more like the <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#_strategy_pattern">Strategy Pattern</a> but if we realise that the built-in inject method is the generic part of the algorithm for our template method, then the Closures become the customised parts of the template method pattern.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_visitor_pattern"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_visitor_pattern"></a>Visitor Pattern</h5>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Visitor_pattern">Visitor Pattern</a> is one of those well-known but not often used patterns. I think this is strange, as it is really a nice thing.</p>
</div>
<div class="paragraph">
<p>The goal of the pattern is to separate an algorithm from an object structure. A practical result of this separation is the ability to add new operations to existing object structures without modifying those structures.</p>
</div>
<div class="sect5">
<h6 id="_simple_example_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_simple_example_2"></a>Simple Example</h6>
<div class="paragraph">
<p>This example considers how to calculate the bounds of shapes (or collections of shapes). Our first attempt uses the traditional visitor pattern. We will see a more Groovy way to do this shortly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class Shape { }

class Rectangle extends Shape {
    def x, y, width, height

    Rectangle(x, y, width, height) {
        this.x = x; this.y = y; this.width = width; this.height = height
    }

    def union(rect) {
        if (!rect) return this
        def minx = [rect.x, x].min()
        def maxx = [rect.x + width, x + width].max()
        def miny = [rect.y, y].min()
        def maxy = [rect.y + height, y + height].max()
        new Rectangle(minx, miny, maxx - minx, maxy - miny)
    }

    def accept(visitor) {
        visitor.visit_rectangle(this)
    }
}

class Line extends Shape {
    def x1, y1, x2, y2

    Line(x1, y1, x2, y2) {
        this.x1 = x1; this.y1 = y1; this.x2 = x2; this.y2 = y2
    }

    def accept(visitor){
        visitor.visit_line(this)
    }
}

class Group extends Shape {
    def shapes = []
    def add(shape) { shapes += shape }
    def remove(shape) { shapes -= shape }
    def accept(visitor) {
        visitor.visit_group(this)
    }
}

class BoundingRectangleVisitor {
    def bounds

    def visit_rectangle(rectangle) {
        if (bounds)
            bounds = bounds.union(rectangle)
        else
            bounds = rectangle
    }

    def visit_line(line) {
        def line_bounds = new Rectangle(line.x1, line.y1, line.x2-line.y1, line.x2-line.y2)
        if (bounds)
            bounds = bounds.union(line_bounds)
        else
            bounds = line_bounds
    }

    def visit_group(group) {
        group.shapes.each { shape -&gt; shape.accept(this) }
    }
}

def group = new Group()
group.add(new Rectangle(100, 40, 10, 5))
group.add(new Rectangle(100, 70, 10, 5))
group.add(new Line(90, 30, 60, 5))
def visitor = new BoundingRectangleVisitor()
group.accept(visitor)
bounding_box = visitor.bounds
println bounding_box.dump()</code></pre>
</div>
</div>
<div class="paragraph">
<p>That took quite a bit of code.</p>
</div>
<div class="paragraph">
<p>We can improve the clarity of our code (and make it about half the size) by making use of Groovy Closures as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">abstract class Shape {
    def accept(Closure yield) { yield(this) }
}

class Rectangle extends Shape {
    def x, y, w, h
    def bounds() { this }
    def union(rect) {
        if (!rect) return this
        def minx = [ rect.x, x ].min()
        def maxx = [ rect.x + w, x + w ].max()
        def miny = [ rect.y, y ].min()
        def maxy = [ rect.y + h, y + h ].max()
        new Rectangle(x:minx, y:miny, w:maxx - minx, h:maxy - miny)
    }
}

class Line extends Shape {
    def x1, y1, x2, y2
    def bounds() {
        new Rectangle(x:[x1, x2].min(), y:[y1, y2].min(), w:(x2 - x1).abs(), h:(y2 - y1).abs())
    }
}

class Group {
    def shapes = []
    def leftShift(shape) { shapes += shape }
    def accept(Closure yield) { shapes.each{it.accept(yield)} }
}

def group = new Group()
group &lt;&lt; new Rectangle(x:100, y:40, w:10, h:5)
group &lt;&lt; new Rectangle(x:100, y:70, w:10, h:5)
group &lt;&lt; new Line(x1:90, y1:30, x2:60, y2:5)
def bounds
group.accept{ bounds = it.bounds().union(bounds) }
println bounds.dump()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_advanced_example"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_advanced_example"></a>Advanced Example</h6>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface Visitor {
    void visit(NodeType1 n1)
    void visit(NodeType2 n2)
}

interface Visitable {
    void accept(Visitor visitor)
}

class NodeType1 implements Visitable {
    Visitable[] children = new Visitable[0]
    void accept(Visitor visitor) {
        visitor.visit(this)
        for(int i = 0; i &lt; children.length; ++i) {
            children[i].accept(visitor)
        }
    }
}

class NodeType2 implements Visitable {
    Visitable[] children = new Visitable[0]
    void accept(Visitor visitor) {
        visitor.visit(this)
        for(int i = 0; i &lt; children.length; ++i) {
            children[i].accept(visitor)
        }
    }
}

class NodeType1Counter implements Visitor {
    int count = 0
    void visit(NodeType1 n1) {
        count++
    }
    void visit(NodeType2 n2){}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we now use <code>NodeType1Counter</code> on a tree like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">NodeType1 root = new NodeType1()
root.children = new Visitable[2]
root.children[0] = new NodeType1()
root.children[1] = new NodeType2()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we have one <code>NodeType1</code> object as root and one of the children is also a <code>NodeType1</code> instance. The other child is a <code>NodeType2</code> instance. That means using <code>NodeType1Counter</code> here should count 2 <code>NodeType1</code> objects.</p>
</div>
<div class="sect6">
<h7 id="_why_to_use_this"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_why_to_use_this"></a>Why to use this</h7>
<div class="paragraph">
<p>As you can see here very good we have a visitor that has a state while the tree of objects is not changed. That’s pretty useful in different areas, for example you could have a visitor counting all node types, or how many different types are used, or you could use methods special to the node to gather information about the tree and much more.</p>
</div>
</div>
<div class="sect6">
<h7 id="_what_happens_if_we_add_a_new_type"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_what_happens_if_we_add_a_new_type"></a>What happens if we add a new type?</h7>
<div class="paragraph">
<p>In this case we have to do much work.. we have to change Visitor to accept the new type, we have to write the new type itself of course and we have to change every Visitor we have already implemented. After very few changes you will modify all your Visitors to extend a default implementation of the visitor, so you don’t need to change every Visitor each time you add a new type.</p>
</div>
</div>
<div class="sect6">
<h7 id="_what_if_we_want_to_have_different_iteration_patterns"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_what_if_we_want_to_have_different_iteration_patterns"></a>What if we want to have different iteration patterns?</h7>
<div class="paragraph">
<p>Then you have a problem. since the node describes how to iterate, you have no influence and stop iteration at a point or change the order. So maybe we should change this a little to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">interface Visitor {
    void visit(NodeType1 n1)
    void visit(NodeType2 n2)
}

class DefaultVisitor implements Visitor{
    void visit(NodeType1 n1) {
        for(int i = 0; i &lt; n1.children.length; ++i) {
            n1.children[i].accept(this)
        }
    }
    void visit(NodeType2 n2) {
        for(int i = 0; i &lt; n2.children.length; ++i) {
            n2.children[i].accept(this)
        }
    }
}

interface Visitable {
    void accept(Visitor visitor)
}

class NodeType1 implements Visitable {
    Visitable[] children = new Visitable[0]
    void accept(Visitor visitor) {
        visitor.visit(this)
    }
}

class NodeType2 implements Visitable {
    Visitable[] children = new Visitable[0];
    void accept(Visitor visitor) {
        visitor.visit(this)
    }
}

class NodeType1Counter extends DefaultVisitor {
    int count = 0
    void visit(NodeType1 n1) {
        count++
        super.visit(n1)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some small changes but with big effect…​ the visitor is now recursive and tells me how to iterate. The implementation in the Nodes is minimized to <code>visitor.visit(this)</code>, <code>DefaultVisitor</code> is now able to catch the new types, we can stop iteration by not delegating to super. Of course the big disadvantage now is that it is no longer iterative, but you can’t get all the benefits.</p>
</div>
</div>
<div class="sect6">
<h7 id="_make_it_groovy"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_make_it_groovy"></a>Make it Groovy</h7>
<div class="paragraph">
<p>The question now is how to make that a bit more Groovy. Didn’t you find this <code>visitor.visit(this)</code> strange? Why is it there? The answer is to simulate double dispatch. In Java the compile time type is used, so when I <code>visitor.visit(children[i])</code> then the compiler won’t be able to find the correct method, because <code>Visitor</code> does not contain a method <code>visit(Visitable)</code>. And even if it would, we would like to visit the more special methods with <code>NodeType1</code> or <code>NodeType2</code>.</p>
</div>
<div class="paragraph">
<p>Now Groovy is not using the static type, Groovy uses the runtime type. This means I could do <code>visitor.visit(children[i])</code> directly. Hmm.. since we minimized the accept method to just do the double dispatch part and since the runtime type system of Groovy will already cover that.. do we need the accept method? I think you can guess that I would answer no. But we can do more. We had the disadvantage of not knowing how to handle unknown tree elements. We had to extends the interface <code>Visitor</code> for that, resulting in changes to <code>DefaultVisitor</code> and then we have the task to provide a useful default like iterating the node or not doing anything at all. Now with Groovy we can catch that case by adding a <code>visit(Visitable)</code> method that does nothing. That would be the same in Java btw.</p>
</div>
<div class="paragraph">
<p>But don’t let us stop here…​ do we need the <code>Visitor</code> interface? If we don’t have the accept method, then we don’t need the <code>Visitor</code> interface at all. So the new code would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class DefaultVisitor {
    void visit(NodeType1 n1) {
        n1.children.each { visit(it) }
    }
    void visit(NodeType2 n2) {
        n2.children.each { visit(it) }
    }
    void visit(Visitable v) { }
}

interface Visitable { }

class NodeType1 implements Visitable {
    Visitable[] children = []
}

class NodeType2 implements Visitable {
    Visitable[] children = []
}

class NodeType1Counter extends DefaultVisitor {
    int count = 0
    void visit(NodeType1 n1) {
        count++
        super.visit(n1)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks like we saved a few lines of code here. But we made more. The <code>Visitable</code> nodes now do not refer to any <code>Visitor</code> class or interface. For me this is the best level of separation you could get here. But do we really need to stop here? No. Let us change the <code>Visitable</code> interface a little and let it return the children we want to visit next. This allows us a general iteration method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class DefaultVisitor {
    void visit(Visitable v) {
        doIteraton(v)
    }
    void doIteraton(Visitable v) {
        v.children.each {
            visit(it)
        }
    }
}

interface Visitable {
    Visitable[] getChildren()
}

class NodeType1 implements Visitable {
    Visitable[] children = []
}

class NodeType2 implements Visitable {
    Visitable[] children = []
}

class NodeType1Counter extends DefaultVisitor {
    int count = 0
    void visit(NodeType1 n1) {
        count++
        super.visit(n1)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DefaultVisitor</code> now looks a bit different. I added a <code>doIteration</code> method that will get the children it should iterate over and then call visit on each element. Per default this will call <code>visit(Visitable)</code> which then iterates over the children of this child. I changed <code>Visitable</code> to ensure that any node will be able to return children (even if empty). I didn’t have to change the <code>NodeType1</code> and <code>NodeType2</code> class, because the way the children filed was defined already made them a property, which means Groovy is so nice to generate a get method for us. No the really interesting part is <code>NodeType1Counter</code>, it is interesting because we have not changed it. <code>super.visit(n1)</code> will now call <code>visit(Visitable)</code> which will call <code>doIteration</code> which will start the next level of iteration. So no change. But <code>visit(it)</code> will call <code>visit(NodeType1)</code> if it is of type <code>NodeType1</code>. In fact we don’t need the <code>doIteration</code> method, we could do that in <code>visit(Visitable)</code> too, but I thought this variant is better, because it allows us to write a new <code>Visitor</code> that overwrites visit(<code>Visitable</code>) for error cases which of course means we must not do <code>super.visit(n1)</code> but <code>doIteration(n1)</code>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_summary"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_summary"></a>Summary</h7>
<div class="paragraph">
<p>In the end we got ~40% less code, a robust and stable architecture and we completely removed the Visitor from the Visitable. I heard about visitor implementations based on Reflection to get a more generic version. Well, with this you see there is really no need to do such thing. If we add new types we don’t need to change anything. It is said that the visitor pattern doesn’t fit extreme programming techniques very well because you need to make changes to so many classes all the time. I think I proved that this is because of Java not because the pattern is bad or something.</p>
</div>
<div class="paragraph">
<p>There are variants of the Visitor pattern, like the acyclic visitor pattern, that tries to solve the problem of adding new node types with special visitors. I don’t like that very much, it works with casts, catches the <code>ClassCastException</code> and other nasty things. In the end it tries to solve something we don’t even get with the Groovy version.</p>
</div>
<div class="paragraph">
<p>One more thing. <code>NodeType1Counter</code> could be implemented in Java as well. Groovy will recognize the visit methods and call them as needed because <code>DefaultVisitor</code> is still Groovy and does all the magic.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_further_information_2"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_further_information_2"></a>Further Information</h6>
<div class="ulist">
<ul>
<li>
<p><a href="http://se.ethz.ch/~meyer/publications/computer/visitor.pdf">Componentization: the Visitor example</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_references"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_references"></a>3.19.2. References</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides (1995). <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>. Addison-Wesley. ISBN 0-201-63361-2.</p>
<div class="ulist">
<ul>
<li>
<p><em>The canonical reference of design patterns.</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Martin Fowler (1999). <em>Refactoring: Improving the Design of Existing Code</em>. Addison-Wesley. ISBN 0-201-48567-2.</p>
</li>
<li>
<p>Joshua Kerievsky (2004). <em>Refactoring To Patterns</em>. Addison-Wesley. ISBN 0-321-21335-1.</p>
</li>
<li>
<p>Eric Freeman, Elisabeth Freeman, Kathy Sierra, Bert Bates (2004). <em>Head First Design Patterns</em>. O’Reilly. ISBN 0-596-00712-4.
*<em>A great book to read, informative as well as amusing.</em></p>
</li>
<li>
<p>Dierk Koenig with Andrew Glover, Paul King, Guillaume Laforge and Jon Skeet (2007). <em>Groovy in Action</em>. Manning. ISBN 1-932394-84-2.</p>
<div class="ulist">
<ul>
<li>
<p><em>Discusses Visitor, Builder and other Patterns.</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Brad Appleton (1999). <a href="http://www.bradapp.com/docs/pizza-inv.html">Pizza Inversion - a Pattern for Efficient Resource Consumption</a>.</p>
<div class="ulist">
<ul>
<li>
<p><em>One of the most frequently used patterns by many software engineers!</em></p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Design Patterns in Dynamic Languages</em> by Neil Ford. Houston Java User’s Group. Examples in Groovy and Ruby. <a href="http://www.oracle.com/technetwork/server-storage/ts-4961-159222.pdf" class="bare">http://www.oracle.com/technetwork/server-storage/ts-4961-159222.pdf</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_acknowledgements"></a>4. Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_contributors"></a>4.1. Contributors</h3>
<div class="paragraph">
<p>The Groovy team would like to thank the contributors of this documentation (by alphabetical order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/mojavelinux">Dan Allen</a></p>
</li>
<li>
<p><a href="https://github.com/and-dmitry">Dmitry Andreychuk</a></p>
</li>
<li>
<p><a href="http://hamletdarcy.blogspot.fr/">Hamlet D’Arcy</a></p>
</li>
<li>
<p><a href="https://github.com/anshbansal">Aseem Bansal</a></p>
</li>
<li>
<p><a href="https://github.com/bura">Andrey Bloschetsov</a></p>
</li>
<li>
<p><a href="https://github.com/JBrownVisualSpection">J Brown</a></p>
</li>
<li>
<p><a href="https://github.com/jeffbrown">Jeff Scott Brown</a></p>
</li>
<li>
<p><a href="http://twitter.com/CedricChampeau">Cédric Champeau</a></p>
</li>
<li>
<p><a href="https://github.com/tobia">Tobia Conforto</a></p>
</li>
<li>
<p><a href="https://github.com/ddimtirov">Dimitar Dimitrov</a></p>
</li>
<li>
<p><a href="http://twitter.com/werdnagreb">Andrew Eisenberg</a></p>
</li>
<li>
<p><a href="https://github.com/erdi">Marcin Erdmann</a></p>
</li>
<li>
<p><a href="https://github.com/christoph-frick">Christoph Frick</a></p>
</li>
<li>
<p><a href="http://twitter.com/marioggar">Mario García</a></p>
</li>
<li>
<p><a href="https://github.com/davidmichaelkarr">David Michael Karr</a></p>
</li>
<li>
<p><a href="http://twitter.com/paulk_asert">Paul King</a></p>
</li>
<li>
<p><a href="http://twitter.com/glaforge">Guillaume Laforge</a></p>
</li>
<li>
<p><a href="http://twitter.com/pledbrook">Peter Ledbrook</a></p>
</li>
<li>
<p><a href="http://grantmcconnaughey.github.io/">Grant McConnaughey</a></p>
</li>
<li>
<p><a href="https://github.com/dnahodil">David Nahodil</a></p>
</li>
<li>
<p><a href="https://github.com/jnorthr">James Northrop</a></p>
</li>
<li>
<p><a href="https://github.com/marcpa00">Marc Paquette</a></p>
</li>
<li>
<p><a href="https://github.com/michaelss">Michael Schuenck</a></p>
</li>
<li>
<p><a href="https://github.com/PascalSchumacher">Pascal Schumacher</a></p>
</li>
<li>
<p><a href="https://github.com/shils">Shil Sinha</a></p>
</li>
<li>
<p><a href="https://github.com/stavytskyi">Maksym Stavytskyi</a></p>
</li>
<li>
<p><a href="https://twitter.com/asteingr">André Steingreß</a></p>
</li>
<li>
<p><a href="https://github.com/EPadronU">Edinson Padrón Urdaneta</a></p>
</li>
<li>
<p><a href="https://github.com/keeganwitt">Keegan Witt</a></p>
</li>
<li>
<p><a href="https://twitter.com/daniel_sun">Daniel Sun</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_license"><a class="anchor" href="https://docs.groovy-lang.org/docs/next/html/documentation/#_license"></a>4.2. License</h3>
<div class="paragraph">
<p>This work is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.0.0-SNAPSHOT<br>
Last updated 2019-05-31 04:43:22 CEST
</div>
</div>
<link rel="stylesheet" href="./Groovy Language Documentation_files/prettify.min.css">
<script src="./Groovy Language Documentation_files/prettify.min.js"></script>
<script>prettyPrint()</script>

<div id="highly-foundation-container" status="done"><div id="highly-highlight-menu" class="highly-highlight-menu highly-clearfix" style="display:none;"> <div class="highly-inner"> <div class="highly-rehighlighter"> <div id="highly-rehighlight" class="highly-action highly-rehighlight" title="Re-Highlight" style="display: none;"> <i class="highly-eyecon highly-eyecon-highlighter"></i> </div> <div id="highly-unhighlight" class="highly-action highly-unhighlight" title="Un-Highlight" style="display: none;"> <i class="highly-eyecon highly-eyecon-highlighter"></i> <span class="highly-strikethrough"></span> </div> <div id="highly-highlight-menu-delete" class="highly-action highly-x"> <i class="highly-eyecon highly-eyecon-rotate-45 highly-eyecon-plus-lg"></i> </div> <span id="highly-rehighlight-count" class="highly-rehighlight-count">9</span> </div> <div id="highly-share-this" class="highly-highlight-menu-option" title="Share This"><span class="highly-eyecon highly-eyecon-share-round"></span><span class="highly-eyecon highly-eyecon-share-circles"></span></div> <div id="highly-quick-share" class="highly-highlight-menu-option" title="Tweet This"><span class="highly-eyecon highly-eyecon-twitter"></span></div> <div class="highly-highlight-menu-faces" style="display: inline-block;">   <div class="highly-highlight-menu-more highly-hidden highly-tooltip highly-tooltip--n" data-highly-tooltip="Total Highlighters">6</div> </div> </div> </div> <div id="highly-dialog" class="highly-dialog" style="display:none"> <div id="highly-dialog-modal" class="highly-modal highly-dialog-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-throbber highly-throbber-large" style="display: none;"></div> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-centered"> <div class="highly-modal-img-holder" style="display: none;"><img class="highly-modal-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></div> <div id="highly-modal-aext-nux-img-holder" style="display: none;"><img class="highly-modal-aext-nux-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></div> <div class="highly-modal-title" style="display: none;"></div> <div class="highly-modal-message" style="display: none;"></div> <div class="highly-aext-nux-modal-message highly-line-height highly-space-top-15 highly-space-bottom" style="display: none;"><span class="highly-black highly-aext-nux-text">Nice! Highly is now on.</span><br>Tap text to make a highlight.<br>Tap off or scroll to keep it.</div> <div class="highly-dialog-button-holder"> <button class="highly-btn highly-btn-outline highly-dialog-button-yes"></button> <button class="highly-btn highly-btn-outline highly-dialog-button-no"></button> </div> <div class="highly-modal-title" style="display: none;"></div> </div> </div> <div class="highly-modal-native-dialog-hint" style="display: none;"> <div class="highly-modal-native-dialog-hint-message highly-allcaps">-</div> <button class="highly-modal-native-dialog-hint-done highly-btn highly-btn-sm highly-btn-outline" style="display: none;">I'm back</button> </div> </div> </div>  <div id="highly-help" class="highly-help" style="display:none"> <div id="highly-help-modal" class="highly-modal highly-modal-white"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-close-companion"><a href="mailto:heyo@highly.co" title="Email Us" class="highly-btn highly-btn-outline"><i class="highly-eyecon highly-eyecon-chat"></i> Ask Us Anything</a></div> <div id="highly-help-highly-take-tour-container" class="highly-help-overlay highly-help-overlay-highlighting"> <div class="highly-space-bottom"><b>Highlighting</b></div> <div id="highly-help-highly-take-tour-button" class="highly-btn highly-btn-outline highly-take-tour"> <i class="highly-eyecon highly-eyecon-highlighter"></i> Learn How to Highlight </div> </div> <div class="highly-help-overlay highly-help-overlay-map"> <b>Map</b><br> Highlights are marked along the length of the story. Click the map to jump between highlights, or use these keys:<br> <div class="highly-space-top">Next <span class="highly-hint-key">J</span><span class="highly-hint-key">K</span> Back</div> </div> <div class="highly-help-overlay highly-help-overlay-people"> <span class="highly-hint-key">D</span> <b>Everybody</b> that highlighted this story. <div class="highly-help-overlay-people-heads"> <span class="highly-profile-pic"><img id="highly-help-overlay-profile-1" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></span> <span class="highly-profile-pic"><img id="highly-help-overlay-profile-2" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></span> </div> </div> <div class="highly-help-overlay highly-help-overlay-summary"> <b>Summary</b> Just the highlights. <span class="highly-hint-key highly-hint-key-red">A</span> </div> <div class="highly-help-overlay highly-help-overlay-share"> <b>Share</b> Directly or post socially. <span class="highly-hint-key highly-hint-key-green">S</span> </div> </div> </div> <div id="highly-more" class="highly-more" style="display:none"> <div id="highly-more-modal" class="highly-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-centered"> <div class="highly-modal-title highly-modal-title-small highly-borderless"> <span class="highly-highlighters-count">20 People</span> <span class="highly-text-muted highly-thin highly-highlights-count">89 Highlights</span> </div> <div class="highly-more-results highly-items">    <div class="highly-item highly-item-user"> <div class="highly-item-link-secondary highly-pull-right"> <div class="highly-btn highly-btn-dark"> Profile </div> </div> <div class="highly-item-link-primary"> <div class="highly-profile-pic"> <img class="highly-profile-pic-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""> </div> <div class="highly-profile-username">Eric</div> <div class="highly-profile-meta">17 Highlights</div> </div> </div> <div class="highly-item highly-item-user"> <div class="highly-item-link-secondary highly-pull-right"> <div class="highly-btn highly-btn-dark"> Profile </div> </div> <div class="highly-item-link-primary"> <div class="highly-profile-pic"> <img class="highly-profile-pic-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""> </div> <div class="highly-profile-username">Ben</div> <div class="highly-profile-meta">11 Highlights</div> </div> </div> </div> </div> </div> </div> </div> <div id="highly-hint" class="highly-hint highly-opem" style="display:none"> <button type="button" class="highly-btn highly-hint-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div id="highly-hint-message-how-to-enable" data-closable="true" data-name="how-to-enable" style="display: none;" class="highly-hint-message highly-link">Type <span class="highly-hint-key">!</span> to start highlighting.</div> <div id="highly-hint-message-enabled" data-closable="true" data-name="enabled" style="display: none;" class="highly-hint-message"><i class="highly-eyecon highly-eyecon-highlighter"></i> Your cursor is a Highlighter now.</div> <div id="highly-hint-message-shifty-page" data-closable="true" data-name="shifty-page" style="display: none;" class="highly-hint-message highly-hint-message-error"> <div class="highly-white">Shifty Page</div><br> <div class="highly-font-size-default">Highlights don't work on pages that change a lot, like this one.<br> Sorry about that.</div> </div> <div id="highly-hint-message-multiple-articles" data-closable="true" data-name="multiple-articles" style="display: none;" class="highly-hint-message highly-hint-message-error"> So many stories here!<br> <span class="highly-gray">Visit a single story to highlight it.</span> </div> <div id="highly-hint-message-jumpkeys" data-name="jumpkeys" style="display: none;" class="highly-hint-message">Jump To Previous <span class="highly-hint-key">J</span> <span class="highly-hint-key">K</span> Next</div> <div id="highly-hint-message-login" data-closable="false" data-name="login" style="display: none;" class="highly-hint-message"> <span id="highly-hint-login-join" class="highly-btn highly-btn-signup">Save your <span id="highly-hint-login-highlight-count">highlight</span>. <span class="highly-white">Join</span></span> <span id="highly-hint-login-signin" class="highly-btn highly-btn-signin">Sign In</span> </div> <div id="highly-hint-message-loggedin" data-closable="false" data-name="loggedin" style="display: none;" class="highly-hint-message"><i class="highly-eyecon highly-eyecon-check highly-green"></i> Signed In</div> <div id="highly-hint-message-switch" data-closable="false" data-name="switch" style="display: none;" class="highly-hint-message"> <div class="highly-profile-pic"> <img class="highly-profile-pic-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""> </div> <span id="highly-hint-switch-username">Andrew</span>'s highlights </div> <div id="highly-hint-message-loading" data-closable="true" data-name="loading" style="display: none;" class="highly-hint-message highly-hint-message-twoline"> <div class="highly-throbber"></div> <div class="highly-maker-false"> <div class="highly-profile-pic"> <img class="highly-profile-pic-img" id="highly-hint-loading-username-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""> </div> <span id="highly-hint-loading-username">Your</span> highlights will appear when<br> the publisher's page loads completely. </div> <div class="highly-maker-true" style="display: none;"> Highlighting is possible as soon<br> as the page loads completely. </div> </div> <div id="highly-hint-message-private" data-closable="false" data-name="private" style="display: none;" class="highly-hint-message highly-hint-message-twoline"> <i class="highly-eyecon highly-eyecon-lock"></i> Possibly Personal Information<br> Highly is disabled here for your privacy. </div> <div id="highly-hint-message-missing" data-closable="true" data-name="missing" style="display: none;" class="highly-hint-message highly-hint-message-twoline"> <div class="highly-message-primary highly-open"> <div class="highly-hint-missing-info-button highly-btn highly-btn-outline highly-pull-right">?</div> <div id="highly-hint-open-summary" class="highly-hint-open-summary"> <i class="highly-eyecon highly-eyecon-target highly-red highly-pull-left"></i> <span class="highly-hint-missing-username">username's</span> highlights aren’t all visible here.<br> <span class="highly-gray"><span class="highly-underline" title="Keyboard Shortcut">A</span>ll are visible in the Summary (click to view)</span> </div> </div> <div class="highly-message-secondary"> <div class="highly-lead"><span class="highly-hint-missing-count">1/8</span> of <span class="highly-hint-missing-username">username's</span> highlights are visible on this page.</div> <div class="highly-nowrap">When you don’t see the full story, Highly can’t show every highlight.</div> <div class="highly-nowrap">Maybe the text has been changed or deleted. Or maybe the story...</div> <div class="highly-nowrap">… requires a subscription? <span class="highly-gray">Sign In, then Look Again.</span></div> <div class="highly-nowrap">… is on multiple pages? <span class="highly-gray">View as Single Page, then Look Again.</span></div> <div class="highly-nowrap">… is truncated? <span class="highly-gray">View More, then Look Again.</span></div> <div class="highly-message-secondary-action"> <div class="highly-hint-missing-tryagain highly-btn highly-btn-row"><i class="highly-eyecon highly-eyecon-undo highly-red highly-pull-left"></i> Look Again for Highlights</div> <div class="highly-hint-missing-gosummary highly-btn highly-btn-row"><i class="highly-eyecon highly-eyecon-target highly-red highly-pull-left"></i> View Summary</div> </div> </div> </div> <div id="highly-success-tweet-sent" data-name="tweet-success" data-closable="false" style="display: none;" class="highly-hint-message highly-hint-message-blue"><i class="highly-eyecon highly-eyecon-twitter"></i> Posted by <span id="highly-twitter-success-username" class="highly-success-username">@covrter</span></div> <div id="highly-success-share-sent" data-name="share-success" data-closable="false" style="display: none;" class="highly-hint-message highly-hint-message-green"><i class="highly-eyecon highly-eyecon-smile-clear"></i> Sent to <span id="highly-share-success-username" class="highly-success-count">2</span></div> <div id="highly-error-share-sent" data-name="share-error" data-closable="false" style="display: none;" class="highly-hint-message highly-hint-message-error"><span id="highly-trouble-sending-email">Trouble Sending Share</span> <span>Draft Saved</span></div> <div id="highly-error-set-visibility" data-name="set-visibility-error" data-closable="false" style="display: none;" class="highly-hint-message highly-hint-message-error"><span>Visibility Update Failed</span></div> <div id="highly-error" data-name="error" data-closable="false" style="display: none;" class="highly-hint-message highly-hint-message-error"><i class="highly-eyecon highly-eyecon-wrench"></i> Something's amiss.</div> <div id="highly-copy-text" data-name="copy-text" data-closable="false" style="display: none;" class="highly-hint-message"><i class="highly-eyecon highly-eyecon-check highly-green"></i> <span class="highly-white" style="">Copied</span> <span id="highly-copy-text-inner">Hightlight text copied!</span></div> <div id="highly-copy-no-highlights" class="highly-hint-message" data-name="copy-no-highlights" style="display: none;">Make a Highlight to Copy</div> <div id="highly-fake-news" data-name="fake-news" data-closable="true" style="display: none;" class="highly-hint-message highly-hint-message-red"><i class="highly-eyecon highly-eyecon-eye-full highly-white"></i> <span class="highly-white">Caution</span> <span id="highly-copy-text-inner" class="highly-text-weight-300 highly-opacity-70">This site has been reported to contain fake news.</span></div> <div id="highly-ios-nux-tour-gif" class="highly-hint-message" data-name="ios-tour-gif" style="display: none;"><img class="highly-ios-tour-gif" src="https://docs.groovy-lang.org/docs/next/html/documentation/"></div> <div id="highly-ios-longtap-tip" class="highly-ios-longtap-tip highly-hint-message" data-name="ios-longtap-tip" style="display: none;" data-centered="true" data-closable="true"> <img class="highly-ios-longtap-gif" src="https://docs.groovy-lang.org/docs/next/html/documentation/"> <div class="highly-ios-longtap-tip-message"> Tip: tap text <br><br> to highlight faster. </div> </div> <div id="highly-hint-tour" data-centered="true" data-closable="false" data-name="tour" style="display: none;" class="highly-hint-message highly-hint-message-red highly-hint-tour highly-allcaps"> <div class="highly-hint-tour-state highly-hint-tour-state-00 highly-white" data-state-name="makehighlight" style="display: none;"><span class="highly-hint-tour-circle highly-grow"></span><div class="highly-white">1. Tap text to make a highlight</div><div class="highly-white">2. Tap off (or scroll) to keep it</div></div> <div class="highly-hint-tour-state highly-hint-tour-state-01 highly-white" data-state-name="onemore" style="display: none;"><span class="highly-hint-tour-circle"><i class="highly-eyecon highly-eyecon-check"></i></span><div class="highly-white">Nice highlight!</div><div class="highly-white">Make one more.</div></div> <div class="highly-hint-tour-state highly-hint-tour-state-03 highly-white" data-state-name="comein" style="display: none;"><span class="highly-hint-tour-circle"><i class="highly-eyecon highly-eyecon-check"></i></span><div class="highly-white">Bravo!</div><div class="highly-white">Come on in.</div></div> <div class="highly-hint-tour-state highly-hint-tour-state-04 highly-white" data-state-name="seecollection" style="display: none;"><span class="highly-hint-tour-circle"><i class="highly-eyecon highly-eyecon-check"></i></span><div class="highly-white">It's synced to your collection.</div><div class="highly-white">Tap here to see it.</div></div> </div> <div id="highly-hint-message-blocked" data-closable="false" data-name="blocked" style="display: none;" class="highly-hint-message"><i class="highly-eyecon highly-eyecon-block"></i> You've blocked highlights here.</div> </div> <div id="highly-highlights-exist" class="highly-highlights-exist" style="display:none"> <div id="highly-highlights-exist-nux" class="highly-highlights-exist-nux"> <img class="highly-highlights-exist-nux-img"><br> <span class="highly-red highly-highlights-here-feature-text"> <span class="highly-highlights-exist-nux-highly-title">HIGHLY</span> <br> <span class="highly-highlights-exist-nux-feature-text">Highlights Here</span> </span> <span class="highly-highlights-exist-nux-explanation"> <br><br> Start with the important parts, then dig in (or don't).<br> Top highlights now appear on stories.<br><br> </span> Click any highlight to see it in context.<br> <span class="highly-highlights-exist-learn">Learn more</span>, or turn this off in <span class="highly-highlights-exist-options">Options</span>.<br> <span class="highly-btn highly-btn-outline-red highly-highlights-exist-nux-ok-btn">OK</span> <div class="highly-pointer-bottom"></div> </div> <div id="highly-highlights-exist-holder" class="highly-highlights-exist-holder"> <div class="highly-highlights-exist-highlight-holder"> <span class="highly-highlights-exist-highlight"> <span class="highly-highlights-exist-highlight-text">This is a situation where we can really get ahead of the government in setting clear expectations for record retainment and disclosure.</span><span class="highly-highlights-exist-highlight-count">1!</span> </span> </div> <div class="highly-highlights-exist-open highly-highlights-exist-bar"> <div class="highly-highlights-exist-close-options"> <div class="highly-highlights-exist-close-option-block highly-highlights-exist-close-option"> <i class="highly-eyecon highly-eyecon-block"></i> Block Site </div> <div class="highly-highlights-exist-close-option-x highly-highlights-exist-close-option highly-red"> <div class="highly-close-holder"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></div> <span class="highly-opacity-50">ESC or Scroll to</span> Close </div> </div> <span class="highly-highlights-exist-close-hover highly-clickable"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></span> <div id="highly-highlights-exist-highlighters" class="highly-highlights-exist-highlighters">  <div class="highly-highlights-exist-more highly-highlights-exist-highlighters highly-hidden highly-tooltip highly-tooltip--n" data-highly-tooltip="All Highlighters">6</div> </div> <div class="highly-sparkline-holder"> <div id="highly-highlights-exist-sparkline" class="highly-sparkline highly-sparkline-heatmap"> <div class="highly-sparkline-readtime" data-toggle="tooltip" title="Full Article Reading Time">2m</div> <div class="highly-sparkline-progress" style="width: 0%"></div> </div> </div> <span class="highly-highlights-exist-message" style="display: none;">Highlights by <span class="highly-highlights-exist-count"></span></span> </div> </div> </div> <div id="highly-block-modal" class="highly-block-modal" style="display: none;"> <div id="highly-block-modal-holder" class="highly-block-modal-holder"> <div class="highly-block-modal-box"> <div class="highly-title"> <span class="highly-block-modal-close highly-clickable"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></span> <i class="highly-eyecon highly-eyecon-block highly-eyecon-30 highly-red"></i><br> <span class="highly-domain"></span> </div> <div class="highly-message highly-message-confirmation"> <div>Highlights won’t appear here,<br> and highlighting is disabled.</div> <div class="highly-btns"> <div class="highly-btn highly-btn-row highly-btn-row-undo">Undo</div> <div class="highly-btn highly-btn-row highly-btn-row-edit">Edit Blocked Sites …</div> <div class="highly-btn highly-btn-row highly-btn-row-report">Report …</div> </div> </div> <div class="highly-message highly-message-reported" style="display: none;"> <div>Thanks for reporting this site. We’ll look into it.</div> <div class="highly-btns highly-block-btns-reported"> <div class="highly-btn highly-btn-row highly-btn-row-signin">Sign In to Save Your Blocked Sites</div> <div class="highly-btn highly-btn-row highly-btn-row-reported-close">Close</div> </div> </div> </div> </div> </div> <div id="highly-settings" class="highly-settings" style="display:none"> <div id="highly-settings-modal" class="highly-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"> <i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i> </button> <div class="highly-modal-content-holder"> <div class="highly-modal-content"> <div class="highly-modal-title">Highly <span class="highly-text-thin highly-text-muted"><span id="highly-settings-product-name">Chrome</span></span> </div> <div class="highly-settings-logged-in" style="display: none;">  <span class="highly-link-to-profile highly-link-to-profile-img"> <span class="highly-profile-pic highly-link"><img class="highly-profile-pic-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></span> </span> <div id="highly-settings-logged-in-profile" class="highly-row"> <div class="highly-row highly-relative"> <span class="highly-link-to-profile-label">Profile</span> <span class="highly-signout highly-pull-right">Sign Out</span> <span class="highly-link-to-profile highly-link-to-profile-username highly-link">Eric</span> </div> <div class="highly-row"> <span class="highly-row-link"> <span id="highly-settings-user-highlight-count" class="highly-value">123</span> <span class="highly-label">Highlights</span> </span> </div> <div class="highly-row"> <span class="highly-row-link"> <span id="highly-settings-user-following-count" class="highly-value">123</span> <span class="highly-label">Following</span> </span> </div> <div class="highly-row"> <span class="highly-row-link"> <span id="highly-settings-user-followers-count" class="highly-value">123</span> <span class="highly-label">Followers</span> </span> </div> </div>  <div class="highly-row highly-row-setting"> <div class="highly-settings-setting-show-hints highly-pull-right"> <div class="highly-value-radio highly-selected" id="highly-show-hints-on">On</div> <div class="highly-value-radio" id="highly-show-hints-off">Off</div> </div> <span class="highly-label">Show Hint when Text is Selected</span> </div> <div class="highly-row highly-row-setting"> <div class="highly-settings-setting-show-highlighters-here highly-pull-right"> <div class="highly-value-radio highly-selected" id="highly-show-highlighters-here-on">On</div> <div class="highly-value-radio" id="highly-show-highlighters-here-off">Off</div> </div> <span class="highly-label">See Top Highlights as You Browse</span> </div> <div class="highly-row highly-row-setting"> <div class="highly-settings-setting-show-hints highly-pull-right"> <div class="highly-value-radio highly-selected" id="highly-keyboard-shortcuts-on">On</div> <div class="highly-value-radio" id="highly-keyboard-shortcuts-off">Off</div> </div> <span class="highly-label">Keyboard Shortcuts <span id="highly-settings-howto-button" class="highly-gray highly-clickable">How-To</span></span> </div> </div> <div class="highly-settings-footer" id="highly-settings-footer"> <div class="highly-row highly-row-no-border highly-row-muted"> <a href="mailto:heyo@highly.co" class="highly-pull-right highly-link">Ask Anything &amp; Send Feedback</a> <a href="https://www.highly.co/legal" target="_blank" class="highly-link">Privacy &amp; Terms</a> </div> <div class="highly-legal"> ©<span class="highly-current-year">2020</span> Highly Inc.<br> Version <span class="highly-current-version">3.18</span> </div> </div></div> </div> </div> </div> <div id="highly-share" class="highly-share" style="display:none"> <div id="highly-share-modal" class="highly-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close" data-target="highly-share-modal"> <i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i> </button> <div id="highly-share-unlisted-hint" class="highly-share-unlisted-hint" style="display:none;"><i class="highly-eyecon highly-eyecon-cc-unlisted"></i><span class="uppercase">Unlisted Highlights</span> Share with care.</div> <div id="highly-share-unlisted-hint" class="highly-share-unlisted-hint" style="display:none;"><i class="highly-eyecon highly-eyecon-cc-unlisted"></i><span class="uppercase">Unlisted Highlights</span> Share with care.</div> <div id="highly-share-private-hint" class="highly-share-private-hint" style="display:none;"><i class="highly-eyecon highly-eyecon-cc-private"></i><span class="uppercase">Secret Highlights</span> Only Teammates Can See</div> <div id="highly-share-tweet-private-hint" class="highly-share-private-hint" style="display:none;"><i class="highly-eyecon highly-eyecon-cc-private"></i><span class="uppercase">Secret Highlights</span> Can't Be Tweeted</div> <div class="highly-modal-content highly-modal-content-600"> <div class="highly-modal-content-holder"> <div id="highly-share-private" class="highly-share-private" style="display: none;"> <div class="highly-space-vertical highly-centered"> <h4 class="highly-red">Your highlights on<br> this story are Secret.</h4> <div class="highly-space-top-30 highly-white">Please make them visible before sharing.</div> <div id="highly-share-private-button" class="highly-space-top-30"><button type="button" class="highly-btn highly-btn-md highly-btn-outline">OK</button></div> </div> </div> <div id="highly-share-container" class="highly-share-container"> <div id="highly-share-guest" style="display: none;" class="highly-centered"> <div class="highly-tour-share-preview-overlay"> <div id="highly-share-guest-button" class="highly-btn highly-btn-red">Please Sign in to Share Highlights</div> </div> <img class="highly-tour-share-preview" src="https://docs.groovy-lang.org/docs/next/html/documentation/"> </div> <div id="highly-share-empty" style="display: none;" class="highly-centered"> <div class="highly-share-buttons highly-share-buttons-teaser highly-clearfix"> <div class="highly-btn highly-btn-slack"> <i class="highly-eyecon highly-eyecon-slack"></i> <span class="highly-label">Slack</span> </div> <div class="highly-btn highly-btn-twitter"> <i class="highly-eyecon highly-eyecon-twitter"></i> <span class="highly-label">Twitter</span> </div> <div class="highly-btn highly-btn-facebook"> <i class="highly-eyecon highly-eyecon-facebook"></i> <span class="highly-label">Facebook</span> </div> <div class="highly-btn highly-btn-email"> <i class="highly-eyecon highly-eyecon-envelope"></i> <span class="highly-label">Email</span> </div> <div class="highly-btn highly-btn-link"> <i class="highly-eyecon highly-eyecon-link"></i> <span class="highly-label">Link</span> </div> </div> <div class="highly-modal-message"> <div class="highly-allcaps highly-white">You need a highlight to share</div> <div id="noResultsSubLine" class="highly-modal-title-subline">Please go back and highlight something.</div> <div class="highly-space-top-15"> <div id="highly-no-results-ok-button" class="highly-btn highly-btn-red highly-btn-md">Ok</div> </div> </div> </div> <div class="highly-share-topper"> <div id="highly-share-preview-text" class="highly-share-preview-text">Preview Text Goes Here</div> <div id="highly-share-preview-highlighter" class="highly-share-preview-highlighter highly-allcaps"> <span id="highly-share-preview-highlighter-username">Guest</span>'s <span id="highly-share-preview-highlighter-count">7 highlights</span> </div> </div> <div class="highly-share-bottom"> <div id="highly-share-buttons" class="highly-share-buttons highly-clearfix"> <span id="highly-share-highly" title="Highly" class="highly-btn highly-btn-highly"> <i class="highly-eyecon highly-eyecon-highly-logo-share highly-selected"></i> <span class="highly-label">Highly</span> </span> <span id="highly-share-slack" title="Slack" class="highly-btn highly-btn-slack"> <i class="highly-eyecon highly-eyecon-slack"></i> <span class="highly-label">Slack</span> </span> <span id="highly-share-twitter" title="Tweet" class="highly-btn highly-btn-twitter"> <i class="highly-eyecon highly-eyecon-twitter"></i> <span class="highly-label">Twitter</span> </span> <span id="highly-share-facebook" title="Post" class="highly-btn highly-btn-facebook"> <i class="highly-eyecon highly-eyecon-facebook"></i> <span class="highly-label">Facebook</span> </span> <span id="highly-share-email" title="Email" class="highly-btn highly-btn-email"> <i class="highly-eyecon highly-eyecon-envelope"></i> <span class="highly-label">Email</span> </span> <span id="highly-share-link" class="highly-btn highly-btn-link"> <i class="highly-eyecon highly-eyecon-link"></i> <span class="highly-label">Link</span> </span> </div> </div> <div id="highly-share-type" class="highly-share-type-radios highly-btn-group"> <label id="highly-share-one" class="highly-btn-radio-group" highly-data-type="highlight"> <input class="highly-btn" type="radio" name="highly-slack-share-type" id="highly-share-type-highlight" autocomplete="off" checked=""> <span id="highly-share-type-highlight-label">Share 1</span> </label> <label id="highly-share-all" class="highly-btn-radio-group highly-active" highly-data-type="article"> <input "highly-btn"="" type="radio" name="highly-slack-share-type" highly-data-type="article" id="highly-share-type-article" autocomplete="off"> <span id="highly-share-type-article-label">All 3</span> </label> </div> <div id="highly-share-email-container" class="highly-share-email highly-hide"> <div id="highly-email-input-error" class="highly-hide">Correct those emails, please.</div> <div id="highly-share-email-input-holder"> <div class="highly-to-label">To:</div> <input id="highly-share-email-input" multiple="" pattern="^([\w+-.%]+@[\w-.]+\.[A-Za-z]{2,4},*[\W]*)+$" name="shareFriendPicker" type="email" placeholder="Emails" tabindex="4"> <button type="button" class="highly-btn highly-btn-default" id="highly-share-email-submit" tabindex="6">Send ↵</button> </div> <div class="highly-note-field-holder"> <textarea id="highly-share-email-note-field" class="highly-note-field" placeholder="Add a Note ..." tabindex="5"></textarea> <span id="highly-share-note-email-ch-count" class="highly-note-ch-count highly-note-under-250-ch"></span> </div> </div> <div class="highly-copy-link highly-hide highly-clearfix" id="highly-copy-link-container"> <div class="highly-inner"> <input class="highly-form-control" type="text" id="highly-copylink-input" name="highly-copylink-input" readonly="readonly" value="" title="" disabled=""> <span class="highly-pull-right"> <span id="highly-copylink-secret-message" class="highly-red" style="display:none;">This Link Only Works for Teammates</span> </span> <span class="highly-meta">⌘C to Copy</span> </div> </div> <div id="highly-share-slack-container" class="highly-share-slack"> <div class="highly-to-label">To:</div> <div class="highly-share-slack-input-holder">   <input id="highly-share-slack-input" name="highly-share-slack-channel-picker" type="text" placeholder="Channel or Direct Message" tabindex="1"> <select class="highly-share-teams-dropdown"> </select> </div> <button type="button" class="highly-btn highly-btn-default highly-btn-share-slack" id="highly-share-slack-submit">Send ↵<span id="highly-share-slack-count" style="display: none;" tabindex="3"></span> </button> <div class="highly-note-field-holder"> <textarea id="highly-share-slack-note-field" class="highly-note-field" rows="1" placeholder="Add a Note …" tabindex="2"></textarea> <span id="highly-share-note-slack-ch-count" class="highly-note-under-250-ch highly-note-ch-count"></span> </div> <div id="highly-share-slack-loading-friend-list" class="highly-space-vertical" style="display: none;"> <div class="highly-throbber"></div> </div> <div class="highly-please-select-team-error highly-white highly-hide"><button class="highly-btn highly-btn-red highly-centered highly-btn-select-team">Choose Teams</button><span class="highly-please-select-team-message">Please select a team before sharing Secret highlights.</span></div> <div class="highly-please-select-team-other-highlighter-error highly-hide"><span class="highly-please-select-team-message">The selected team can’t see these Secret highlights.</span></div>  <div class="highly-share-slack-channel-list">   </div> <div class="highly-slack-connect-error highly-space-top-30 highly-hide"> <div>Slack communication error.</div> <div class="highly-btn highly-btn-slack highly-slack-connect-button"><i class="highly-eyecon highly-eyecon-slack highly-white"></i> Please Re-Connect Slack</div> </div> <div class="highly-slack-connect-preview highly-space-top-30 highly-hide"> <div class="highly-btn highly-btn-slack highly-slack-connect-button"><i class="highly-eyecon highly-eyecon-slack highly-white"></i> Add or Join a Team</div> <div id="highly-slack-about-button" class="highly-btn highly-btn-outline">About Highly for Teams</div> <div class="highly-slack-connect-sample-media-container highly-pointer-top highly-pointer-top-white"> <img id="highly-slack-connect-sample-media" src="./Groovy Language Documentation_files/sample-slack.png" alt=""> </div> </div> </div> <div id="highly-share-native" class="highly-share-native"> <div class="highly-to-label">To:</div> <div class="highly-share-native-input-holder">   <input id="highly-share-native-input" name="shareFriendPicker" type="text" placeholder="Name" tabindex="1" disabled=""> </div> <button type="button" class="highly-btn highly-btn-default" id="highly-share-native-submit">Send ↵<span id="highly-share-native-count" style="display: none;" tabindex="3"></span> </button> <div class="highly-note-field-holder"> <textarea id="highly-share-native-note-field" class="highly-note-field" rows="1" placeholder="Add a Note …" tabindex="2"></textarea> <span id="highly-share-note-native-ch-count" class="highly-note-under-250-ch highly-note-ch-count"></span> </div> <div id="highly-share-loading-friend-list" class="highly-space-vertical" style="display: none;"> <div class="highly-throbber"></div> </div> <div id="highly-share-empty-friend-list" class="highly-clickable highly-space-vertical highly-line-30 highly-text-muted" style="display: none;"> <div class="highly-eyecon-circle highly-eyecon-circle-green highly-eyecon-circle-sm highly-pull-left highly-space-right-8"> <i class="highly-eyecon highly-eyecon-plane"></i> </div> <span class="highly-green">Switch to email?</span> You don't follow anyone by that name. </div> <div class="highly-share-friend-list">   </div> </div> <div class="highly-share-pending highly-centered"> <div class="highly-space-vertical"> <div class="highly-throbber"></div> </div> Saving Your Highlight </div> </div> </div> </div> </div> </div>   <div id="highly-success" class="highly-success" style="display:none"> <div id="highly-success-modal" class="highly-modal highly-modal-white"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-650 highly-modal-content-centered"> <div class="highly-success-logo-holder"> <div class="highly-logo-box"> <i class="highly-eyecon highly-eyecon-marker-tall-tip"></i> </div> <i class="highly-eyecon highly-eyecon-logo-letters"></i> <div class="highly-logo-tagline">Highlight to share.</div> </div> <div class="highly-text"> Welcome! You can now save and share highlights, right as you read.<br> Visit Highly to unlock more social and productivity tools. </div> <div class="highly-success-features highly-space-vertical"> <div class="highly-grid"> <div class="highly-col-1-3 highly-text"> <i class="highly-eyecon highly-eyecon-smile-clear"></i> Follow Friends’ Highlights </div> <div class="highly-col-1-3 highly-text"> <i class="highly-eyecon highly-eyecon-popular"></i> Stay on Top of Popular Stories </div> <div class="highly-col-1-3 highly-text"> <i class="highly-eyecon highly-eyecon-search-thick"></i> Reference Saved Highlights </div> </div> </div> <div class="highly-space-vertical"> <div id="highly-success-visit-feed-button" class="highly-btn highly-btn-outline highly-take-tour">Visit Highly Now</div> <div id="highly-success-continue-highlighting-button" class="highly-link highly-space-vertical">or Continue Highlighting</div> </div> </div> </div> </div> </div> <div id="highly-summary" class="highly-summary" style="display:none"> <div id="highly-summary-modal" class="highly-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close" data-target="highly-share-modal"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-750"> <div class="highly-highlights-author"> <div class="highly-article-summary-current-highlighter-info"> <div class="highly-profile-pic"> <img id="highly-summary-highlighter-img" class="highly-profile-pic-img" src="chrome-extension://hjpahjhcglfdopbholajmhpamgblhjhg/images/default-smile.png" alt=""> </div> <a data-toggle="tooltip" href="https://www.highly.co/user/Guest" title="" target="_blank" id="highly-summary-highlighter-username">Guest's</a> <span class="highlight-author-total-highlights count" id="highly-highlights-count">[ Highlights Count ] highlights</span> </div> </div> <div class="highly-modal-title">Groovy Language Documentation</div> <a href="https://docs.groovy-lang.org/docs/next/html/documentation/#" target="_blank" id="highly-article-url" class="highly-article-summary-details" style="display: block;"> <span class="highly-author highly-inline"></span><span class="highly-author-comma highly-inline" style="opacity: 0;">,</span> <span id="highly-article-publisher" class="highly-inline"></span><span class="highly-publisher-comma highly-inline" style="opacity: 0;">,</span> <span data-toggle="tooltip" class="highly-article-summary-date highly-inline"></span> </a> <div class="highly-highlights-list" id="highly-highlights-list">  </div>  <div id="highly-highlights-list-missing" class="highly-highlights-list highly-highlights-list-missing" style="display: block;">  </div> <div id="highly-highlights-list-empty" style="display: none;"> <div class="highly-image"><img alt="" id="highly-highlights-list-empty-image"></div> <div class="highly-space-vertical"> <div class="highly-btn highly-btn-default">Make a Highlight</div> </div> <div id="noResultsSubLine" class="metacolor vspace">No highlights yet.</div> </div> </div> </div> </div> </div> <div id="highly-tweet" class="highly-tweet" style="display:none"> <div id="highly-tweet-modal" class="highly-modal"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close" data-target="highly-tweet-modal"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-600"> <div id="highly-tweet-loading" class="highly-tweet-topper" style="display: none;"> <i class="highly-eyecon highly-eyecon-twitter highly-color-twitter highly-eyecon-2x"></i><br> Building Tweet <div class="highly-space-vertical"> <div class="highly-throbber highly-throbber-medium"></div> </div> </div> <div id="highly-tweet-error" class="highly-tweet-topper highly-clearfix" style="display: none;"> <div class="highly-space-vertical"><i class="highly-eyecon highly-eyecon-wrench highly-eyecon-2x highly-red"></i></div> <div class="highly-header">Permission Problem</div> <div>Try re-authorizing our app.</div> <div class="highly-space-vertical"> <div id="highly-tweet-connect-error-btn" class="highly-btn highly-btn-twitter"><i class="highly-eyecon highly-eyecon-twitter highly-eyecon-fw highly-white"></i> Connect </div> </div> </div> <div id="highly-tweet-error-rate-limit" class="highly-tweet-topper highly-clearfix" style="display: none;"> <div class="highly-space-vertical"><i class="highly-eyecon highly-eyecon-wrench highly-eyecon-2x highly-red"></i></div> <div class="highly-header">Twitter Problem</div> <div>Unable to send tweet at the moment</div> <div class="highly-space-vertical"> <div id="highly-tweet-connect-error-rate-limit-btn" class="highly-btn highly-btn-twitter"><i class="highly-eyecon highly-eyecon-twitter highly-eyecon-fw highly-white"></i> Try Again </div> </div> </div> <div id="highly-tweet-connect" class="highly-tweet-topper highly-clearfix" style="display: none;"> <div class="highly-header highly-space-bottom">Tweet readable, beautiful, fav-able highlights.</div> <div class="highly-tweet-connect-preview highly-pointer-bottom highly-pointer-bottom-white"> <img id="highly-tweet-connect-sample-media" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""> </div> <div class="highly-space-vertical"> <div id="highly-tweet-connect-btn" class="highly-btn highly-btn-twitter"><i class="highly-eyecon highly-eyecon-twitter highly-eyecon-fw highly-white"></i> Connect </div> </div> <div>Highly never posts without permission.</div> </div> <div class="highly-tweet-composer" style="display: none;"> <div class="highly-tweet-form-holder"> <div class="highly-tweet-header highly-clearfix"> <div id="highly-twitter-avatar" data-href="https://twitter.com/wuebben" title="@wuebben – Eric Wuebben" class="highly-pull-left highly-link"><img id="highly-twitter-avatar-img" src="https://docs.groovy-lang.org/docs/next/html/documentation/" alt=""></div> <i class="highly-eyecon highly-eyecon-twitter"></i> </div> <form accept-charset="UTF-8" action="https://docs.groovy-lang.org/twitter" data-remote="true" id="highly-tweet-form" method="post"> <div class="highly-tweet-preview"> <div class="highly-tweet-message-holder"> <textarea class="highly-form-control" id="highly-tweet-message" placeholder="Message" rows="3" style="height: 60px; overflow-y: hidden;">My highlight (7m story).</textarea> <div class="highly-textarea-options"> <button type="button" id="highly-tweet-include-image-button" class="highly-btn highly-btn-sm highly-btn-clear highly-tooltip highly-tooltip--n" data-highly-tooltip="Include Image"><i class="highly-eyecon highly-eyecon-plus"></i><i class="highly-eyecon highly-eyecon-highlight-image"></i></button> <button type="button" id="highly-tweet-insert-quote" class="highly-btn highly-btn-sm highly-btn-default highly-tooltip highly-tooltip--n" data-highly-tooltip="Insert Highlight Text" data-text="More important than simply hours worked though, I perceived a zeal in my colleagues that translated into an overwhelming commitment in each of them to do whatever they could to incrementally drive our company closer to success." title="" data-toggle="tooltip" data-placement="top" data-original-title="Insert Highlight Text"><i class="highly-eyecon highly-eyecon-quote"></i></button> </div> </div> <div class="highly-tweet-link-holder"> <a id="highly-tweet-share-url" href="https://docs.groovy-lang.org/docs/next/html/documentation/#" target="_blank">www.highly.c...</a> </div> <div class="highly-tweet-image-holder"> <img id="highly-tweet-preview-image" src="https://docs.groovy-lang.org/docs/next/html/documentation/" class="highly-share-image" alt="Image preview unavailable. It’ll work when you Tweet."> <div id="highly-tweet-fetching" class="highly-tweet-fetching" style="display: none;"> <div class="highly-space-vertical"> <div class="highly-throbber highly-throbber-medium"></div> </div> Making Highlight Image <small id="highly-tweet-fetching-status"></small> </div> </div> <div id="highly-tweet-noimage" class="highly-tweet-noimage" style="display: none;"> Error fetching highlight image. <div class="highly-space-vertical"> <button type="button" id="highly-tweet-image-retry" class="highly-btn highly-btn-dark">Try Again</button> </div> </div> </div> <div class="highly-tweet-footer highly-clearfix"> <div id="highly-tweet-status-message" class="highly-pull-left highly-tweet-status-message highly-red"></div> <div id="highly-tweet-status-loading" class="highly-pull-right" style="display: none;"> <div id="highly-tweet-status-icon" class="highly-tweet-status-icon" style="display: none;"><i class="highly-eyecon highly-eyecon-check"></i></div> <div class="highly-throbber highly-throbber-blue"></div> </div> <div id="highly-tweet-status-submit" class="highly-pull-right"> <input class="highly-btn highly-btn-twitter highly-pull-right" id="highly-tweet-submit" name="commit" type="button" value="Tweet" disabled=""> <span class="highly-tweet-character-count pull-right" id="highly-tweet-char-count">140</span> </div> </div> </form> </div> </div> </div> </div> </div> </div> <div id="highly-undo" class="highly-undo" style="display:none"> <div class="highly-btn highly-btn-outline highly-undo-action">Undo <i class="highly-eyecon highly-eyecon-undo"></i></div> </div> <div id="highly-navbar" class="highly-navbar" style="display:none"> <div id="highly-jump" class="highly-jump"> <div id="highly-jump-button" class="highly-btn highly-btn-tooltip highly-btn-red"> <i class="highly-eyecon highly-eyecon-arrow highly-eyecon-rotate-270"></i> <span class="highly-underline" title="Keyboard shortcut to jump highlights.">J</span>ump </div> </div> <div id="highly-crowd-control-nux" class="highly-crowd-control-nux"> <div class="highly-cc-ropes-img"></div><br> <span class="highly-red highly-crowd-control-feature-text"> <span class="highly-crowd-control-nux-highly-title">HIGHLY</span> <br> <span class="highly-crowd-control-nux-feature-text">Crowd Control</span> </span> <span class="highly-crowd-control-nux-explanation"> <br><br> Some highlights aren’t for everyone.<br> Choose Public, Secret or Unlisted.<br> <span class="highly-btn highly-btn-outline-red highly-crowd-control-nux-ok-btn">OK</span> <div class="highly-pointer-bottom"></div> </span></div> <div id="highly-navbar-privacy" class="highly-dropup highly-dropup-privacy highly-dropup-linklist"> <div id="highly-navbar-privacy-enabled-notification" class="highly-centered"> <img class="highly-small-rope" src="./Groovy Language Documentation_files/small-rope.png"> <div class="highly-label highly-white">Crowd Control is Enabled</div> </div> <div class="highly-upgrade-box-blackout"></div> <div class="highly-upgrade-box highly-centered"> <div class="highly-privacy-topper"> <div class="highly-cc-ropes-img"></div> <div class="highly-white highly-space-bottom highly-allcaps">crowd control</div> <div class="highly-subline"> Some highlights aren’t for everyone.<br>Get options with Crowd Control. </div> </div> <div id="highly-privacy-term-options" class="highly-btn-group-term" data-toggle="buttons"> <label id="highly-monthly-item" class="highly-plan-item highly-btn highly-btn-md"> <input type="radio" name="plan" id="highly-monthly" value="monthly" autocomplete="off"> <span id="highly-monthly-price">$2 Monthly</span> </label> <label id="highly-yearly-item" class="highly-plan-item highly-btn highly-btn-md highly-active"> <input type="radio" name="plan" id="highly-yearly" value="yearly" autocomplete="off" checked=""> <span id="highly-yearly-price">$20 Yearly</span> </label> <button id="highly-stripe-checkout-button" class="highly-submit highly-btn highly-btn-md highly-black">Checkout</button> <div class="highly-also-available-teams highly-subline highly-space-top-15">Also Available for Teams</div> </div> </div> <div id="highly-navbar-privacy-get-item" class="highly-navbar-privacy-get-item highly-centered"> <div id="highly-navbar-privacy-touch-msg" class="highly-show-on-touch"> <button type="button" id="highly-navbar-privacy-touch-close" class="highly-modal-close"> <i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i> </button> <div class="highly-text-12 highly-allcaps">Crowd Control</div> </div> <div class="highly-privacy-is-subscribed-header highly-line-50"> <span class="highly-allcaps highly-text-12">Crowd Control</span> <div class="highly-help-cc"><span class="highly-question-mark">?</span></div><br> </div> <div id="highly-navbar-privacy-get-button" class="highly-btn highly-btn-md highly-btn-outline">Get</div> </div> <div class="highly-privacy-description highly-space-vertical highly-hide"> <span class="highly-white">Visible to All</span> </div> <div class="highly-privacy-option-holder"> <div class="highly-privacy-option highly-navbar-privacy-public highly-clickable highly-selected" data-privacy="public"> <span class="highly-name">Public</span> </div> <div class="highly-privacy-option highly-navbar-privacy-unlisted highly-clickable" data-privacy="unlisted"> <span class="highly-name">Unlisted</span> </div> <div class="highly-privacy-option highly-navbar-privacy-private highly-clickable" data-privacy="private"> <span class="highly-name">Secret</span> </div> </div> <div class="highly-teams-option-container"> <div class="highly-teams-option-holder">  </div> <div class="highly-teams-option highly-add-team highly-teams-option-muted highly-centered"> Add a Team </div> </div> </div> <div id="highly-navbar-more" class="highly-dropup highly-dropup-right highly-dropup-linklist"> <span id="highly-navbar-login-button" class="highly-item highly-link" style="display: block;"><span class="highly-clue" title="Shortcut">H</span>Login</span> <span id="highly-navbar-feed-button" class="highly-item highly-link">My Highlights</span> <span id="highly-navbar-settings-button" class="highly-item highly-link" style="display: none;"><span class="highly-clue" title="Shortcut">H</span>Options …</span> <span id="highly-navbar-block-button" class="highly-item highly-link">Block Site …</span> <span id="highly-navbar-help-button" class="highly-item highly-link"><span class="highly-clue" title="Shortcut">?</span>How-To</span> <span id="highly-navbar-hide-button" class="highly-item highly-link"><span class="highly-clue" title="Shortcut">!</span>Hide</span> </div> <div id="highly-navbar-oh" class="highly-dropup highly-dropup-users"> <div id="highly-navbar-oh-more" class="highly-item highly-item-more highly-link highly-clearfix" style="display: none;"> <div class="highly-more-highlights-count">0</div> <div class="highly-more-highlighters-count">0</div> <div class="highly-item-user-message">View all highlighters of this story.</div> </div>    <div id="highly-navbar-oh-empty" class="highly-item highly-item-user highly-link highly-clearfix" style="display: block;"> <div class="highly-item-system-message">You're the first to highlight this – nice!</div> </div>  <div id="highly-navbar-oh-current-user-empty" class="highly-item highly-item-user highly-link highly-clearfix" style="display: none;"> <div class="highly-profile-pic"> <i class="highly-eyecon highly-eyecon-smile-clear"></i> </div> <div class="highly-item-user-message">Select text to add highlights of your own.</div> </div> </div> <div id="highly-navbar-oh-button" class="highly-navbar-button highly-navbar-button-head highly-pull-left"> <div class="highly-inner">  </div> <div id="highly-current-highlighter-username" class="highly-navbar-button-head-username">Guest</div> <div id="highly-navbar-missing-highlights-count" class="highly-badge" style="opacity: 0;">0</div> <div id="highly-navbar-highlights-count" class="highly-badge highly-badge-right highly-badge-red" style="opacity: 0;">0</div> </div> <div id="highly-secondary-highlighter-button" class="highly-navbar-button highly-navbar-button-head highly-hide"> <div class="highly-inner">  </div> </div> <div id="highly-navbar-more-button" class="highly-navbar-button highly-pull-right"><div class="highly-inner"><i class="highly-eyecon highly-eyecon-ellipses highly-eyecon-rotate-90"></i></div></div> <div id="highly-navbar-summary-button" class="highly-navbar-button highly-pull-right highly-tooltip highly-tooltip--n" data-highly-tooltip="Summary"><div class="highly-inner"><i class="highly-eyecon highly-eyecon-target"></i></div></div> <div id="highly-navbar-share-button" class="highly-navbar-button highly-pull-right highly-tooltip highly-tooltip--n" data-highly-tooltip="Share"><div class="highly-inner"><i class="highly-eyecon highly-eyecon-share-round"></i></div></div> <div id="highly-navbar-privacy-button" class="highly-navbar-button highly-pull-right"> <span id="highly-navbar-privacy-button-label" class="highly-label">Public</span> <span id="highly-navbar-privacy-button-state" class="highly-loading">Saving</span> </div> <div id="highly-navbar-tiny-logo" class="highly-navbar-tiny-logo">Highly</div> <div id="highly-navbar-more-highlighters" class="highly-navbar-button highly-pull-right"> <div id="highly-navbar-more-highlighters-count" class="highly-navbar-more-highlighters">-1</div> </div> <div id="highly-navbar-highlight-button" class="highly-navbar-highlight-button">Highlight</div> <div id="highly-navbar-sparkline-cover" class="highly-navbar-sparkline-cover"></div> <div id="highly-dot" class="highly-dot"></div> <div id="highly-clipboard-container"><pre id="highly-clipboard" style="white-space:pre;"></pre></div> <div id="highly-navbar-sparkline" class="highly-sparkline-holder"> <div class="highly-sparkline-pinned highly-hidden"></div> <div id="highly-sparkline" class="highly-sparkline">  <div class="highly-sparkline-readtime" data-toggle="tooltip" title="Full Article Reading Time"></div> <div class="highly-sparkline-progress" style="width: 0%"></div> </div> </div></div> <div id="highly-session" class="highly-session" style="display:none"> <div id="highly-login-modal" class="highly-modal highly-modal-white"> <div id="highly-login-modal-backdrop" class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-loading-holder"> <div class="highly-throbber highly-throbber-blue"></div> </div> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-300 highly-modal-content-centered"> <div data-error-code="401" class="highly-error-401"> <div class="highly-modal-title highly-modal-title-small">Error: you've been signed out.</div> <div class="highly-modal-message"> <div class="highly-space-bottom">Sorry about that.</div> <button id="highly-login-btn" class="highly-btn highly-btn-outline" name="button" type="button">Please Sign In Again</button> </div> </div> <div data-error-code="500" class="highly-error-500" style="display: none;"> <div class="highly-modal-title highly-modal-title-small">Highly is having trouble saving highlights right now.</div> <div class="highly-modal-message"> <div class="highly-space-bottom">500: Internal Server Error</div> <button id="highly-error-500-refresh-btn" class="highly-btn highly-btn-outline" name="button" type="button">Reload Page &amp; Sign In Again</button> </div> </div> <div data-error-code="505" class="highly-error-505" style="display: none;"> <div class="highly-modal-title highly-modal-title-small">A New Version of Highly is Ready</div> <div class="highly-modal-message-no-space" id="highly-error-505-chrome-message"> <div class="highly-black highly-line-height">Sorry, this version isn't supported anymore. Highly will auto-update within the next few hours.</div> <div class="highly-text-muted highly-space-top-15 highly-line-height">You can update manually, too.<br> Window → Extensions → Check “Developer Mode” → Click “Update extensions now”</div> </div> <div class="highly-modal-message-no-space" id="highly-error-505-safari-message"> <br> <button id="highly-safari-upgrade-link" class="highly-btn highly-btn-red">Update to Continue</button> </div> </div> <div class="highly-space-top-15"> <span class="highly-text-muted">After updating, refresh this page to start highlighting.</span><br> </div> <div class="highly-space-top-60"> <span class="highly-text-muted">This update is required.</span><br> Questions? <a class="highly-red-link" href="mailto:heyo@highly.co?Subject=Highly%20Safari">Email</a> or <a class="highly-red-link" href="http://twitter.com/highlytm" target="_blank">Tweet</a> us. </div> </div> </div> </div> </div> <div id="highly-tour" class="highly-tour" style="display:none"> <div id="highly-tour-modal" class="highly-modal highly-modal-white highly-modal-tour"> <div class="highly-modal-backdrop"></div> <div id="highly-tour-logo" class="highly-full-logo highly-full-logo-black highly-full-logo-upper-left"> <div class="highly-full-logo-link"> <span class="highly-full-logo-block"><i class="highly-eyecon highly-eyecon-highlighter-tiny"></i></span> <span class="highly-full-logo-text"><i class="highly-eyecon highly-eyecon-logo-letters"></i></span> </div> </div> <button type="button" class="highly-modal-close" style="display:none;"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-tour-browser-button-key"> <div class="highly-tour-browser-button-off">Or click the Highly Button ↑</div> <div class="highly-tour-browser-button-on">Highly is <span class="highly-red">ON</span>.</div> </div> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-650"> <div id="highly-tour-1" class="highly-tour-stop highly-tour-stop-congrats highly-centered"> <div class="highly-title"> You've got a crisp new highlighter.<br> Let's go use it. </div> <div class="highly-space-vertical"> <div id="highly-tour-btn-start" class="highly-btn highly-btn-outline">Go!</div> </div> </div> <div id="highly-tour-2" class="highly-tour-stop highly-tour-stop-slideshow highly-centered" style="display: none;"> <div class="highly-tour-hint-text"> <span class="highly-tip-title">Tip</span> <span class="highly-tip-message">Type ! to continue.</span> </div> <div class="highly-title"> <div class="highly-inner"> <div id="highly-tour-line-1" class="highly-line-item">When you're reading,</div> <div id="highly-tour-line-2" class="highly-line-item">and you get that “yes, this!” feeling,</div> <div id="highly-tour-line-3" class="highly-line-item">press the highlighter key on your keyboard.</div> </div> </div> <div class="highly-tour-icon-holder"> <i id="highly-tour-icon-idea" class="highly-eyecon highly-eyecon-highlighter"></i> <img id="highly-tour-face-icon" src="https://docs.groovy-lang.org/docs/next/html/documentation/"> <div class="highly-tour-key-img"> </div> <div class="highly-title highly-tour-highlighter-activated-hint"> <img class="highly-tour-img-drag" src="https://docs.groovy-lang.org/docs/next/html/documentation/"> Boom!<br> You're holding your highlighter. <div class="highly-space-vertical"> <div class="highly-throbber"></div> </div> </div> </div> </div> <div id="highly-tour-3" class="highly-tour-stop highly-tour-stop-make highly-centered" style="display: none;"> <div class="highly-tour-hint-text highly-open"> <span class="highly-tip-title">Next</span> <span class="highly-tip-message">Make 2 highlights below. Any place, any length.</span> </div> <div class="highly-tour-make-share-holder" style="display: none;"> <div class="highly-space-vertical"> <div class="highly-btn highly-btn-green highly-btn-round" id="highly-tour-share-preview-button"><i class="highly-eyecon highly-eyecon-share"></i></div> </div> <div class="highly-green">Shares that'll<br> be read, anywhere.</div> <div class="highly-social-samples"> <i class="highly-eyecon highly-eyecon-facebook"></i> <i class="highly-eyecon highly-eyecon-twitter"></i> <i class="highly-eyecon highly-eyecon-slack"></i> <i class="highly-eyecon highly-eyecon-messenger"></i> </div> </div> <div class="highly-tour-make-content-holder"> <h1>Highlight This</h1> <p>Highlighting the internet is as easy as it sounds. Start by highlighting some words right here, on this page.</p> <p>Highlight anything that makes your eyes light up. Highlight to summarize a long-read for friends, share “the money quote” with the world, or amass ideas that move you. Reading alone is ok, but reading together is wonderful. Follow friends on Highly to see for yourself.</p> <p>You're a highlighter, now. You wield a magical marker. Ready to strike out into the wild?</p> </div> <div class="highly-space-top-30"> <div id="highly-tour-btn-ready" class="highly-btn highly-btn-red highly-btn-disabled">I'm Ready</div> </div> </div> <div id="highly-tour-4" class="highly-tour-stop highly-tour-stop-done highly-centered" style="display: none;"> <div class="highly-eyecon-circle highly-eyecon-circle-green"> <i class="highly-eyecon highly-eyecon-check"></i> </div> <div class="highly-title">Ready!<br> Go forth, highlighter in hand.</div> <div class="highly-btn-holder"> <div id="highly-tour-btn-sample-story" class="highly-btn highly-btn-outline">Here's a good story to start with.</div> </div> </div> </div> </div> </div> <div id="highly-tour-share-modal" class="highly-modal highly-modal-tour-share"> <div class="highly-modal-backdrop"></div> <button type="button" class="highly-modal-close"><i class="highly-eyecon highly-eyecon-plus-lg highly-eyecon-rotate-45"></i></button> <div class="highly-modal-content-holder"> <div class="highly-modal-content highly-modal-content-500"> <div class="highly-tour-share-preview-overlay"> <div id="highly-tour-share-continue-button" class="highly-btn highly-btn-red">Continue Tour</div> </div> <img class="highly-tour-share-preview" src="https://docs.groovy-lang.org/docs/next/html/documentation/">  </div> </div> </div> <div class="highly-tour-url-bar-hint"> <div class="highly-pull-right"> You can highlight anything you can read. <a href="http://www.nytimes.com/most-popular"><i class="highly-eyecon highly-eyecon-logo-times"></i></a> <a href="https://medium.com/top-stories"><i class="highly-eyecon highly-eyecon-logo-medium"></i></a> <a href="http://espn.go.com/sports/mostsent"><i class="highly-eyecon highly-eyecon-logo-espn"></i></a> <a href="http://techcrunch.com/"><i class="highly-eyecon highly-eyecon-logo-tc"></i></a> </div> Use the address bar to go find a story. ↑ </div> </div> </div><div class="mallbery-caa" style="z-index: 2147483647 !important; text-transform: none !important; position: fixed;"></div></body></html>